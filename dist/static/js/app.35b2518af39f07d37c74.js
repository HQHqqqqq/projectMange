webpackJsonp([9],{"+ONG":function(e,t){},"+WID":function(e,t,a){"use strict";var o=a("P9l9"),n={name:"ResidueOutput",props:["widget","models","rules","remote","datas"],data:function(){return{firstSelectvalue:"",SecondSelectvalue:"",total:0,pageNum:1,pageSize:20,isPname:!0,monthly:"",btnMaxWidth:160,projectStatusConfig:{0:"已登记",1:"运行中",2:"暂停",3:"完成",4:"关闭",5:"异常关闭"},associatedStatesConfig:{0:"已关联未分配",1:"已关联已分配",2:"未关联",3:"合同终止时间已到",4:"无需关联"},options:[{value:"IB",label:"实施B级单位"},{value:"IC",label:"实施C级单位"},{value:"SB",label:"销售B级单位"},{value:"SC",label:"销售C级单位"}],optionsList:[],tableData:[],currentPage3:5,currentPage:1,projectName:"",searchMonth:"",minMonthly:"",maxMonthly:"",year:"",month:"",level:"",levelValue:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]}}},watch:{datas:{deep:!0,handler:function(e){this.datas,this.datas.options.url_a}}},computed:{asideHeight:function(){return document.documentElement.clientHeight-205}},methods:{pickDateChange:function(e){this.minMonthly=e[0],this.maxMonthly=e[1]},changeDep:function(e){this.levelValue=e},changeSearch:function(e){var t=this;this.optionsList=[],this.SecondSelectvalue="",this.level=e,Object(o.X)("/sgpm/rest/api/server/project/output/dept?deptType="+e,null).then(function(e){if(200==e.status){var a=e.data.data;t.optionsList=a}}).catch(function(e){})},search:function(){var e={keywords:this.projectName,minMonthly:this.minMonthly,maxMonthly:this.maxMonthly,pageNum:1,pageSize:10};""!=this.level&&(e[this.level]=this.levelValue),this.getResidueOutputList(e)},headerDragend:function(e,t,a,o){this.btnMaxWidth=e,e>200?this.isPname=!1:(this.isPname=!0,this.btnMaxWidth=200)},getResidueOutputList:function(e){var t=this;Object(o.U)("/sgpm/rest/api/server/project/under/way/output",e).then(function(e){if(200==e.status){var a=e.data.data;a.forEach(function(e,t){if(e.contractNumbers.indexOf(";")>-1)e.contractNumbers=e.contractNumbers.split(";");else if(-1==e.contractNumbers.indexOf(";")&&""!=e.contractNumbers){var a=[];a.push(e.contractNumbers),e.contractNumbers=a}else e.contractNumbers=[]}),t.tableData=a;var o=e.data.meta;t.total=o.totalCount}}).catch(function(e){})},refresh:function(){this.searchMonth="",this.firstSelectvalue="",this.minMonthly="",this.maxMonthly="",this.SecondSelectvalue="",this.levelValue="",this.level="",this.projectName="";this.getResidueOutputList({minMonthly:"",maxMonthly:"",keywords:"",pageNum:1,pageSize:10})},handleSizeChange:function(e){},handleCurrentChange:function(e){({keywords:this.projectName,minMonthly:this.minMonthly,maxMonthly:this.maxMonthly,pageNum:e,pageSize:10})[this.level]=this.levelValue,this.getResidueOutputList(params)}},mounted:function(){var e={keywords:this.projectName,minMonthly:"",maxMonthly:"",pageNum:1,pageSize:10};this.getResidueOutputList(e)},created:function(){}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mounth-output"},[a("el-row",{staticClass:"search",attrs:{gutter:10,justify:"space-between",type:"flex"}},[a("el-col",{attrs:{xs:8,sm:6,md:10,lg:7,xl:7}},[a("div",{staticClass:"wrap"},[a("span",{staticClass:"labal"},[e._v("查看范围")]),e._v(" "),a("el-select",{staticClass:"search-select",attrs:{size:"mini",placeholder:"请选择"},on:{change:e.changeSearch},model:{value:e.firstSelectvalue,callback:function(t){e.firstSelectvalue=t},expression:"firstSelectvalue"}},e._l(e.options,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-select",{attrs:{size:"mini",placeholder:"请选择"},on:{change:e.changeDep},model:{value:e.SecondSelectvalue,callback:function(t){e.SecondSelectvalue=t},expression:"SecondSelectvalue"}},e._l(e.optionsList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.name}})}),1)],1)]),e._v(" "),a("el-col",{attrs:{xs:4,sm:6,md:8,lg:9,xl:9}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("div",{staticClass:"wrap"},[a("span",{staticClass:"labal"},[e._v("日期")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",format:"yyyy-MM","value-format":"yyyy-MM",type:"daterange","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:e.pickDateChange},model:{value:e.searchMonth,callback:function(t){e.searchMonth=t},expression:"searchMonth"}})],1)])]),e._v(" "),a("el-col",{attrs:{xs:4,sm:6,md:8,lg:7,xl:7}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("div",{staticClass:"wrap"},[a("el-input",{attrs:{size:"mini",placeholder:"项目名称/项目编号"},model:{value:e.projectName,callback:function(t){e.projectName=t},expression:"projectName"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("导出")]),e._v(" "),a("el-button",{staticClass:"circle-btn",attrs:{type:"primary",icon:"el-icon-refresh",size:"mini",circle:""},on:{click:e.refresh}})],1)])])],1),e._v(" "),a("el-table",{attrs:{data:e.tableData,"max-height":e.asideHeight,border:"","header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0}},on:{"header-dragend":e.headerDragend}},[a("el-table-column",{attrs:{type:"index",width:"38",align:"center",label:"序号",fixed:!0}}),e._v(" "),a("el-table-column",{attrs:{label:"项目名称",width:"140",align:"center",fixed:!0,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"num"},[e._v(e._s(t.row.projectName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"projectNumber",label:"项目编号",align:"center",width:160}}),e._v(" "),a("el-table-column",{attrs:{prop:"implementationDepartmentB",label:"实施B级单位",align:"center",width:130}}),e._v(" "),a("el-table-column",{attrs:{prop:"implementationDepartmentC",label:"实施C级单位",align:"center",width:130}}),e._v(" "),a("el-table-column",{attrs:{prop:"projectManager",align:"center",label:"项目经理"}}),e._v(" "),a("el-table-column",{attrs:{prop:"typeOfOutputValueAccounting",align:"center",label:"产值核算类型",width:130}}),e._v(" "),a("el-table-column",{attrs:{prop:"projectStatus",align:"center",label:"项目状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.projectStatusConfig[t.row.projectStatus]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"associatedStates",label:"关联状态",width:100},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.associatedStatesConfig[t.row.associatedStates]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"funding",align:"center",label:"纯合同额/经费",width:130},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(void 0!=t.row.funding?t.row.funding:"--"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"atTheEndOfProgress",align:"center",label:"月末进度"}}),e._v(" "),a("el-table-column",{attrs:{prop:"residualValue",align:"center",label:"剩余产值"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"合同编号",width:200},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.contractNumbers,function(t,o){return a("el-tag",{key:o,attrs:{type:"info",size:"mini"}},[e._v(e._s(t)+"\n        ")])})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"saleDepartmentB",align:"center",label:"销售B级单位",width:130},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(""!=t.row.saleDepartmentB?t.row.saleDepartmentB:"--"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"saleDepartmentC",align:"center",label:"销售C级单位",width:130},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(""!=t.row.saleDepartmentC?t.row.saleDepartmentC:"--"))])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page",attrs:{"current-page":e.currentPage,"page-sizes":[20],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var r=a("VU/8")(n,i,!1,function(e){a("AOC5")},null,null);t.a=r.exports},"/3m/":function(e,t){},"/TWN":function(e,t){},"/sMv":function(e,t,a){"use strict";var o=a("2g+J"),n=a.n(o),i=a("7jfO");var r=function(e){a("5GZU")},s=a("VU/8")(n.a,i.a,!1,r,null,null);t.default=s.exports},"0Vnt":function(e,t,a){"use strict";var o=a("dUbd"),n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"budget-content"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"project"},[a("el-row",{attrs:{gutter:20,type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:4}},[a("h4",[e._v("项目列表")])]),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-checkbox",{on:{change:e.checkedChooseProject},model:{value:e.checkedChoose,callback:function(t){e.checkedChoose=t},expression:"checkedChoose"}},[e._v("仅显示未关联项目")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableDataPro,height:"205","row-key":"id",border:"","span-method":e.objectSpanMethod,"header-cell-style":{fontSize:"14px",color:"#303133",height:"34px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"34px"},"cell-style":{padding:0},"highlight-current-row":""},on:{"current-change":e.handleCurrentChangeProject}},[a("el-table-column",{attrs:{label:"",width:"35",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.show?a("el-radio",{staticStyle:{color:"#fff"},attrs:{label:t.row.index},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v(" \n              ")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"index",label:"序号",width:"50",formatter:e.formatxuhao,align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"projectName",label:"项目名称",width:"280","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"projectNumber",label:"项目编号",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"classUnitBName",label:"实施B级单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"classUnitCName",label:"实施C级单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"projectManagerName",label:"项目经理"}}),e._v(" "),a("el-table-column",{attrs:{prop:"relationStatus",label:"关联状态"}})],1),e._v(" "),a("div",{staticClass:"page right"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":1,"page-sizes":[5],layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)])],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-row",{attrs:{gutter:20,type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:4}},[a("h4",[e._v("合同列表")])]),e._v(" "),a("el-col",{attrs:{span:2}},[a("span",{staticClass:"unit"},[e._v("单位：元")])])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{"header-cell-style":{fontSize:"14px",color:"#303133",height:"26px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"26px"},"cell-style":{padding:0},data:e.tableData,"row-key":"id",border:"","max-height":"200","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"row-click":e.contractRowClick,"current-change":e.changeHanle}},[a("el-table-column",{attrs:{label:"",width:"35",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["合计"!=t.row.number?a("el-radio",{staticStyle:{color:"#fff"},attrs:{label:t.row.CONTRACTNUMBER},model:{value:e.contractChecked,callback:function(t){e.contractChecked=t},expression:"contractChecked"}},[e._v("\n                 \n              ")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"55",label:"序号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.number))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"合同编号",sortable:"",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(null!=t.row.CONTRACTNUMBER?t.row.CONTRACTNUMBER:"--"))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"合同名称",sortable:"",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(null!=t.row.CONTRACTNAME?t.row.CONTRACTNAME:"--"))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"合同额",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(null!=t.row.CONTRACTMONEY?t.row.CONTRACTMONEY:"--"))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"销售B级单位"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(null!=t.row.LEVELTWONAME?t.row.LEVELTWONAME:"--"))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"销售"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(null!=t.row.PROJECTMANAGERNAME?t.row.PROJECTMANAGERNAME:"--"))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"relationStatus",label:"关联状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(null!=t.row.relationStatus?e.correConfig[t.row.relationStatus]:"--"))]}}])})],1)],1)])],1),e._v(" "),a("el-row",{staticClass:"split",attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-row",{attrs:{gutter:20,type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:8}},[a("h4",[e._v("合同预算分配表")])]),e._v(" "),a("el-col",{attrs:{span:2}},[a("span",{staticClass:"unit"},[e._v("单位：元")])])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{size:"mini","header-cell-style":{fontSize:"14px",color:"#303133",height:"34px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"34px"},"cell-style":{padding:0},data:e.tableData1,"row-key":"id",border:"",height:430,"default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"cell-mouse-leave":e.cellLeave,"cell-click":e.cellClick,"row-click":e.rowClick}},[a("el-table-column",{attrs:{prop:"splitType",label:"预算类别",align:"left",width:"250"}}),e._v(" "),a("el-table-column",{attrs:{prop:"budgetTotal",label:"预算",align:"right",width:"150"}}),e._v(" "),e._l(e.budgeConfig,function(t,o){return a("el-table-column",{key:o,attrs:{label:t.label,align:"right"},scopedSlots:e._u([{key:"default",fn:function(o){return[a("el-input",{staticClass:"budge-input",attrs:{size:"mini",type:"number",disabled:o.row.isDisable},on:{blur:function(a){return e.blueInput(o.row,t.key)}},model:{value:o.row[t.key],callback:function(a){e.$set(o.row,t.key,e._n(a))},expression:"scope.row[item.key]"}})]}}],null,!0)})})],2)],1)])],1),e._v(" "),a("el-row",{attrs:{gutter:20,type:"flex",justify:"center"}},[a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.save}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]};var i=function(e){a("7aCS"),a("H9/9")},r=a("VU/8")(o.a,n,!1,i,"data-v-7319a9eb",null);t.a=r.exports},"0jd9":function(e,t){},"0seO":function(e,t){},"14gb":function(e,t,a){"use strict";var o=a("7+uW");t.a=new o.default},"2Bw7":function(e,t,a){"use strict";var o=a("Dd8w"),n=a.n(o),i=a("IinW"),r=a.n(i);a("N1kN");var s={props:{value:{type:Array,default:function(){return[]}},width:{type:Number,default:100},height:{type:Number,default:100},token:{type:String,default:""},domain:{type:String,default:""},multiple:{type:Boolean,default:!0},length:{type:Number,default:9}},data:function(){return{fileList:[],viewer:null,uploadId:"upload_"+(new Date).getTime()}},computed:{miniWidth:function(){return this.width>this.height?this.height:this.width}},methods:{handleChange:function(){var e=this;this.$refs.uploadInput.files;for(var t=this.$refs.uploadInput.files,a=function(a){var o=t[a],n=new FileReader,i=(new Date).getTime()+"_"+Math.ceil(99999*Math.random());n.readAsDataURL(o),n.onload=function(){e.fileList.push({key:i,url:n.result,percent:0,status:"uploading"}),e.$nextTick(function(){e.uplaodAction(n.result,o,i)})}},o=0;o<t.length;o++)a(o);this.$refs.uploadInput.value=[]},uplaodAction:function(e,t,a){var o=this;this.fileList.findIndex(function(e){return e.key===a});this.fileList.findIndex(function(e){return e.key===a});var i=new XMLHttpRequest,r="http://upload-z2.qiniu.com/putb64/"+t.size;i.open("POST",r,!0),i.setRequestHeader("Content-Type","application/octet-stream"),i.setRequestHeader("Authorization","UpToken "+this.token),i.send(e.split(",")[1]),i.onreadystatechange=function(){if(4===i.readyState){var e=JSON.parse(i.response);e?(o.$set(o.fileList,o.fileList.findIndex(function(e){return e.key===a}),n()({},o.fileList[o.fileList.findIndex(function(e){return e.key===a})],{url:o.domain+e.key,percent:100})),setTimeout(function(){o.$set(o.fileList,o.fileList.findIndex(function(e){return e.key===a}),n()({},o.fileList[o.fileList.findIndex(function(e){return e.key===a})],{status:"success"})),o.$emit("input",o.fileList)},200)):(o.$set(o.fileList,o.fileList.findIndex(function(e){return e.key===a}),n()({},o.fileList[o.fileList.findIndex(function(e){return e.key===a})],{status:"error"})),o.fileList.splice(o.fileList.findIndex(function(e){return e.key===a}),1))}},i.onprogress=function(e){e.total&&e.loaded&&o.$set(o.fileList[o.fileList.findIndex(function(e){return e.key===a})],"percent",e.loaded/e.total*100)}},handleRemove:function(e){this.fileList.splice(this.fileList.findIndex(function(t){return t.key===e}),1)},handlePreviewFile:function(e){var t=this;this.viewer&&this.viewer.destroy(),this.uploadId="upload_"+(new Date).getTime(),this.viewer,this.$nextTick(function(){t.viewer=new r.a(document.getElementById(t.uploadId)),t.viewer.view(t.fileList.findIndex(function(t){return t.key===e}))})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fm-uplaod-container",attrs:{id:e.uploadId}},[e._l(e.fileList,function(t){return a("div",{key:t.key,staticClass:"upload-file",class:{uploading:"uploading"==t.status,"is-success":"success"==t.status},style:{width:e.width+"px",height:e.height+"px"},attrs:{id:t.key}},[a("img",{attrs:{src:t.url}}),e._v(" "),"uploading"==t.status?a("el-progress",{staticClass:"upload-progress",attrs:{width:.9*e.miniWidth,percentage:t.percent,type:"circle"}}):e._e(),e._v(" "),"success"==t.status?a("label",{staticClass:"item-status"},[a("i",{staticClass:"el-icon-upload-success el-icon-check"})]):e._e(),e._v(" "),a("div",{staticClass:"uplaod-action"},[a("i",{staticClass:"el-icon-view",style:{"font-size":e.miniWidth/4+"px"},on:{click:function(a){return e.handlePreviewFile(t.key)}}}),e._v(" "),a("i",{staticClass:"el-icon-delete",style:{"font-size":e.miniWidth/4+"px"},on:{click:function(a){return e.handleRemove(t.key)}}})])],1)}),e._v(" "),e.token?a("div",{staticClass:"el-upload el-upload--picture-card",style:{width:e.width+"px",height:e.height+"px"}},[a("i",{staticClass:"el-icon-plus",style:{fontSize:e.miniWidth/4+"px",marginTop:-e.miniWidth/8+"px",marginLeft:-e.miniWidth/8+"px"}}),e._v(" "),a("input",{ref:"uploadInput",staticClass:"el-upload__input upload-input",style:{width:e.width+"px",height:e.height+"px"},attrs:{accept:"image/*",multiple:"",type:"file",name:"file"},on:{change:e.handleChange}})]):e._e()],2)},staticRenderFns:[]};var c=a("VU/8")(s,l,!1,function(e){a("DmeO")},null,null);t.a=c.exports},"2VVA":function(e,t){},"2g+J":function(e,t){},"2lDM":function(e,t){},"2r/s":function(e,t){},"30lM":function(e,t,a){"use strict";var o=a("Dd8w"),n=a.n(o),i=a("gyMJ"),r=a("P9l9"),s=a("NYxO"),l={name:"notAssociatedOutput",props:["widget","models","rules","remote","datas"],data:function(){return{loading:!1,firstSelectvalue:"",SecondSelectvalue:"",total:0,pageNum:1,pageSize:10,isPname:!0,btnMaxWidth:160,monthly:"",projectStatusConfig:{0:"已登记",1:"运行中",2:"暂停",3:"完成",4:"关闭",5:"异常关闭"},associatedStatesConfig:{0:"已关联未分配",1:"已关联已分配",2:"未关联",3:"合同终止时间已到",4:"无需关联"},options:[{value:"IB",label:"实施B级单位"},{value:"IC",label:"实施C级单位"}],optionsList:[],tableData:[],currentPage3:5,currentPage:1,projectName:"",searchMonth:"",level:"",levelValue:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},beginDate:"",endDate:"",isExport:!0}},watch:{datas:{deep:!0,handler:function(e){this.datas,this.datas.options.url_a}}},computed:n()({},Object(s.c)(["userinfo"]),{asideHeight:function(){return document.documentElement.clientHeight-205}}),methods:{pickDateChange:function(e){e&&(this.minMonthly=e[0],this.maxMonthly=e[1],this.searchMonth=e)},changeDep:function(e){this.levelValue=e},changeSearch:function(e){var t=this;this.optionsList=[],this.SecondSelectvalue="",this.level=e,Object(r.X)("/sgpm/rest/api/server/project/output/dept?deptType="+e,null).then(function(e){if(200==e.status){var a=e.data.data;t.optionsList=a}}).catch(function(e){})},headerDragend:function(e,t,a,o){this.btnMaxWidth=e,e>200?this.isPname=!1:(this.isPname=!0,this.btnMaxWidth=200)},getNotAssociatedOutputList:function(e){var t=this;this.loading=!0,this.tableData=[],Object(r.B)("/sgpm/rest/api/server/contract/residual/value",e).then(function(e){if(200==e.status){var a=e.data.data;t.tableData=a;var o=e.data.meta;t.total=o.totalCount,t.currentPage=o.pageNo,t.loading=!1}}).catch(function(e){t.loading=!1})},handleSizeChange:function(e){},refresh:function(){this.searchMonth="",this.firstSelectvalue="",this.SecondSelectvalue="",this.levelValue="",this.level="",this.projectName="";var e={keyword:"",pageNum:1,pageSize:10,beginDate:this.beginDate,endDate:this.endDate,levelBId:this.SecondSelectvalue,levelCId:this.SecondSelectvalue};this.getNotAssociatedOutputList(e)},search:function(){var e={keyword:this.projectName,pageNum:1,pageSize:10,beginDate:this.minMonthly?this.minMonthly:this.beginDate,endDate:this.maxMonthly?this.maxMonthly:this.endDate,levelBId:"",levelCId:this.SecondSelectvalue};this.getNotAssociatedOutputList(e)},exportData:function(){var e=this.minMonthly?this.minMonthly:this.beginDate,t=this.maxMonthly?this.maxMonthly:this.endDate,a=document.createElement("a");return a.href=i.a.urlPort04+"/sgpm/rest/api/server/pm/project/excel/export/gt/contract_surplus_output_value?levelCId="+this.SecondSelectvalue+"&keyword="+this.projectName+"&beginDate="+e+"&endDate="+t+"&levelBId=",a.download=i.a.urlPort04+"/sgpm/rest/api/server/pm/project/excel/export/gt/contract_surplus_output_value?levelCId="+this.SecondSelectvalue+"&keyword="+this.projectName+"&beginDate="+e+"&endDate="+t+"&levelBId=",a.click(),!1},handleCurrentChange:function(e){var t={keyword:this.projectName,pageNum:e,pageSize:10,beginDate:this.minMonthly?this.minMonthly:this.beginDate,endDate:this.maxMonthly?this.maxMonthly:this.endDate,levelBId:"",levelCId:this.SecondSelectvalue};this.getNotAssociatedOutputList(t)}},mounted:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,o=e.getDate();this.beginDate=t+"-"+a+"-1",this.endDate=t+"-"+a+"-"+o;var n={keyword:this.projectName,pageNum:1,pageSize:10,beginDate:this.beginDate,endDate:this.endDate,levelBId:this.SecondSelectvalue,levelCId:this.SecondSelectvalue};this.getNotAssociatedOutputList(n),this.isExport="2361372308666271490"!=this.userinfo.memberid&&"-2214906182493845302"!=this.userinfo.memberid&&"-2357901482704941730"!=this.userinfo.memberid},created:function(){}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mounth-output"},[a("el-row",{staticClass:"search",attrs:{gutter:10,type:"flex",justify:"space-between"}},[a("el-col",{attrs:{xs:8,sm:6,md:8,lg:7,xl:7}},[a("div",{staticClass:"wrap"},[a("span",{staticClass:"labal"},[e._v("查看范围")]),e._v(" "),a("el-select",{staticClass:"search-select",attrs:{size:"mini",placeholder:"请选择",clearable:""},on:{change:e.changeSearch},model:{value:e.firstSelectvalue,callback:function(t){e.firstSelectvalue=t},expression:"firstSelectvalue"}},e._l(e.options,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-select",{attrs:{size:"mini",placeholder:"请选择",clearable:""},on:{change:e.changeDep},model:{value:e.SecondSelectvalue,callback:function(t){e.SecondSelectvalue=t},expression:"SecondSelectvalue"}},e._l(e.optionsList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1)],1)]),e._v(" "),a("el-col",{attrs:{xs:4,sm:6,md:8,lg:9,xl:9}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("div",{staticClass:"wrap"},[a("span",{staticClass:"labal"},[e._v("日期")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"daterange","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:e.pickDateChange},model:{value:e.searchMonth,callback:function(t){e.searchMonth=t},expression:"searchMonth"}})],1)])]),e._v(" "),a("el-col",{attrs:{xs:4,sm:6,md:8,lg:7,xl:7}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("div",{staticClass:"wrap"},[a("el-input",{staticStyle:{width:"62%"},attrs:{size:"mini",placeholder:"合同名称/编号/部门"},model:{value:e.projectName,callback:function(t){e.projectName=t},expression:"projectName"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.isExport},on:{click:e.exportData}},[e._v("导出")]),e._v(" "),a("el-button",{staticClass:"circle-btn",attrs:{type:"primary",icon:"el-icon-refresh",size:"mini",circle:""},on:{click:e.refresh}})],1)])])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData,height:e.asideHeight,border:"","header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0}},on:{"header-dragend":e.headerDragend}},[a("el-table-column",{attrs:{type:"index",width:"38",align:"center",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"contractNumber",label:"合同编号",align:"center",width:160}}),e._v(" "),a("el-table-column",{attrs:{prop:"contractName",label:"合同名称",align:"center",width:170,"show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"saleBName",label:"销售B级单位",align:"center",width:130}}),e._v(" "),a("el-table-column",{attrs:{prop:"saleCName",label:"销售C级单位",align:"center",width:130}}),e._v(" "),a("el-table-column",{attrs:{prop:"contractLevelCName",label:"合同实施部门",align:"center",width:130,"show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"contractSignDate",label:"合同登记日期",align:"center",width:130}}),e._v(" "),a("el-table-column",{attrs:{prop:"levelBName",label:"未关联B级部门",align:"center",width:130}}),e._v(" "),a("el-table-column",{attrs:{prop:"levelCName",label:"未关联C级部门",align:"center",width:130}}),e._v(" "),a("el-table-column",{attrs:{prop:"outputValue",label:"剩余合同产值",align:"center"}})],1),e._v(" "),a("el-pagination",{staticClass:"page",attrs:{"current-page":e.currentPage,"page-sizes":[10],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var u=a("VU/8")(l,c,!1,function(e){a("7+Qt")},null,null);t.a=u.exports},"31z3":function(e,t){},"34Lq":function(e,t,a){"use strict";var o=a("mvHQ"),n=a.n(o),i=a("Dd8w"),r=a.n(i),s=a("14gb"),l=a("P9l9"),c=a("NYxO"),u={name:"project-account",data:function(){return{contractNumber:"",tableData:[{expendItem:"实施费用预算",budgetMoney:""},{expendItem:"--人工费用预算",budgetMoney:""},{expendItem:"--运营费用预算",budgetMoney:""},{expendItem:"销售费用预算",budgetMoney:""},{expendItem:"项目采购成本预算",budgetMoney:""},{expendItem:"项目总预算",budgetMoney:""}]}},created:function(){localStorage.getItem("ProjectAccountParams")&&(JSON.parse(localStorage.getItem("ProjectAccountParams"))&&localStorage.removeItem("ProjectAccountParams"));this.gettableData()},computed:r()({},Object(c.c)(["userinfo","isDetail"])),mounted:function(){var e=this;s.a.$on("accountTableData",function(t){t&&(e.tableData=t)})},methods:{formatbudgetMoney:function(e){return this.formatThousands(e.budgetMoney)},formatThousands:function(e){e=(e/=1e4).toFixed(2);if(0==/^[0-9]*[1-9][0-9]*$/.test(e))return e&&e.toString().replace(/(\d)(?=(\d{3})+\.)/g,function(e,t){return t+","});return(e+"").replace(/\d{1,3}(?=(\d{3})+$)/g,"$&,")},gettableData:function(){var e=this,t=JSON.parse(localStorage.getItem("projectInfo")).contractNum;if(t){var a="/sgpm/rest/api/integration/data/budgets/information/"+this.userinfo.account_id+"?contractNumber="+t;Object(l.Y)(a,null).then(function(t){var a=t.data.data;e.tableData[0].budgetMoney=a.shishifeiyongBudget,e.tableData[1].budgetMoney=a.rengongfeiyongBudget,e.tableData[2].budgetMoney=a.yunyingfeiyongBudget,e.tableData[3].budgetMoney=a.xiaoshoufeiyongBudget,e.tableData[4].budgetMoney=a.caigouchengbenBudget,e.tableData[5].budgetMoney=a.totalBudget;var o=n()(e.tableData);localStorage.setItem("ProjectAccountParams",o)}).catch(function(e){})}}}},d={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("el-table",{staticStyle:{width:"100%","font-size":"10px"},attrs:{data:this.tableData,border:"","header-cell-style":{fontSize:"12px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0}}},[t("el-table-column",{attrs:{prop:"expendItem",align:"center",label:"预计支出事项"}}),this._v(" "),t("el-table-column",{attrs:{prop:"budgetMoney",formatter:this.formatbudgetMoney,align:"center",label:"预算金额(万元)"}})],1),this._v(" "),t("span",{staticStyle:{"font-size":"12px",color:"#606666","font-family":"'微软雅黑', 'Avenir', Helvetica, Arial, sans-serif"}},[this._v("注：项目预算需由项目经理确认，如与合同预算不符需要变更，需发起合同预算变更审批流程。")])],1)},staticRenderFns:[]};var p=a("VU/8")(u,d,!1,function(e){a("hS7N")},"data-v-409c33db",null);t.a=p.exports},"3gcX":function(e,t){},"3hvd":function(e,t){},"4Njg":function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__=__webpack_require__("woOf"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify__=__webpack_require__("mvHQ"),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify__),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_extends__=__webpack_require__("Dd8w"),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_extends___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_extends__),__WEBPACK_IMPORTED_MODULE_3__bus__=__webpack_require__("14gb"),__WEBPACK_IMPORTED_MODULE_4__components_CreateForm_GenerateForm__=__webpack_require__("bqq5"),__WEBPACK_IMPORTED_MODULE_5__components_CreateForm_GenerateFormItem__=__webpack_require__("iBEn"),__WEBPACK_IMPORTED_MODULE_6__components_CreateForm_styles_FormCreate_css__=__webpack_require__("3gcX"),__WEBPACK_IMPORTED_MODULE_6__components_CreateForm_styles_FormCreate_css___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6__components_CreateForm_styles_FormCreate_css__),__WEBPACK_IMPORTED_MODULE_7__api_api_js__=__webpack_require__("P9l9"),__WEBPACK_IMPORTED_MODULE_8_vuex__=__webpack_require__("NYxO"),__WEBPACK_IMPORTED_MODULE_9__api_index__=__webpack_require__("gyMJ"),__WEBPACK_IMPORTED_MODULE_10__config__=__webpack_require__("QmSG"),select_array=[],all_array=[],index_array=[],projectLevel=[],personInfor=JSON.parse(localStorage.getItem("personInfor"));__webpack_exports__.a={name:"Businessproject",components:{GenerateForm:__WEBPACK_IMPORTED_MODULE_4__components_CreateForm_GenerateForm__.a,GenetateFormItem:__WEBPACK_IMPORTED_MODULE_5__components_CreateForm_GenerateFormItem__.a},data:function(){return{isShow:1!=this.$route.query.isShow,isSave:!1,jsonData:{list:"",config:{labelPosition:"left",labelWidth:100,size:"small"}},disabled:!1,itemInfo:[],pId:"",pNum:"",projectData:[],keywordList:"",projectCodeList:"",keytechnologyList:"",editData:{},remoteFuncs:{},globalParams:{},projectInfo:[],deptInfo:[],marketInfo:"",projectNumber:this.$route.query.projectNumber}},computed:__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_extends___default()({},Object(__WEBPACK_IMPORTED_MODULE_8_vuex__.c)(["userinfo","isDetail"]),{isRevoke:function(){return sessionStorage.getItem("isRevoke")}}),beforeCreate:function(){},created:function(){var e=this;this.projectNumber,this.globalParams.account_id=this.userinfo.account_id;var t="/template/1/"+this.userinfo.account_id;Object(__WEBPACK_IMPORTED_MODULE_7__api_api_js__.W)(t).then(function(t){e.jsonData=t.data.data}).catch(function(e){});var a=localStorage.getItem("businessProjectId");this.globalParams.memberId=this.userinfo.memberid,this.globalParams.subdept_id=this.userinfo.subdept_id,this.globalParams.businessProjectId=a,this.initModule(),a&&"-1360422574114386809"==this.userinfo.account_id||a&&"5326994013938795629"==this.userinfo.account_id||a&&"-7975978055853456035"==this.userinfo.account_id||a&&"-8234401961992436364"==this.userinfo.account_id?this.initBusinessData(a):(this.projectNumber&&"-1814768306395265967"==this.userinfo.account_id||this.projectNumber&&"8416498716893399290"==this.userinfo.account_id||this.projectNumber&&"7638091599462351621"==this.userinfo.account_id)&&(this.projectNumber,this.initBusinessData(this.projectNumber)),this.initModuleDept(),this.getDept(),this.$nextTick(function(){__WEBPACK_IMPORTED_MODULE_3__bus__.a.$on("audit",function(t){var a=t.obj,o=t.projectId;e.globalParams.businessProjectId=o,e.$set(e.globalParams,"data",a),e.$set(e.globalParams,"data1",a),e.globalParams.data=a})}),"/Businessproject?judgelogo=a"==this.$route.fullPath&&(localStorage.removeItem("keyWords"),localStorage.removeItem("keytechnologys"),localStorage.removeItem("projectCode")),localStorage.removeItem("pNumber"),localStorage.removeItem("quanzhongDate"),localStorage.removeItem("projectSplit"),localStorage.removeItem("gtprojectId"),"a"==this.$route.query.judgelogo&&(localStorage.removeItem("market"),localStorage.removeItem("gtProjectSplit"))},mounted:function(){var e=this;__WEBPACK_IMPORTED_MODULE_3__bus__.a.$on("businessInfo",function(t){t&&(e.itemInfo=t)}),__WEBPACK_IMPORTED_MODULE_3__bus__.a.$on("keyword",function(t){t&&(e.keywordList=t)}),__WEBPACK_IMPORTED_MODULE_3__bus__.a.$on("projectCode",function(t){t&&(e.projectCodeList=t)}),__WEBPACK_IMPORTED_MODULE_3__bus__.a.$on("keytechnology",function(t){t&&(e.keytechnologyList=t)}),__WEBPACK_IMPORTED_MODULE_3__bus__.a.$on("projectlevel",function(t){t&&(e.projectlevel=t)}),__WEBPACK_IMPORTED_MODULE_3__bus__.a.$on("MarketSelectInfo",function(t){t&&(e.marketInfo=t,e.marketInfo)})},methods:{getDept:function(){var e=this,t=this.userinfo.subdept_id,a=__WEBPACK_IMPORTED_MODULE_9__api_index__.a.urlPort05+"/sgpm/rest/api/system/second/dept/"+t;this.axios.get(a).then(function(t){e.deptInfo=t.data.data}).catch(function(e){})},initModule:function(){var e=this;this.$nextTick(function(){__WEBPACK_IMPORTED_MODULE_3__bus__.a.$on("contactbusiness",function(t){t.model;var a=t.val;if(/.*[\u4e00-\u9fa5]+.*$/.test(a)){var o=a.lastIndexOf("-");return a=a.substring(0,o)}Object(__WEBPACK_IMPORTED_MODULE_7__api_api_js__.F)("/sgpm/rest/api/integration/oa/business/wanyuan/"+a).then(function(t){e.$set(e.globalParams,"data",t.data.data),e.projectInfo=t.data.data})})})},initModuleDept:function(){this.$nextTick(function(){__WEBPACK_IMPORTED_MODULE_3__bus__.a.$on("implementationsecondary",function(e){e.model,e.val})})},keepTwoDecimalFull:function(e){var t=parseFloat(e);if(isNaN(t))return alert("传递参数错误，请检查！"),!1;var a=(t=Math.round(100*e)/100).toString(),o=a.indexOf(".");for(o<0&&(o=a.length,a+=".");a.length<=o+2;)a+="0";return a},initBusinessData:function(e){var t=this;if(localStorage.removeItem("keyWords"),localStorage.removeItem("keytechnologys"),localStorage.removeItem("projectCode"),"-1360422574114386809"==this.userinfo.account_id||"5326994013938795629"==this.userinfo.account_id||"-7975978055853456035"==this.userinfo.account_id||"-8234401961992436364"==this.userinfo.account_id)Object(__WEBPACK_IMPORTED_MODULE_7__api_api_js__._19)("/sgpm/rest/api/server/pm/project?projectId="+e,null).then(function(e){"8416498716893399290"==t.userinfo.account_id?localStorage.setItem("projectCode",e.data.data.KEYWORD):localStorage.setItem("keyWords",e.data.data.KEYWORD),localStorage.setItem("keytechnologys",e.data.data.KEYTECHNOLOGY),t.$set(t.globalParams,"data",e.data.data),localStorage.removeItem("globalParams"),e.data.data.BUSINESS&&(e.data.data.customercenter=e.data.data.BUSINESS.CUSTOMERCENTER,e.data.data.customerdepartment=e.data.data.BUSINESS.CUSTOMERDEPARTMENT),localStorage.setItem("globalParams",__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default()(t.updateJsonData(e.data.data))),t.$set(t.globalParams,"CONTRACTMARKET",e.data.data.CONTRACTMARKET),t.$set(t.globalParams,"PROJECTNAME",e.data.data.PROJECTNAME),t.$set(t.globalParams,"PROJECTNUMBER",e.data.data.PROJECTNUMBER),t.$set(t.globalParams,"CONSTRUCTIONCONTENT",e.data.data.CONSTRUCTIONCONTENT),t.$set(t.globalParams,"BUSINESSSYSTEM",e.data.data.BUSINESSSYSTEM)}).catch(function(e){});else if("-1814768306395265967"==this.userinfo.account_id||"8416498716893399290"==this.userinfo.account_id||"7638091599462351621"==this.userinfo.account_id){var a=this.projectNumber;if("-1814768306395265967"==this.userinfo.account_id||"7638091599462351621"==this.userinfo.account_id)var o="/sgpm/rest/api/server/pm/gt/project/"+a;else if("8416498716893399290"==this.userinfo.account_id)o="/sgpm/rest/api/server/pm/nk/project/"+a;localStorage.removeItem("keyWords"),localStorage.removeItem("keytechnologys"),localStorage.removeItem("projectCode"),Object(__WEBPACK_IMPORTED_MODULE_7__api_api_js__._28)(o).then(function(e){var a=e.data.data;e.data.data.expectContractAmount=t.keepTwoDecimalFull(e.data.data.expectContractAmount/1e4);for(var o=e.data.data.projects,n=0;n<o.length;n++)o[n].expectContributions=o[n].expectContributions/1e4;localStorage.removeItem("globalParams"),"8416498716893399290"==t.userinfo.account_id?localStorage.setItem("projectCode",e.data.data.projectKeyWord):localStorage.setItem("keyWords",e.data.data.projectKeyWord),localStorage.setItem("keytechnologys",e.data.data.keyTechnology),localStorage.setItem("globalParams",__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default()(a));var i={projectSaleName:e.data.data.projectSaleName,saleClassUnitBName:e.data.data.saleClassUnitBName,saleClassUnitCName:e.data.data.saleClassUnitCName,projectSaleId:e.data.data.projectSaleId,saleClassUnitBId:e.data.data.saleClassUnitBId,saleClassUnitCId:e.data.data.saleClassUnitCId};localStorage.removeItem("market"),localStorage.setItem("market",__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default()(i)),localStorage.removeItem("gtProjectSplit"),localStorage.setItem("gtProjectSplit",__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default()(e.data.data.projects)),__WEBPACK_IMPORTED_MODULE_3__bus__.a.$emit("gtProjectSplit",__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default()(e.data.data.projects)),__WEBPACK_IMPORTED_MODULE_3__bus__.a.$emit("market",__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default()(i)),__WEBPACK_IMPORTED_MODULE_3__bus__.a.$emit("keyWords",e.data.data.projectKeyWord),__WEBPACK_IMPORTED_MODULE_3__bus__.a.$emit("keytechnologys",e.data.data.keyTechnology),__WEBPACK_IMPORTED_MODULE_3__bus__.a.$emit("projectCode",e.data.data.projectKeyWord)}).catch(function(e){})}},updateJsonData:function(e){var t={};for(var a in e)if("CONTRACT"==a||"BUSINESS"==a)for(var o in e[a])t[o]=e[a][o];else t[a]=e[a];return t},warnMessage:function(){this.$message({showClose:!0,message:"项目关键字不能为空",type:"warning"})},warnMessage2:function(){this.$message({showClose:!0,message:"拟使用的关键技术不能为空",type:"warning"})},warnMessage3:function(){this.$message({showClose:!0,message:"工程代码不能为空",type:"warning"})},handleSubmit:function handleSubmit(){var _this6=this;this.disabled=!0,this.isSave=!0;var that=this;this.$refs.generateForm.getData().then(function(data){if("-1360422574114386809"==_this6.userinfo.account_id||"5326994013938795629"==_this6.userinfo.account_id||"-7975978055853456035"==_this6.userinfo.account_id||"-8234401961992436364"==_this6.userinfo.account_id){var level_two_name="",level_two_id="";data.implementationsecondary?_this6.deptInfo.forEach(function(e){e.deptId!=data.implementationsecondary&&e.deptName!=data.implementationsecondary||(level_two_name=e.deptName,level_two_id=e.deptId)}):(level_two_name="",level_two_id="");var prostartdate=new Date(data.projectstartdate.replace(/\-/g,"/")),proenddate=new Date(data.projectenddate.replace(/\-/g,"/"));if(prostartdate>=proenddate)return alert("项目预计开始时间不能大于项目预计结束时间！"),_this6.disabled=!1,_this6.isSave=!1,!1;var keyword="",keytechnology="";if(void 0!=that.$route.query.id&&null!=that.$route.query.id||_this6.pId){if("8416498716893399290"==_this6.userinfo.account_id){if(keyword=_this6.projectCodeList?_this6.projectCodeList.join(","):data.keyword,""==keyword)return _this6.warnMessage3(),_this6.disabled=!1,void(_this6.isSave=!1)}else if(keyword=_this6.keywordList?_this6.keywordList.join(","):data.keyword,""==keyword)return _this6.warnMessage(),_this6.disabled=!1,void(_this6.isSave=!1);if(keytechnology=_this6.keytechnologyList?_this6.keytechnologyList.join(","):data.keytechnology,""==keytechnology)return _this6.warnMessage2(),_this6.disabled=!1,void(_this6.isSave=!1);var id="";id=that.$route.query.id?that.$route.query.id:_this6.pId;var projectNum="";projectNum=data.projectnumber?data.projectnumber:_this6.pNum;var data={id:id,project:{name:data.projectname,custom_field_values:{16:data.customercenter,17:data.contractmarket,18:data.contractmoney,22:data.projectlevel,23:data.operationalperiod,24:data.industry,25:data.region,28:data.projectstartdate,29:data.projectenddate,30:data.projecttype,32:keyword,35:data.constructioncontent,36:keytechnology,39:data.businessnumber,41:data.businesssystem,42:1,43:data.customerdepartment},parent_id:"",description:"",is_public:"1",user_id:that.userinfo.memberid,user_name:that.userinfo.emp_name,company_name:that.userinfo.account_name,company_id:that.userinfo.account_id,level_one_name:that.userinfo.subdept_name,level_one_id:that.userinfo.subdept_id,level_two_name:level_two_name,level_two_id:level_two_id,sale_name:data.contractmarket,sale_id:data.saleid,project_no:projectNum},child:0,category:1,account_name:that.userinfo.account_name,username:that.userinfo.login_name,workflow_type:0}}else{if("8416498716893399290"==_this6.userinfo.account_id){if(_this6.projectCodeList&&(keyword=_this6.projectCodeList.join(",")),""==keyword)return _this6.warnMessage3(),_this6.disabled=!1,void(_this6.isSave=!1)}else if(_this6.keywordList&&(keyword=_this6.keywordList.join(",")),""==keyword)return _this6.warnMessage(),_this6.disabled=!1,void(_this6.isSave=!1);if(_this6.keytechnologyList&&(keytechnology=_this6.keytechnologyList.join(",")),""==keytechnology)return _this6.warnMessage2(),_this6.disabled=!1,void(_this6.isSave=!1);void 0==_this6.projectData.project_id&&(_this6.projectData.project_id="");var data={id:_this6.projectData.project_id,project:{name:data.projectname,custom_field_values:{16:data.customercenter,17:_this6.projectInfo.CONTRACTMARKETNUMBER,18:data.contractmoney,22:data.projectlevel,23:data.operationalperiod,24:data.industry,25:data.region,28:data.projectstartdate,29:data.projectenddate,30:data.projecttype,32:keyword,35:data.constructioncontent,36:keytechnology,39:_this6.projectInfo.BUSINESSNUMBER,41:data.businesssystem,42:1,43:data.customerdepartment},parent_id:"",description:"",is_public:"1",user_id:_this6.userinfo.memberid,user_name:_this6.userinfo.emp_name,company_name:_this6.userinfo.account_name,company_id:_this6.userinfo.account_id,level_one_name:_this6.userinfo.subdept_name,level_one_id:_this6.userinfo.subdept_id,level_two_name:level_two_name,level_two_id:level_two_id,sale_name:data.contractmarket,sale_id:_this6.projectInfo.CONTRACTMARKETNUMBER,project_no:_this6.projectData.project_no},child:0,category:1,account_name:_this6.userinfo.account_name,username:_this6.userinfo.login_name,workflow_type:0}}Object(__WEBPACK_IMPORTED_MODULE_7__api_api_js__._33)("/sgpm/rest/api/integration/oa/flow",data).then(function(e){200==e.data.code?(_this6.disabled=!0,_this6.isSave=!0,alert("提交成功!"),_this6.$router.push({path:"audititem"})):501==e.data.code?(_this6.disabled=!1,_this6.isSave=!1,_this6.pId=e.data.data.project_id,_this6.pNum=e.data.data.project_no,alert("提交失败!")):(_this6.disabled=!1,_this6.isSave=!1,alert("提交失败!"))}).catch(function(e){_this6.disabled=!1,_this6.isSave=!1,alert("提交失败!")})}else if("-1814768306395265967"==_this6.userinfo.account_id||"7638091599462351621"==_this6.userinfo.account_id){var prostartdate=new Date(data.expectprojectstartdate.replace(/\-/g,"/")),proenddate=new Date(data.expectprojectenddate.replace(/\-/g,"/"));if(prostartdate>=proenddate)return alert("项目预计开始时间不能大于项目预计结束时间！"),_this6.disabled=!1,_this6.isSave=!1,!1;var tableDataInfo=JSON.parse(localStorage.getItem("tableDataInfo"));if(tableDataInfo){var dateArr={auditStatus:10,workflowId:"",jumpType:1};tableDataInfo=tableDataInfo.map(function(e){return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(e,dateArr)})}tableDataInfo=tableDataInfo||JSON.parse(localStorage.getItem("gtProjectSplit"));var quanzhong=[],money=[];if(tableDataInfo)for(var quanzhongAdd="",moneyAdd="",i=0;i<tableDataInfo.length;i++)tableDataInfo[i].jumpType=1,1==tableDataInfo.length?(quanzhong.push(tableDataInfo[0].milestoneWeight),quanzhongAdd=tableDataInfo[0].milestoneWeight):""!=tableDataInfo[i].milestoneWeight&&void 0!=tableDataInfo[i].milestoneWeight&&(quanzhong.push(tableDataInfo[i].milestoneWeight),quanzhongAdd=eval(quanzhong.join("+"))),1==tableDataInfo.length?(money.push(tableDataInfo[0].expectContributions),moneyAdd=tableDataInfo[0].expectContributions):""!=tableDataInfo[i].expectContributions&&void 0!=tableDataInfo[i].expectContributions&&(money.push(tableDataInfo[i].expectContributions),moneyAdd=eval(money.join("+")));if(moneyAdd&&(moneyAdd=that.keepTwoDecimalFull(moneyAdd),that.keepTwoDecimalFull(moneyAdd)),moneyAdd!=that.keepTwoDecimalFull(data.expectcontractamount)&&tableDataInfo)return alert("合同额(经费)必须等于预计合同额!"),_this6.disabled=!1,void(_this6.isSave=!1);if(quanzhongAdd>100&&tableDataInfo)return alert("所有项目进度权重不能大于100%!"),_this6.disabled=!1,void(_this6.isSave=!1);if(0==quanzhongAdd&&tableDataInfo)return alert("所有项目进度权重不能为0%!"),_this6.disabled=!1,void(_this6.isSave=!1);if(100!=quanzhongAdd&&tableDataInfo)return alert("所有项目进度权重必须等于100%!"),_this6.disabled=!1,void(_this6.isSave=!1);if(void 0!=that.$route.query.id&&null!=that.$route.query.id||_this6.pId){if("8416498716893399290"==_this6.userinfo.account_id){if(keyword=_this6.projectCodeList?_this6.projectCodeList.join(","):data.projectkeyword,""==keyword)return _this6.warnMessage3(),_this6.disabled=!1,void(_this6.isSave=!1)}else if(keyword=_this6.keywordList?_this6.keywordList.join(","):data.projectkeyword,""==keyword)return _this6.warnMessage(),_this6.disabled=!1,void(_this6.isSave=!1);if(keytechnology=_this6.keytechnologyList?_this6.keytechnologyList.join(","):data.keytechnology,""==keytechnology)return _this6.warnMessage2(),_this6.disabled=!1,void(_this6.isSave=!1);var saleClassUnitBId="";saleClassUnitBId=_this6.marketInfo.subdept_id?_this6.marketInfo.subdept_id:_this6.marketInfo.saleClassUnitBId;var projectSaleId="";projectSaleId=_this6.marketInfo.memberid?_this6.marketInfo.memberid:_this6.marketInfo.projectSaleId;var saleClassUnitCId="";saleClassUnitCId=_this6.marketInfo.dept_id?_this6.marketInfo.dept_id:_this6.marketInfo.saleClassUnitCId;var id="";id=that.$route.query.id?that.$route.query.id:_this6.pId;var projectNum="";projectNum=data.projectnumber?data.projectnumber:_this6.pNum;var data={id:id,projectName:data.projectname,projectNumber:projectNum,projectManagerId:_this6.userinfo.memberid,projectManagerName:_this6.userinfo.emp_name,projectSaleId:projectSaleId,projectSaleName:_this6.marketInfo.emp_name,classUnitBId:_this6.userinfo.subdept_id,classUnitBName:_this6.userinfo.subdept_name,classUnitCId:_this6.userinfo.dept_id,classUnitCName:_this6.userinfo.dept_name,saleClassUnitBId:saleClassUnitBId,saleClassUnitBName:_this6.marketInfo.subdept_name,saleClassUnitCId:saleClassUnitCId,saleClassUnitCName:_this6.marketInfo.dept_name,expectContractAmount:data.expectcontractamount,expectContractSigningDate:data.expectcontractsigningdate,expectProjectStartDate:data.expectprojectstartdate,expectProjectEndDate:data.expectprojectenddate,contractProjectType:data.contractprojecttype,contractProjectLevel:data.contractprojectlevel,projectKeyWord:keyword,projectOperationalPeriod:data.projectoperationalperiod,keyTechnology:keytechnology,contractContent:data.contractcontent,contractNumber:data.contractnumber,accountId:_this6.userinfo.account_id,accountName:_this6.userinfo.account_name,professionalWorkTypes:data.professionalworktypes,projectChildType:data.projectchildtype||"",userName:_this6.userinfo.login_name,projects:tableDataInfo}}else{if("8416498716893399290"==_this6.userinfo.account_id){if(_this6.projectCodeList&&(keyword=_this6.projectCodeList.join(",")),""==keyword)return _this6.warnMessage3(),_this6.disabled=!1,void(_this6.isSave=!1)}else if(_this6.keywordList&&(keyword=_this6.keywordList.join(",")),""==keyword)return _this6.warnMessage(),_this6.disabled=!1,void(_this6.isSave=!1);if(_this6.keytechnologyList&&(keytechnology=_this6.keytechnologyList.join(",")),""==keytechnology)return _this6.warnMessage2(),_this6.disabled=!1,void(_this6.isSave=!1);tableDataInfo||(tableDataInfo=[{projectContent:data.contractcontent,projectLevel:data.contractprojectlevel,projectManagerName:_this6.userinfo.emp_name,classUnitBName:_this6.userinfo.subdept_name,projectNumber:"",projectType:data.contractprojecttype,classUnitCId:_this6.userinfo.dept_id,classUnitBId:_this6.userinfo.subdept_id,expectContributions:data.expectcontractamount,professionalWorkTypes:data.professionalworktypes,milestoneWeight:100,classUnitCName:_this6.userinfo.dept_name,auditStatus:10,projectManagerId:_this6.userinfo.memberid,projectName:data.projectname,projectChildType:data.projectchildtype||"",workflowId:"",jumpType:1}]);var data={id:_this6.projectData.project_id,projectName:data.projectname,projectNumber:"",projectManagerId:_this6.userinfo.memberid,projectManagerName:_this6.userinfo.emp_name,projectSaleId:_this6.marketInfo.memberid,projectSaleName:_this6.marketInfo.emp_name,classUnitBId:_this6.userinfo.subdept_id,classUnitBName:_this6.userinfo.subdept_name,classUnitCId:_this6.userinfo.dept_id,classUnitCName:_this6.userinfo.dept_name,saleClassUnitBId:_this6.marketInfo.subdept_id,saleClassUnitBName:_this6.marketInfo.subdept_name,saleClassUnitCId:_this6.marketInfo.dept_id,saleClassUnitCName:_this6.marketInfo.dept_name,expectContractAmount:data.expectcontractamount,expectContractSigningDate:data.expectcontractsigningdate,expectProjectStartDate:data.expectprojectstartdate,expectProjectEndDate:data.expectprojectenddate,contractProjectType:data.contractprojecttype,contractProjectLevel:data.contractprojectlevel,projectKeyWord:keyword,projectOperationalPeriod:data.projectoperationalperiod,keyTechnology:keytechnology,contractContent:data.contractcontent,contractNumber:"",accountId:_this6.userinfo.account_id,accountName:_this6.userinfo.account_name,userName:_this6.userinfo.login_name,professionalWorkTypes:data.professionalworktypes,projectChildType:data.projectchildtype||"",projects:tableDataInfo}}Object(__WEBPACK_IMPORTED_MODULE_7__api_api_js__._33)("/sgpm/rest/api/integration/oa/gt/workflow",data).then(function(e){200==e.data.code?(alert("提交成功!"),_this6.disabled=!0,_this6.isSave=!0,_this6.$router.push({path:"audititem"})):501==e.data.code?(alert("提交失败!"),_this6.disabled=!1,_this6.isSave=!1,_this6.pId=e.data.data.id,_this6.pNum=e.data.data.projectNumber):(alert("提交失败!"),_this6.disabled=!1,_this6.isSave=!1)}).catch(function(e){alert("提交失败!"),_this6.disabled=!1,_this6.isSave=!1})}else if("8416498716893399290"==_this6.userinfo.account_id){var prostartdate=new Date(data.expectprojectstartdate.replace(/\-/g,"/")),proenddate=new Date(data.expectprojectenddate.replace(/\-/g,"/"));if(prostartdate>=proenddate)return alert("项目预计开始时间不能大于项目预计结束时间！"),_this6.disabled=!1,_this6.isSave=!1,!1;var tableDataInfo=JSON.parse(localStorage.getItem("tableDataInfo"));if(tableDataInfo){var dateArr={auditStatus:10,workflowId:"",jumpType:1};tableDataInfo=tableDataInfo.map(function(e){return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(e,dateArr)})}tableDataInfo=tableDataInfo||JSON.parse(localStorage.getItem("projectSplit"));var quanzhong=[],money=[];if(tableDataInfo)for(var quanzhongAdd="",moneyAdd="",i=0;i<tableDataInfo.length;i++)tableDataInfo[i].jumpType=1,1==tableDataInfo.length?(quanzhong.push(tableDataInfo[0].milestoneWeight),quanzhongAdd=tableDataInfo[0].milestoneWeight):""!=tableDataInfo[i].milestoneWeight&&void 0!=tableDataInfo[i].milestoneWeight&&(quanzhong.push(tableDataInfo[i].milestoneWeight),quanzhongAdd=eval(quanzhong.join("+"))),1==tableDataInfo.length?(money.push(tableDataInfo[0].expectContributions),moneyAdd=tableDataInfo[0].expectContributions):""!=tableDataInfo[i].expectContributions&&void 0!=tableDataInfo[i].expectContributions&&(money.push(tableDataInfo[i].expectContributions),moneyAdd=eval(money.join("+")));if(moneyAdd&&(moneyAdd=that.keepTwoDecimalFull(moneyAdd),that.keepTwoDecimalFull(moneyAdd)),moneyAdd!=that.keepTwoDecimalFull(data.expectcontractamount)&&tableDataInfo)return alert("合同额(经费)必须等于预计合同额!"),_this6.disabled=!1,void(_this6.isSave=!1);if(quanzhongAdd>100&&tableDataInfo)return alert("所有项目进度权重不能大于100%!"),_this6.disabled=!1,void(_this6.isSave=!1);if(0==quanzhongAdd&&tableDataInfo)return alert("所有项目进度权重不能为0%!"),_this6.disabled=!1,void(_this6.isSave=!1);if(100!=quanzhongAdd&&tableDataInfo)return alert("所有项目进度权重必须等于100%!"),_this6.disabled=!1,void(_this6.isSave=!1);if(void 0!=that.$route.query.id&&null!=that.$route.query.id||_this6.pId){if("8416498716893399290"==_this6.userinfo.account_id){if(keyword=_this6.projectCodeList?_this6.projectCodeList.join(","):data.projectkeyword,""==keyword)return _this6.warnMessage3(),_this6.disabled=!1,void(_this6.isSave=!1)}else if(keyword=_this6.keywordList?_this6.keywordList.join(","):data.projectkeyword,""==keyword)return _this6.warnMessage(),_this6.disabled=!1,void(_this6.isSave=!1);if(keytechnology=_this6.keytechnologyList?_this6.keytechnologyList.join(","):data.keytechnology,""==keytechnology)return _this6.warnMessage2(),_this6.disabled=!1,void(_this6.isSave=!1);var saleClassUnitBId="";saleClassUnitBId=_this6.marketInfo.subdept_id?_this6.marketInfo.subdept_id:_this6.marketInfo.saleClassUnitBId;var projectSaleId="";projectSaleId=_this6.marketInfo.memberid?_this6.marketInfo.memberid:_this6.marketInfo.projectSaleId;var saleClassUnitCId="";saleClassUnitCId=_this6.marketInfo.dept_id?_this6.marketInfo.dept_id:_this6.marketInfo.saleClassUnitCId;var id="";id=that.$route.query.id?that.$route.query.id:_this6.pId;var projectNum="";projectNum=data.projectnumber?data.projectnumber:_this6.pNum;var data={id:id,projectName:data.projectname,projectNumber:projectNum,projectManagerId:_this6.userinfo.memberid,projectManagerName:_this6.userinfo.emp_name,projectSaleId:projectSaleId,projectSaleName:_this6.marketInfo.emp_name,classUnitBId:_this6.userinfo.subdept_id,classUnitBName:_this6.userinfo.subdept_name,saleClassUnitBId:saleClassUnitBId,saleClassUnitBName:_this6.marketInfo.subdept_name,expectContractAmount:data.expectcontractamount,expectContractSigningDate:data.expectcontractsigningdate,expectProjectStartDate:data.expectprojectstartdate,expectProjectEndDate:data.expectprojectenddate,contractProjectType:data.contractprojecttype,contractProjectLevel:data.contractprojectlevel,projectKeyWord:keyword,projectOperationalPeriod:data.projectoperationalperiod,keyTechnology:keytechnology,contractContent:data.contractcontent,contractNumber:data.contractnumber,accountId:_this6.userinfo.account_id,accountName:_this6.userinfo.account_name,userName:_this6.userinfo.login_name,projects:tableDataInfo}}else{if("8416498716893399290"==_this6.userinfo.account_id){if(_this6.projectCodeList&&(keyword=_this6.projectCodeList.join(",")),""==keyword)return _this6.warnMessage3(),_this6.disabled=!1,void(_this6.isSave=!1)}else if(_this6.keywordList&&(keyword=_this6.keywordList.join(",")),""==keyword)return _this6.warnMessage(),_this6.disabled=!1,void(_this6.isSave=!1);if(_this6.keytechnologyList&&(keytechnology=_this6.keytechnologyList.join(",")),""==keytechnology)return _this6.warnMessage2(),_this6.disabled=!1,void(_this6.isSave=!1);tableDataInfo||(tableDataInfo=[{projectContent:data.contractcontent,projectLevel:data.contractprojectlevel,projectManagerName:_this6.userinfo.emp_name,classUnitBName:_this6.userinfo.subdept_name,projectNumber:"",projectType:data.contractprojecttype,classUnitBId:_this6.userinfo.subdept_id,expectContributions:data.expectcontractamount,milestoneWeight:100,auditStatus:10,projectManagerId:_this6.userinfo.memberid,projectName:data.projectname,workflowId:"",jumpType:1}]);var data={id:"",projectName:data.projectname,projectNumber:"",projectManagerId:_this6.userinfo.memberid,projectManagerName:_this6.userinfo.emp_name,projectSaleId:_this6.marketInfo.memberid,projectSaleName:_this6.marketInfo.emp_name,classUnitBId:_this6.userinfo.subdept_id,classUnitBName:_this6.userinfo.subdept_name,saleClassUnitBId:_this6.marketInfo.subdept_id,saleClassUnitBName:_this6.marketInfo.subdept_name,expectContractAmount:data.expectcontractamount,expectContractSigningDate:data.expectcontractsigningdate,expectProjectStartDate:data.expectprojectstartdate,expectProjectEndDate:data.expectprojectenddate,contractProjectType:data.contractprojecttype,contractProjectLevel:data.contractprojectlevel,projectKeyWord:keyword,projectOperationalPeriod:data.projectoperationalperiod,keyTechnology:keytechnology,contractContent:data.contractcontent,contractNumber:"",accountId:_this6.userinfo.account_id,accountName:_this6.userinfo.account_name,userName:_this6.userinfo.login_name,projects:tableDataInfo}}Object(__WEBPACK_IMPORTED_MODULE_7__api_api_js__._33)("/sgpm/rest/api/integration/oa/nk/workflow",data).then(function(e){200==e.data.code?(alert("提交成功!"),_this6.disabled=!0,_this6.isSave=!0,_this6.$router.push({path:"audititem"})):501==e.data.code?(alert("提交失败!"),_this6.disabled=!1,_this6.isSave=!1,_this6.pId=e.data.data.id,_this6.pNum=e.data.data.projectNumber):(alert("提交失败!"),_this6.isSave=!1,_this6.disabled=!1)}).catch(function(e){alert("提交失败!"),_this6.disabled=!1,_this6.isSave=!1})}}).catch(function(e){_this6.disabled=!1,_this6.isSave=!1})},saveDate:function saveDate(){var _this7=this;this.isSave=!0,this.disabled=!0;var dateArr={auditStatus:10,workflowId:"",jumpType:1};localStorage.getItem("projectSplit");var tableDataInfo=JSON.parse(localStorage.getItem("quanzhongDate"));tableDataInfo&&(tableDataInfo=tableDataInfo.map(function(e){return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(e,dateArr)}));var that=this;this.$refs.generateForm.getData().then(function(data){if("-1360422574114386809"==_this7.userinfo.account_id||"5326994013938795629"==_this7.userinfo.account_id){var level_two_name="",level_two_id="";data.implementationsecondary?_this7.deptInfo.forEach(function(e){e.deptId!=data.implementationsecondary&&e.deptName!=data.implementationsecondary||(level_two_name=e.deptName,level_two_id=e.deptId)}):(level_two_name="",level_two_id="");var prostartdate=new Date(data.projectstartdate.replace(/\-/g,"/")),proenddate=new Date(data.projectenddate.replace(/\-/g,"/"));if(prostartdate>=proenddate)return alert("项目预计开始时间不能大于项目预计结束时间！"),_this7.isSave=!1,_this7.disabled=!1,!1;var keyword="",keytechnology="";if(void 0!=that.$route.query.id&&null!=that.$route.query.id||_this7.pId){if("8416498716893399290"==_this7.userinfo.account_id){if(keyword=_this7.projectCodeList?_this7.projectCodeList.join(","):data.keyword,""==keyword)return _this7.warnMessage3(),_this7.isSave=!1,void(_this7.disabled=!1)}else if(keyword=_this7.keywordList?_this7.keywordList.join(","):data.keyword,""==keyword)return _this7.warnMessage(),_this7.isSave=!1,void(_this7.disabled=!1);if(keytechnology=_this7.keytechnologyList?_this7.keytechnologyList.join(","):data.keytechnology,""==keytechnology)return _this7.warnMessage2(),_this7.isSave=!1,void(_this7.disabled=!1);var id="";id=that.$route.query.id?that.$route.query.id:_this7.pId;var projectNum="";projectNum=data.projectnumber?data.projectnumber:_this7.pNum;var data={id:id,project:{name:data.projectname,custom_field_values:{16:data.customercenter,17:data.contractmarket,18:data.contractmoney,22:data.projectlevel,23:data.operationalperiod,24:data.industry,25:data.region,28:data.projectstartdate,29:data.projectenddate,30:data.projecttype,32:keyword,35:data.constructioncontent,36:keytechnology,39:data.businessnumber,41:data.businesssystem,42:1,43:data.customerdepartment},parent_id:"",description:"",is_public:"1",user_id:that.userinfo.memberid,user_name:that.userinfo.emp_name,company_name:that.userinfo.account_name,company_id:that.userinfo.account_id,level_one_name:that.userinfo.subdept_name,level_one_id:that.userinfo.subdept_id,level_two_name:level_two_name,level_two_id:level_two_id,sale_name:data.contractmarket,sale_id:data.saleid,project_no:projectNum},child:0,category:1,account_name:that.userinfo.account_name}}else{if("8416498716893399290"==_this7.userinfo.account_id){if(_this7.projectCodeList&&(keyword=_this7.projectCodeList.join(",")),""==keyword)return _this7.warnMessage3(),_this7.isSave=!1,void(_this7.disabled=!1)}else if(_this7.keywordList&&(keyword=_this7.keywordList.join(",")),""==keyword)return _this7.warnMessage(),_this7.isSave=!1,void(_this7.disabled=!1);if(_this7.keytechnologyList&&(keytechnology=_this7.keytechnologyList.join(",")),""==keytechnology)return _this7.warnMessage2(),_this7.isSave=!1,void(_this7.disabled=!1);void 0==_this7.projectData.project_id&&(_this7.projectData.project_id=""),_this7.projectInfo;var data={id:_this7.projectData.project_id,project:{name:data.projectname,custom_field_values:{16:data.customercenter,17:data.contractmarket,18:data.contractmoney,22:data.projectlevel,23:data.operationalperiod,24:data.industry,25:data.region,28:data.projectstartdate,29:data.projectenddate,30:data.projecttype,32:keyword,35:data.constructioncontent,36:keytechnology,39:_this7.projectInfo.BUSINESSNUMBER,41:data.businesssystem,42:1,43:data.customerdepartment},parent_id:"",description:"",is_public:"1",user_id:_this7.userinfo.memberid,user_name:_this7.userinfo.emp_name,company_name:_this7.userinfo.account_name,company_id:_this7.userinfo.account_id,level_one_name:_this7.userinfo.subdept_name,level_one_id:_this7.userinfo.subdept_id,level_two_name:level_two_name,level_two_id:level_two_id,sale_name:data.contractmarket,sale_id:_this7.projectInfo.CONTRACTMARKETNUMBER,project_no:_this7.projectData.project_no},child:0,category:1,account_name:_this7.userinfo.account_name}}Object(__WEBPACK_IMPORTED_MODULE_7__api_api_js__._25)("/sgpm/rest/api/server/pm/project",data).then(function(e){if(200==e.data.code){alert("保存成功!"),_this7.isSave=!1,_this7.disabled=!1;var t=e.data.data;_this7.pId=e.data.data.project_id,_this7.pNum=e.data.data.project_no,_this7.projectData=t;t.project_no;for(var a=_this7.jsonData.list,o=0;o<a.length;o++)for(var n=0;n<a[o].columns.length;n++)for(var i=0;i<a[o].columns[n].list.length;i++)"projectnumber"==a[o].columns[n].list[i].model&&(a[o].columns[n].list[i].options.placeholder=e.data.data.value)}else alert("保存失败!"),_this7.isSave=!1,_this7.disabled=!1}).catch(function(e){alert("保存失败!"),_this7.isSave=!1,_this7.disabled=!1})}else if("-1814768306395265967"==_this7.userinfo.account_id||"7638091599462351621"==_this7.userinfo.account_id){var prostartdate=new Date(data.expectprojectstartdate.replace(/\-/g,"/")),proenddate=new Date(data.expectprojectenddate.replace(/\-/g,"/"));if(prostartdate>=proenddate)return alert("项目预计开始时间不能大于项目预计结束时间！"),_this7.isSave=!1,_this7.disabled=!1,!1;var keyword="",keytechnology="",gtprojectId=localStorage.getItem("gtprojectId");tableDataInfo=tableDataInfo||(JSON.parse(localStorage.getItem("projectSplit"))||JSON.parse(localStorage.getItem("gtProjectSplit")));var quanzhong=[],money=[];if(tableDataInfo)for(var quanzhongAdd="",moneyAdd="",i=0;i<tableDataInfo.length;i++)1==tableDataInfo.length?(quanzhong.push(tableDataInfo[0].milestoneWeight),quanzhongAdd=tableDataInfo[0].milestoneWeight):""!=tableDataInfo[i].milestoneWeight&&void 0!=tableDataInfo[i].milestoneWeight&&(quanzhong.push(tableDataInfo[i].milestoneWeight),quanzhongAdd=eval(quanzhong.join("+"))),1==tableDataInfo.length?(money.push(tableDataInfo[0].expectContributions),moneyAdd=tableDataInfo[0].expectContributions):""!=tableDataInfo[i].expectContributions&&void 0!=tableDataInfo[i].expectContributions&&(money.push(tableDataInfo[i].expectContributions),moneyAdd=eval(money.join("+")));if(moneyAdd&&(moneyAdd=that.keepTwoDecimalFull(moneyAdd),that.keepTwoDecimalFull(moneyAdd)),moneyAdd!=that.keepTwoDecimalFull(data.expectcontractamount)&&tableDataInfo)return alert("合同额(经费)必须等于预计合同额!"),_this7.isSave=!1,void(_this7.disabled=!1);if(quanzhongAdd>100&&tableDataInfo)return alert("所有项目进度权重不能大于100%!"),_this7.isSave=!1,void(_this7.disabled=!1);if(0==quanzhongAdd&&tableDataInfo)return alert("所有项目进度权重不能为0%!"),_this7.isSave=!1,void(_this7.disabled=!1);if(100!=quanzhongAdd&&tableDataInfo)return alert("所有项目进度权重必须等于100%!"),_this7.isSave=!1,void(_this7.disabled=!1);if(void 0!=that.$route.query.id&&null!=that.$route.query.id||gtprojectId){var id="";if(that.$route.query.id?id=that.$route.query.id:gtprojectId&&(id=gtprojectId),"8416498716893399290"==_this7.userinfo.account_id){if(keyword=_this7.projectCodeList?_this7.projectCodeList.join(","):data.keyword?data.keyword:data.projectkeyword,""==keyword)return _this7.warnMessage3(),_this7.isSave=!1,void(_this7.disabled=!1)}else if(keyword=_this7.keywordList?_this7.keywordList.join(","):data.keyword?data.keyword:data.projectkeyword,""==keyword)return _this7.warnMessage(),_this7.isSave=!1,void(_this7.disabled=!1);if(keytechnology=_this7.keytechnologyList?_this7.keytechnologyList.join(","):data.keytechnology,""==keytechnology)return _this7.warnMessage2(),_this7.isSave=!1,void(_this7.disabled=!1);var saleClassUnitBId="";saleClassUnitBId=_this7.marketInfo.subdept_id?_this7.marketInfo.subdept_id:_this7.marketInfo.saleClassUnitBId;var projectSaleId="";projectSaleId=_this7.marketInfo.memberid?_this7.marketInfo.memberid:_this7.marketInfo.projectSaleId;var saleClassUnitCId="";saleClassUnitCId=_this7.marketInfo.dept_id?_this7.marketInfo.dept_id:_this7.marketInfo.saleClassUnitCId;var projectnumber="";projectnumber=data.projectnumber?data.projectnumber:localStorage.getItem("pNumber");var data={id:id,projectName:data.projectname,projectNumber:projectnumber,projectManagerId:_this7.userinfo.memberid,projectManagerName:_this7.userinfo.emp_name,projectSaleId:projectSaleId,projectSaleName:_this7.marketInfo.emp_name,classUnitBId:_this7.userinfo.subdept_id,classUnitBName:_this7.userinfo.subdept_name,classUnitCId:_this7.userinfo.dept_id,classUnitCName:_this7.userinfo.dept_name,saleClassUnitBId:saleClassUnitBId,saleClassUnitBName:_this7.marketInfo.subdept_name,saleClassUnitCId:saleClassUnitCId,saleClassUnitCName:_this7.marketInfo.dept_name,expectContractAmount:data.expectcontractamount,expectContractSigningDate:data.expectcontractsigningdate,expectProjectStartDate:data.expectprojectstartdate,expectProjectEndDate:data.expectprojectenddate,contractProjectType:data.contractprojecttype,contractProjectLevel:data.contractprojectlevel,projectKeyWord:keyword,projectOperationalPeriod:data.projectoperationalperiod,keyTechnology:keytechnology,contractContent:data.contractcontent,contractNumber:"",accountId:_this7.userinfo.account_id,accountName:_this7.userinfo.account_name,professionalWorkTypes:data.professionalworktypes,projectChildType:data.projectchildtype||"",projects:tableDataInfo}}else{if(tableDataInfo||(tableDataInfo=[{projectContent:data.contractcontent,projectLevel:data.contractprojectlevel,projectManagerName:_this7.userinfo.emp_name,classUnitBName:_this7.userinfo.subdept_name,projectNumber:"",projectType:data.contractprojecttype,classUnitCId:_this7.userinfo.dept_id,classUnitBId:_this7.userinfo.subdept_id,expectContributions:data.expectcontractamount,professionalWorkTypes:data.professionalworktypes,milestoneWeight:100,classUnitCName:_this7.userinfo.dept_name,auditStatus:10,projectManagerId:_this7.userinfo.memberid,projectName:data.projectname,projectChildType:data.projectchildtype||"",workflowId:"",jumpType:1}]),"8416498716893399290"==_this7.userinfo.account_id){if(_this7.projectCodeList&&(keyword=_this7.projectCodeList.join(",")),""==keyword)return _this7.warnMessage3(),_this7.isSave=!1,void(_this7.disabled=!1)}else if(_this7.keywordList&&(keyword=_this7.keywordList.join(",")),""==keyword)return _this7.warnMessage(),_this7.isSave=!1,void(_this7.disabled=!1);if(_this7.keytechnologyList&&(keytechnology=_this7.keytechnologyList.join(",")),""==keytechnology)return _this7.warnMessage2(),_this7.isSave=!1,void(_this7.disabled=!1);var data={id:_this7.projectData.project_id,projectName:data.projectname,projectNumber:"",projectManagerId:_this7.userinfo.memberid,projectManagerName:_this7.userinfo.emp_name,projectSaleId:_this7.marketInfo.memberid,projectSaleName:_this7.marketInfo.emp_name,classUnitBId:_this7.userinfo.subdept_id,classUnitBName:_this7.userinfo.subdept_name,classUnitCId:_this7.userinfo.dept_id,classUnitCName:_this7.userinfo.dept_name,saleClassUnitBId:_this7.marketInfo.subdept_id,saleClassUnitBName:_this7.marketInfo.subdept_name,saleClassUnitCId:_this7.marketInfo.dept_id,saleClassUnitCName:_this7.marketInfo.dept_name,expectContractAmount:data.expectcontractamount,expectContractSigningDate:data.expectcontractsigningdate,expectProjectStartDate:data.expectprojectstartdate,expectProjectEndDate:data.expectprojectenddate,contractProjectType:data.contractprojecttype,contractProjectLevel:data.contractprojectlevel,projectKeyWord:keyword,projectOperationalPeriod:data.projectoperationalperiod,keyTechnology:keytechnology,contractContent:data.contractcontent,contractNumber:"",accountId:_this7.userinfo.account_id,accountName:_this7.userinfo.account_name,professionalWorkTypes:data.professionalworktypes,projectChildType:data.projectchildtype||"",projects:tableDataInfo}}Object(__WEBPACK_IMPORTED_MODULE_7__api_api_js__._25)("/sgpm/rest/api/server/pm/gt/project",data).then(function(e){if(200==e.data.code){alert("保存成功!");for(var t=e.data.data.projects,a=0;a<t.length;a++)t[a].expectContributions=t[a].expectContributions/1e4;_this7.pId=e.data.data.id,_this7.pNum=e.data.data.projectNumber,_this7.isSave=!1,_this7.disabled=!1,localStorage.removeItem("gtprojectId"),localStorage.removeItem("gtProjectSplit"),localStorage.removeItem("tableDataInfo"),localStorage.setItem("gtprojectId",e.data.data.id),localStorage.setItem("gtProjectSplit",__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default()(e.data.data.projects)),__WEBPACK_IMPORTED_MODULE_3__bus__.a.$emit("gtProjectSplit",__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default()(e.data.data.projects))}else alert("保存失败!"),_this7.isSave=!1,_this7.disabled=!1}).catch(function(e){alert("保存失败!"),_this7.isSave=!1,_this7.disabled=!1})}else if("8416498716893399290"==_this7.userinfo.account_id){var prostartdate=new Date(data.expectprojectstartdate.replace(/\-/g,"/")),proenddate=new Date(data.expectprojectenddate.replace(/\-/g,"/"));if(prostartdate>=proenddate)return alert("项目预计开始时间不能大于项目预计结束时间！"),_this7.isSave=!1,_this7.disabled=!1,!1;if(""==_this7.marketInfo.saleClassUnitBId)return alert("请输入项目销售"),_this7.isSave=!1,_this7.disabled=!1,!1;var keyword="",keytechnology="",gtprojectId=localStorage.getItem("gtprojectId");tableDataInfo=tableDataInfo||(JSON.parse(localStorage.getItem("projectSplit"))||JSON.parse(localStorage.getItem("gtProjectSplit")));var quanzhong=[],money=[];if(tableDataInfo)for(var quanzhongAdd="",moneyAdd="",i=0;i<tableDataInfo.length;i++)1==tableDataInfo.length?(quanzhong.push(tableDataInfo[0].milestoneWeight),quanzhongAdd=tableDataInfo[0].milestoneWeight):""!=tableDataInfo[i].milestoneWeight&&void 0!=tableDataInfo[i].milestoneWeight&&(quanzhong.push(tableDataInfo[i].milestoneWeight),quanzhongAdd=eval(quanzhong.join("+"))),1==tableDataInfo.length?(money.push(tableDataInfo[0].expectContributions),moneyAdd=tableDataInfo[0].expectContributions):""!=tableDataInfo[i].expectContributions&&void 0!=tableDataInfo[i].expectContributions&&(money.push(tableDataInfo[i].expectContributions),moneyAdd=eval(money.join("+")));if(moneyAdd&&(moneyAdd=that.keepTwoDecimalFull(moneyAdd),that.keepTwoDecimalFull(moneyAdd)),moneyAdd!=that.keepTwoDecimalFull(data.expectcontractamount)&&tableDataInfo)return alert("合同额(经费)必须等于预计合同额!"),_this7.isSave=!1,void(_this7.disabled=!1);if(quanzhongAdd>100&&tableDataInfo)return alert("所有项目进度权重不能大于100%!"),_this7.isSave=!1,void(_this7.disabled=!1);if(0==quanzhongAdd&&tableDataInfo)return alert("所有项目进度权重不能为0%!"),_this7.isSave=!1,void(_this7.disabled=!1);if(100!=quanzhongAdd&&tableDataInfo)return alert("所有项目进度权重必须等于100%!"),_this7.isSave=!1,void(_this7.disabled=!1);if(void 0!=that.$route.query.id&&null!=that.$route.query.id||gtprojectId){var id="";if(that.$route.query.id?id=that.$route.query.id:gtprojectId&&(id=gtprojectId),"8416498716893399290"==_this7.userinfo.account_id){if(keyword=_this7.projectCodeList?_this7.projectCodeList.join(","):data.keyword?data.keyword:data.projectkeyword,""==keyword)return _this7.warnMessage3(),_this7.isSave=!1,void(_this7.disabled=!1)}else if(keyword=_this7.keywordList?_this7.keywordList.join(","):data.keyword?data.keyword:data.projectkeyword,""==keyword)return _this7.warnMessage(),_this7.isSave=!1,void(_this7.disabled=!1);if(keytechnology=_this7.keytechnologyList?_this7.keytechnologyList.join(","):data.keytechnology,""==keytechnology)return _this7.warnMessage2(),_this7.isSave=!1,void(_this7.disabled=!1);var saleClassUnitBId="";saleClassUnitBId=_this7.marketInfo.subdept_id?_this7.marketInfo.subdept_id:_this7.marketInfo.saleClassUnitBId;var projectSaleId="";projectSaleId=_this7.marketInfo.memberid?_this7.marketInfo.memberid:_this7.marketInfo.projectSaleId;var saleClassUnitCId="";saleClassUnitCId=_this7.marketInfo.dept_id?_this7.marketInfo.dept_id:_this7.marketInfo.saleClassUnitCId;var projectnumber="";projectnumber=data.projectnumber?data.projectnumber:localStorage.getItem("pNumber");var data={userName:_this7.userinfo.login_name,id:id,projectName:data.projectname,projectNumber:projectnumber,projectManagerId:_this7.userinfo.memberid,projectManagerName:_this7.userinfo.emp_name,projectSaleId:projectSaleId,projectSaleName:_this7.marketInfo.emp_name,classUnitBId:_this7.userinfo.subdept_id,classUnitBName:_this7.userinfo.subdept_name,saleClassUnitBId:saleClassUnitBId,saleClassUnitBName:_this7.marketInfo.subdept_name,expectContractAmount:data.expectcontractamount,expectContractSigningDate:data.expectcontractsigningdate,expectProjectStartDate:data.expectprojectstartdate,expectProjectEndDate:data.expectprojectenddate,contractProjectType:data.contractprojecttype,contractProjectLevel:data.contractprojectlevel,projectKeyWord:keyword,projectOperationalPeriod:data.projectoperationalperiod,keyTechnology:keytechnology,contractContent:data.contractcontent,contractNumber:"",accountId:_this7.userinfo.account_id,accountName:_this7.userinfo.account_name,projects:tableDataInfo}}else{if(tableDataInfo||(tableDataInfo=[{projectContent:data.contractcontent,projectLevel:data.contractprojectlevel,projectManagerName:_this7.userinfo.emp_name,classUnitBName:_this7.userinfo.subdept_name,projectNumber:"",projectType:data.contractprojecttype,classUnitBId:_this7.userinfo.subdept_id,expectContributions:data.expectcontractamount,milestoneWeight:100,auditStatus:10,projectManagerId:_this7.userinfo.memberid,projectName:data.projectname,workflowId:"",jumpType:1}]),"8416498716893399290"==_this7.userinfo.account_id){if(_this7.projectCodeList&&(keyword=_this7.projectCodeList.join(",")),""==keyword)return _this7.warnMessage3(),_this7.isSave=!1,void(_this7.disabled=!1)}else if(_this7.keywordList&&(keyword=_this7.keywordList.join(",")),""==keyword)return _this7.warnMessage(),_this7.isSave=!1,void(_this7.disabled=!1);if(_this7.keytechnologyList&&(keytechnology=_this7.keytechnologyList.join(",")),""==keytechnology)return _this7.warnMessage2(),_this7.isSave=!1,void(_this7.disabled=!1);var data={userName:_this7.userinfo.login_name,id:_this7.projectData.project_id,projectName:data.projectname,projectNumber:"",projectManagerId:_this7.userinfo.memberid,projectManagerName:_this7.userinfo.emp_name,projectSaleId:_this7.marketInfo.memberid,projectSaleName:_this7.marketInfo.emp_name,classUnitBId:_this7.userinfo.subdept_id,classUnitBName:_this7.userinfo.subdept_name,saleClassUnitBId:_this7.marketInfo.subdept_id,saleClassUnitBName:_this7.marketInfo.subdept_name,expectContractAmount:data.expectcontractamount,expectContractSigningDate:data.expectcontractsigningdate,expectProjectStartDate:data.expectprojectstartdate,expectProjectEndDate:data.expectprojectenddate,contractProjectType:data.contractprojecttype,contractProjectLevel:data.contractprojectlevel,projectKeyWord:keyword,projectOperationalPeriod:data.projectoperationalperiod,keyTechnology:keytechnology,contractContent:data.contractcontent,contractNumber:"",accountId:_this7.userinfo.account_id,accountName:_this7.userinfo.account_name,projects:tableDataInfo}}Object(__WEBPACK_IMPORTED_MODULE_7__api_api_js__._25)("/sgpm/rest/api/server/pm/nk/project",data).then(function(e){if(200==e.data.code){alert("保存成功!");for(var t=e.data.data.projects,a=0;a<t.length;a++)t[a].expectContributions=t[a].expectContributions/1e4;var o=_this7.jsonData.list;for(a=0;a<o.length;a++)for(var n=0;n<o[a].columns.length;n++)for(var i=0;i<o[a].columns[n].list.length;i++)"projectnumber"==o[a].columns[n].list[i].model&&(o[a].columns[n].list[i].options.placeholder=e.data.data.projectNumber);_this7.isSave=!1,_this7.disabled=!1,localStorage.removeItem("gtprojectId"),localStorage.removeItem("gtProjectSplit"),localStorage.removeItem("tableDataInfo"),localStorage.setItem("gtprojectId",e.data.data.id),localStorage.setItem("gtProjectSplit",__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default()(e.data.data.projects)),__WEBPACK_IMPORTED_MODULE_3__bus__.a.$emit("gtProjectSplit",__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default()(e.data.data.projects)),_this7.pId=e.data.data.id,_this7.pNum=e.data.data.projectNumber}else alert("保存失败!"),_this7.isSave=!1}).catch(function(e){alert("保存失败!"),_this7.isSave=!1,_this7.disabled=!1})}}).catch(function(e){_this7.isSave=!1,_this7.disabled=!1})},back:function(){this.$router.go(-1)}},beforeDestroy:function(){__WEBPACK_IMPORTED_MODULE_3__bus__.a.$off()}}},"4Nrf":function(e,t){},"5G6J":function(e,t){},"5GZU":function(e,t){},"5R7a":function(e,t){},"5Swz":function(e,t){},"5W1q":function(e,t){},"5WU3":function(e,t,a){"use strict";var o={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"error"},[t("p",[this._v("暂无访问权限请联系管理员")])])}]};t.a=o},"5bok":function(e,t){},"5s0Y":function(e,t,a){"use strict";var o=a("gBtx"),n=a.n(o),i=a("bOdI"),r=a.n(i),s=a("mvHQ"),l=a.n(s),c=a("woOf"),u=a.n(c),d=a("Dd8w"),p=a.n(d),m=a("P9l9"),h=a("QmSG"),_=a("NYxO"),f=(a("14gb"),a("M4fF"),{name:"ProjectList",props:["widget","models","rules","remote","datas"],data:function(){return{isContractFinish:!0,isAbnormalJX:!0,isPname:!0,btnMaxWidth:180,dynamiCheckList:[],isGZ:!1,form:{dicName:"All",keyWord:""},advancedDialog:!1,advancedForm:{fieldName:"",fieldValue:""},dynamicValidateForm:{domains:[{value:"",value1:"",isDisabled:!1}],type:[]},isTest:!1,checkFixed:!0,currentPage:1,advancedList:[],tableData:[],selectAry:[],page:{pageNum:1,pageSize:20,total:0},listConfig:[{key:"projectNum",label:"项目编号",isShow:!0},{key:"levelOneName",label:"实施B级单位",isShow:!0},{key:"levelTwoName",label:"实施C级单位",isShow:!1},{key:"projectManager",label:"项目经理",isShow:!0},{key:"customerCenter",label:"销售B级单位",isShow:!0},{key:"customerDepartment",label:"销售C级单位",isShow:!1},{key:"contractMarket",label:"销售人员",isShow:!0},{key:"projectType",label:"项目类型",isShow:!0,filters:[{text:"开发类项目",value:"开发类项目"},{text:"数据服务类项目",value:"数据服务类项目"},{text:"测绘类项目",value:"测绘类项目"},{text:"运维类项目",value:"运维类项目"},{text:"规划设计类项目",value:"规划设计类项目"},{text:"咨询服务类项目",value:"咨询服务类项目"},{text:"监理类项目",value:"监理类项目"},{text:"科研类项目",value:"科研类项目"},{text:"集成类项目",value:"集成类项目"},{text:"其他类项目",value:"其他类项目"},{text:"内部研发类项目",value:"内部研发类项目"},{text:"市场类项目",value:"市场类项目"},{text:"事务型项目",value:"事务型项目"}]},{key:"projectLevel",label:"项目级别",isShow:!1,filters:[{text:"超大型",value:"超大型"},{text:"大型",value:"大型"},{text:"中型",value:"中型"},{text:"小型",value:"小型"}]},{key:"contractAmount",label:"合同额",isShow:!0,isQfw:1,sortable:"custom"},{key:"backMoney",label:"回款额",isShow:!0,isQfw:1,sortable:"custom"},{key:"projectStatus",label:"项目状态",isShow:!0,filters:[{text:"已登记",value:"已登记"},{text:"运行中",value:"运行中"},{text:"暂停",value:"暂停"},{text:"完成",value:"完成"},{text:"关闭",value:"关闭"},{text:"异常关闭",value:"异常关闭"}]},{key:"stageName",label:"当前阶段",isShow:!0,filters:[{text:"启动",value:"启动"},{text:"规划",value:"规划"},{text:"实施",value:"实施"},{text:"收尾",value:"收尾"}]},{key:"percentageComplete",label:"实施进度",isShow:!0,isPercent:!0,sortable:"custom"},{key:"contractNumber",label:"合同编号",isShow:!0},{key:"keyword",label:"关键字",isShow:!0},{key:"totalBudget",label:"总预算",isShow:!0,isQfw:1,sortable:"custom"},{key:"totalCost",label:"总成本",isShow:!0,sortable:"custom"},{key:"outsourcePaymentRate",label:"外包支付率",isShow:!0,isPercentNot100:!0,sortable:"custom"},{key:"returnmoneypercentage",label:"回款率",isShow:!0,isPercent:!0,sortable:"custom"},{key:"predictGrossProfit",label:"预计毛利润",isShow:!0,isQfw:1,sortable:"custom"},{key:"curGrossProfit",label:"当前毛利润",isShow:!0,isQfw:1,sortable:"custom"},{key:"predictNetPorfit",label:"预计净利润",isShow:!0,isQfw:1,sortable:"custom"},{key:"curNetPorfit",label:"当前净利润",isShow:!0,isQfw:1,sortable:"custom"},{key:"progressProblems",label:"当前进展问题",isShow:!1},{key:"reviewTime",label:"最近Review时间",isShow:!1,sortable:"custom"},{key:"clientName",label:"客户名称",isShow:!1},{key:"contractSigningTime",label:"合同签订日期",isShow:!1,sortable:"custom"},{key:"contractCheckTime",label:"合同约定项目结束时间",isShow:!1,sortable:"custom"},{key:"proStartTime",label:"项目预计开始时间",isShow:!1,sortable:"custom"},{key:"proEndTime",label:"项目预计结束时间",isShow:!1,sortable:"custom"},{key:"trade",label:"行业",isShow:!1},{key:"region",label:"区域",isShow:!1},{key:"pigeonholeStatus",label:"归档状态",isShow:!1},{key:"company_name",label:"A级单位",isShow:!1}],isAlready:!1,isStart:!1,isFinish:!0,multipleSelection:[],advancedOptions:h.a.advancedOptions,advancedMultiples:{},dialogVisible:!1,dialogShowField:!1,checkedField:[],aLLField:[],tableLoading:!0,examineDialog:!1,passForm:{attitude:"1",comment:""},proParams:{},tableData1:[{role:"公司PMO专员意见",content:[{msgText:"项目登记信息规范完整",model:"2",disabled:!0},{msgText:"同意项目登记",model:"1"}],user:{date:"2010-2-3",userName:"张三"},auditComment:""},{role:"客户中心销售人员意见",content:[{msgText:"登记信息已知晓，同意项目登记",model:"1"}],user:{date:"2010-2-3",userName:"张三"},auditComment:""},{role:"工程中心部门经理意见",content:[{msgText:"项目基本信息、项目简介可通过",model:"1"},{msgText:"同意项目登记",model:"1"}],user:{date:"2010-2-3",userName:"张三"},auditComment:""},{role:"工程中心项目总监意见",content:[{msgText:"项目基本信息、项目简介可通过",model:"1"},{msgText:"同意项目登记",model:"1"}],user:{date:"2010-2-3",userName:"张三"},auditComment:""},{role:"工程中心总经理意见",content:[{msgText:"登记信息已知晓，同意项目登记",model:"1"}],user:{date:"2010-2-3",userName:"张三"},auditComment:""}],fieldName:"",fieldContent:[],sortFieldName:"",sort:null,isCared:null,tookenId:"",auditConfig:{10:"登记待提交",11:"登记审核中",12:"登记已审核",20:"启动待提交",21:"启动审核中",22:"启动已审核",30:"工作结项待提交",31:"工作结项审核中",32:"工作结项已审核",40:"合同结项待提交",41:"合同结项审核中",42:"合同结项已审核",50:"异常结项待提交",51:"异常结项审核中",52:"异常结项已审核"}}},filters:{formatThousands:function(e){if("--"==e)return"--";e=(e/=1e4).toFixed(2);if(0==/^[0-9]*[1-9][0-9]*$/.test(e))return e&&e.toString().replace(/(\d)(?=(\d{3})+\.)/g,function(e,t){return t+","});return(e+"").replace(/\d{1,3}(?=(\d{3})+$)/g,"$&,")},formatTip:function(e){var t=void 0!=e?parseFloat((100*e).toFixed(10)):"--";return t<10?"进度正常("+t+"%)":t>=10&&t<30?"一般延期("+t+"%)":t>=30?"严重延期("+t+"%)":"--"}},watch:{datas:{deep:!0,handler:function(e){this.datas,this.datas.options.url_a}}},computed:p()({},Object(_.c)(["userinfo","cacheParams","gjFromModel","gjFromCheckList"]),{projectType:function(){return this.datas.options.pro_type},headerAlign:function(e){},listCode:function(){return this.form.dicName},asideHeight:function(){return document.documentElement.clientHeight-230},dropdownName:function(){return"-1814768306395265967"==this.userinfo.account_id||"7638091599462351621"==this.userinfo.account_id||"8416498716893399290"==this.userinfo.account_id?"项目登记":"未签合同项目"}}),mounted:function(){this.init(),"8416498716893399290"==this.userinfo.account_id?this.listConfig=h.a.projectTableConfigNk:"-1814768306395265967"==this.userinfo.account_id&&(this.listConfig=h.a.projectTableConfigGT)},methods:p()({},Object(_.b)(["setDetailPage","setCacheParams","setGJFromModel","setGJFromCheck"]),{headerDragend:function(e,t,a,o){this.btnMaxWidth=e,e>200?this.isPname=!1:(this.isPname=!0,this.btnMaxWidth=200)},projectStartHandle:function(){localStorage.removeItem("projectMsg"),this.setDetailPage(!1),sessionStorage.setItem("isRevoke",2),localStorage.removeItem("keyWords"),localStorage.removeItem("keytechnologys"),localStorage.removeItem("globalParams"),localStorage.removeItem("keyWords"),localStorage.removeItem("keytechnologys"),localStorage.setItem("proId",this.multipleSelection.id),this.$router.push({path:"projectstart",query:{id:this.multipleSelection.id,category:this.multipleSelection.jumpType,judgestart:99}})},init:function(){"-1814768306395265967"==this.userinfo.account_id||"8416498716893399290"==this.userinfo.account_id||"7638091599462351621"==this.userinfo.account_id?this.isAlready=!0:this.isAlready=!1,this.getProjectTable(),this.getSelectList()},advancedConfirm:function(){this.dynamiCheckList;var e={isStart:this.dynamiCheckList};this.setCacheParams({});var t={};this.dynamicValidateForm.domains.forEach(function(e){e.value1.length>0&&(t[e.value]=e.value1)}),this.dynamiCheckList.length>0&&(t=u()(t,e)),this.advancedMultiples=t;var a={code:this.listCode,pageNum:this.page.pageNum,pageSize:this.page.pageSize,memberId:this.userinfo.memberid,fieldName:this.fieldName,content:this.fieldContent,multiples:this.advancedMultiples,sortFieldName:this.sortFieldName,sort:"ascending"==this.sort?1:2};this.getProjectTable(a),this.setGJFromModel(this.dynamicValidateForm),this.setGJFromCheck(e),this.advancedDialog=!1},advancedChange:function(e,t){var a=this;this.dynamicValidateForm.domains[t].value1="",Object(m.e)("/sgpm/rest/api/server/pm/project/condition?projectKey="+e,null).then(function(e){a.advancedList=e.data.data}).catch(function(e){})},popoverShow:function(){this.checkFixed=!1},popoverHide:function(){this.checkFixed=!0},advancedDialogOpen:function(){this.advancedDialog=!0,this.dynamicValidateForm=this.gjFromModel,this.dynamiCheckList=this.gjFromCheckList.isStart||[]},getProjectTable:function(e){var t=this;this.isGZ?this.tableLoading=!1:this.tableLoading=!0,this.isStart=!1,this.isFinish=!0,this.isContractFinish=!0,this.isAbnormalJX=!0;var a=this.cacheParams;e?a=e:("{}"==l()(a)&&(a={code:"All",pageNum:1,pageSize:20}),a=u()(a,{memberId:this.userinfo.memberid}),this.form.keyWord=a.keyWord,this.form.dicName=a.code),Object(m._18)("/sgpm/rest/api/server/pm/projects/item/dynamic",a).then(function(e){t.tableLoading=!1;e.data.data;t.tableData=e.data.data||[],t.page.total=e.data.meta.totalCount,t.setCacheParams(a)}).catch(function(e){})},keyWordSearch:function(){var e={code:this.listCode,pageNum:this.page.pageNum,pageSize:this.page.pageSize,memberId:this.userinfo.memberid,keyWord:this.form.keyWord.trim(),fieldName:this.fieldName,content:this.fieldContent,multiples:this.advancedMultiples,sortFieldName:this.sortFieldName,sort:"ascending"==this.sort?1:2};this.getProjectTable(e)},getSelectList:function(){var e=this;Object(m._17)("/sgpm/rest/api/server/pm/project/item?param=1",null).then(function(t){var a=t.data.data;e.selectAry=a}).catch(function(e){})},selectChange:function(e){var t=r()({code:this.listCode,memberId:this.userinfo.memberid,pageNum:this.page.pageNum,pageSize:this.page.pageSize},"memberId",this.userinfo.memberid);this.getProjectTable(t)},handleCurrentChange:function(e){var t,a=(t={code:this.listCode,memberId:this.userinfo.memberid,pageNum:e,pageSize:this.page.pageSize},r()(t,"memberId",this.userinfo.memberid),r()(t,"keyWord",this.form.keyWord),r()(t,"fieldName",this.fieldName),r()(t,"content",this.fieldContent),r()(t,"multiples",this.advancedMultiples),r()(t,"sortFieldName",this.sortFieldName),r()(t,"sort","ascending"==this.sort?1:2),t);this.getProjectTable(a)},filterHandler:function(e,t,a){if(0!=a.filteredValue.length){var o;this.fieldName=a.property,this.fieldContent=a.filteredValue;var n=(o={code:this.listCode,memberId:this.userinfo.memberid,pageNum:this.page.pageNum,pageSize:this.page.pageSize},r()(o,"memberId",this.userinfo.memberid),r()(o,"fieldName",a.property),r()(o,"content",a.filteredValue),r()(o,"multiples",this.advancedMultiples),o);this.getProjectTable(n),this.$refs.refTable.clearFilter()}},clearFilter:function(){this.$refs.refTable.clearFilter(),this.form.keyWord="",this.form.dicName="All",this.advancedMultiples={},this.dynamiCheckList=[],this.setGJFromModel({domains:[{value:"",value1:[],isDisabled:!1}]}),this.setGJFromCheck([]);var e={code:"All",pageNum:1,pageSize:20,memberId:this.userinfo.memberid,multiples:{}};this.getProjectTable(e)},handleSortChange:function(e,t,a){this.sortFieldName=e.prop,this.sort="ascending"==e.order?1:2;var o={code:this.listCode,memberId:this.userinfo.memberid,pageNum:this.page.pageNum,pageSize:this.page.pageSize,keyWord:this.form.keyWord,sortFieldName:e.prop,sort:"ascending"==e.order?1:2,multiples:this.advancedMultiples};this.getProjectTable(o)},handleSelectionChange:function(e){if(localStorage.setItem("projectInfo",l()(e)),e){e.auditStatus;this.isStart=12==e.audit_status&&this.userinfo.emp_name==e.projectManager;var t=100*e.percentageComplete==100&&22==e.audit_status&&this.userinfo.emp_name==e.projectManager||30==e.audit_status&&this.userinfo.emp_name==e.projectManager;this.isFinish=!t;var a=100==n()(e.outsourcePaymentRate)&&1==n()(e.returnmoneypercentage)&&11!=e.audit_status&&21!=e.audit_status&&31!=e.audit_status&&40!=e.audit_status&&41!=e.audit_status&&42!=e.audit_status&&51!=e.audit_status;this.userinfo.emp_name,e.contractMarket,this.isContractFinish=!a;var o="-1814768306395265967"==this.userinfo.account_id?e.projectManager:e.contractMarket,i=e.audit_status>12&&21!=e.audit_status&&31!=e.audit_status&&41!=e.audit_status&&50!=e.audit_status&&51!=e.audit_status&&52!=e.audit_status&&this.userinfo.emp_name==o;this.isAbnormalJX=!i}this.multipleSelection=e},handleCommandAdd:function(e){localStorage.removeItem("projectMsg"),this.setDetailPage(!1),sessionStorage.setItem("isRevoke",2),localStorage.removeItem("keyWords"),localStorage.removeItem("keytechnologys"),"a"==e?(localStorage.removeItem("businessProjectId"),localStorage.removeItem("globalParams"),this.$router.push({path:"Businessproject",query:{judgelogo:e}})):"b"==e?(localStorage.removeItem("businessProjectId"),localStorage.removeItem("globalParams"),this.$router.push({path:"Contractproject",query:{judgelogo:e}})):"c"==e?(localStorage.removeItem("globalParams"),localStorage.removeItem("keyWords"),localStorage.removeItem("keytechnologys"),localStorage.setItem("proId",this.multipleSelection.id),this.$router.push({name:"/projectstart",params:{id:this.multipleSelection.id,category:this.multipleSelection.jumpType,judgestart:99}})):"d"==e&&(this.multipleSelection,"-1360422574114386809"==this.userinfo.account_id||"5326994013938795629"==this.userinfo.account_id?this.$router.push({path:"nonContractual",query:{id:this.multipleSelection.id,judgelogo:e,projectNum:this.multipleSelection.projectNum}}):"8416498716893399290"==this.userinfo.account_id?this.$router.push({path:"gtNonContractual",query:{id:this.multipleSelection.id,judgelogo:e,projectNum:this.multipleSelection.projectNum}}):"-1814768306395265967"==this.userinfo.account_id&&this.$router.push({path:"gtNonContractual",query:{id:this.multipleSelection.id,judgelogo:e,projectNum:this.multipleSelection.projectNum}}))},dropdownJX:function(e){localStorage.removeItem("projectMsg"),this.setDetailPage(!1),sessionStorage.setItem("isRevoke",2),localStorage.removeItem("keyWords"),localStorage.removeItem("keytechnologys"),"d"==e?"-1360422574114386809"==this.userinfo.account_id||"5326994013938795629"==this.userinfo.account_id?this.$router.push({path:"nonContractual",query:{id:this.multipleSelection.id,judgelogo:e,projectNum:this.multipleSelection.projectNum}}):"8416498716893399290"!=this.userinfo.account_id&&"-1814768306395265967"!=this.userinfo.account_id&&"7638091599462351621"!=this.userinfo.account_id||this.$router.push({path:"gtNonContractual",query:{id:this.multipleSelection.id,judgelogo:e,projectNum:this.multipleSelection.projectNum}}):"b"==e?this.$router.push({path:"contractFinish",query:{id:this.multipleSelection.id,judgelogo:e,projectNum:this.multipleSelection.projectNum}}):"c"==e&&this.$router.push({path:"abnormalProject",query:{id:this.multipleSelection.id,judgelogo:e,projectNum:this.multipleSelection.projectNum}})},startPorject:function(e){localStorage.removeItem("globalParams"),localStorage.removeItem("keyWords"),localStorage.removeItem("keytechnologys"),localStorage.setItem("proId",this.multipleSelection.id),this.$router.push({name:"/projectstart",params:{id:this.multipleSelection.id,category:this.multipleSelection.jumpType,judgestart:99}})},handleCell:function(e,t,a,o){var n=this;if(3===a.cellIndex){var i={id:e.d_care_id,user_id:this.userinfo.memberid,project_id:e.id};e.d_care_id?(this.$message({message:"取消关注",type:"success"}),a.firstChild.firstChild.className="el-icon-star-on startGrey"):(this.$message({message:"关注成功",type:"success"}),a.firstChild.firstChild.className="el-icon-star-on startYellow"),Object(m.i)("/sgpm/rest/api/server/pm/project/care",i).then(function(e){200==e.data.code&&(n.isGZ=!0,n.getProjectTable({code:"All",pageNum:1,pageSize:20,memberId:n.userinfo.memberid,multiples:{}}),n.isGZ=!1)}).catch(function(e){})}},submitForm:function(e){this.$refs[e].validate(function(e){if(!e)return!1;alert("submit!")})},resetForm:function(e){this.$refs[e].resetFields()},removeDomain:function(e,t){if(1==t)return this.dynamicValidateForm.domains.splice(a,1),void this.dynamicValidateForm.domains.push({value:"",value1:"",isDisabled:!1});var a=this.dynamicValidateForm.domains.indexOf(e);-1!==a&&this.dynamicValidateForm.domains.splice(a,1)},addDomain:function(){var e=this;this.dynamicValidateForm.domains.push({value:""}),this.dynamicValidateForm.domains.forEach(function(t,a){e.dynamicValidateForm.domains.length-1==a?t.isDisabled=!1:t.isDisabled=!0})}})}),g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"list-container"},[a("div",{staticClass:"header"},[a("el-form",{ref:"form",staticClass:"search-form",attrs:{model:e.form,size:"mini",inline:!0}},[a("div",{staticClass:"search-left"},[a("el-form-item",{attrs:{label:"查看范围"}},[a("el-select",{attrs:{size:"mini",placeholder:"查看范围"},on:{change:e.selectChange},model:{value:e.form.dicName,callback:function(t){e.$set(e.form,"dicName",t)},expression:"form.dicName"}},e._l(e.selectAry,function(e){return a("el-option",{key:e.dicCode,attrs:{label:e.dicName,value:e.dicCode}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"search-right"},[a("el-form-item",[a("el-input",{attrs:{placeholder:"项目名称/项目/合同编号/项目关键字",size:"mini"},model:{value:e.form.keyWord,callback:function(t){e.$set(e.form,"keyWord",t)},expression:"form.keyWord"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.keyWordSearch},slot:"append"})],1)],1),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.advancedDialogOpen}},[e._v("高级查询")]),e._v(" "),a("el-dropdown",{attrs:{size:"mini","split-button":"",type:"primary"},on:{command:e.handleCommandAdd}},[e._v("\n          登记\n          "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"a"}},[e._v(e._s(e.dropdownName))]),e._v(" "),a("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:!e.isAlready,expression:"!isAlready"}],attrs:{command:"b"}},[e._v("已签合同项目")])],1)],1),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary",disabled:!e.isStart},on:{click:e.projectStartHandle}},[e._v("启动")]),e._v(" "),a("el-dropdown",{attrs:{size:"mini","split-button":"",type:"primary"},on:{command:e.dropdownJX}},[e._v("\n          结项\n          "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"d",disabled:e.isFinish}},[e._v("项目结项")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"b",disabled:e.isContractFinish}},[e._v("合同结项")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"c",disabled:e.isAbnormalJX}},[e._v("异常结项")])],1)],1),e._v(" "),a("el-button",{staticClass:"circle-btn",attrs:{type:"primary",icon:"el-icon-refresh",size:"mini",circle:""},on:{click:e.clearFilter}}),e._v(" "),a("el-popover",{staticClass:"popover",attrs:{placement:"right",width:"200",trigger:"click"},on:{show:e.popoverShow,hide:e.popoverHide}},[e._l(e.listConfig,function(t){return a("el-checkbox",{key:t.key,staticClass:"popover-checkbox",model:{value:t.isShow,callback:function(a){e.$set(t,"isShow",a)},expression:"item.isShow"}},[e._v("\n            "+e._s(t.label))])}),e._v(" "),a("el-button",{staticClass:"circle-btn",attrs:{slot:"reference",type:"primary",icon:"el-icon-menu",size:"mini",circle:""},slot:"reference"})],2)],1)])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"refTable",staticClass:"father-pro-table",staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{data:e.tableData,"highlight-current-row":"",border:"","min-width":"30","max-height":e.asideHeight,"header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0},"row-key":"id","default-expand-all":"","tree-props":{children:"son_project",hasChildren:"hasChildren"}},on:{"cell-click":e.handleCell,"current-change":e.handleSelectionChange,"sort-change":e.handleSortChange,"header-dragend":e.headerDragend}},[a("el-table-column",{attrs:{type:"index",width:"38",align:"center",label:"序号",fixed:e.checkFixed}}),e._v(" "),a("el-table-column",{attrs:{label:"项目名称",width:"140",align:"center",fixed:e.checkFixed,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"/projectInformation",params:{id:t.row.id,category:t.row.jumpType,projectName:t.row.name,projectNumber:t.row.projectNum,parent_id:t.row.parent_id,company_id:t.row.company_id,judgeproject:"项目信息"}}}},[a("span",{staticClass:"num"},[e._v(e._s(t.row.name))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"38",label:"进度",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e._f("formatTip")(t.row.delayPercentage),placement:"right"}},[1==t.row.color?a("div",{staticClass:"progress progress-red"}):e._e(),e._v(" "),2==t.row.color?a("div",{staticClass:"progress progress-yellow"}):e._e(),e._v(" "),3==t.row.color?a("div",{staticClass:"progress progress-green"}):e._e(),e._v(" "),null==t.row.color?a("div",{staticClass:"progress"}):e._e()])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"38",label:"关注",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-star-on startGrey",class:{"el-icon-star-on":e.isCared?e.isCared:t.row.isCare,startYellow:e.isCared?e.isCared:t.row.isCare}})]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"110",label:"审核进度",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.auditConfig[t.row.audit_status]))])]}}])}),e._v(" "),e._l(e.listConfig,function(t,o){return t.isShow?a("el-table-column",{key:o,attrs:{prop:t.key,"header-align":"center",align:"contractAmount"==t.key||"backMoney"==t.key||"totalBudget"==t.key||"totalCost"==t.key||"predictGrossProfit"==t.key||"curGrossProfit"==t.key||"predictNetPorfit"==t.key||"curNetPorfit"==t.key?"right":"center",label:t.label,width:"170",sortable:t.sortable?t.sortable:null,filters:t.filters?t.filters:null,"filter-method":t.filters?e.filterHandler:null},scopedSlots:e._u([{key:"default",fn:function(o){return[t.isShow&&1==t.isQfw?a("span",[e._v(e._s(e._f("formatThousands")(null==o.row[t.key]?"--":o.row[t.key])))]):e._e(),e._v(" "),t.isShow&&t.isPercent?a("span",[e._v(e._s(null==o.row[t.key]?"--":Math.round(100*o.row[t.key])+"%"))]):e._e(),e._v(" "),t.isShow&&t.isPercentNot100?a("span",[e._v(e._s(null==o.row[t.key]?"--":Math.round(o.row[t.key])+"%"))]):e._e(),e._v(" "),!t.isShow||1==t.isQfw||t.isPercent||t.isPercentNot100?e._e():a("span",[e._v(e._s(null==o.row[t.key]?"--":o.row[t.key]))])]}}],null,!0)}):e._e()})],2),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"高级筛选",visible:e.advancedDialog,width:"51%",center:""},on:{"update:visible":function(t){e.advancedDialog=t}}},[a("div",{staticClass:"dialog-wrap"},[a("div",{staticClass:"wrap-left"},[a("el-form",{ref:"dynamicValidateForm",staticClass:"demo-dynamic",attrs:{model:e.dynamicValidateForm,"label-width":"200px"}},e._l(e.dynamicValidateForm.domains,function(t,o){return a("el-form-item",{key:t.key,attrs:{prop:"domains."+o+".value",size:"mini"}},[a("el-select",{attrs:{placeholder:"请选择查询字段"},on:{change:function(a){return e.advancedChange(t.value,o)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.advancedOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-select",{attrs:{disabled:t.isDisabled,filterable:"",multiple:"",placeholder:"请选择"},model:{value:t.value1,callback:function(a){e.$set(t,"value1",a)},expression:"domain.value1"}},e._l(e.advancedList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,size:"mini",value:e.label}})}),1),e._v(" "),a("el-button",{staticClass:"btn-item",attrs:{type:"text"},on:{click:function(a){return a.preventDefault(),e.removeDomain(t,e.dynamicValidateForm.domains.length)}}},[a("i",{staticClass:"el-icon-remove btn-del"})]),e._v(" "),a("el-button",{staticClass:"btn-item",attrs:{type:"text"},on:{click:function(t){return t.preventDefault(),e.addDomain(t)}}},[a("i",{staticClass:"el-icon-circle-plus btn-plus"})])],1)}),1)],1),e._v(" "),a("div",{staticClass:"wrap-right"},[a("div",{staticClass:"grid-content bg-purple"},[a("el-checkbox-group",{model:{value:e.dynamiCheckList,callback:function(t){e.dynamiCheckList=t},expression:"dynamiCheckList"}},[a("el-checkbox",{attrs:{label:"可启动"}}),e._v(" "),a("el-checkbox",{attrs:{label:"可结项"}}),e._v(" "),a("el-checkbox",{attrs:{label:"本月未Review"}})],1)],1)])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.advancedDialog=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.advancedConfirm}},[e._v("确 定")])],1)]),e._v(" "),a("div",{staticClass:"page right"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":1,"page-sizes":[20],layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)},staticRenderFns:[]};var b=a("VU/8")(f,g,!1,function(e){a("IWIe"),a("/TWN")},"data-v-9f254088",null);t.a=b.exports},"6FIh":function(e,t){},"6anb":function(e,t){},"7+Qt":function(e,t){},"7DdP":function(e,t){},"7Otq":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAREAAADICAYAAADP0tXdAAAgAElEQVR4Xu1dS7YmtZHOHPeg25Oe2h73wHgFFNOeGAY9NqyA8gowKzCsAGoFwAqAFbRZQVMrMKxAfb6f0C1d3XxI8dAjM/Kc/xScm6lHKPQp3loXf25HgRDCH5Zl+T1N/L1lWf6D/hv/4v/Pnn8uy/ILvYR/8f943q7r+vPZx/73a1FgvdZ0fDaRAglQvFqWBaCR/qwJBSBJfz8sy/LTuq4ReKz79/YbUsBBpCGxrboKIUCCeJ+kCIBGKl1YdctpN0otABUHFg4FB/zGQWTARTkbUgIaHxJglKggZ832+jtUoQeorOv6Xa9BeL98CjiI8GnX9EtST/6yLAuAA9LGVR8AyrfLsnzn9pU5lthBZOB1SoDj40KD58CzYQ0NUsrXDigs2jX7yEGkGanLOiJV5a/LstwVOPYIBUD5ggDFDbRl7NTkLQeRJmQ+7ySEABUlgsf5B/d9AwACdefNuq5QffzpTAEHkY4LQFIH7Bx/Jxdsx9FM2TXcyH9f1/XNlKO/yKAdRDosJIHHp8uyvE4CvTqM5DJdAkxgO/nSY1Har6mDSEOaO3iYExuqDuwmDibmpH7XgYNIA2I7eDQg8vMuHEwaktxBxJjYIYTPXG0xJvJ+8wAT2Ey+7DaCG3TsIGK0yCEEeFrcYGpE38pmYTP5xL05lVQrfN1BpJBQpa+FEBCC/o+LR5WWkmO09+ASBph4prHiyjiIKBEzsXtA+vBnXAo87CXrun4+7hDnGpmDiMJ6UaDYVxPFevxI047BWjFtP6XGP1N3KYFknuiXZgvHfB5kE8/wIAL2b67iyJfKQURAQ9pY0XAqaMns05+oYBBAAoDxDBisek0AJ9YyAdj8yao/YbswvLpUIiCigwiTeGT7gPQxUho+JIxYq6MJYJSSj4Al1jpBJvJIoAKpBLaSWKGtdFr+3rIsDiIMNiC37Qi2j7cEGsglQT2OaRLTElABoOD374yl0PzE3cFMajqIVBCOGB/SB5i+1/MrhXh/faWTM4QQwaQ3oCB8HraSaQC5FyPGfh1ECleA1JdvOhpPUfULwAGp49IPAQpKISA5scfj6k0F1R1ECogVQgBDI/YjVkUv+ErlFagrOBnhkrzdyUhFmUB7JCq2VndAb9hJLg/aUk51EDmhYAgB4AEmbvnAqwLgAID4sywLATnsUPGqi1Z0ee1h88ekdhDZoQ/ZPwAgOAlbPfCuwOU4TbGdEEIaF2J+70wnMIEa+UkrJpitHweRjRUjAPm+oft2CvDIqszDALqn3pnXRu0AJgD2j+6oVp6BmoNIRqHGAAKbBySP4dWWEAKKKEGdqLULwaYAb4dJvgqBCWqItLCZABw/cCB5vmkcRBJ6NAwgg5sWjD+8wVTRK4W5/u3sVOP8nYAfditED1s/YiAhgzFCBR5RxHT96LSBbg4ixHK0WaDC1J60tUwL1eVjq5O5djBH79MpD2bXekxVAlpDgLN1/g42PFQbtnQVQoBUl4PeU7Txsiw/ziLxOIj8ZvlH6Lo1gED6gKV/eNUFiGEAIBGIxCf5GaKFECCVYJNaqjjieYQQABpHgAeQekQjjwwqtweRRgAC6ePDWU4WCvZCYJ3VgxD9D6waJxDEBeYAbEupRAQkpIahjVK3Nd6NtwMOo/7cGkRoEf/XMAoV0gcMpxCxp3hIXwdNrNU6FFM2j7/ZURs010IKJEhKhBRc+0QpBdeNdg0JuC2INPDCIGAMto9hTowSLg0h4PRGaccWzx8ldoXSAZK0iRO89MQvbVpFRQsh4JCB94v7REDBhV7N+e2WINIAQJDnAgCZKlSdiitxTkUu84PpmwTz0ZoDSKzUm2/Xdf2IQwiGWnPUzeO60ZYXet0VROBxsGJexERMo76k3NhYColdN5FGYmfG6g07stUAwHGAxQu92F6kElC8HYiEEKwABPYPSB/TJmyFEP7VwBaS8yWS3Jp6rAw9T5jb5+u6smrNKKg1e3se9MW4TMDkViBiyDwAkFc99NGSk6LknQYemb1hwDDYvD4L2UlgkLRwAyOGpPowIbUGG91iTKC/CZjcBkSIaeB10H5gQAWATGX/yInAFPNh+0Hsy+OE44agr+vahQ8NgQS8gPD4aiOn4UGXLjkkJbWrRrssnvYuPmvP0JV7CQAhANiKoDwiLfJ+3svBkwNGvUCE5g1XNiQS7ZqvbNdvQRDaGcuX/F2tXspdQAQeh3ilQQmBS965DIDQZjqLnsxpgrDsFzRlGgibGlc3pDArIGF5bChW5/9KmFDhHfGFXpcHEc7JWLAwlwKQu4OIsUTC8tYZ8e0ea0MqwThZBu5Lg4iRHeRyAMJUZ8B4f84t/iEEhMtXGUp7qjPpriK1V1u1YdlHlGNHCs7FxyusItWXBREjO8glAYQJIvjs6RY5yUVeo4BIIpHU5LOUbFDcAfTnkhczUAMYW+YwbQ2p2pZzZRCpPhFPFhluXBgSTXzttQym/f7dXLxH9DPy2rByhRoZWXNyVElPlwQRpnHviK+mjwMpAZ0QApjHKkZhbwgsm0HJfCTvGKnCcPtWJcvROJCoCCO2Ve7PFqmKgeRyIGKkxrCChyRM3OPbO4S919DVIGaDpdbEMROgxEu+tF3SbCC5IohIMyJzYrLDmGsYdoR3DSS4s2k1S8A7G8je3w1C0VX4idzAkFAAKpYSyqlEcikQMdgEXUKyuQyv8V1jaaRrfEgpvQzsEqrzJr5HQqlVCQfYAeGJ24zKvhqIIKwdpQ41ns2ITI2GR26DTjhY6K1tIyoncgtaGrhbTSq7Gd8YuBs4dxkQMdBfgbzVuQ8tmNq6jwaems1oV+t5Sdo3kHLN7GxJ9Xvt60c3gf8SIEJEQ5iwVkm/IT0Gkk1Q+60BKMchTBtroxxF+vO6rn+sXZea90kygY1Q82L0F6rYVUCkNnnsaC2mOyVrGKvmXQMgmapg9RatQgiQTrU8I01UOpKiUJpAQ0V9oYpNDyLKhYUvHVBWAyCZW1GjPikr2IozZstvlJPjYKjEyW5eRoLGjXXUAMBnhaSuACKahYVvr8YcuDq5d7m8oYr3l4n0VVZrmkgjWFfF3KBn0sjUIKJ8Krgac3KEExMicjIGPO2Jx7B7ANxh0b8MeKTkUVRrmkkjykDyFH07O4hoSiGqvntLkXqktimKMhq0EZFpLpqPMH9lb00zaSQBEmmS4VMM1bQgoiyFXEJfH2Fz3WkMioF5TaURAhLupVnpEv8Oh8bMIKLlkYEx9Q93OUHvtMmt56pcWLmpNEJAIk0ReRhYpwQR5biQ5lcWWDO3t9+OAopGVvO4kZwqCiD4yH2aFUS0pJC367ri4md/nAIsCihsxLTf5geaEAQfWcmzggiiUzU2f/NFY3GqfzQ0BRSD8kSlAjhEUrAt/tt0IKKY1+FSCIfr/JtNCoQQ4MrWSMlvnrMlNBD/14wggqg7jVwAl0IcENQooCiNNK+xIjyY5wIRBdErMo1LIWrbxxtKYi80rsDs4e5FnA/uYeY8/z2VJBJCQOj1Pzgzzb5p7k5TGLM3MTgFhEbK3gbWwCTv/8wGIhpFhzwuhMkt/tkxBchTwz3R08abV9QTVG+bB0QUVZnmOqdvvvtQQGikTAnVNA3jLiAija6LC9Tc+n2fLeQzVcypaZpRHkLghk28mkadEUwy5eyf1nXVqsHqO8YpYOnubRozEkLg2kTm8M4oXiTkbl3f+OYUUHQAPBLcrAcs3F//OYUkMtuiWC+6tz82BRTtd00OPUmMC+5RngVEcPXg+0LWaW7xFo7XP5+YAkpFi5o4AQTG4Echr+FBRNFt1gTVJ+Z7H7oiBZSk51/Wdf2d4rD2bDhwS3NuSnjU4ZkBRFCK7xsFQjbRL7fGSUC4VyAX0bOXLCGosGbTNqGo0ph6EyWqzLIsjxKJM4CIhmu3qVeGGAj5PagehV8JyqNcHdQ21CXF1Qr+TE4BpaQ80+jqEML3xKPV1I7mkBlARMMeYroQoD5JGwAOhOZL3ciQTJBoCHHRpZRq9h7jA6XLwM1secKYlid7zQwgwvVfp5xkLRJ+RuBRInHUcjiKUQMEHUxqKdf5feEmjaM3s4tIpJBlWZ6uAW0GIqR7IYCm+H5bpUX4dV1Xi80N6QOqyldKBZKOWB6xAl+s6/p5533h3VdSQBDEZXoICvfWsz3VBERCCNhoH9e6lJWyIk3ukwkhIJsYqkvLBwCME8ClkpZUF/QlyElJe1UPgQ8hSJJZn5kHTEGE7AQAEHhYqmt4hBA0ChCp2kNoTjBGSe0eXNaEVAKreLFEx+3Iv5NTQMkuonqlifBwfpEFbwYiG5utWiIQomXkgKebuqQsQV4XuJt7AUg6BY97kS5og++FVcPiCKv3zt7UFO6ufhEAZwIiFIuP0zq1RVRLBEr6pEp8yAASyBZfOJA0AAJJF1rxIrWmgAMQkagxmxfeq4PIDoBgTlV6ndDwE2lYrUJtEX9QAMFQXbWR7PBG34YQsE579xaXjkJcX0SoxmCcm4KAKogcAAgGUKVWCCPpVMXAaBguXe3G7zWvydl4ftN3p2Rcrdo/OdEU1KrdioBqIHICIBwQ0bigqlqFMiB+i03ww7quH7ToyPuop4CScbVKkk9HqWAHOdQkVECkAECWWp1OkFmoZnxUvq4zHRdQXSre5tz8FPxTz+bX+ALr1aL+Ri21FNSIXVXibCxKqvihYVcMIiUAgokyQEQj3F0qAiJa9K9nC3Xy95+WZUE7kBaeuWVpgeH+xk96l07zu1yFdBF9nqQZIOAP9MsDCkFrhAggbLyrO1zJvsfy0IQQ4E0EfSTPoT1GBCKlALIsSzUBlMohso1RClZ1gMdrZDmWrB71BxVOAlq38NaEEEAjJGaWRiJ3TR3oBSJKtrxTkwAbRCoABHuIAyLinJla6SfTIyVSCLuYDBnA0DdH3bm0NCIUzWGAhl0BtG3+aIQr1PCzkgpVtG9ZIEKLCX9z6aXaRYPJNrEUREQ5MyEEbqEWsTRAAA0JhgMkl7SNkKSG2KNSntsDCraBUoI8LUFEybNZfD9TNYgwT4OqsF1h4di41tXAFT8ULELVPI+YUkADthQk2SSW3zJ57mhIYqCvna9GbZESSUTAu/mUiu2JHBB5JNNVEvFUr8qkEBjLcOpIHgmIcFQZdn97k2SKpGap45LFkHyr5KlLhwDVBuUhmiUyKsWKHJa0UASQKmmtCkQE/u7ZQIRzkU8xctdsKOYJZlo/pWb80neVjJJbw2gqsSmByC6PKQJINV2KQUQY8dYDRFiqBdMroy6FCFWrKnpLN7rl90qZ3HtDbAa2liCi5IUBjeBRfFUba1MEIgpBV1WntBKqsjYS8+Qz07GZ1e5ZAGoJBpy2mXOv6apKbK9pOH/XCkR6AwjmWQoi7GKuRMxaEOkW8s4s9c+ORylhTMYdJmaSUcl4td5ROkyOhtOMTgJTQDr+p32U1eqRkhyeGEggrKC8UxBhGvfySc0EItUAVmI1l6wyw7DYbHNI5nX2rRLvHXZjvXaJWlrNVxsDf+wj5bo2IgA5lUQEbsY7gYhKuYEjTmdspksEnTHmfYZLL/4+GYh8siwLpIW8Vk/1vOkDMYCUgIikgEmc2HdUX7X4YmIl5uHaRGpPDPPb2xn0MAc2LtfWfKekAowiiWiU+kQb0jyYSA8VADkEESV9tNpdhEExNs0Wo7CMi5y+rU8zxmZydaYQrazXLlFnNBJKC2d1+poagOyCiII3Bm2zAEQRRFgbiQMiy7KolGDcW3qGZZ8191PWa/yC0kF2NOpmNyMy1tCK2qoAcgQitSJ9PmE2gAwAIpxo2dFcvCL6W3FvbbvMmJ2abljSak0Hg0ki6gCyCSIKCydGd2FgW1w31mnMnL/lVYecC81Z9iDO5rD+huHerhnSbMFmNXPL30Ug2YcWof4vXLwMd2I6WFbEWz5bZsBX3gwLREgS4hTWNYkVYV51WOVSl3Cm9bdKvLA1TDZ/cOYsyArndLcFINWRqKUdPwMR5ikc+1ITlZQYh52Ixgy1/nZd149KCV/yHtcm0MpYWDIHjXeM7AlNgVajFACTlm+oOFaxd7S2nxxEJLYQtRBiJRCpLsmY6K/IUka2cu2jZhupLPqUjtNMtaolhtb7dLghPoJTX2VrGE3VvQbh+3ukbmLzyUGEk72KCaiKhlogsiwLS8UQLrr4hBPWz1ADMi0Q0GhHWKgpHUJzo7MiP9eQshkfPIEIV3SmWYk3Tk4dJfGPPS6hbYi9gLRZUFyXU8GruBpVDTeO8i7RBgFXv2eOqakEgjGSkwCXv3PWkzPNt2RAZeXBcDpMQYQbUacqhSQqhbQ8IppilwoU2ofQN+gJFa+o8A1JH59Cf60oQJyvefNNwmE6yTdEJxRprilojY31cWnRbMn4Ev4FaEAlRshAq+dHAhAz+8fWRFIQ4W5a9kY9oqySJCLaVEwDaz4tVEmD0RXh/y8eOl1xXQTsMJLT6tJSyIakCloBcOEC35JMQA9EiYL2zYozJ4cB7Istnyb2j10QkehsVp4ApfgAkf5rYNCDiJmeEpqnlJphuyXna/RFG/e9pC145pqJ84n0AekI4CE5DGpJArCElAXJt8vzkEQYuRlxsGaeACW3njg5jhkG33oxxQF+rQd8pf7oEP6sseoCEnZRX/K1iyDCzdY1O/0EwPZsjhqSkhKgWe0btfgcqwFetV1SRWE01ZQoS8klUtVLOyl5L4II1x7C9n6cDU5RAhCPkcRlGEi14hTOpl/zd7YnqKYTf/cdBUjNheRRe+uBBhkRFQ71pbm6tjf4VWIPscxeVcqfwbxVpCXFOAUNRoptOIBoUvOkLTpMIHn0AA+M7kvYXGoLKVuTSAQiGqrC3gSF4JY2q2a1HgxIVMDRmsGu0H4ieWxdHN5iilBZkTxXdK9ziwGlfQBEOFmijzYsQQTtK7l5VUsFDgIkLoE02Cmd1ZZ0hsPYP7bIDhBh58s0ABHofX9S4BdW+PuBlITb6OFSe19hbDVNDH0i1Uxk5HcHAo9IJpNYLK01GB1EONdZbtHG5OSm6yUAwi0MrtW1arWY5C7tkJSJqOFeNo89UptWzpOurwhELA2rpM6wpaSMMKKgsyMi06mFcdaEYdesG2IBYEwbUh+umcio74YQEDGM6NcertozsgwfAyQFEbH79GSDckoVbjXJri1ytsLx7wmYwMakIZlA8vjCwaN0BereI08LgB/g0TLCtG6gy6LmGKjtuPR9gAiICLcV5zH3ECgZVzG3lqXwACT4AQRLM05jrkfM9yhK3OMs2p2/IbCPKgtsW6M/Jqq45qRFLt5lWczC3pMTXqvUfhdET/I6cNptnXiYHzxIDhqanJ21RSoLbB1a97YYjvZZ06pOAYtBA0TA2ChGxHmQTIZJmqUeS7xH2YRUXb0cYvk3bSlAvA2VRZoh3Xbg73qb4hKyGPaOU7BU7M4JaurDVgw6a6rS9OI67/cRXxRLK8wmdeTLZ+YQ0OSTCCLcgkQYC6QQGFjNYvkV7SJdVBrNBfO2tikwsK0DuS7cWKeh40PiSkQQ4RYmju1AkoHh0kStUSoOhLG6SnMhFCLgiFJHWk9khFnCNQ+nBX4c9/+v67rOYPhdIohgsP8SUh4GQiCnOpAI67/m05oC3YVrcdnPyVAdgWPEuI6nuB7hdbRTqDJgNI0aqynDQqWBaqMKJMLq6/mGMvcoXXYHd5xYCAGneXSddxzJbtcvggKFh980h51WtfcWQCKx2+QrP7zbbMRd0nJMicQR421GFe13I4qZtxeCzNOoMs8kEfxPCEHipUl5DO0ASdWMrUJUz/nfDawtEaGwr8TGATVldM/KYTqCMHRiKmk5v7xKamDN2eX1uq4opKLyhBA4d+Ru9W0e36Iy4Rs0klS7B2iMZhzdWoGidARhfNPwUaopYbYu9NaKEI39QA0BUcR2Eq26qzSwqRbqKnhCagpKKEQ1ZeS8lZTsuNMWiZCnkcVCg+p0V39sgQhOAxRu1nwAIEgm+1zSqFBEzLt2d69kMSq+DSEANKKKMoO0EWeHDY2Lsr4uAY/4kTAfbTpV+wWIkG1EKwX/xcYlqYSd1q5ced08gbBir13m1cy2AfAY1Si6R3PcmIc9gIuvqiXoEAL3TmuMZzqj/yaIEJBoqzXpgqFthMtXg4mknOMGx7htRAG6yK4RpQ1IGrOoKPnsxbVbhA6AqQyqkXhHIILTA94Vbk5NCXuifag50DeLH0UvEvo0zf0pntRELybqCaQMgMZskkZKbagsqKAHPjy1d5wtk1AKMa3PczZ27t93QYSkETAIpAWNIjtHY8TiQfdElN6p+ChE+3wcLo0crAxJGcj9iIAxk03jiOcgdcDWoXZPr5Avp8jY3SLoIYg0BpI4Pnhz8INotwsoLo1wz4397xLAAFDgN2JYuWTiqlJHPhChFDKtt/AURDoBySmgCFF/ixGbVT6T7AKNb8nwCTU1ShewYVxFwtgiEWI7YCRVkzo2AETijJjOrZvOvwhEOgNJHC/sJ1Ct8PsRUoqyNCK+/Ftjg2u2QbaLWFEt2i6uJl3skQwp+AANgIfY1nG0LsK4EDQ9tV2uGEQISGBAwybm1kfQ3CMxpF7zBJ3K5UsgAZpGgMj/1aT3DG1FdQW2DrWUi7OJC4Mgp5ZCQJsqEEmABEZQTo2Es/Xo/XfYYKDWmJ5cJ6daeiFW6vmIEgSAXBM4e9Nc2j824cOOtq4r/m36KARATi2FsEAkrhDFa0BctPbcNGWKRGVK+wWo1MY+7BVmTtud3T3aem1if12BI520IFMXzUzrkUlpUC2JZATERgGQtL5Oshfzer/9KDAMcCQHqeS6FTQzrUdGDUQSYiL7F9Zpy8C0fuzrPfeiAMLPo6pSHd1sOWhSY5Bjxg20u4QUIlJn8gUiCzWQ+TPLxfO2L08BBIFF4OhmmzqjslCNQfPTVC47o4VIndlqvMHdtGdz8r/PRYGopsSb/04jlntPT1grBMNHiMJlXO3qIJKoOLCXWF503ZuXvH8+BaK08UNLVyx/uO++pKheaamM6TJ1j2hnBiIZmMBmAlXnap4cDb68QxsI/IqSxlC2jRrik8oOAKn11KXdTO/SzWlmDiJphxSqDjAZIVithn/83ToKQNJ4ijAuSaqsa77P2wp2kJ/Wdb1cjE9TENmQTiChuEenz57Q6hU2jRQwppU0jggijEqNTV8yP6sLiGTSCZA53tbugKK1te3agWoSQQP5Rs3Cy+2mdNyyUiGsy6kxkWrdQWQDUGItTg9g67Vr3vUbAQNAAcC4pJRxIoHgkPteEA+C5i+pxgwJIhmgIIgHgBJ/bkexA5WokjzAgu4svh1g5OQlT4wUQNDslBXLStltKEnk5ESIiWcRVHBCuLendKV/ey+CBYK48ANQQMIYPjajbpryt8kTAwCRGkKnygznUG4aENmaHAW2xSpcsUDw3SWWHCggWfxyR1WEsyHwjSKATHMpN5dW+G5qENmbOImhUR2KEswVJJcIEJj6AxxIonhIFj1LGEiYcKRvFQEE9qRXd5DyLgkiO1JLq6LTJXsCcRT5k9ogAA7R6wEp4vIekBKiWb+jCCAAewDILdbtNiBCYiqubvxGiRkvkcatRIvpm1EEENDiMsl1JQt7KxAhING8tBx3s4quBi1ZJH/HlgLKADLdNZhS6t4ORAhIUN7xUynx6HvU8/xEqS1vpjEFFN24GPktDKn5Et0SRAhIUJFNq04s2oIrz12ljUFA0p0ygFw6oOyIzrcFEQISGL60XMJoC0FFDiSSnd3oW+V7i27jidlanruDiPYVGAASGFxvYZVvtN/VuwkhfEX5Whpt3xpAQMBbgwhJI6gNgU2vFf0KSQSqjdltaxqcf8c2lA2oICFqwL53d+nz9iBCQGIRQ+J2koGQKoSAdAm497mFlfPZ3CoWxG0iBcxMRjYUCNYsR+DqTQHtLV8h6QPFw1EMS+txAEko6ZJIQgxiOItrQl+v6/qlFgd7O2UUIOkD9g9JOcO8M9hAPna71zuyOIhkLGIIJJByYCsZ9hqEsq05/ltG0gcmfnsjqntnCvmfmNDivmEYXb/wKNfChWC8ZiR9OIAcrIVLIgfECSFoBqSlPUEagSv49oV/GDix+QmVhYDqYnGfyy0jUUvXxkHkhFJKBXr3enEVp5RTd94zVF1ijw4gJ2vkIFLAxMrRjXmPDxVnWRYkbnm0a8F64BUCD+Q/weui5bbNe/dM7YL1cBApIBIxLcRkSA5aQWlbYAL1CWDixtdjycMaPBBE9qF7YMo2h4NIGZ0eb9Hph43+l4rPOK+iD1wx4GBC1CObB+I9UMrB8vmOXLguFRZS2UGkkFDpayEEiNC4Z9hKKondQfKBZHJbA2wIAYCNYlLW4AGaX76oMoPdTz9xEDkl0fYLFOEKiUErC/hoJJBIYDf57g7SCUkdUFkAHpqBYns0RgQq1JfbgjVzGzw+cxCRUO83FUezwFHJaBBKD/C6FKAQcEDqgMQhvaahhI7xHVdfaqi18a6DiJCAZCuxNrrujRInJ1SeH2c0AoYQcMshpI1WEkdKRxhPEb7u0odwDziICAkYPzeMci0dIQyBj8uo8O+6rlsV5UvbMnmPQANSRryAzMo1ezZ+5DGhPq4bT88oVfB3B5ECItW8QmHXMLqOcJcwQAW/eAXF2xY2FQJU2IrSi8Vaqih7S+bJczXMXPiug0ghoWpfo5vkYS/RLC1QO4y99+M1mvECLLyX3nWTfgej454XKoaYw/iZ/rTGqdUO5oCcJYC7P8oUcBBRJmjeXEN3sPFMpmz+AR4EIK66GC2hg4gRYdNmSbxHbAmCpfxpQ4E3CIl3u4c9sR1E7Gn81AO5MXEyWke8NpzVcF0BPGA09WjfRkvjINKI0JlkAvsBJBPERFhHvXaYYZcuHTy6kN2DzTqR/bduSc1BjAQMfiMaYLvSp6BzxHog8A5GU7d5FBDM4hWXRCyoymiTXMOQTLRu5YN8x9cAAAEcSURBVGOMYppPEAMD4ECgnT+dKeAg0nkB8u7JbgIwgbrjqs47AsHTEqUOt3cMxLcOIgMtxgagxJBw/HtHQIG6AmkDEbgudQzKqw4igy7MBqAg4jOCSovM4V6UicDx9Yz5QL2I1rNfB5Ge1Gf2TSoPokUBKvh3ZikFakrM+fnWgYPJFB0/cxDpSHytrskoCzCBtAL38ciSCvJXHkmC+NdBQ4sL+rXjINKP9qY9U9EkAErMmsV/t3QjAyxiPs5ThrG7Yk2XvUvjDiJdyN6vU5JaMICYMJcOJr+zJQIP7BRbHpG0FkdM6vvZo0X7rW+Pnh1EelDd+3QKXIgCDiIXWkyfilOgBwUcRHpQ3ft0ClyIAg4iF1pMn4pToAcF/h8qwiGeEtAT7QAAAABJRU5ErkJggg=="},"7aCS":function(e,t){},"7jfO":function(e,t,a){"use strict";var o={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{height:"calc(100% - 53px)"}},[t("iframe",{attrs:{src:"http://worksheet.supermap.cn:8080",width:"100%",height:"100%",frameborder:"0"}})])}]};t.a=o},"7nh1":function(e,t,a){"use strict";var o,n=a("bOdI"),i=a.n(n),r=a("Gu7T"),s=a.n(r),l=a("mvHQ"),c=a.n(l),u=a("Dd8w"),d=a.n(u),p=a("14gb"),m=a("P9l9"),h=a("NYxO"),_=(o={name:"myteam",props:["widget","models","rules","remote","datas"],components:{},computed:d()({},Object(h.c)(["userinfo"])),data:function(){return{compValue:"",deptValue:"",people:"",role:"",id:"",show:!1,firstDeptName:[],pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()}},value1:"",value2:"",nkOpitonDept:[],optiondept:[],secondDept:[],optionpeople:[],optionrole:[],value:"",options_memberA:{},options_roles:{},projectMember:[],url_b:"",url_c:"",url_e:"",projectId:"",memberRole:!1,is_leave:"",note:"",duty:"",isleave:[{value:"1",label:"是"},{value:"0",label:"否"}],form:{companyId:"",departmentId:"",memberId:"",departmentName:""},companyOptions:[],departmentOptions:[],departmentOptionsCopy:[],memberOptions:[],_clear:this.clear}}},i()(o,"computed",{asideHeight:function(){return"/xiangmutuandui"==this.$route.path?document.documentElement.clientHeight-200:document.documentElement.clientHeight-340}}),i()(o,"created",function(){var e=this;this.isPermissionsA();var t=JSON.parse(localStorage.getItem("userinfo")),a={memberId:t.memberid,menuId:15};Object(m.W)("/template",a).then(function(a){var o=a.data.data.list;if(e.url_b=o[0].options.url_b,e.url_c=o[0].options.url_c,e.url_e=o[0].options.url_e,e.axios.get(o[0].options.url_a).then(function(a){e.firstDeptName=a.data.data,e.compValue=t.account_id,e.companySelectChange(e.compValue)}).catch(function(e){}),"-1814768306395265967"==t.account_id){Object(m.Z)("/enum/group?param=ProjectRole&group_id=-1814768306395265967").then(function(t){e.optionrole=t.data.data}).catch(function(e){})}else e.axios.get(o[0].options.url_d).then(function(t){e.optionrole=t.data.data}).catch(function(e){});if(p.a.$on("projectContent",function(t){t&&(e.projectId=t.id,e.getMemberTable(t.id))}),e.$route.query.id)var n=e.$route.query.id;else if("/xiangmutuandui"==e.$route.name){n=(n=JSON.parse(localStorage.getItem("projectData"))).ID}else if("/projectstart"==e.$route.name)n=localStorage.getItem("proId");e.getMemberTable(n)}).catch(function(e){})}),i()(o,"watch",{datas:{deep:!0,handler:function(e){this.datas,this.datas.options.url_a}}}),i()(o,"methods",{validateJyh:function(e){""!=e&&null!=e||this.$message.error("请输入工作职责")},isPermissionsA:function(){var e=this,t="",a=JSON.parse(localStorage.getItem("projectInfo"));"/xiangmutuandui"==this.$route.name?t=localStorage.getItem("projectNumber"):"/projectstart"==this.$route.name&&(t=a.projectNum);a={projectNo:t,memberId:JSON.parse(localStorage.getItem("userinfo")).memberid};Object(m.Z)("/member/role",a).then(function(t){var a=t.data.data.memberRole;e.memberRole=1!=a&&3!=a}).catch(function(e){})},getMemberTable:function(e){var t=this,a=e,o=this.url_e+"/"+a;this.axios.get(o).then(function(e){t.projectMember=e.data.data,localStorage.removeItem("projectMember"),localStorage.setItem("projectMember",c()(t.projectMember))}).catch(function(e){})},chickvalue:function(){var e=this;this.deptValue="",this.people="";var t=this.compValue,a=this.url_b+"/"+t;this.axios.get(a).then(function(t){"7034660345998100768"==e.compValue||"8416498716893399290"==e.compValue?e.nkOpitonDept=t.data.data:(e.nkOpitonDept=[],e.optiondept=t.data.data)}).catch(function(e){})},companySelectChange:function(e){var t=this;Object(m.l)("/sgpm/rest/api/server/pm/project/groups/"+e,null).then(function(e){200==e.status&&("7034660345998100768"==t.compValue||"8416498716893399290"==t.compValue?t.nkOpitonDept=e.data.data:(t.nkOpitonDept=[],t.departmentOptions=e.data.data,t.departmentSelectChange(t.form.departmentId),t.departmentOptionsCopy=[].concat(s()(t.departmentOptions))),t.form.departmentId="",t.form.memberId="",t.$emit("clearForm",!0))}).catch(function(e){})},departmentSelectChange:function(e){var t=this,a="";this.departmentOptions.find(function(t){return t.id===e}),this.departmentOptions.forEach(function(t){t.secondDepts.filter(function(t){e==t.secondDeptId&&(a=t.secondDeptName)})}),this.form.departmentName=a,Object(m.l)("/sgpm/rest/api/server/pm/project/group/"+e,null).then(function(e){200==e.status&&(t.optionpeople=e.data.data,t.form.memberId="",t.$emit("clearForm",!0))}).catch(function(e){})},filterMethodDepart:function(e){var t=new RegExp(e,"gi"),a=this.departmentOptionsCopy,o=[];if(""==e)return this.departmentOptions=this.departmentOptionsCopy,!1;for(var n=0;n<a.length;n++)if(t.test(a[n].firstDeptName))o.push(a[n]);else{var i=a[n].secondDepts;if(0!=i.length){for(var r=[],s=0;s<i.length;s++)i[s].secondDeptName.indexOf(e)>-1&&r.push(i[s]);r.length>0&&(a[n].secondDepts=r,o.push(a[n]))}}this.departmentOptions=o},getdeptName:function(){var e=this;this.people="";var t=this.deptValue,a=this.url_c+"/"+t;this.axios.get(a).then(function(t){e.optionpeople=t.data.data}).catch(function(e){})},changememeber:function(e){this.options_memberA={},this.optionpeople;for(var t=0;t<this.optionpeople.length;t++)-1!=this.optionpeople[t].memberid.indexOf(e)&&(this.optionpeople[t],this.options_memberA=this.optionpeople[t],this.options_memberA)},getRole:function(e){this.options_roles={};for(var t=0;t<this.optionrole.length;t++)-1!=this.optionrole[t].value.indexOf(e)&&(this.optionrole[t],this.options_roles=this.optionrole[t])},formatDateTime:function(e){var t=new Date(e),a=t.getFullYear(),o=t.getMonth()+1;o=o<10?"0"+o:o;var n=t.getDate();n=n<10?"0"+n:n;var i=t.getHours();i=i<10?"0"+i:i;var r=t.getMinutes(),s=t.getSeconds();return r=r<10?"0"+r:r,s=s<10?"0"+s:s,a+"-"+o+"-"+n},warnMessage:function(){this.$message({showClose:!0,message:"请选择公司名称/部门名称/人员/角色",type:"warning"})},addPeople:function(e){var t=this;if(""!=document.getElementById("compName").value&&""!=document.getElementById("memberName").value&&""!=document.getElementById("deptName").value&&""!=document.getElementById("role").value){this.people;var a=this.role,o=new Date;o.getYear(),o.getFullYear(),o.getMonth(),o.getDate();var n=this.formatDateTime(o);if(this.$route.query.id)var i=this.$route.query.id;else i=window.localStorage.projectId;this.projectId,this.options_memberA.memberid,this.options_memberA;var r={projectId:i,member:{user_name:this.options_memberA.emp_name,user_id:this.options_memberA.memberid,role:a,role_id:this.options_roles.id,status:"在职",unit_name:this.options_memberA.account_name,level_one:this.options_memberA.subdept_name,level_two:this.options_memberA.dept_name,enter_time:n,leave_time:"",is_leave:"0",note:"备注",duty:"工作职责"}};this.axios.post(this.url_e,r).then(function(e){200==e.data.code?(t.getMemberTable(i),t.people="",t.role=""):201==e.data.code&&(alert("请勿重复添加!"),t.people="",t.role="")}).catch(function(e){})}else this.warnMessage()},handleCurrentChange:function(e,t,a){t.currentTarget,this.value1=e.enter_time,this.value2=e.leave_time},editRole:function(e,t){var a=this,o={id:t.id,member:{user_name:t.user_name,user_id:t.user_id,role:t.role,status:t.status,unit_name:t.unit_name,level_one:t.level_one,level_two:t.level_two,enter_time:t.enter_time,leave_time:t.leave_time,person_type:t.person_type}};Object(m.s)("/sgpm/rest/api/server/pm/project/members/member",o).then(function(e){localStorage.removeItem("projectMember"),localStorage.setItem("projectMember",c()(a.projectMember))}).catch(function(e){})},handleEdit:function(e,t){var a=this;this.value1=this.value1,this.value2=this.value2,t.enter_time=this.value1,t.leave_time=this.value2;var o={id:t.id,member:{user_name:t.user_name,user_id:t.user_id,role:t.role,status:t.status,unit_name:t.unit_name,level_one:t.level_one,level_two:t.level_two,enter_time:t.enter_time,leave_time:t.leave_time,person_type:t.person_type,is_leave:t.is_leave,note:t.note,duty:t.duty}};Object(m.s)("/sgpm/rest/api/server/pm/project/members/member",o).then(function(e){localStorage.removeItem("projectMember"),localStorage.setItem("projectMember",c()(a.projectMember))}).catch(function(e){})},handleSelectionChange:function(e){if(this.multipleSelection=e,!(this.multipleSelection.length<=0)){for(var t=[],a=0;a<this.multipleSelection.length;a++)t.push(this.multipleSelection[a].id),this.idLi=t;this.id=this.multipleSelection[0].id}},handleDelete:function(){var e=this,t=this.idLi;if(t)for(var a=0;a<t.length;a++){var o=this.url_e+"/"+t[a];this.axios.delete(o).then(function(t){if(t.data.code="200"){if(e.$route.query.id)var a=e.$route.query.id;else a=localStorage.getItem("projectId");e.getMemberTable(a)}}).catch(function(e){})}else alert("请先选择一条信息!")}}),o),f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("div",{staticClass:"selectDiv"},[a("span",[e._v("公司名称")]),e._v(" "),a("el-select",{attrs:{filterable:"",placeholder:"请选择",id:"compName",size:"mini"},on:{change:e.companySelectChange},model:{value:e.compValue,callback:function(t){e.compValue=t},expression:"compValue"}},e._l(e.firstDeptName,function(t){return a("el-option",{key:t.firstDeptName+"-label",attrs:{label:t.firstDeptName,value:t.firstDeptName,id:t.firstDeptId},model:{value:t.firstDeptId,callback:function(a){e.$set(t,"firstDeptId",a)},expression:"item.firstDeptId"}})}),1),e._v(" "),a("el-form",{ref:"form",staticStyle:{display:"inline-block",width:"25%"},attrs:{model:e.form}},[a("el-form-item",{staticClass:"deptClass",attrs:{label:"部门名称"}},[e.nkOpitonDept.length>0?a("el-select",{staticStyle:{width:"60%"},attrs:{placeholder:"请选择",filterable:"",id:"deptName",size:"mini"},on:{change:e.getdeptName},model:{value:e.deptValue,callback:function(t){e.deptValue=t},expression:"deptValue"}},e._l(e.nkOpitonDept,function(e){return a("el-option",{key:e.firstDeptId,attrs:{label:e.firstDeptName,value:e.firstDeptId}})}),1):a("el-select",{staticClass:"deptC",staticStyle:{width:"70%",height:"28px"},attrs:{id:"deptName","filter-method":e.filterMethodDepart,filterable:"",placeholder:"请选择部门"},on:{change:e.departmentSelectChange},model:{value:e.form.departmentId,callback:function(t){e.$set(e.form,"departmentId",t)},expression:"form.departmentId"}},e._l(e.departmentOptions,function(t){return a("el-option-group",{key:t.firstDeptId,attrs:{label:t.firstDeptName}},e._l(t.secondDepts,function(e){return a("el-option",{key:e.secondDeptId,attrs:{label:e.secondDeptName,value:e.secondDeptId}})}),1)}),1)],1)],1),e._v(" "),a("span",[e._v("人员")]),e._v(" "),a("el-select",{attrs:{filterable:"",placeholder:"请选择",id:"memberName",size:"mini"},on:{change:function(t){return e.changememeber(t)}},model:{value:e.people,callback:function(t){e.people=t},expression:"people"}},e._l(e.optionpeople,function(t){return a("el-option",{key:t.id,attrs:{label:t.emp_name,value:t.emp_name,memberid:t.memberid},model:{value:t.memberid,callback:function(a){e.$set(t,"memberid",a)},expression:"item.memberid"}})}),1),e._v(" "),a("span",[e._v("角色")]),e._v(" "),a("el-select",{attrs:{filterable:"",placeholder:"请选择",id:"role",size:"mini"},on:{change:e.getRole},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}},e._l(e.optionrole,function(t){return a("el-option",{key:t.id,attrs:{label:t.value,value:t.value,id:t.id,type:t.enu_type},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}})}),1),e._v(" "),a("el-button",{staticClass:"addRow",attrs:{type:"primary",disabled:e.memberRole,size:"mini"},on:{click:e.handleDelete}},[e._v("移除")]),e._v(" "),a("el-button",{staticClass:"addRow",attrs:{type:"primary",disabled:e.memberRole,size:"mini"},on:{click:e.addPeople}},[e._v("添加")])],1),e._v(" "),a("el-table",{staticClass:"tb-edit",staticStyle:{width:"100%","border-top":"1px solid #EBEEF5"},attrs:{data:e.projectMember,height:e.asideHeight,border:"","header-cell-style":{fontSize:"14px",color:"#303133",height:"34px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"34px"},"cell-style":{padding:0},"highlight-current-row":""},on:{"row-click":e.handleCurrentChange,"selection-change":e.handleSelectionChange}},[e.show?a("el-table-column",{attrs:{prop:"id",label:"id"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"38"}}),e._v(" "),a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user_name",label:"项目成员",width:"78"}}),e._v(" "),a("el-table-column",{attrs:{label:"角色",width:"96"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"mini",filterable:"",placeholder:"请选择",disabled:e.memberRole},on:{change:function(a){return e.editRole(t.$index,t.row)}},model:{value:t.row.role,callback:function(a){e.$set(t.row,"role",a)},expression:"scope.row.role"}},e._l(e.optionrole,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("span",[e._v(e._s(t.row.role))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"员工状态",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{label:"预计加入时间",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-date-picker",{staticClass:"date-picker",attrs:{size:"mini",type:"date",placeholder:"预计加入时间","value-format":"yyyy-MM-dd",disabled:e.memberRole},on:{change:function(a){return e.handleEdit(t.$index,t.row)}},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}}),e._v(" "),a("span",[e._v(e._s(t.row.enter_time))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"预计离开时间",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-date-picker",{staticClass:"date-picker",attrs:{size:"mini",type:"date",placeholder:"预计离开时间","value-format":"yyyy-MM-dd",disabled:e.memberRole},on:{change:function(a){return e.handleEdit(t.$index,t.row)}},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}}),e._v(" "),a("span",[e._v(e._s(t.row.leave_time))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"unit_name",label:"A级单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"level_one",label:"B级单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"level_two",label:"C级单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"duty",label:"工作职责"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",disabled:e.memberRole},on:{change:function(a){return e.handleEdit(t.$index,t.row)},blur:function(a){return e.validateJyh(t.row.duty)}},model:{value:t.row.duty,callback:function(a){e.$set(t.row,"duty",a)},expression:"scope.row.duty"}}),e._v(" "),a("span",[e._v(e._s(t.row.duty))])]}}])},[a("template",{slot:"header"},[a("span",{staticClass:"start"},[e._v("*")]),e._v(" "),a("span",[e._v("工作职责")])])],2),e._v(" "),a("el-table-column",{attrs:{prop:"is_leave",label:"是否离开",width:"78"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"mini",filterable:"",placeholder:"请选择",disabled:e.memberRole},on:{change:function(a){return e.handleEdit(t.$index,t.row)}},model:{value:t.row.is_leave,callback:function(a){e.$set(t.row,"is_leave",a)},expression:"scope.row.is_leave"}},e._l(e.isleave,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("span",[e._v(e._s("0"==t.row.is_leave?"否":"是"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"note",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",disabled:e.memberRole},on:{change:function(a){return e.handleEdit(t.$index,t.row)}},model:{value:t.row.note,callback:function(a){e.$set(t.row,"note",a)},expression:"scope.row.note"}}),e._v(" "),a("span",[e._v(e._s(t.row.note))])]}}])}),e._v(" "),e.show?a("el-table-column",{attrs:{prop:"person_type",label:"雇佣类型"}}):e._e()],1)],1)},staticRenderFns:[]};var g=a("VU/8")(_,f,!1,function(e){a("MFzR"),a("Qq8v")},"data-v-551fb046",null);t.a=g.exports},"7xIN":function(e,t){},"8NtG":function(e,t){},"8sT1":function(e,t){},"9HKf":function(e,t){},"9hSc":function(e,t,a){"use strict";var o=a("Dd8w"),n=a.n(o),i=a("NYxO"),r=a("14gb"),s={name:"MarketSelect",props:["widget","models","rules","remote","datas"],data:function(){return{loading:!0,isDisabled:!0,showType:"",Marketform:{emp_name:"",subdept_name:"",dept_name:"",projectSaleId:"",saleClassUnitBId:"",saleClassUnitCId:""},marksetSelectAry:[],subdeptList:[],dept_name:""}},watch:{datas:{deep:!0,handler:function(e){this.datas,this.datas.options.url_a}}},computed:n()({},Object(i.c)(["userinfo"])),mounted:function(){var e=this;"-1814768306395265967"==this.userinfo.account_id||"7638091599462351621"==this.userinfo.account_id?this.showType=!0:"8416498716893399290"==this.userinfo.account_id&&(this.showType=!1),setTimeout(function(){var t=JSON.parse(localStorage.getItem("market"));t&&(e.Marketform.emp_name=t.projectSaleName,e.Marketform.subdept_name=t.saleClassUnitBName,e.Marketform.dept_name=t.saleClassUnitCName,e.Marketform.projectSaleId=t.projectSaleId,e.Marketform.saleClassUnitBId=t.saleClassUnitBId,e.Marketform.saleClassUnitCId=t.saleClassUnitCId)},1e3),setTimeout(function(){r.a.$emit("MarketSelectInfo",e.Marketform)},500)},methods:{remoteMethod:function(e){var t=this,a=this.datas.options.url_a+"?accountId="+this.userinfo.account_id+"&search="+e+"&pageSize=1000&pageNum=1";this.axios.get(a).then(function(e){200==e.status&&(t.loading=!1,t.marksetSelectAry=e.data.data)}).catch(function(e){})},changeHandle:function(e){var t=this,a=this.datas.options.url_b+"?memberId="+e;this.axios.get(a).then(function(e){if(200==e.status){var a=e.data.data;t.Marketform=a,t.subdeptList=a.departments,t.dept_name=a.dept_name,"管理团队"==a.dept_name&&(t.Marketform.dept_name="",t.$message({message:"您属于管理团队请选择c级部门",type:"warning"})),t.Marketform,r.a.$emit("MarketSelectInfo",t.Marketform)}}).catch(function(e){})},deptNameChange:function(e){var t=this.Marketform.departments.filter(function(t){if(t.deptId==e)return t.deptName})[0].deptName;this.Marketform.dept_name=t,this.Marketform,r.a.$emit("MarketSelectInfo",this.Marketform)}},created:function(){}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"market-select"},[a("el-form",{ref:"Marketform",staticStyle:{"margin-bottom":"0px"},attrs:{model:e.Marketform,"label-width":"120px"}},[a("el-form-item",{staticStyle:{"margin-bottom":"22px"},attrs:{label:this.datas.options.selectName}},[a("el-select",{staticClass:"contractMarket",staticStyle:{width:"60%"},attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词","remote-method":e.remoteMethod,loading:e.loading},on:{change:e.changeHandle},model:{value:e.Marketform.emp_name,callback:function(t){e.$set(e.Marketform,"emp_name",t)},expression:"Marketform.emp_name"}},e._l(e.marksetSelectAry,function(e,t){return a("el-option",{key:t,attrs:{label:e.empInfo,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"22px"},attrs:{label:this.datas.options.inputOne}},[a("el-input",{staticStyle:{width:"60%"},attrs:{disabled:e.isDisabled},model:{value:e.Marketform.subdept_name,callback:function(t){e.$set(e.Marketform,"subdept_name",t)},expression:"Marketform.subdept_name"}})],1),e._v(" "),e.showType?a("el-form-item",{staticStyle:{"margin-bottom":"22px"},attrs:{label:this.datas.options.inputTwo}},[a("el-select",{staticStyle:{width:"60%"},attrs:{disabled:e.isDisabled,placeholder:""},on:{change:e.deptNameChange},model:{value:e.Marketform.dept_name,callback:function(t){e.$set(e.Marketform,"dept_name",t)},expression:"Marketform.dept_name"}},e._l(e.subdeptList,function(e,t){return a("el-option",{key:t,attrs:{label:e.deptName,value:e.deptId}})}),1)],1):e._e(),e._v(" "),a("el-form-item",{staticStyle:{display:"none"}},[a("el-input",{model:{value:e.Marketform.projectSaleId,callback:function(t){e.$set(e.Marketform,"projectSaleId",t)},expression:"Marketform.projectSaleId"}})],1),e._v(" "),a("el-form-item",{staticStyle:{display:"none"}},[a("el-input",{model:{value:e.Marketform.saleClassUnitBId,callback:function(t){e.$set(e.Marketform,"saleClassUnitBId",t)},expression:"Marketform.saleClassUnitBId"}})],1),e._v(" "),a("el-form-item",{staticStyle:{display:"none"}},[a("el-input",{model:{value:e.Marketform.saleClassUnitCId,callback:function(t){e.$set(e.Marketform,"saleClassUnitCId",t)},expression:"Marketform.saleClassUnitCId"}})],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(s,l,!1,function(e){a("GCfQ")},null,null);t.a=c.exports},AOC5:function(e,t){},ApmE:function(e,t,a){"use strict";var o=a("P9l9"),n={name:"BoardWarning",components:{chart:a("pdpF").a},data:function(){return{path:{managerBoard:"应用业务群",managerBoardGroup:"集团",managerBoardPlatform:"平台业务群",managerBoardCloud:"云业务群",managerBoardInternational:"国际业务群",managerBoardResearch:"研究院",ManagerBoardGT:"国图信息",ManagerBoardNK:"南康科技",ManagerBoardAT:"北京世纪安图"},pathReversal:{"应用业务群":"managerBoard","平台业务群":"managerBoardPlatform","云业务群":"managerBoardCloud","国际业务群":"managerBoardInternational","研究院":"managerBoardResearch","国图信息":"ManagerBoardGT","南康科技":"ManagerBoardNK","北京世纪安图":"ManagerBoardAT"},warningOption:{title:{text:"在实施项目实际损益率低于30%",left:"center"},toolbox:{show:!0,feature:{saveAsImage:{show:!0}}},tooltip:{trigger:"axis",axisPointer:{type:"cross",axis:"x",crossStyle:{color:"#999"}}},grid:{left:"12%",bottom:"18%",top:"80"},xAxis:[{type:"category",data:[],axisLabel:{rotate:20}}],yAxis:[{type:"value",name:"个数",splitLine:{show:!1},axisLabel:{formatter:"{value}"}}],series:[]},progressOption:{title:{text:"在实施项目进度延期",left:"center"},toolbox:{show:!0,feature:{saveAsImage:{show:!0}}},tooltip:{trigger:"axis",axisPointer:{type:"cross",axis:"x",crossStyle:{color:"#999"}}},grid:{left:"12%",bottom:"18%",top:"80"},xAxis:[{type:"category",data:[],axisLabel:{rotate:20}}],yAxis:[{type:"value",name:"个数",splitLine:{show:!1},axisLabel:{formatter:"{value}"}}],series:[]},returnedMoneyOption:{title:{text:"在实施项目支出超过回款",left:"center"},toolbox:{show:!0,feature:{saveAsImage:{show:!0}}},tooltip:{trigger:"axis",axisPointer:{type:"cross",axis:"x",crossStyle:{color:"#999"}}},grid:{left:"12%",bottom:"18%",top:"80"},legend:{data:["差额","个数"],top:"10%"},xAxis:[{type:"category",data:[],axisLabel:{rotate:20}}],yAxis:[{type:"value",name:"金额(万元)",splitLine:{show:!1},axisLabel:{formatter:"{value}"}},{type:"value",name:"个数",splitLine:{show:!1},axisLabel:{formatter:"{value} "}}],series:[]},returnedPlanOption:{title:{text:"在实施项目回款延期",left:"center"},toolbox:{show:!0,feature:{saveAsImage:{show:!0}}},tooltip:{trigger:"axis",axisPointer:{type:"cross",axis:"x",crossStyle:{color:"#999"}}},grid:{left:"12%",bottom:"18%",top:"80"},legend:{data:["差额","个数"],top:"10%"},xAxis:[{type:"category",data:[],axisLabel:{rotate:20}}],yAxis:[{type:"value",name:"金额(万元)",splitLine:{show:!1},axisLabel:{formatter:"{value}"}},{type:"value",name:"个数",splitLine:{show:!1},axisLabel:{formatter:"{value} "}}],series:[]},planOption:{title:{text:"项目回款预警-回款滞后计划",left:"center"},toolbox:{show:!0,feature:{saveAsImage:{show:!0}}},tooltip:{trigger:"axis",axisPointer:{type:"cross",axis:"x",crossStyle:{color:"#999"}}},grid:{left:"12%",bottom:"25%"},legend:{data:["回款额","项目个数"],top:"bottom",left:"43%"},xAxis:[{type:"category",data:["专用工程中心","环境工程中心","智慧中心","城市网络中心"],axisLabel:{rotate:40}}],yAxis:[{type:"value",name:"金额(万元)",splitLine:{show:!1},axisLabel:{formatter:"{value}"}},{type:"value",name:"个数",splitLine:{show:!1},axisLabel:{formatter:"{value} "}}],series:[{color:"#65cee8",itemStyle:{opacity:.7,color:"#ade1fb"},name:"回款额",type:"bar",data:[10,52,200,334]},{type:"line",yAxisIndex:1,name:"项目个数",lineStyle:{color:"#fecb42",shadowOffsetY:3,shadowColor:"#af8003",shadowBlur:6},itemStyle:{color:"#ffb900"},data:[45,577,687,454]}]},overspendOption:{title:{text:"在实施项目支出超过预算",left:"center"},toolbox:{show:!0,feature:{saveAsImage:{show:!0}}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{type:"scroll",top:"8%",width:"80%",data:["运营费用超支个数","采购成本超支个数","人工成本超支个数","运营费用超支金额","采购成本超支金额","人工成本超支金额"]},grid:{top:"100",left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:[],axisLabel:{rotate:20}}],yAxis:[{type:"value",name:"金额(万元)",splitLine:{show:!1},axisLabel:{formatter:"{value}"},offset:12},{type:"value",name:"个数",splitLine:{show:!1},axisLabel:{formatter:"{value} "}}],series:[]},payOption:{title:{text:"已验收已100%回款待支付",left:"center"},toolbox:{show:!0,feature:{saveAsImage:{show:!0}}},tooltip:{trigger:"axis",axisPointer:{type:"cross",axis:"x",crossStyle:{color:"#999"}}},grid:{left:"12%",bottom:"15%",top:"80"},legend:{data:["待支付金额","待支付项目个数"],top:"10%"},xAxis:[{type:"category",data:[],axisLabel:{rotate:20}}],yAxis:[{type:"value",name:"金额(万元)",splitLine:{show:!1},axisLabel:{formatter:"{value}"}},{type:"value",name:"个数",splitLine:{show:!1},axisLabel:{formatter:"{value} "}}],series:[]},depositOption:{title:{text:"已验收履约保证金未回",left:"center"},toolbox:{show:!0,feature:{saveAsImage:{show:!0}}},tooltip:{trigger:"axis",axisPointer:{type:"cross",axis:"x",crossStyle:{color:"#999"}}},grid:{left:"12%",bottom:"18%",top:"80"},legend:{data:["应回未回金额","应回未回个数"],top:"10%"},xAxis:[{type:"category",data:[],axisLabel:{rotate:20}}],yAxis:[{type:"value",name:"金额(万元)",splitLine:{show:!1},axisLabel:{formatter:"{value}"}},{type:"value",name:"个数",splitLine:{show:!1},axisLabel:{formatter:"{value} "}}],series:[]},hrOption:{toolbox:{show:!0,feature:{saveAsImage:{show:!0}}},title:{text:"项目工时填写率小于30%（示意图）",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"cross",axis:"x",crossStyle:{color:"#999"}}},grid:{left:"12%",bottom:"15%",top:"80"},xAxis:[{type:"category",data:["专用工程中心","智慧城市工程中心","城市网格工程中心","智慧设施工程中心"],axisLabel:{rotate:20}}],yAxis:[{type:"value",name:" %",splitLine:{show:!1},axisLabel:{formatter:"{value}"}}],series:[{color:"#65cee8",itemStyle:{opacity:.9,color:"#FF9999"},name:"填写率",type:"bar",data:[3,12,21,29]}]}}},mounted:function(){var e=this;this.$nextTick(function(){e.init()})},computed:{asideHeight:function(){return document.documentElement.clientHeight-150}},methods:{init:function(){this.getProgressWarning(),this.getOverSpendWarning(),this.getrepaymenWarning(),this.getPayWarning(),this.getEarnestMoneyWarning(),this.getProfitWarning(),this.getRepaymenPlanWarning()},getOverSpendWarning:function(){var e=this,t=this.$route.path.slice(1);Object(o.q)("/board/over/expend/early/warning?group="+this.path[t],null).then(function(t){if(200==t.data.code){var a=[],o=[],n=[],i=[],r=[],s=[],l=[];t.data.data.forEach(function(e){a.push(e.name),o.push(e.caigouBalance),n.push(e.caigouCount),i.push(e.rengongBalance),r.push(e.rengongCount),s.push(e.yunyingBalance),l.push(e.yunyingCount)}),e.overspendOption.series.push({name:"运营费用超支金额",type:"bar",label:{normal:{show:!0,position:"top",color:"#000"}},itemStyle:{opacity:.9,color:"#FF9999"},data:s}),e.overspendOption.series.push({name:"采购成本超支金额",type:"bar",label:{normal:{show:!0,position:"top",color:"#000"}},itemStyle:{opacity:.9,color:"#FFC266"},data:o}),e.overspendOption.series.push({name:"人工成本超支金额",type:"bar",label:{normal:{show:!0,position:"top",color:"#000"}},itemStyle:{opacity:.9,color:"#FFFF00"},data:i}),e.overspendOption.series.push({name:"运营费用超支个数",symbolSize:4,symbol:"circle",type:"line",yAxisIndex:1,itemStyle:{color:"#FF9999"},lineStyle:{color:"#FF9999",shadowOffsetY:3,shadowColor:"#af8003",shadowBlur:6},data:l}),e.overspendOption.series.push({name:"采购成本超支个数",symbolSize:4,symbol:"circle",type:"line",yAxisIndex:1,itemStyle:{color:"#f4a351"},lineStyle:{color:"#FFC266",shadowOffsetY:3,shadowColor:"#833d02",shadowBlur:6},data:n}),e.overspendOption.series.push({name:"人工成本超支个数",symbolSize:4,symbol:"circle",type:"line",yAxisIndex:1,itemStyle:{color:"#FFFF00"},lineStyle:{color:"#FFFF00",shadowOffsetY:3,shadowColor:"#f56954",shadowBlur:6},data:r}),e.overspendOption.xAxis[0].data=a}}).catch(function(e){})},getPayWarning:function(){var e=this,t=this.$route.path.slice(1);Object(o._5)("/board/warning/pay?group="+this.path[t],null).then(function(t){if(200==t.data.code){var a=[],o=[],n=[];t.data.data.forEach(function(e){a.push(e.allCount),o.push(e.waitPayMoney),n.push(e.bLevelUnit)}),e.payOption.series.push({color:"#FF9999",label:{normal:{show:!0,position:"top",color:"#000"}},itemStyle:{opacity:.9,color:"#FF9999"},name:"待支付金额",type:"bar",data:o}),e.payOption.series.push({type:"line",yAxisIndex:1,name:"待支付项目个数",lineStyle:{color:"#fecb42",shadowOffsetY:3,shadowColor:"#af8003",shadowBlur:6},itemStyle:{color:"#ffb900"},data:a}),e.payOption.xAxis[0].data=n}}).catch(function(e){})},getEarnestMoneyWarning:function(){var e=this,t=this.$route.path.slice(1);Object(o.r)("/board/warning/earnestmoney?group="+this.path[t],null).then(function(t){if(200==t.data.code){var a=[],o=[],n=[];t.data.data.forEach(function(e){a.push(e.allCount),o.push(e.money),n.push(e.bLevelUnit)}),e.depositOption.series.push({color:"#65cee8",label:{normal:{show:!0,position:"top",color:"#000"}},itemStyle:{opacity:.9,color:"#FF9999"},name:"应回未回金额",type:"bar",data:o}),e.depositOption.series.push({type:"line",yAxisIndex:1,name:"应回未回个数",lineStyle:{color:"#fecb42",shadowOffsetY:3,shadowColor:"#af8003",shadowBlur:6},itemStyle:{color:"#ffb900"},data:a}),e.depositOption.xAxis[0].data=n}}).catch(function(e){})},getrepaymenWarning:function(){var e=this,t=this.$route.path.slice(1);Object(o._22)("/board/early/warning/repayment?group="+this.path[t],null).then(function(t){if(200==t.data.code){var a=[],o=[],n=[];t.data.data.forEach(function(e){a.push(e.allCount),o.push(e.paymentDifference),n.push(e.name)}),e.returnedMoneyOption.series.push({color:"#65cee8",label:{normal:{show:!0,position:"top",color:"#000"}},itemStyle:{opacity:.9,color:"#FF9999"},name:"差额",type:"bar",data:o}),e.returnedMoneyOption.series.push({type:"line",yAxisIndex:1,name:"个数",lineStyle:{color:"#fecb42",shadowOffsetY:3,shadowColor:"#af8003",shadowBlur:6},itemStyle:{color:"#ffb900"},data:a}),e.returnedMoneyOption.xAxis[0].data=n}}).catch(function(e){})},getRepaymenPlanWarning:function(){var e=this,t=this.$route.path.slice(1);Object(o._21)("/board/early/warning/payment/delay?group="+this.path[t],null).then(function(t){if(200==t.data.code){var a=[],o=[],n=[];t.data.data.forEach(function(e){a.push(e.allCount),o.push(e.paymentDifference),n.push(e.name)}),e.returnedPlanOption.series.push({color:"#65cee8",label:{normal:{show:!0,position:"top",color:"#000"}},itemStyle:{opacity:.9,color:"#FF9999"},name:"差额",type:"bar",data:o}),e.returnedPlanOption.series.push({type:"line",yAxisIndex:1,name:"个数",lineStyle:{color:"#fecb42",shadowOffsetY:3,shadowColor:"#af8003",shadowBlur:6},itemStyle:{color:"#ffb900"},data:a}),e.returnedPlanOption.xAxis[0].data=n}}).catch(function(e){})},getProgressWarning:function(){var e=this,t=this.$route.path.slice(1);Object(o._12)("/board/process/plan/warning?group="+this.path[t],null).then(function(t){if(200==t.data.code){var a=[],o=[];t.data.data.forEach(function(e){o.push(e.centerName),a.push(e.count)}),e.progressOption.series.push({color:"#65cee8",label:{normal:{show:!0,position:"top",color:"#000"}},itemStyle:{opacity:.9,color:"#FF9999"},name:"个数",type:"bar",data:a}),e.progressOption.xAxis[0].data=o}}).catch(function(e){})},getProfitWarning:function(){var e=this,t=this.$route.path.slice(1);Object(o._13)("/board/process/profit/warning?group="+this.path[t],null).then(function(t){if(200==t.data.code){var a=[],o=[];t.data.data.forEach(function(e){o.push(e.centerName),a.push(e.count)}),e.warningOption.series.push({color:"#65cee8",itemStyle:{opacity:.9,color:"#FF9999"},label:{normal:{show:!0,position:"top",color:"#000"}},name:"个数",type:"bar",data:a}),e.warningOption.xAxis[0].data=o}}).catch(function(e){})}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"board-warning",style:{height:e.asideHeight+"px"}},[a("el-row",{staticClass:"board-row",attrs:{gutter:50}},[a("el-col",{staticClass:"chart-border",attrs:{span:12}},[a("chart",{attrs:{options:e.warningOption}}),e._v(" "),a("div",{staticClass:"smark"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"1）在实施项目：项目启动但未验收关闭；2）实际损益率=项目损益/回款；\n           3）项目损益=纯合同额-项目采购成本支出-实施费用支出-销售费用支出",placement:"bottom"}},[a("el-button",{attrs:{type:"text"}},[a("i",{staticClass:"el-icon-warning-outline smark-icon"})])],1)],1)],1),e._v(" "),a("el-col",{staticClass:"chart-border",attrs:{span:12}},[a("chart",{attrs:{options:e.progressOption}}),e._v(" "),a("div",{staticClass:"smark"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"1）在实施项目：项目启动但未验收关闭；2）延期率：所处阶段延期天数/总工期；\n                   3）  严重延期：延期率〉30% ；4）一般延期：30%>延期率>=10%",placement:"bottom"}},[a("el-button",{attrs:{type:"text"}},[a("i",{staticClass:"el-icon-warning-outline smark-icon"})])],1)],1)],1)],1),e._v(" "),a("el-row",{staticClass:"board-row",attrs:{gutter:50}},[a("el-col",{staticClass:"chart-border",attrs:{span:12}},[a("chart",{attrs:{options:e.returnedMoneyOption}}),e._v(" "),a("div",{staticClass:"smark"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"1）在实施项目：项目启动但未验收关闭；\n          2）项目支出：包括采购成本、实施费用、人力成本；  \n          3）柱状图：项目支出超出项目回款的累计差额",placement:"bottom"}},[a("el-button",{attrs:{type:"text"}},[a("i",{staticClass:"el-icon-warning-outline smark-icon"})])],1)],1)],1),e._v(" "),a("el-col",{staticClass:"chart-border",attrs:{span:12}},[a("chart",{attrs:{options:e.returnedPlanOption}}),e._v(" "),a("div",{staticClass:"smark"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"\n        1）在实施项目：项目启动但未验收关闭；\n        2）回款延期：实际回款滞后回款计划 ；\n        3）柱状图：项目实际回款滞后计划回款的累计差额",placement:"bottom"}},[a("el-button",{attrs:{type:"text"}},[a("i",{staticClass:"el-icon-warning-outline smark-icon"})])],1)],1)],1)],1),e._v(" "),a("el-row",{staticClass:"board-row",attrs:{gutter:50}},[a("el-col",{staticClass:"chart-border",attrs:{span:12}},[a("chart",{attrs:{options:e.overspendOption}}),e._v(" "),a("div",{staticClass:"smark"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"\n        1）在实施项目：项目启动但未验收关闭；\n        2）超支：运营费用、采购成本和人工成本支出超过预算； \n        3）柱状图：累计超支金额\n       ",placement:"bottom"}},[a("el-button",{attrs:{type:"text"}},[a("i",{staticClass:"el-icon-warning-outline smark-icon"})])],1)],1)],1),e._v(" "),a("el-col",{staticClass:"chart-border",attrs:{span:12}},[a("chart",{attrs:{options:e.payOption}}),e._v(" "),a("div",{staticClass:"smark"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"\n        1）待支付：项目已验收且已全部回款，但项目采购成本未支付完毕 ；\n        2）柱状图：待支付项目采购累计金额\n       ",placement:"bottom"}},[a("el-button",{attrs:{type:"text"}},[a("i",{staticClass:"el-icon-warning-outline smark-icon"})])],1)],1)],1)],1),e._v(" "),a("el-row",{staticClass:"board-row",attrs:{gutter:50}},[a("el-col",{staticClass:"chart-border",attrs:{span:12}},[a("chart",{attrs:{options:e.depositOption}}),e._v(" "),a("div",{staticClass:"smark"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"\n        1）保证金未回：项目已验收，履约保证金收入少于履约保证金支出；\n        2）柱状图：待回履约保证金累计金额\n       ",placement:"bottom"}},[a("el-button",{attrs:{type:"text"}},[a("i",{staticClass:"el-icon-warning-outline smark-icon"})])],1)],1)],1),e._v(" "),a("el-col",{staticClass:"chart-border",attrs:{span:12}},[a("chart",{attrs:{options:e.hrOption}}),e._v(" "),a("div",{staticClass:"smark"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"\n        项目工时填写率=人力资源填写工时/人力资源应填工时\n       ",placement:"bottom"}},[a("el-button",{attrs:{type:"text"}},[a("i",{staticClass:"el-icon-warning-outline smark-icon"})])],1)],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(n,i,!1,function(e){a("NxwK")},"data-v-318bc636",null);t.a=r.exports},AsOx:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__=__webpack_require__("mvHQ"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_defineProperty__=__webpack_require__("bOdI"),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_defineProperty___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_defineProperty__),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_assign__=__webpack_require__("woOf"),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_assign___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_assign__),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_toConsumableArray__=__webpack_require__("Gu7T"),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_toConsumableArray___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_toConsumableArray__),__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_extends__=__webpack_require__("Dd8w"),__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_extends___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_extends__),__WEBPACK_IMPORTED_MODULE_5_jquery__=__webpack_require__("7t+N"),__WEBPACK_IMPORTED_MODULE_5_jquery___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_jquery__),__WEBPACK_IMPORTED_MODULE_6__bus__=__webpack_require__("14gb"),__WEBPACK_IMPORTED_MODULE_7__CreateForm_keyTag__=__webpack_require__("fBxC"),__WEBPACK_IMPORTED_MODULE_8__Upload__=__webpack_require__("2Bw7"),__WEBPACK_IMPORTED_MODULE_9__api_api_js__=__webpack_require__("P9l9"),__WEBPACK_IMPORTED_MODULE_10__CreateForm_myteam__=__webpack_require__("7nh1"),__WEBPACK_IMPORTED_MODULE_11__CreateForm_ProjectList__=__webpack_require__("5s0Y"),__WEBPACK_IMPORTED_MODULE_12__CreateForm_ContractList__=__webpack_require__("GuUD"),__WEBPACK_IMPORTED_MODULE_13__CreateForm_MarketSelect__=__webpack_require__("9hSc"),__WEBPACK_IMPORTED_MODULE_14__CreateForm_abnormal__=__webpack_require__("ftVX"),__WEBPACK_IMPORTED_MODULE_15__CreateForm_ProjectChangeList__=__webpack_require__("RQZO"),__WEBPACK_IMPORTED_MODULE_16__CreateForm_MyTree__=__webpack_require__("aqfx"),__WEBPACK_IMPORTED_MODULE_17__CreateForm_MyTabs__=__webpack_require__("H/Vh"),__WEBPACK_IMPORTED_MODULE_18__ProjectMilestone__=__webpack_require__("FOZ6"),__WEBPACK_IMPORTED_MODULE_19__Milepost__=__webpack_require__("hh6j"),__WEBPACK_IMPORTED_MODULE_20__ProjectRisk__=__webpack_require__("CWW5"),__WEBPACK_IMPORTED_MODULE_21__MilestoneTemplate__=__webpack_require__("Lsv0"),__WEBPACK_IMPORTED_MODULE_22__ProjectAccount__=__webpack_require__("34Lq"),__WEBPACK_IMPORTED_MODULE_23__CreateForm_CustomerContact__=__webpack_require__("yrok"),__WEBPACK_IMPORTED_MODULE_24__CreateForm_myTable__=__webpack_require__("swWl"),__WEBPACK_IMPORTED_MODULE_25__CreateForm_FinancialCard__=__webpack_require__("X14y"),__WEBPACK_IMPORTED_MODULE_26__CreateForm_WarningCard__=__webpack_require__("lTiG"),__WEBPACK_IMPORTED_MODULE_27__CreateForm_HomeBaseMsg__=__webpack_require__("o7IK"),__WEBPACK_IMPORTED_MODULE_28__CreateForm_Application__=__webpack_require__("UwrZ"),__WEBPACK_IMPORTED_MODULE_29__CreateForm_ManagementHome__=__webpack_require__("Zjz6"),__WEBPACK_IMPORTED_MODULE_30__CreateForm_Adjust__=__webpack_require__("iBsO"),__WEBPACK_IMPORTED_MODULE_31__CreateForm_TaskObject__=__webpack_require__("ha+e"),__WEBPACK_IMPORTED_MODULE_32_vuex__=__webpack_require__("NYxO"),__WEBPACK_IMPORTED_MODULE_33__CreateForm_conclusion__=__webpack_require__("g+AR"),__WEBPACK_IMPORTED_MODULE_34__CreateForm_projectsplit__=__webpack_require__("mHYE"),__WEBPACK_IMPORTED_MODULE_35__CreateForm_contractassociated__=__webpack_require__("YnkI"),__WEBPACK_IMPORTED_MODULE_36__CreateForm_synergyInformation__=__webpack_require__("gkbc"),__WEBPACK_IMPORTED_MODULE_37__CreateForm_notContractList__=__webpack_require__("anc4"),__WEBPACK_IMPORTED_MODULE_38__CreateForm_MounthOutput__=__webpack_require__("uEns"),__WEBPACK_IMPORTED_MODULE_39__CreateForm_MounthOutputNew__=__webpack_require__("o2Fl"),__WEBPACK_IMPORTED_MODULE_40__CreateForm_associatedOutput__=__webpack_require__("tPkj"),__WEBPACK_IMPORTED_MODULE_41__CreateForm_notAssociatedOutput__=__webpack_require__("30lM"),__WEBPACK_IMPORTED_MODULE_42__CreateForm_BudgetAllocation__=__webpack_require__("0Vnt"),__WEBPACK_IMPORTED_MODULE_43__CreateForm_ResidueOutput__=__webpack_require__("+WID"),__WEBPACK_IMPORTED_MODULE_44__CreateForm_cashDepositList__=__webpack_require__("uqfp"),__WEBPACK_IMPORTED_MODULE_45__CreateForm_pendingDocument__=__webpack_require__("Oznh"),__WEBPACK_IMPORTED_MODULE_46__CreateForm_ProjectCode__=__webpack_require__("ECSK"),__WEBPACK_IMPORTED_MODULE_47__CreateForm_subPackageList__=__webpack_require__("fbFU"),__WEBPACK_IMPORTED_MODULE_48__CreateForm_paymentInformation__=__webpack_require__("SaUE"),__WEBPACK_IMPORTED_MODULE_49__CreateForm_contractInformation__=__webpack_require__("We4G"),datas=[],widget_copy=[],self=this,str=window.location.href;__webpack_exports__.a={components:{ProjectMilestone:__WEBPACK_IMPORTED_MODULE_18__ProjectMilestone__.a,Milepost:__WEBPACK_IMPORTED_MODULE_19__Milepost__.a,ProjectRisk:__WEBPACK_IMPORTED_MODULE_20__ProjectRisk__.a,MilestoneTemplate:__WEBPACK_IMPORTED_MODULE_21__MilestoneTemplate__.a,ProjectAccount:__WEBPACK_IMPORTED_MODULE_22__ProjectAccount__.a,Myteam:__WEBPACK_IMPORTED_MODULE_10__CreateForm_myteam__.a,FmUpload:__WEBPACK_IMPORTED_MODULE_8__Upload__.a,ProjectList:__WEBPACK_IMPORTED_MODULE_11__CreateForm_ProjectList__.a,MyTree:__WEBPACK_IMPORTED_MODULE_16__CreateForm_MyTree__.a,MyTabs:__WEBPACK_IMPORTED_MODULE_17__CreateForm_MyTabs__.a,keyTag:__WEBPACK_IMPORTED_MODULE_7__CreateForm_keyTag__.a,customercontact:__WEBPACK_IMPORTED_MODULE_23__CreateForm_CustomerContact__.a,myTable:__WEBPACK_IMPORTED_MODULE_24__CreateForm_myTable__.a,FinancialCard:__WEBPACK_IMPORTED_MODULE_25__CreateForm_FinancialCard__.a,WarningCard:__WEBPACK_IMPORTED_MODULE_26__CreateForm_WarningCard__.a,HomeBaseMsg:__WEBPACK_IMPORTED_MODULE_27__CreateForm_HomeBaseMsg__.a,Application:__WEBPACK_IMPORTED_MODULE_28__CreateForm_Application__.a,Adjust:__WEBPACK_IMPORTED_MODULE_30__CreateForm_Adjust__.a,ManagementHome:__WEBPACK_IMPORTED_MODULE_29__CreateForm_ManagementHome__.a,TaskObject:__WEBPACK_IMPORTED_MODULE_31__CreateForm_TaskObject__.a,conclusion:__WEBPACK_IMPORTED_MODULE_33__CreateForm_conclusion__.a,ProjectChangeList:__WEBPACK_IMPORTED_MODULE_15__CreateForm_ProjectChangeList__.a,projectsplit:__WEBPACK_IMPORTED_MODULE_34__CreateForm_projectsplit__.a,MarketSelect:__WEBPACK_IMPORTED_MODULE_13__CreateForm_MarketSelect__.a,ContractList:__WEBPACK_IMPORTED_MODULE_12__CreateForm_ContractList__.a,contractassociated:__WEBPACK_IMPORTED_MODULE_35__CreateForm_contractassociated__.a,synergyInformation:__WEBPACK_IMPORTED_MODULE_36__CreateForm_synergyInformation__.a,notContractList:__WEBPACK_IMPORTED_MODULE_37__CreateForm_notContractList__.a,mounthOutput:__WEBPACK_IMPORTED_MODULE_38__CreateForm_MounthOutput__.a,mounthOutputNew:__WEBPACK_IMPORTED_MODULE_39__CreateForm_MounthOutputNew__.a,BudgetAllocation:__WEBPACK_IMPORTED_MODULE_42__CreateForm_BudgetAllocation__.a,ResidueOutput:__WEBPACK_IMPORTED_MODULE_43__CreateForm_ResidueOutput__.a,associatedOutput:__WEBPACK_IMPORTED_MODULE_40__CreateForm_associatedOutput__.a,notAssociatedOutput:__WEBPACK_IMPORTED_MODULE_41__CreateForm_notAssociatedOutput__.a,pendingDocument:__WEBPACK_IMPORTED_MODULE_45__CreateForm_pendingDocument__.a,cashDeposit:__WEBPACK_IMPORTED_MODULE_44__CreateForm_cashDepositList__.a,abnormal:__WEBPACK_IMPORTED_MODULE_14__CreateForm_abnormal__.a,ProjectCode:__WEBPACK_IMPORTED_MODULE_46__CreateForm_ProjectCode__.a,subPackageList:__WEBPACK_IMPORTED_MODULE_47__CreateForm_subPackageList__.a,paymentInformation:__WEBPACK_IMPORTED_MODULE_48__CreateForm_paymentInformation__.a,contractInformation:__WEBPACK_IMPORTED_MODULE_49__CreateForm_contractInformation__.a},props:{widget:{},models:{},rules:{},remote:{},globalParams:{type:Object,default:function(){}}},data:function(){return{dataModel:this.models[this.widget.model],show:!0,datalist:[],options:[],value:"",member:{},widget_copy:[],widgets:[],ckeckVal:!1,projectId:this.$route.params.id,judgelogo:this.$route.query.judgelogo,judgestart:this.$route.params.judgestart,businessDate:[],projectList:[],contractList:[],disabled:!0,widgetA:this.widget,selectData:[],arg:this.globalParams,projectlevelA:"",professionalWorkTypes:"",contractType:this.$route.query.type}},watch:{arg:{handler:function(e,t){this.handler(e,t)},deep:!0},dataModel:{deep:!0,handler:function(e){this.models[this.widget.model]=e,this.pushListen(e)}},models:{deep:!0,handler:function(e){this.dataModel=e[this.widget.model]}}},computed:__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_extends___default()({},Object(__WEBPACK_IMPORTED_MODULE_32_vuex__.c)(["userinfo","isDetail"])),created:function created(){var _this2=this;if(__WEBPACK_IMPORTED_MODULE_6__bus__.a.$on("businesstype",function(e){e&&(_this2.professionalWorkTypes=JSON.parse(e))}),localStorage.removeItem("globalParams"),this.widget.options.remote&&"select"==this.widget.type){var toption=this.widget.options,urlValue=eval(this.widget.options.props.url),_this=this;__WEBPACK_IMPORTED_MODULE_5_jquery___default.a.ajax({url:urlValue,type:"GET",async:!1,timeout:5e3,dataType:"json",success:function(e){var t=e.data,a=toption.props.value,o=toption.props.label;toption.showLabel=!0,toption.remoteOptions.length=0;for(var n=[],i=0;i<=t.length-1;i++)n.push({value:t[i][a],label:t[i][o]});_this.widgetA.options.remoteOptions=n,_this.widgetA=[].concat(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_toConsumableArray___default()(_this.widget.options.remoteOptions)),setTimeout(function(){var e=JSON.parse(localStorage.getItem("globalParams"));if(_this.contractType){if(e.CONTRACTMONEY)if(-1!=e.CONTRACTMONEY.indexOf(",")){var t=e.CONTRACTMONEY.replace(/,/g,"");t=parseFloat(t)}else t=parseFloat(e.CONTRACTMONEY);t>=1e3?e.projectLevel="超大型":t>=500&&t<1e3?e.projectLevel="大型":t>=200&&t<500?e.projectLevel="中型":t<200&&(e.projectLevel="小型")}var a={};for(var o in e){a[o.toLowerCase()]=e[o]}_this.models=a},1500)}})}var that=this;datas=this.datalist,widget_copy.push(this.widget),this.widget_copy=this.widget;var personInfor=JSON.parse(localStorage.getItem("personInfor"));"/Businessproject"!=this.$route.name&&"/contractproject"!=this.$route.name&&"/notContractProject"!=this.$route.name||("实施B级单位"==this.widget_copy.name?this.widget_copy.options.placeholder=this.userinfo.subdept_name:"实施C级单位"==this.widget_copy.name&&"7638091599462351621"==this.userinfo.account_id||"实施C级单位"==this.widget_copy.name&&"-1814768306395265967"==this.userinfo.account_id||"实施C级单位"==this.widget_copy.name&&"8416498716893399290"==this.userinfo.account_id||"实施C级单位"==this.widget_copy.name&&"-1360422574114386809"==this.userinfo.account_id&&"/notContractProject"==this.$route.name?this.widget_copy.options.placeholder=this.userinfo.dept_name:"项目经理"==this.widget_copy.name&&(this.widget_copy.options.placeholder=this.userinfo.emp_name))},beforeMount:function(){var e=this;"/projectInformation"==this.$route.name&&setTimeout(function(){var t=JSON.parse(localStorage.getItem("projectData"));null!=t&&null==t.CONTRACTNUMBER?e.disabled=!1:e.disabled=!0},900)},methods:{UpdateTaskName:function(e){var t=e.target.value;if(isNaN(t))alert("预计合同金额必须是数字!");else{var a="";(t=parseFloat(e.target.value))>=1e3?a="超大型":t>=500&&t<1e3?a="大型":t>=200&&t<500?a="中型":t<200&&(a="小型"),this.projectlevelA=a;for(var o=0;o<widget_copy.length;o++)"合同项目级别"!=widget_copy[o].name&&"项目级别"!=widget_copy[o].name||(widget_copy[o].options.placeholder=a);var n={expectcontractamount:e.target.value,contractprojectlevel:a},i={};for(var r in n){i[r.toLowerCase()]=n[r]}this.models=__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_assign___default()(this.models,n)}},pushListen:function(e){this.$emit("update:models",__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_extends___default()({},this.models,__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_defineProperty___default()({},this.widget.model,e))),this.widget.options.listened&&__WEBPACK_IMPORTED_MODULE_6__bus__.a.$emit(this.widget.model,{model:this.widget,val:e})},handler:function handler(newValue,oldValue){"input"==this.widget.type&&("null"==eval(this.widget.options.defaultValue)?(this.models[this.widget.model]="",this.pushListen(this.models[this.widget.model])):(this.models[this.widget.model]=eval(this.widget.options.defaultValue),this.pushListen(this.models[this.widget.model])))},close:function(){this.show=!this.show},hetong:function(){var e=this;this.show=!this.show;var t="/sgpm/rest/api/integration/data/contracts/project/"+this.userinfo.account_id+"?memberId="+this.userinfo.memberid+"&projectId="+this.projectId;Object(__WEBPACK_IMPORTED_MODULE_9__api_api_js__.F)(t).then(function(t){e.options=t.data.data}).catch(function(e){})},indexSelect:function(e){this.member=e},contractMain:function(){this.show=!this.show;var e=this.member,t="/sgpm/rest/api/integration/data/contract/"+this.userinfo.companyId+"?contractNumber="+e;Object(__WEBPACK_IMPORTED_MODULE_9__api_api_js__.F)(t).then(function(e){var t=e.data.data;localStorage.setItem("contractList",__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(t)),__WEBPACK_IMPORTED_MODULE_6__bus__.a.$emit("contractList",t)}).catch(function(e){})},handleChange:function(e,t){this.dataModel=t.slice(-3)},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e}}}},B7rB:function(e,t){},"BN/y":function(e,t){},BOEd:function(e,t){},BTi5:function(e,t){},BeWi:function(e,t){},CMv2:function(e,t){},CWW5:function(e,t,a){"use strict";var o=a("mvHQ"),n=a.n(o),i=a("P9l9"),r=a("14gb"),s={name:"project-risk",props:["datas"],data:function(){return{selectTable:[],projectNumber:"",formData:{rules:{name:{type:"string",required:!0,message:"必填字段",trigger:"blur"}},tableData:[]},selectData:{value:"",options:[{value:"高",label:"高"},{value:"中",label:"中"},{value:"低",label:"低"}]},riskData:{value:"",options:[]}}},beforeDestroy:function(){r.a.$off("projectInfo"),r.a.$off("ProjectriskSave")},created:function(){var e=this;localStorage.getItem("ProjectriskParams")&&((t=JSON.parse(localStorage.getItem("ProjectriskParams")))&&localStorage.removeItem("ProjectriskParams"));if(localStorage.getItem("projectInfo")){var t=JSON.parse(localStorage.getItem("projectInfo"));this.projectNumber=t.projectNum}this.gettableData(),r.a.$on("ProjectriskSave",function(t){t&&e.gettableData(e.projectNumber)}),this.getRiskType()},methods:{sendData:function(){var e=n()(this.formData.tableData);localStorage.setItem("ProjectriskParams",e)},selectChange:function(){this.sendData()},blurChange:function(e){""==e.riskDescription&&this.warnMessage()},blurChange2:function(e){e.rowStatus=!0},rowClick:function(e,t,a){var o=this;e.rowStatus=!1,this.selectTable.push(e),this.selectTable.length>1&&(this.selectTable=[],this.selectTable.push(e)),this.formData.tableData.forEach(function(e){e!=o.selectTable[0]&&(e.rowStatus=!0)})},warnMessage:function(){this.$message({showClose:!0,message:"风险描述不能为空",type:"warning"})},gettableData:function(){var e=this;this.projectNumber;var t={projectNumber:this.projectNumber};Object(i._28)("/sgpm/rest/api/server/pm/project/risk",t).then(function(t){var a=t.data.data;a.forEach(function(e){e.rowStatus=!0}),e.formData.tableData=a,0!=a.length&&e.sendData()}).catch(function(e){})},handleSave:function(){var e=this,t=this.formData.tableData;Object(i._29)("/sgpm/rest/api/server/pm/project/risk",t).then(function(t){t.data,200==t.data.code?(alert("保存成功"),e.gettableData()):alert("保存失败")}).catch(function(e){})},getRiskType:function(){var e=this;Object(i._28)("/sgpm/rest/api/server/pm/project/RiskType").then(function(t){for(var a=t.data.data,o=0;o<a.length;o++){var n=a[o];e.riskData.options.push({value:n.value,label:n.value})}}).catch(function(e){})},handleAdd:function(){var e={id:"",projectNumber:this.projectNumber,riskType:this.riskData.options[0].label,riskDescription:"",possibilityGrade:"中",severityProbability:"中",urgency:"中",rowStatus:!1},t=this.formData.tableData.length;t>0&&""==this.formData.tableData[t-1].riskDescription?this.warnMessage():this.formData.tableData.push(e),this.sendData()},handleDelete:function(e){var t=this;if(e.id){var a={id:e.id};Object(i._27)("/sgpm/rest/api/server/pm/project/risk",a).then(function(e){200==e.data.code?(alert("删除成功"),t.gettableData(t.projectNumber)):alert("删除失败")}).catch(function(e){})}else{var o=this.formData.tableData.indexOf(e);this.formData.tableData.splice(o,1)}this.sendData()}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Layout app-container"},[a("div",{staticStyle:{float:"right"}},[a("el-button",{staticClass:"addRow",attrs:{type:"primary",size:"mini"},on:{click:e.handleAdd}},[e._v("添加")])],1),e._v(" "),a("div",{staticStyle:{clear:"right"}}),e._v(" "),a("div",{staticStyle:{margin:"5px"}}),e._v(" "),a("div",{staticStyle:{"overflow-y":"auto","max-height":"400px"}},[a("el-form",{ref:"formDom",attrs:{model:e.formData,rules:e.formData.rules}},[a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.formData.tableData,"header-cell-style":{fontSize:"12px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0}},on:{"row-click":e.rowClick}},[e._e(),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"38"}}),e._v(" "),a("el-table-column",{attrs:{prop:"riskType",align:"center",label:"风险类型",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.rowStatus?a("div",[a("span",[e._v(e._s(t.row.riskType))])]):e._e(),e._v(" "),t.row.rowStatus?e._e():a("div",[a("el-select",{attrs:{size:"mini",placeholder:"请选择"},on:{change:e.selectChange},model:{value:t.row.riskType,callback:function(a){e.$set(t.row,"riskType",a)},expression:"scope.row.riskType"}},e._l(e.riskData.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})}),1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"riskDescription",label:"风险描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.rowStatus?a("div",[a("span",[e._v(e._s(t.row.riskDescription))])]):e._e(),e._v(" "),t.row.rowStatus?e._e():a("div",[a("el-input",{attrs:{size:"mini"},on:{change:e.selectChange,blur:function(a){return e.blurChange(t.row)}},model:{value:t.row.riskDescription,callback:function(a){e.$set(t.row,"riskDescription",a)},expression:"scope.row.riskDescription"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"possibilityGrade",align:"center",width:"90px",label:"可能性等级"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.rowStatus?a("div",[a("span",[e._v(e._s(t.row.possibilityGrade))])]):e._e(),e._v(" "),t.row.rowStatus?e._e():a("div",[a("el-select",{attrs:{size:"mini",placeholder:"请选择"},on:{change:e.selectChange},model:{value:t.row.possibilityGrade,callback:function(a){e.$set(t.row,"possibilityGrade",a)},expression:"scope.row.possibilityGrade"}},e._l(e.selectData.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"severityProbability",align:"center",width:"90px",label:"严重性"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.rowStatus?a("div",[a("span",[e._v(e._s(t.row.severityProbability))])]):e._e(),e._v(" "),t.row.rowStatus?e._e():a("div",[a("el-select",{attrs:{size:"mini",placeholder:"请选择"},on:{change:e.selectChange},model:{value:t.row.severityProbability,callback:function(a){e.$set(t.row,"severityProbability",a)},expression:"scope.row.severityProbability"}},e._l(e.selectData.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"urgency",align:"center",width:"90px",label:"紧迫性"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.rowStatus?a("div",[a("span",[e._v(e._s(t.row.urgency))])]):e._e(),e._v(" "),t.row.rowStatus?e._e():a("div",[a("el-select",{attrs:{size:"mini",placeholder:"请选择"},on:{change:e.selectChange},model:{value:t.row.urgency,callback:function(a){e.$set(t.row,"urgency",a)},expression:"scope.row.urgency"}},e._l(e.selectData.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"solutions",align:"center",width:"150px",label:"应对措施"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.rowStatus?a("div",[a("span",[e._v(e._s(t.row.solutions))])]):e._e(),e._v(" "),t.row.rowStatus?e._e():a("div",[a("el-input",{attrs:{size:"mini"},on:{blur:function(a){return e.blurChange2(t.row)},change:e.selectChange},model:{value:t.row.solutions,callback:function(a){e.$set(t.row,"solutions",a)},expression:"scope.row.solutions"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"50",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleDelete(t.row)}}},[a("i",{staticClass:"el-icon-delete-solid",staticStyle:{"font-size":"20px",color:"#409EFF"}})])]}}])})],1)],1)],1)])},staticRenderFns:[]};var c=a("VU/8")(s,l,!1,function(e){a("CMv2")},"data-v-3f0c1c2f",null);t.a=c.exports},Caf8:function(e,t){},"D/cR":function(e,t,a){"use strict";t.b=function(){return c.a.get("token")};var o=a("//Fk"),n=a.n(o),i=(a("7+uW"),a("mtWM")),r=a.n(i),s=(a("YaEn"),a("mw3O")),l=(a.n(s),a("K/Lq")),c=a.n(l);var u=r.a.create({timeout:3e4,withCredentials:!0,headers:{"Content-Type":"application/json; charset=utf-8"}});u.interceptors.request.use(function(e){return e},function(e){return n.a.reject(new Error(e).message)}),u.interceptors.response.use(function(e){return e.data},function(e){return n.a.reject(new Error(e).message)}),t.a=u},D3cj:function(e,t){},DFFm:function(e,t){},DTD0:function(e,t){},Divz:function(e,t){},DmeO:function(e,t){},DqNj:function(e,t){},ECSK:function(e,t,a){"use strict";a("NYxO"),a("14gb");var o={name:"ProjectCode",props:["widget","models","remote","datas"],data:function(){return{loading:!0,form:{code:""}}},watch:{datas:{deep:!0,handler:function(e){this.datas,this.datas.options.url_a}}},methods:{remoteMethod:function(e){},validateJyh:function(e){/^[A-Za-z0-9]{1,12}$/.test(e)||(this.$message.error("字符限制为最大12位，包含：数字、字母（支持大小写）"),this.form.code="")}},created:function(){}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ProjectCode"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"170px"}},[a("el-form-item",{attrs:{prop:"code"}},[a("el-input",{staticStyle:{width:"60%"},on:{blur:function(t){return e.validateJyh(e.form.code)}},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(o,n,!1,function(e){a("L/ru")},null,null);t.a=i.exports},EMcV:function(e,t){},EsdD:function(e,t){},EwQt:function(e,t){},FOZ6:function(e,t,a){"use strict";var o=a("mvHQ"),n=a.n(o),i=a("P9l9"),r=a("14gb"),s={name:"project-milestone",props:["widget","models","datas"],data:function(){return{isShow:!0,fatherStatus:!0,dataForm:{name:"",milestoneName:"",progressPercentage:"",desc:""},dialogStatus:"",textMap:{update:"Edit",create:"Create"},rules:{milestoneName:[{required:!0,message:"请填写里程碑名称",trigger:"change"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],progressPercentage:[{required:!0,message:"请填写百分比",trigger:"blur"}],desc:[{required:!0,message:"请填写里程碑描述",trigger:"blur"}]},multipleSelection:[],sonmultipleSelection:[],dialogVisible:!1,milestoneTemplates:{value:"运维项目里程碑模板",options:[]},milestoneTemplateId:null,milestoneTemplateName:"",tableData:[],saveData:[],projectNumber:""}},beforeDestroy:function(){r.a.$off("projectInfo")},created:function(){JSON.parse(localStorage.getItem("MilestoneParams"))&&localStorage.removeItem("MilestoneParams"),this.getTemplates(),this.getMileStoneDatas()},mounted:function(){var e=this;r.a.$on("ProjectMilestoneSave",function(t){t&&(e.projectNumber=t.projectNumber,e.getSavedMilestons(t.projectNumber))})},computed:{workHourStep:function(){return"8416498716893399290"==JSON.parse(localStorage.getItem("userinfo")).account_id?.1:.5}},methods:{switchChange:function(){this.sendData()},getMileStoneDatas:function(){var e=this;if("a"==this.$route.query.judgelogo)return!1;if("/projectmilestone"!=this.$route.path)if("1"==this.$route.query.isShow&&(this.isShow=!1),"/MilepostChangeEdit"!=this.$route.path){var t=JSON.parse(localStorage.getItem("projectInfo"));if(t){var a=t.projectNum;this.projectNumber=a,this.getSavedMilestons(a)}}else r.a.$on("milestoneArray",function(t){e.initMilestoneArray(t)})},initMilestoneArray:function(e){this.tableData=[],this.milestoneTemplateId=e[0].milestoneTemplateId;for(var t=0;t<e.length;t++){var a=e[t],o={};o.stageName=a.stageName,o.milestoneName=a.milestoneName,o.progressPercentage=a.progressPercentage,o.isCut=a.isCut,o.status=0,o.description=a.description,o.milestoneTemplateName=a.milestoneTemplateName,o.milestoneTemplateId=a.milestoneTemplateId,o.expectedBeginTime=a.estimatedStartDate,o.expectedEndTime=a.estimatedFinishDate,o.workHours=a.estimatedWorkingHours,o.deliverableStatus=!0,o.sonSelectStatus=!0;var i=[];a.deliverable.forEach(function(e){var t={};t.deliverableName=e.deliverableName,t.isCut=e.isCut,t.contractDeliverable=e.contractDeliverable,t.description=e.description,t.fileName=e.fileName,t.filePath=e.filePath,t.file_url=e.file_url,t.deliverableTemplateId=e.deliverableTemplateId,t.auditDeliverable=e.auditDeliverable,t.checkedStatus=!0,t.contractDeliverable=e.contractDeliverable+"",i.push(t)}),o.deliverable=i,this.tableData.push(o)}var r=n()(this.tableData);this.tableData.length>0&&localStorage.setItem("MilestoneParams",r)},getSavedMilestons:function(e){var t=this;this.tableData=[];var a={projectNumber:e};Object(i._28)("/sgpm/rest/api/server/pm/project/milestones",a).then(function(e){for(var a=e.data.data,o=0;o<a.length;o++){var i=a[o];i.expectedBeginTime=i.estimatedStartDate,i.expectedEndTime=i.estimatedFinishDate,i.workHours=i.estimatedWorkingHours,i.deliverableStatus=!0,i.sonSelectStatus=!0,i.deliverable.forEach(function(e){e.checkedStatus=!0,e.contractDeliverable=e.contractDeliverable+""}),t.tableData.push(i),t.saveData.push(i)}t.tableData;var r=n()(t.tableData);t.tableData.length>0&&(t.checked(),localStorage.setItem("MilestoneParams",r))}).catch(function(e){})},checked:function(){this.$refs.rowData.toggleAllSelection(!0)},testhandleSave:function(){var e={};e.projectNumber=this.projectNumber;var t=[];this.multipleSelection.forEach(function(e){var a={};a.milestoneName=e.milestoneName,a.isCut=e.isCut,a.progressPercentage=e.progressPercentage,a.sortIndex=1,a.description=e.description,a.milestoneTemplateName=e.milestoneTemplateName,a.estimatedStartDate=e.expectedBeginTime,a.estimatedFinishDate=e.expectedEndTime,a.finishDate=e.actualEndTime,a.estimatedWorkingHours=e.workHours,a.delayDays=e.delayDays,a.status=0,a.stageName=e.stageName;var o=[];e.deliverable.forEach(function(e){if(e.checkedStatus){var t={};t.deliverableName=e.deliverableName,t.isCut=e.isCut,t.description=e.description,t.deliverableTemplateId=e.deliverableId,t.status=1,o.push(t)}}),a.deliverable=o,t.push(a)}),e.milestones=t,Object(i._29)("/sgpm/rest/api/server/pm/project/milestones",e).then(function(e){e.data,200==e.data.code?alert("保存成功"):alert("保存失败")}).catch(function(e){})},warnMessage:function(){this.$message({showClose:!0,message:"预计完成时间要大于预计开始时间！",type:"warning"})},sendData:function(){var e=n()(this.tableData);localStorage.setItem("MilestoneParams",e)},selectChange:function(e){Date.parse(e.expectedBeginTime)>Date.parse(e.expectedEndTime)&&(this.warnMessage(),e.expectedEndTime=""),this.sendData()},endTimeChange:function(e){Date.parse(e.expectedBeginTime)>Date.parse(e.expectedEndTime)&&(this.warnMessage(),e.expectedEndTime="");for(var t=this.tableData.indexOf(e),a=t+1;a<this.tableData.length;a++)if(this.tableData[a].deliverableStatus){var o=this.tableData[a];break}if(t<this.tableData.length-1){var n=this.tableData.indexOf(o);this.tableData[n].expectedBeginTime=e.expectedEndTime}this.sendData()},selectTrigger:function(){var e=this;this.milestoneTemplateId;var t=this.milestoneTemplateId;this.saveData.length>0?this.$confirm("确定重新选择里程碑模板吗？").then(function(a){e.tableData=[],e.getMilestones(t),e.deleteMilestones(),e.saveData=[]}).catch(function(e){}):this.getMilestones(t),"/MilepostChangeEdit"==this.$route.path&&this.$emit("milepostChangeStatus",!0)},deleteMilestones:function(){if(""!=this.projectNumber){var e={projectNumber:this.projectNumber};Object(i._27)("/sgpm/rest/api/server/pm/project/milestones",e).then(function(e){200==e.data.code||alert("删除失败")}).catch(function(e){})}},getMilestones:function(e){var t=this;this.tableData=[],this.sonmultipleSelection=[],this.milestoneTemplates.options.forEach(function(e){e.milestoneTemplateId==t.milestoneTemplateId&&(t.milestoneTemplateName=e.milestoneTemplateName)});var a="/sgpm/rest/api/system/milestones/"+e;Object(i._36)(a).then(function(e){for(var a=e.data.data,o=0;o<a.length;o++){var n=a[o],r=n.deliverable,s={};s.milestoneId=n.milestoneId,s.milestoneName=n.milestoneName,s.progressPercentage=n.progressPercentage,s.isFinished="未完成",s.isCut=n.isCut,s.description=n.description,s.stageName=n.stageName,s.milestoneTemplateName=t.milestoneTemplateName,s.milestoneTemplateId=t.milestoneTemplateId,s.deliverableStatus=!0,s.sonSelectStatus=!0,s.expectedBeginTime="",s.expectedEndTime="",s.pickerOptions={disabledDate:function(e){}};var l=[];r.forEach(function(e){e.checkedStatus=!0,e.contractDeliverable="0";var t=JSON.parse(localStorage.getItem("userinfo"));if(t)var a=t.account_name;var o=Object(i.H)("/sgpm/rest/api/server/pm/project/deliverable/download/template?id="+e.deliverableId+"&company="+a);e.file_url=o,l.push(e)}),s.deliverable=l,t.tableData.push(s),l.forEach(function(e){t.sonmultipleSelection.push(e)})}t.checked()}).catch(function(e){})},getTemplates:function(){var e=this,t=JSON.parse(localStorage.getItem("userinfo")),a=t.dept_id,o=t.subdept_id,n=t.account_id,r="/sgpm/rest/api/system/milestone/templates?memberId="+t.memberid+"&deptId="+a+"&subDeptId="+o+"&accountId="+n;Object(i._36)(r).then(function(t){for(var a=t.data.data,o=0;o<a.length;o++){var n=a[o];e.milestoneTemplates.options.push({milestoneTemplateId:n.milestoneTemplateId,milestoneTemplateName:n.milestoneTemplateName})}}).catch(function(e){})},deleteData:function(){if(0==this.multipleSelection.length)alert("至少选择一个");else{var e=this.tableData,t=this.multipleSelection,a=e.filter(function(e){return-1==t.indexOf(e)});this.tableData=a}},restForm:function(){this.dataForm={milestoneName:"",progressPercentage:"",desc:""}},handleUpdate:function(){if(1!=this.multipleSelection.length)alert("请选择一个");else{this.dialogStatus="update",this.dialogVisible=!0,this.restForm();var e=this.multipleSelection[0];this.dataForm.milestoneName=e.milestoneName,this.dataForm.progressPercentage=e.progressPercentage,this.dataForm.desc=e.desc}},handleSelectionChange:function(e){this.multipleSelection=e,this.sendData()},handleSonSelectionChange:function(e){this.sonmultipleSelection=e},handleFatherCheckAllChange:function(e){var t=this;e?this.tableData.forEach(function(e){1==e.isCut&&(e.deliverableStatus=!0,t.multipleSelection.push(e))}):this.tableData.forEach(function(e){if(1==e.isCut){e.deliverableStatus=!1;var a=t.multipleSelection.indexOf(e);t.multipleSelection.splice(a,1)}}),this.sendData()},handleFatherChecked:function(e){if(e.deliverableStatus)this.multipleSelection.push(e);else{var t=this.multipleSelection.indexOf(e);this.multipleSelection.splice(t,1)}this.sendData()},handleCheckAllChange:function(e){var t=this;e.deliverable,e.sonSelectStatus,e.sonSelectStatus?e.deliverable.forEach(function(e){1==e.isCut&&(e.checkedStatus=!0,t.sonmultipleSelection.push(e))}):e.deliverable.forEach(function(e){if(1==e.isCut){e.checkedStatus=!1;var a=t.sonmultipleSelection.indexOf(e);t.sonmultipleSelection.splice(a,1)}}),this.sendData()},handleChecked:function(e){if(e.checkedStatus,e.checkedStatus)this.sonmultipleSelection.push(e);else{var t=this.sonmultipleSelection.indexOf(e);this.sonmultipleSelection.splice(t,1)}this.sendData()},formatprogressPercentage:function(e){return e.progressPercentage+"%"},checkMilestoneParams:function(e){if(e){var t=!0;return e.forEach(function(e){if(e.deliverableStatus){var a=e.expectedBeginTime,o=e.expectedEndTime,n=e.workHours;a&&o&&n||(t=!1)}}),t}return!1},formatisCut:function(e,t){switch(e.isCut){case 1:return"是";case 0:return"否";default:return"未知"}},formatauditDeliverable:function(e,t){switch(e.auditDeliverable){case"1":return"是";case"0":return"否";default:return"未知"}},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Layout"},[a("div",{staticClass:"selectModule"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.datas.options.switch.head,expression:"datas.options.switch.head"}],staticStyle:{"text-align":"left"}},[a("span",{staticStyle:{"font-size":"15px","font-weight":"bold"}},[e._v("选择项目里程碑模板  ")]),e._v(" "),a("el-select",{staticClass:"select",attrs:{filterable:"",disabled:!e.isShow,placeholder:"请选择"},on:{change:e.selectTrigger},model:{value:e.milestoneTemplateId,callback:function(t){e.milestoneTemplateId=t},expression:"milestoneTemplateId"}},e._l(e.milestoneTemplates.options,function(e){return a("el-option",{key:e.milestoneTemplateId,staticStyle:{width:"500px"},attrs:{label:e.milestoneTemplateName,value:e.milestoneTemplateId}})}),1)],1)]),e._v(" "),a("div",{staticStyle:{margin:"10px"}}),e._v(" "),a("el-table",{ref:"rowData",staticStyle:{width:"100%","font-size":"10px"},attrs:{data:e.tableData,height:500,"default-expand-all":!1,border:"","header-cell-style":{fontSize:"12px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-table",{ref:"sonData",staticStyle:{width:"100%","font-size":"10px"},attrs:{data:t.row.deliverable,"header-cell-style":{fontSize:"12px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0}},on:{"selection-change":e.handleSonSelectionChange}},[e.datas.options.switch.sonSelect?a("el-table-column",{attrs:{width:"40"},scopedSlots:e._u([{key:"header",fn:function(o){return o.row,[a("el-checkbox",{attrs:{checked:!0},on:{change:function(a){return e.handleCheckAllChange(t.row)}},model:{value:t.row.sonSelectStatus,callback:function(a){e.$set(t.row,"sonSelectStatus",a)},expression:"props.row.sonSelectStatus"}})]}},{key:"default",fn:function(t){var o=t.row;return[a("el-checkbox",{attrs:{disabled:0==o.isCut},on:{change:function(t){return e.handleChecked(o)}},model:{value:o.checkedStatus,callback:function(t){e.$set(o,"checkedStatus",t)},expression:"row.checkedStatus"}})]}}],null,!0)}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"交付物名称",prop:"deliverableName"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[""==o.filePath||null==o.filePath?a("span",[e._v("\n                "+e._s(o.deliverableName)+"\n              ")]):a("span",[a("u",[a("a",{staticStyle:{color:"dodgerblue"},attrs:{href:o.file_url,target:"_blank"}},[e._v(e._s(o.deliverableName))])])])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{label:"交付物描述",prop:"description"}}),e._v(" "),e.datas.options.switch.isContractDeliverable?a("el-table-column",{attrs:{label:"是否合同交付物",formatter:e.formatisCut,prop:"isContractDeliverable"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("el-switch",{attrs:{"active-text":"是","inactive-text":"否","inactive-value":"0","active-value":"1"},on:{change:function(t){return e.switchChange(o)}},model:{value:o.contractDeliverable,callback:function(t){e.$set(o,"contractDeliverable",t)},expression:"row.contractDeliverable"}})]}}],null,!0)}):e._e(),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"100",label:"是否为审计",formatter:e.formatauditDeliverable,prop:"auditDeliverable"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"是否可裁剪",formatter:e.formatisCut,prop:"isCut"}})],1)]}}])}),e._v(" "),e._e(),e._v(" "),a("el-table-column",{attrs:{width:"40"},scopedSlots:e._u([{key:"header",fn:function(t){return[e.datas.options.switch.sonSelect?a("el-checkbox",{on:{change:function(t){return e.handleFatherCheckAllChange(e.fatherStatus)}},model:{value:e.fatherStatus,callback:function(t){e.fatherStatus=t},expression:"fatherStatus"}}):e._e()]}},{key:"default",fn:function(t){return[e.datas.options.switch.sonSelect?a("el-checkbox",{attrs:{disabled:0==t.row.isCut},on:{change:function(a){return e.handleFatherChecked(t.row)}},model:{value:t.row.deliverableStatus,callback:function(a){e.$set(t.row,"deliverableStatus",a)},expression:"scope.row.deliverableStatus"}}):a("el-checkbox",{on:{change:function(a){return e.handleFatherChecked(t.row)}},model:{value:t.row.deliverableStatus,callback:function(a){e.$set(t.row,"deliverableStatus",a)},expression:"scope.row.deliverableStatus"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"阶段名称",width:"80",align:"center",prop:"stageName"}}),e._v(" "),a("el-table-column",{attrs:{label:"里程碑名称",width:"150",align:"center",prop:"milestoneName"}}),e._v(" "),a("el-table-column",{attrs:{label:"对应百分比",align:"center",formatter:e.formatprogressPercentage,width:"100",prop:"progressPercentage"}}),e._v(" "),e._e(),e._v(" "),a("el-table-column",{attrs:{label:"是否可裁剪",align:"center",formatter:e.formatisCut,width:"100",prop:"isCut"}}),e._v(" "),a("el-table-column",{attrs:{label:"预计开始时间",align:"center",width:"200",prop:"expectedBeginTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-date-picker",{staticStyle:{width:"150px"},attrs:{disabled:!t.row.deliverableStatus,type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},on:{change:function(a){return e.selectChange(t.row)}},model:{value:t.row.expectedBeginTime,callback:function(a){e.$set(t.row,"expectedBeginTime",a)},expression:"scope.row.expectedBeginTime"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"预计完成时间",align:"center",width:"200",prop:"expectedEndTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-date-picker",{staticStyle:{width:"150px"},attrs:{disabled:!t.row.deliverableStatus,type:"date","value-format":"yyyy-MM-dd","picker-options":t.row.pickerOptions,placeholder:"选择日期"},on:{change:function(a){return e.endTimeChange(t.row)}},model:{value:t.row.expectedEndTime,callback:function(a){e.$set(t.row,"expectedEndTime",a)},expression:"scope.row.expectedEndTime"}})]}}])}),e._v(" "),e.datas.options.switch.time3?a("el-table-column",{attrs:{label:"实际完成时间",align:"center",width:"200",prop:"actualEndTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-date-picker",{staticStyle:{width:"150px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.row.actualEndTime,callback:function(a){e.$set(t.row,"actualEndTime",a)},expression:"scope.row.actualEndTime"}})]}}],null,!1,208452049)}):e._e(),e._v(" "),e._e(),e._v(" "),e.datas.options.switch.workHours?a("el-table-column",{attrs:{label:"预计工时(人月)",align:"center",width:"150",prop:"workHours"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:0,max:100,step:e.workHourStep,disabled:!t.row.deliverableStatus,"controls-position":"right"},on:{change:e.selectChange},model:{value:t.row.workHours,callback:function(a){e.$set(t.row,"workHours",a)},expression:"scope.row.workHours"}})]}}],null,!1,474844114)}):e._e(),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"里程碑描述",width:"300",prop:"description"}})],1)],1)},staticRenderFns:[]};var c=a("VU/8")(s,l,!1,function(e){a("vrn6"),a("0seO")},"data-v-bbb50044",null);t.a=c.exports},Fibe:function(e,t){},"G+8Z":function(e,t){},GCfQ:function(e,t){},GKkA:function(e,t){},GuUD:function(e,t,a){"use strict";var o=a("bOdI"),n=a.n(o),i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),c=a("Dd8w"),u=a.n(c),d=a("P9l9"),p=a("QmSG"),m=a("NYxO"),h=(a("14gb"),{name:"ProjectList",props:["widget","models","rules","remote","datas"],data:function(){return{isStart:!1,checkedRegister:!1,isPname:!0,btnMaxWidth:180,form:{dicName:"All",keyWord:""},advancedDialog:!1,advancedForm:{fieldName:"",fieldValue:""},dynamicValidateForm:{domains:[{value:"",value1:"",isDisabled:!1}]},isTest:!1,checkFixed:!0,currentPage:1,advancedList:[],tableData:[],selectAry:[],page:{pageNum:1,pageSize:20,total:0},listConfig:[{key:"contractNumber",label:"合同编号（全名）",isShow:!1},{key:"contractNumberShort",label:"合同编号",isShow:!0},{key:"whetherItIsAnEngineeringProject",label:"是否是工程项目",isShow:!0},{key:"contractNative",label:"合同性质",isShow:!0},{key:"endUser",label:"客户名称",isShow:!0},{key:"saleLevelTwoName",label:"销售B级单位",isShow:!0},{key:"saleLevelThreeId",label:"销售C级单位",isShow:!1},{key:"contractSaleName",label:"销售",isShow:!0},{key:"implementLevelOneName",label:"实施B级单位",isShow:!0},{key:"implementLevelTwoName",label:"实施C级单位",isShow:!1},{key:"projectManagerName",label:"项目经理",isShow:!0},{key:"contractMoney",label:"合同额",isShow:!0},{key:"accumulatedCollectionMoney",label:"回款金额",isShow:!0},{key:"contractProgress",label:"合同进度",isShow:!0},{key:"beRelated",label:"关联状态",isShow:!0},{key:"projectNumber",label:"项目编号",isShow:!0},{key:"totalBudget",label:"采购预算",isShow:!0},{key:"totalCost",label:"费用预算",isShow:!0},{key:"estimatedGrossProfit",label:"预计毛利润",isShow:!1},{key:"estimatedGrossMargin",label:"预计毛利率",isShow:!1},{key:"estimatedProfitAndLoss",label:"预计损益",isShow:!1},{key:"estimatedProfitAndLossRate",label:"预计损益率",isShow:!1},{key:"currentGrossProfit",label:"当前毛利润",isShow:!1},{key:"currentGrossMargin",label:"当前毛利率",isShow:!1},{key:"aa",label:"当前损益",isShow:!1},{key:"aa",label:"当前损益率",isShow:!1},{key:"contractStatus",label:"合同状态",isShow:!0},{key:"archivingStatus",label:"归档状态",isShow:!0},{key:"aa",label:"所属业务群",isShow:!0},{key:"industry",label:"行业",isShow:!1},{key:"region",label:"区域",isShow:!1},{key:"aa",label:"签约方",isShow:!0},{key:"aa",label:"我方签约单位",isShow:!1},{key:"endUser",label:"最终用户",isShow:!1},{key:"contractSigningTime",label:"合同签订日期",isShow:!1},{key:"aa",label:"文本签订日期",isShow:!1},{key:"aa",label:"项目预计开始时间",isShow:!1},{key:"aa",label:"项目预计结束时间",isShow:!1}],multipleSelection:[],advancedOptions:p.a.advancedOptions,advancedMultiples:{},dialogVisible:!1,dialogShowField:!1,checkedField:[],aLLField:[],tableLoading:!0,examineDialog:!1,passForm:{attitude:"1",comment:""},proParams:{},tableData1:[{role:"公司PMO专员意见",content:[{msgText:"项目登记信息规范完整",model:"2",disabled:!0},{msgText:"同意项目登记",model:"1"}],user:{date:"2010-2-3",userName:"张三"},auditComment:""},{role:"客户中心销售人员意见",content:[{msgText:"登记信息已知晓，同意项目登记",model:"1"}],user:{date:"2010-2-3",userName:"张三"},auditComment:""},{role:"工程中心部门经理意见",content:[{msgText:"项目基本信息、项目简介可通过",model:"1"},{msgText:"同意项目登记",model:"1"}],user:{date:"2010-2-3",userName:"张三"},auditComment:""},{role:"工程中心项目总监意见",content:[{msgText:"项目基本信息、项目简介可通过",model:"1"},{msgText:"同意项目登记",model:"1"}],user:{date:"2010-2-3",userName:"张三"},auditComment:""},{role:"工程中心总经理意见",content:[{msgText:"登记信息已知晓，同意项目登记",model:"1"}],user:{date:"2010-2-3",userName:"张三"},auditComment:""}],fieldName:"",fieldContent:[],sortFieldName:"",sort:null,isCared:null,tookenId:"",auditConfig:{10:"登记待提交",11:"登记审核中",12:"登记已审核",20:"启动待提交",21:"启动审核中",22:"启动已审核",30:"工作结项待提交",31:"工作结项审核中",32:"工作结项已审核"}}},filters:{formatThousands:function(e){if("--"==e)return"--";e=(e/=1e4).toFixed(2);if(0==/^[0-9]*[1-9][0-9]*$/.test(e))return e&&e.toString().replace(/(\d)(?=(\d{3})+\.)/g,function(e,t){return t+","});return(e+"").replace(/\d{1,3}(?=(\d{3})+$)/g,"$&,")},formatTip:function(e){var t=""!=e?parseFloat((100*e).toFixed(10)):"--";return t<10?"进度正常("+t+"%)":t>=10&&t<30?"一般延期("+t+"%)":t>=30?"严重延期("+t+"%)":"--"}},watch:{datas:{deep:!0,handler:function(e){this.datas,this.datas.options.url_a}}},computed:u()({},Object(m.c)(["userinfo","cacheContractParams","gjFromContractModel"]),{projectType:function(){return this.datas.options.pro_type},copyListConfig:function(){return JSON.parse(l()(this.listConfig))},listCode:function(){return this.form.dicName},asideHeight:function(){return document.documentElement.clientHeight-205},isShowBtn:function(){return"8416498716893399290"!=this.userinfo.account_id&&"-1814768306395265967"!=this.userinfo.account_id}}),mounted:function(){this.init()},methods:u()({},Object(m.b)(["setDetailPage","setCacheContractParams","setGJFromContractModel"]),{contractRegistration:function(){this.$router.push({path:"contractproject",query:{contractNumber:this.multipleSelection.contractNumber,type:"contract"}})},init:function(){this.getContractTable(),this.getSelectList()},headerDragend:function(e,t,a,o){this.btnMaxWidth=e,e>200?this.isPname=!1:(this.isPname=!0,this.btnMaxWidth=200)},registerChange:function(e){var t={code:this.listCode,pageNum:this.page.pageNum,pageSize:this.page.pageSize,memberId:this.userinfo.memberid,keyWord:void 0!=this.form.keyWord?this.form.keyWord.trim():this.form.keyWord,companyId:this.userinfo.account_id,whetherToRegister:0==e?0:1};this.getContractTable(t),this.setCacheContractParams(t)},advancedConfirm:function(){this.setCacheContractParams({});var e={};this.dynamicValidateForm.domains.forEach(function(t){t.value1.length>0&&(e[t.value]=t.value1)}),this.advancedMultiples=e;var t={code:this.listCode,pageNum:this.page.pageNum,pageSize:this.page.pageSize,memberId:this.userinfo.memberid,companyId:this.userinfo.account_id,fieldName:this.fieldName,content:this.fieldContent,multiples:this.advancedMultiples,whetherToRegister:0==this.checkedRegister?0:1};this.getContractTable(t),this.setGJFromContractModel(this.dynamicValidateForm),this.advancedDialog=!1},advancedChange:function(e,t){var a=this;this.dynamicValidateForm.domains[t].value1="",Object(d.e)("/sgpm/rest/api/server/pm/project/condition?projectKey="+e,null).then(function(e){a.advancedList=e.data.data}).catch(function(e){})},popoverShow:function(){this.checkFixed=!1},popoverHide:function(){this.checkFixed=!0},advancedDialogOpen:function(){this.advancedDialog=!0,this.dynamicValidateForm=this.gjFromContractModel},getContractTable:function(e){var t=this;this.tableLoading=!0;var a=this.cacheContractParams;e?a=e:("{}"==l()(a)&&(a={code:"All",pageNum:1,pageSize:20,whetherToRegister:0==this.checkedRegister?0:1}),a=r()(a,{memberId:this.userinfo.memberid,companyId:this.userinfo.account_id}),this.form.keyWord=a.keyWord,this.form.dicName=a.code,this.checkedRegister=1==a.whetherToRegister),Object(d.j)("/sgpm/rest/api/integration/contracts",a).then(function(e){t.tableLoading=!1;e.data.data;t.tableData=e.data.data||[],t.page.total=e.data.meta.totalCount,t.setCacheContractParams(a)}).catch(function(e){})},keyWordSearch:function(){var e={code:this.listCode,pageNum:this.page.pageNum,pageSize:this.page.pageSize,memberId:this.userinfo.memberid,keyWord:this.form.keyWord.trim(),companyId:this.userinfo.account_id,whetherToRegister:0==this.checkedRegister?0:1};this.getContractTable(e)},getSelectList:function(){var e=this;Object(d._17)("/sgpm/rest/api/server/pm/project/item?param=1",null).then(function(t){var a=t.data.data;e.selectAry=a}).catch(function(e){})},selectChange:function(e){var t,a=(t={code:this.listCode,memberId:this.userinfo.memberid,pageNum:this.page.pageNum,pageSize:this.page.pageSize},n()(t,"memberId",this.userinfo.memberid),n()(t,"companyId",this.userinfo.account_id),n()(t,"whetherToRegister",0==this.checkedRegister?0:1),t);this.getContractTable(a)},handleCurrentChange:function(e){var t,a=(t={code:this.listCode,memberId:this.userinfo.memberid,pageNum:e,pageSize:this.page.pageSize},n()(t,"memberId",this.userinfo.memberid),n()(t,"companyId",this.userinfo.account_id),n()(t,"whetherToRegister",0==this.checkedRegister?0:1),t);this.getContractTable(a)},filterHandler:function(e,t,a){if(0!=a.filteredValue.length){var o;this.fieldName=a.property,this.fieldContent=a.filteredValue;var i=(o={code:this.listCode,memberId:this.userinfo.memberid,pageNum:this.page.pageNum,pageSize:this.page.pageSize},n()(o,"memberId",this.userinfo.memberid),n()(o,"fieldName",a.property),n()(o,"content",a.filteredValue),n()(o,"multiples",this.advancedMultiples),n()(o,"whetherToRegister",0==this.checkedRegister?0:1),o);this.getContractTable(i),this.$refs.refTable.clearFilter()}},clearFilter:function(){this.$refs.refTable.clearFilter(),this.form.keyWord="",this.form.dicName="All",this.checkedRegister=!1,this.advancedMultiples={},this.setGJFromContractModel({domains:[{value:"",value1:[],isDisabled:!1}]});var e={code:"All",pageNum:1,pageSize:20,companyId:this.userinfo.account_id,memberId:this.userinfo.memberid,multiples:{},whetherToRegister:0};this.getContractTable(e)},handleSortChange:function(e,t,a){var o;this.sortFieldName=e.prop,this.sort="ascending"==e.order?1:2;var i=(o={code:this.listCode,memberId:this.userinfo.memberid,pageNum:this.page.pageNum,pageSize:this.page.pageSize},n()(o,"memberId",this.userinfo.memberid),n()(o,"sortFieldName",e.prop),n()(o,"sort","ascending"==e.order?1:2),o);this.getContractTable(i)},handleSelectionChange:function(e){localStorage.setItem("projectInfo",l()(e)),e&&(this.isStart=!0),this.multipleSelection=e},handleCommandAdd:function(e){localStorage.removeItem("projectMsg"),this.setDetailPage(!1),sessionStorage.setItem("isRevoke",2),localStorage.removeItem("keyWords"),localStorage.removeItem("keytechnologys"),"a"==e?(localStorage.removeItem("businessProjectId"),localStorage.removeItem("globalParams"),this.$router.push({path:"Businessproject",query:{judgelogo:e}})):"b"==e?(localStorage.removeItem("businessProjectId"),localStorage.removeItem("globalParams"),this.$router.push({path:"Contractproject",query:{judgelogo:e}})):"c"==e?(localStorage.removeItem("globalParams"),localStorage.removeItem("keyWords"),localStorage.removeItem("keytechnologys"),localStorage.setItem("proId",this.multipleSelection.id),this.$router.push({name:"/projectstart",params:{id:this.multipleSelection.id,category:this.multipleSelection.jumpType,judgestart:99}})):"d"==e&&this.$router.push({path:"nonContractual",query:{id:this.multipleSelection.id,judgelogo:e,projectNum:this.multipleSelection.projectNum}})},startPorject:function(e){localStorage.removeItem("globalParams"),localStorage.removeItem("keyWords"),localStorage.removeItem("keytechnologys"),localStorage.setItem("proId",this.multipleSelection.id),this.$router.push({name:"/projectstart",params:{id:this.multipleSelection.id,category:this.multipleSelection.jumpType,judgestart:99}})},handleCell:function(e,t,a,o){var n=this;if(3===a.cellIndex){var i={id:e.d_care_id,user_id:this.userinfo.memberid,project_id:e.id};e.d_care_id?(this.$message({message:"取消关注",type:"success"}),a.firstChild.firstChild.className="el-icon-star-on startGrey"):(this.$message({message:"关注成功",type:"success"}),a.firstChild.firstChild.className="el-icon-star-on startYellow"),Object(d.i)("/sgpm/rest/api/server/pm/project/care",i).then(function(e){200==e.data.code&&n.getContractTable()}).catch(function(e){})}},submitForm:function(e){this.$refs[e].validate(function(e){if(!e)return!1;alert("submit!")})},resetForm:function(e){this.$refs[e].resetFields()},removeDomain:function(e,t){if(1!=t){var a=this.dynamicValidateForm.domains.indexOf(e);-1!==a&&this.dynamicValidateForm.domains.splice(a,1)}else this.$notify({title:"警告",message:"最后一条啦",type:"warning"})},addDomain:function(){var e=this;this.dynamicValidateForm.domains.push({value:""}),this.dynamicValidateForm.domains.forEach(function(t,a){e.dynamicValidateForm.domains.length-1==a?t.isDisabled=!1:t.isDisabled=!0})}})}),_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"list-container"},[a("div",{staticClass:"header"},[a("el-form",{ref:"form",staticClass:"list-form",attrs:{model:e.form,inline:!0,size:"mini"}},[a("el-row",{staticClass:"one-row",attrs:{gutter:5,type:"flex",justify:"space-between"}}),e._v(" "),a("el-row",{attrs:{gutter:5,type:"flex",justify:"space-between"}},[a("el-col",{attrs:{md:10,xl:9,sm:10,lg:8}},[a("el-form-item",{attrs:{label:"查看范围"}},[a("el-select",{attrs:{size:"mini",placeholder:"查看范围"},on:{change:e.selectChange},model:{value:e.form.dicName,callback:function(t){e.$set(e.form,"dicName",t)},expression:"form.dicName"}},e._l(e.selectAry,function(e){return a("el-option",{key:e.dicCode,attrs:{label:e.dicName,value:e.dicCode}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{md:14,xl:9,sm:14,lg:14}},[a("div",{staticClass:"header-search"},[a("el-checkbox",{attrs:{size:"mini",border:""},on:{change:e.registerChange},model:{value:e.checkedRegister,callback:function(t){e.checkedRegister=t},expression:"checkedRegister"}},[e._v("待登记")]),e._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"合同编号/名称 项目编号/名称",size:"mini"},model:{value:e.form.keyWord,callback:function(t){e.$set(e.form,"keyWord",t)},expression:"form.keyWord"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.keyWordSearch},slot:"append"})],1)],1),e._v(" "),e.isShowBtn?a("el-button",{attrs:{size:"mini",type:"primary",disabled:!e.isStart},on:{click:e.contractRegistration}},[e._v("已签合同登记\n            ")]):e._e(),e._v(" "),a("el-button",{staticClass:"circle-btn",attrs:{type:"primary",icon:"el-icon-refresh",size:"mini",circle:""},on:{click:e.clearFilter}}),e._v(" "),a("el-popover",{staticClass:"popover",attrs:{placement:"right",width:"200",trigger:"click"},on:{show:e.popoverShow,hide:e.popoverHide}},[e._l(e.listConfig,function(t){return a("el-checkbox",{key:t.key,staticClass:"popover-checkbox",model:{value:t.isShow,callback:function(a){e.$set(t,"isShow",a)},expression:"item.isShow"}},[e._v("\n                "+e._s(t.label))])}),e._v(" "),a("el-button",{staticClass:"circle-btn",attrs:{slot:"reference",type:"primary",icon:"el-icon-menu",size:"mini",circle:""},slot:"reference"})],2)],1)])],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"refTable",staticClass:"father-pro-table",staticStyle:{width:"100%","margin-bottom":"10px","min-height":"400px"},attrs:{data:e.tableData,"highlight-current-row":"",border:"","max-height":e.asideHeight,"header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0},"row-key":"id","default-expand-all":"","tree-props":{children:"son_project",hasChildren:"hasChildren"}},on:{"current-change":e.handleSelectionChange,"sort-change":e.handleSortChange,"header-dragend":e.headerDragend}},[a("el-table-column",{attrs:{type:"index",width:"38",align:"center",label:"序号",fixed:e.checkFixed}}),e._v(" "),a("el-table-column",{attrs:{width:e.btnMaxWidth,label:"合同名称",align:"center",fixed:e.checkFixed},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.row.contractName,placement:"right"}},[a("el-button",{class:{pname:e.isPname},style:{maxWidth:e.btnMaxWidth-30+"px"},attrs:{type:"text"}},[a("router-link",{attrs:{to:{name:"/ContractInformation",params:{businessNumber:t.row.businessNumber,contractName:t.row.contractName,contractNumber:t.row.contractNumber,contractMoney:t.row.contractMoney}}}},[a("span",{staticStyle:{color:"#409eff","text-decoration":"underline"}},[e._v(e._s(t.row.contractName))])])],1)],1)]}}])}),e._v(" "),e._l(e.listConfig,function(t,o){return t.isShow?a("el-table-column",{key:o,attrs:{prop:t.key,"header-align":"center",label:t.label,width:"140",align:"contractMoney"==t.key||"accumulatedCollectionMoney"==t.key||"totalBudget"==t.key||"estimatedGrossProfit"==t.key||"estimatedProfitAndLoss"==t.key||"currentGrossProfit"==t.key?"right":"center",sortable:t.sortable?t.sortable:null,filters:t.filters?t.filters:null,"filter-method":t.filters?e.filterHandler:null},scopedSlots:e._u([{key:"default",fn:function(o){return[t.isShow&&1==t.isQfw?a("span",[e._v(e._s(e._f("formatThousands")(null==o.row[t.key]||""==o.row[t.key]?"--":o.row[t.key])))]):e._e(),e._v(" "),t.isShow&&t.isPercent?a("span",[e._v(e._s(null==o.row[t.key]||""==o.row[t.key]?"--":100*o.row[t.key]+"%"))]):e._e(),e._v(" "),t.isShow&&1!=t.isQfw&&!t.isPercent?a("span",[e._v(e._s(null==o.row[t.key]||""==o.row[t.key]?"--":o.row[t.key]))]):e._e()]}}],null,!0)}):e._e()})],2),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"高级筛选",visible:e.advancedDialog,width:"51%",center:""},on:{"update:visible":function(t){e.advancedDialog=t}}},[a("div",{staticClass:"dialog-wrap"},[a("div",{staticClass:"wrap-left"},[a("el-form",{ref:"dynamicValidateForm",staticClass:"demo-dynamic",attrs:{model:e.dynamicValidateForm,"label-width":"200px"}},e._l(e.dynamicValidateForm.domains,function(t,o){return a("el-form-item",{key:t.key,attrs:{prop:"domains."+o+".value",size:"mini"}},[a("el-select",{attrs:{placeholder:"请选择查询字段"},on:{change:function(a){return e.advancedChange(t.value,o)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.advancedOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-select",{attrs:{disabled:t.isDisabled,filterable:"",multiple:"",placeholder:"请选择"},model:{value:t.value1,callback:function(a){e.$set(t,"value1",a)},expression:"domain.value1"}},e._l(e.advancedList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,size:"mini",value:e.label}})}),1),e._v(" "),a("el-button",{staticClass:"btn-item",attrs:{type:"text"},on:{click:function(a){return a.preventDefault(),e.removeDomain(t,e.dynamicValidateForm.domains.length)}}},[a("i",{staticClass:"el-icon-remove btn-del"})]),e._v(" "),a("el-button",{staticClass:"btn-item",attrs:{type:"text"},on:{click:function(t){return t.preventDefault(),e.addDomain(t)}}},[a("i",{staticClass:"el-icon-circle-plus btn-plus"})])],1)}),1)],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.advancedDialog=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.advancedConfirm}},[e._v("确 定")])],1)]),e._v(" "),a("div",{staticClass:"page right"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":1,"page-sizes":[20],layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)},staticRenderFns:[]};var f=a("VU/8")(h,_,!1,function(e){a("nZJ4")},"data-v-422cb661",null);t.a=f.exports},"H/Vh":function(e,t,a){"use strict";var o=a("14gb"),n=a("mvHQ"),i=a.n(n),r=a("QmSG"),s=a("P9l9"),l={name:"menuItem",components:{},data:function(){return{menuBaseForm:{path:"",saveType:"",address:""},pathSelect:r.a.templaSelect,pid:null,addOrEditBtn:!0,btnMsg:"保存",id:null,btnDisabled:!0,pathDisabled:!1,companyId:null}},watch:{"menuBaseForm.saveType":function(e,t){this.pathDisabled="2"==e}},mounted:function(){},created:function(){var e=this;o.a.$on("spaceId",function(t){e.companyId=t}),o.a.$on("checkNode",function(t){var a=JSON.parse(i()(t));a.isLeaf=!!a.isLeaf,a.isShow=!!a.isShow,e.menuBaseForm=a,e.pid=a.pid,e.id=a.id,e.addOrEditBtn=!1,e.btnDisabled=!1,e.btnMsg="修改"}),o.a.$on("addTree",function(t){t&&(e.menuBaseForm={},e.pid,e.addOrEditBtn=!0,e.btnDisabled=!1,e.btnMsg="保存",null===e.pid&&e.$message({message:"请选择菜单节点，如果不选择默认添加一级菜单",type:"warning"}))})},methods:{save:function(){var e=this;null==this.pid&&(this.pid=0);var t={moduleCode:this.menuBaseForm.code,moduleName:this.menuBaseForm.label,sortIndex:0,isShow:1*this.menuBaseForm.isShow||0,isLeaf:1*this.menuBaseForm.isLeaf||0,icon:"",path:this.menuBaseForm.path||"",remark:"",pid:this.id||0,companyId:this.companyId,showType:null,saveType:this.menuBaseForm.saveType,address:this.menuBaseForm.address},a=this.addOrEditBtn?"post":"put";"put"===a&&(t.id=this.id,t.pid=this.pid),Object(s.c)("/sgpm/rest/api/system/portal/menus",t,a).then(function(t){e.$message({message:"操作成功",type:"success"}),o.a.$emit("reloadTree",!0)}).catch(function(e){})},cancel:function(){this.menuBaseForm={},this.btnMsg="保存"}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"menu-item"},[a("el-form",{ref:"form",attrs:{model:e.menuBaseForm,inline:!0,"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"排序"}},[e._v(e._s(e.menuBaseForm.sortIndex))])],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"菜单名称"}},[a("el-input",{attrs:{placeholder:"请输入菜单名称"},model:{value:e.menuBaseForm.label,callback:function(t){e.$set(e.menuBaseForm,"label",t)},expression:"menuBaseForm.label"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"菜单code"}},[a("el-input",{attrs:{placeholder:"请输入菜单code"},model:{value:e.menuBaseForm.code,callback:function(t){e.$set(e.menuBaseForm,"code",t)},expression:"menuBaseForm.code"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"是否叶子节点"}},[a("el-switch",{attrs:{placeholder:"请选择"},model:{value:e.menuBaseForm.isLeaf,callback:function(t){e.$set(e.menuBaseForm,"isLeaf",t)},expression:"menuBaseForm.isLeaf"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"是否显示"}},[a("el-switch",{attrs:{placeholder:"请选择"},model:{value:e.menuBaseForm.isShow,callback:function(t){e.$set(e.menuBaseForm,"isShow",t)},expression:"menuBaseForm.isShow"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"模板"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.menuBaseForm.saveType,callback:function(t){e.$set(e.menuBaseForm,"saveType",t)},expression:"menuBaseForm.saveType"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择模板",disabled:e.pathDisabled},model:{value:e.menuBaseForm.path,callback:function(t){e.$set(e.menuBaseForm,"path",t)},expression:"menuBaseForm.path"}},e._l(e.pathSelect,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"模板地址"}},[a("el-radio",{attrs:{label:"2"},model:{value:e.menuBaseForm.saveType,callback:function(t){e.$set(e.menuBaseForm,"saveType",t)},expression:"menuBaseForm.saveType"}},[a("el-input",{attrs:{placeholder:"请输入模板地址",disabled:"1"==e.menuBaseForm.saveType},model:{value:e.menuBaseForm.address,callback:function(t){e.$set(e.menuBaseForm,"address",t)},expression:"menuBaseForm.address"}})],1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:e.btnDisabled,size:"small"},on:{click:e.save}},[e._v(e._s(e.btnMsg))]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(l,c,!1,function(e){a("8sT1")},null,null).exports,d={name:"roleItem",components:{},data:function(){return{roleBaseForm:{isPmo:!0},btnMsg:"保存",btnDisabled:!0,addOrEditBtn:!0,id:null,pid:null}},watch:{"roleBaseForm.isPmo":{handler:function(e,t){o.a.$emit("isPmo",e)}}},mounted:function(){this.roleBaseForm.isPmo&&o.a.$emit("isPmo",this.roleBaseForm.isPmo)},created:function(){var e=this;o.a.$on("checkNode",function(t){var a=JSON.parse(i()(t));e.roleBaseForm=a,e.roleBaseForm.isPmo=1==a.isPmo,e.btnDisabled=!1,e.addOrEditBtn=!1,e.pid=a.pid,e.id=a.id,e.btnMsg="修改"}),o.a.$on("addTree",function(t){t&&(e.roleBaseForm={},e.btnDisabled=!1,e.addOrEditBtn=!0,e.btnMsg="保存",null===e.pid&&e.$message({message:"请选择菜单节点，如果不选择默认添加一级菜单",type:"warning"}))})},computed:{},methods:{pmoChange:function(e){},save:function(){var e=this;null==this.pid&&(this.pid=0);var t={roleCode:this.roleBaseForm.roleCode,name:this.roleBaseForm.label,sortIndex:0,remark:this.roleBaseForm.remark,pid:this.id||0,isPmo:this.roleBaseForm.isPmo?1:0},a=this.addOrEditBtn?"post":"put";"put"===a&&(t.id=this.id,t.pid=this.pid),Object(s.d)("/sgpm/rest/api/system/role",t,a).then(function(t){e.$message({message:"操作成功",type:"success"}),o.a.$emit("reloadTree",!0)}).catch(function(e){})},cancel:function(){this.roleBaseForm={}}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"menu-item"},[a("el-form",{ref:"form",attrs:{model:e.roleBaseForm,inline:!0,"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"角色名称"}},[a("el-input",{attrs:{placeholder:"请输入角色名称"},model:{value:e.roleBaseForm.label,callback:function(t){e.$set(e.roleBaseForm,"label",t)},expression:"roleBaseForm.label"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"角色code"}},[a("el-input",{attrs:{placeholder:"请输入角色code"},model:{value:e.roleBaseForm.roleCode,callback:function(t){e.$set(e.roleBaseForm,"roleCode",t)},expression:"roleBaseForm.roleCode"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"角色备注"}},[a("el-input",{attrs:{placeholder:"请输入角色备注"},model:{value:e.roleBaseForm.remark,callback:function(t){e.$set(e.roleBaseForm,"remark",t)},expression:"roleBaseForm.remark"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"是否PMO"}},[a("el-switch",{model:{value:e.roleBaseForm.isPmo,callback:function(t){e.$set(e.roleBaseForm,"isPmo",t)},expression:"roleBaseForm.isPmo"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:e.btnDisabled,size:"small"},on:{click:e.save}},[e._v("确定")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var m=a("VU/8")(d,p,!1,function(e){a("o3l6")},null,null).exports,h={name:"memberItem",components:{},data:function(){return{memberTree:[],RoleId:null,filterText:"",tagAry:"",defaultProps:{children:"children",label:"label"},isChecked:!1,treeData:[],id:null,checkKeys:[],checkNodes:[],loading:!0}},mounted:function(){this.getMemberTreeData()},watch:{filterText:function(e){this.$refs.childTree.filter(e)}},created:function(){var e=this;o.a.$on("checkNode",function(t){var a=JSON.parse(i()(t));e.RoleId=a.id,e.getMemberByRole(e.RoleId)})},methods:{getMemberTreeData:function(){var e=this;Object(s.I)("/system/group/tree",null).then(function(t){e.loading=!1,e.memberTree=t.data.data}).catch(function(e){})},getMemberByRole:function(e){var t=this;Object(s.J)("/sgpm/rest/api/system/role/member/"+e,null).then(function(e){var a=[],o=[];e.data.data.forEach(function(e){o.push(e.id),a.push(e)}),t.checkKeys=o,t.$refs.childTree&&t.$refs.childTree.setCheckedKeys(o),t.tagAry=a}).catch(function(e){})},filterNode:function(e,t){return!e||(t.label?-1!==t.label.indexOf(e):void 0)},handleCheck:function(e,t){var a=this,o=[];t.checkedNodes.forEach(function(e){o.push({id:e.id,roleId:a.RoleId,type:e.type,label:e.label,accountId:e.accountId})}),this.tagAry=o},closeTag:function(e){this.tagAry;var t=[];this.tagAry.filter(function(t){return t.id!=e}).forEach(function(e){t.push(e.id)});var a=0;this.tagAry.forEach(function(t,o){t.id==e&&(a=o)}),this.$refs.childTree.setCheckedKeys(t),this.tagAry.splice(a,1)},submit:function(){var e=this,t=this.tagAry;0==this.tagAry.length&&(t=[{roleId:this.RoleId}]),Object(s._32)("/sgpm/rest/api/system/role/member",t).then(function(t){"200"==t.status&&(e.$message({message:"操作成功",type:"success"}),localStorage.removeItem("menuList"))}).catch(function(e){})}}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"menu-item"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"child-tree"},[a("el-row",[a("el-col",{attrs:{span:13}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}})],1)],1),e._v(" "),a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"childTree",attrs:{"element-loading-text":"拼命加载中",data:e.memberTree,"show-checkbox":"","node-key":"id",props:e.defaultProps,"filter-node-method":e.filterNode,"check-strictly":""},on:{check:e.handleCheck}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple-light"},e._l(e.tagAry,function(t){return a("el-tag",{key:t.id,staticClass:"tag",attrs:{closable:""},on:{close:function(a){return e.closeTag(t.id)}}},[e._v(e._s(t.label))])}),1)])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:3,push:17}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submit}},[e._v("提交")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(h,_,!1,function(e){a("5G6J")},null,null).exports,g=a("woOf"),b=a.n(g),v=a("Dd8w"),y=a.n(v),w=a("NYxO"),j={name:"authoryTree",props:["treeData","defaultChecked"],components:{},computed:y()({},Object(w.c)({TreeAryChecked:function(e){return e.checkTreeAry}})),data:function(){return{filterText:"",defaultProps:{children:"children",label:"label"}}},watch:{filterText:function(e){this.$refs.childTree.filter(e)}},mounted:function(){},created:function(){},methods:{handleCheck:function(e,t){},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},setDefaultCheck:function(e){this.$refs.childTree.setCheckedKeys(e)},submit:function(){}}},C={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"child-tree"},[a("el-row",[e._v("\n    "+e._s(e.defaultChecked)+"\n    "),a("el-col",{attrs:{span:13}},[a("el-row",[a("el-col",{attrs:{span:15}},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}})],1)],1),e._v(" "),a("el-tree",{ref:"childTree",attrs:{data:e.treeData,"show-checkbox":"","node-key":"id",props:e.defaultProps,"filter-node-method":e.filterNode,"default-checked-keys":e.defaultChecked},on:{check:e.handleCheck}})],1),e._v(" "),a("el-col",{attrs:{span:3}})],1)],1)},staticRenderFns:[]};var S={name:"authorityItem",components:{authoryTree:a("VU/8")(j,C,!1,function(e){a("DqNj")},null,null).exports},data:function(){return{menuData:[],defaultProps:{children:"children",label:"label"},roleId:"",childMmenuData:[],checkedKeys:[],checkParam:[],delTreeIds:[],spaceOptions:r.a.spaceOptions,companyId:"5326994013938795629"}},mounted:function(){this.getAllMenu(this.companyId)},computed:{},created:function(){var e=this;o.a.$on("spaceId",function(t){e.companyId=t,e.getAllMenu(e.companyId)}),o.a.$on("checkNode",function(t){var a=JSON.parse(i()(t));e.roleId=a.id,e.getMenuByRollId(e.roleId,e.companyId)})},methods:{getAllMenu:function(e){var t=this;Object(s.R)("/sgpm/rest/api/system/portal/menus?companyId="+e,null).then(function(e){var a=e.data.data.element;t.changeAttribute(a),t.menuData=a}).catch(function(e){})},getMenuByRollId:function(e,t){var a=[],o=this;Object(s.S)("/sgpm/rest/api/system/portal/menus/role/"+e+"/"+t,null).then(function(e){e.data.data.element.forEach(function(e){a.push(e.id)}),o.checkedKeys=a,o.$refs.menuRef&&o.$refs.menuRef.setCheckedKeys(a)}).catch(function(e){})},getCheckNodeByRole:function(){var e=this.$refs.menuRef.getCheckedNodes(!0,!1);this.childMmenuData=e},handleCheck:function(e,t){var a=t.checkedNodes.concat(t.halfCheckedNodes);this.checkParam=this.setModuleObj(a),this.checkParam},cancelAuthority:function(e){Object(s.g)("/sgpm/rest/api/system/portal/menus/role/relation",e).then(function(e){localStorage.removeItem("menuList")}).catch(function(e){})},submit:function(){var e=this,t=this.$refs.menuRef.getCheckedNodes(),a=this.checkParam;(a=0==this.checkParam.length&&0==t.length?[{roleId:this.roleId}]:0==this.checkParam.length&&0!=t.length?this.setModuleObj(t):this.checkParam).sort(function(e,t){return e.moduleId-t.moduleId}),i()(a),Object(s.h)("/sgpm/rest/api/system/portal/menus/role/relation",a).then(function(t){e.$message({message:"修改成功",type:"success"}),localStorage.removeItem("menuList"),localStorage.removeItem("userinfo")}).catch(function(e){})},getDelCheckId:function(e){var t=this;e.forEach(function(e){t.delTreeIds.push(e.id),e.children&&0!=e.children.length&&t.getDelCheckId(e.children)})},setModuleObj:function(e){var t=this,a=[];return e.forEach(function(e){a.push(b()({},{roleId:t.roleId,moduleId:e.id}))}),a},changeAttribute:function(e){var t=this;e.forEach(function(e){e.label=e.name,delete e.name,e.children&&0!==e.children.length&&t.changeAttribute(e.children)})},spaceChange:function(e){this.getAllMenu(e)}}},k={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"authority-item"},[t("el-row",[t("div",{staticClass:"authorityTree"},[t("el-tree",{ref:"menuRef",attrs:{data:this.menuData,"show-checkbox":"","node-key":"id","check-on-click-node":"",props:this.defaultProps},on:{check:this.handleCheck}})],1),this._v(" "),t("el-col",{attrs:{span:3,push:17}},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:this.submit}},[this._v("提交")])],1)],1)],1)},staticRenderFns:[]};var D=a("VU/8")(S,k,!1,function(e){a("rHFj")},null,null).exports,N=a("hh6j"),T={name:"milepost",props:["widget","models","datas"],data:function(){return{isChange:!1,disabledStatus:!0,dateStatus:!0,roleStatus:!1,addStatus:!1,saveStatus:!1,submitStatus:!1,changeStatus:!1,browerHeight:window.innerHeight-250,projectNumber:"",projectName:"",value1:"--",contractMoney:0,contractNumber:"",tableDataOne:[],tableData2:[],tableData3:[],loading:!0}},beforeDestroy:function(){o.a.$off("projectContent")},computed:y()({},Object(w.c)(["userinfo","isDetail"])),created:function(){var e=window.localStorage;this.contractNumber=e.contractNumber,this.projectName=e.contractName,this.contractMoney=e.contractMoney,this.value1=e.contractMoney,this.getPlanDatas(),this.getPlanDatas2(),this.getPlanDatas3()},mounted:function(){var e=this;o.a.$on("projectContent",function(e){}),o.a.$on("memberRole",function(t){e.roleStatus=2==t||3==t})},methods:{selectChange:function(e){e.returnedMoney=e.returnedProportion*this.contractMoney*100},getSummaries:function(e){var t=this,a=e.columns,o=e.data,n=[];return a.forEach(function(e,a){if(0!==a)if("outMoney"!=e.property){if("returnedMoney"==e.property){var i=o.map(function(t){return Number(t[e.property])});if(!i.every(function(e){return isNaN(e)})){n[a]=i.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0);var r=(n[a]/1).toFixed(2);r=t.formatThousands(r),n[a]=r+""}}if("returnedProportion"==e.property){var s=o.map(function(t){return Number(t[e.property])});s.every(function(e){return isNaN(e)})||(n[a]=s.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0))}}else{var l=o.map(function(t){return Number(t[e.property])}),c=l[l.length-1];n[a]=t.formatThousands(c)}else n[a]="总计"}),n},handleAdd:function(){var e=this,t=this.tableDataOne.length,a={id:null};a.returnedStage=t+1,a.contractNumber=this.contractNumber,a.returnedCondition="",a.returnedMoney=0,a.returnedProportion=0,a.returnedDate="",a.isFinish=0,a.status=0,a.returnedType=32,this.tableDataOne.push(a),this.tableDataOne,this.tableDataOne.forEach(function(t){2!=t.status&&(e.dateStatus=!1),t.changeResonStatus=!0})},handleSave:function(){var e=this;if(this.isChange){var t=[];if(this.tableDataOne.forEach(function(a){a.changReason,a.reviewStatus&&(a.changPaymentDate=a.returnedDate,a.returnedPlanId=a.id,a.contractNumber=e.contractNumber,t.push(a))}),t.length>0){var a="/sgpm/rest/api/server/pm/project/return/money/chang";Object(s._29)(a,t).then(function(t){200==t.data.code?(alert("保存成功"),e.getPlanDatas(),e.getPlanDatas3()):alert("保存失败")}).catch(function(e){})}else alert("更新失败！请修改预计回款日期")}if(!this.isChange){t=[];if(this.tableDataOne.forEach(function(e){""!=e.returnedDate&&t.push(e)}),t.length>0){a="/sgpm/rest/api/server/pm/project/return/money/plan";Object(s._29)(a,t).then(function(t){200==t.data.code?(alert("保存成功"),e.getPlanDatas()):alert("保存失败")}).catch(function(e){})}else alert("请选择回款日期！")}},handleSubmit:function(){var e=this;if(this.isChange){var t=[];if(this.tableDataOne.forEach(function(a){a.reviewStatus&&a.changReason&&(a.changPaymentDate=a.returnedDate,a.returnedPlanId=a.id,a.contractNumber=e.contractNumber,t.push(a))}),t.length>0){var a="/sgpm/rest/api/server/pm/project/return/money/chang";Object(s._29)(a,t).then(function(t){200==t.data.code?(alert("保存成功"),e.getPlanDatas(),e.getPlanDatas3()):alert("保存失败")}).catch(function(e){})}else alert("更新失败！请修改预计回款日期并填写变更原因")}if(!this.isChange){this.tableDataOne.forEach(function(e){e.status=2});t=this.tableDataOne,a="/sgpm/rest/api/server/pm/project/return/money/plan";Object(s._29)(a,t).then(function(t){200==t.data.code?(alert("保存成功"),e.getPlanDatas()):alert("保存失败")}).catch(function(e){})}},handleChange:function(){this.dateStatus=!1,this.isChange=!0,this.tableDataOne.forEach(function(e){e.changeResonStatus=!1})},dateChange:function(e){e.reviewStatus=!0},getPlanDatas:function(){var e=this;this.tableDataOne=[];var t={contractNumber:this.contractNumber};Object(s._28)("/sgpm/rest/api/server/pm/project/return/money/plan",t).then(function(t){var a=t.data.data;e.loading=!1,null!=a?e.tableDataOne=a:null==a&&(e.changeStatus=!0),e.tableDataOne[0]&&2==e.tableDataOne[0].status?(e.addStatus=!0,e.submitStatus=!1,e.dateStatus=!0,e.changeStatus=!1):e.tableDataOne[0]&&1==e.tableDataOne[0].status?(e.addStatus=!0,e.submitStatus=!0,e.changeStatus=!0,e.saveStatus=!0):(e.addStatus=!1,e.submitStatus=!1,e.changeStatus=!0,e.dateStatus=!1);for(var o=0;o<e.tableDataOne.length;o++){var n=e.tableDataOne[o];n.expectedPaymentDate=n.returnedDate,n.changeResonStatus=!0,n.reviewStatus=!1,null!=n.id&&(n.disabledStatus2=!0)}}).catch(function(e){})},getPlanDatas2:function(){var e=this;this.tableData2=[];var t={contractNumber:this.contractNumber};Object(s._28)("/sgpm/rest/api/server/pm/project/return/money/item",t).then(function(t){var a=t.data.data,o=1e4*e.contractMoney;a.forEach(function(e){o-=e.returnedMoney,e.outMoney=o}),e.tableData2=a}).catch(function(e){})},getPlanDatas3:function(){var e=this;this.tableData3=[];var t={contractNumber:this.contractNumber};Object(s._28)("/sgpm/rest/api/server/pm/project/return/money/chang",t).then(function(t){var a=t.data.data;e.tableData3=a}).catch(function(e){})},getProjectData:function(){var e=this,t={projectId:this.projectId};Object(s._28)("/sgpm/rest/api/server/pm/project",t).then(function(t){var a=t.data.data;null!=a&&null!=a.CONTRACTNUMBER?(e.contractNumber=a.CONTRACTNUMBER,e.getPlanDatas(),e.getPlanDatas2(),e.getPlanDatas3(),e.tableDataOne,e.saveStatus=!1,e.submitStatus=!1,e.changeStatus=!1):(e.contractNumber="项目未签约",e.tableDataOne=[],e.tableData2=[],e.tableData3=[],e.addStatus=!0,e.saveStatus=!0,e.submitStatus=!0,e.changeStatus=!0)}).catch(function(e){})},formatoutstandingPayment:function(e){return this.formatThousands(e.outMoney)},formatreturnedMoney:function(e){return this.formatThousands(e.returnedMoney)},formatThousands:function(e){e=(e/=1e4).toFixed(2);if(0==/^[0-9]*[1-9][0-9]*$/.test(e))return e&&e.toString().replace(/(\d)(?=(\d{3})+\.)/g,function(e,t){return t+","});return(e+"").replace(/\d{1,3}(?=(\d{3})+$)/g,"$&,")},formatreturnedProportion:function(e){return 100*e.returnedProportion+"%"},formatStatus:function(e){switch(e.status){case 0:return"已保存";case 1:return"审核中";case 2:return"已审核";case 3:return"已提交";default:return"未知"}},formatisFinish:function(e){switch(e.isFinish){case 0:return"否";case 1:return"是";default:return"未知"}},checkData:function(e){for(var t in e)return!0;return!1},getData:function(e){var t=this,a="/sgpm/rest/api/integration/contract/"+e+"?companyId="+this.userinfo.account_id;Object(s.Y)(a).then(function(e){e.data.data,t.checkData(e.data.data)&&(t.contractMoney=e.data.data.contractMoneyWanYuan,t.value1=e.data.data.contractMoneyWanYuan)}).catch(function(e){}),this.getPlanDatas(),this.getPlanDatas2(),this.getPlanDatas3()},getMoneyValues:function(){var e=this,t={projectId:this.projectId};Object(s._28)("/sgpm/rest/api/server/pm/project/return/money/percentage",t).then(function(t){var a=t.data.data;null!=a?(e.value1=a.contractAmount,e.contractMoney=a.contractAmount):e.value1="--",e.getProjectData()}).catch(function(e){})}}},x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Layout"},[a("div",{staticStyle:{"font-size":"14px","font-weight":"bold","text-align":"center"}},[e._v("\n    "+e._s(e.projectName)+"\n  ")]),e._v(" "),a("div",["项目未签约"==e.contractNumber?a("div",{staticClass:"content",staticStyle:{color:"#f56954"}},[e._v("合同编号："+e._s(e.contractNumber))]):a("div",{staticClass:"content"},[e._v("合同编号："+e._s(e.contractNumber))]),e._v(" "),a("div",{staticClass:"content"},[e._v("合同额："+e._s(e.value1)+" 万元")]),e._v(" "),a("div",{staticStyle:{float:"right","margin-right":"20px"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.addStatus},on:{click:e.handleAdd}},[e._v("添加")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.changeStatus},on:{click:e.handleChange}},[e._v("变更")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.saveStatus},on:{click:e.handleSave}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.submitStatus},on:{click:e.handleSubmit}},[e._v("提交")])],1),e._v(" "),a("div",{staticStyle:{clear:"left"}})]),e._v(" "),a("div",{staticClass:"tables",style:{maxHeight:e.browerHeight+"px"}},[a("div",[a("h4",{staticStyle:{"margin-bottom":"0px","margin-top":"10px"}},[e._v("回款里程碑计划")]),e._v(" "),a("el-table",{ref:"rowData",staticStyle:{width:"100%"},attrs:{data:e.tableDataOne,"summary-method":e.getSummaries,"show-summary":"",border:"","header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0}}},[a("el-table-column",{attrs:{label:"回款阶段",width:"80",align:"center",prop:"returnedStage"}}),e._v(" "),e._e(),e._v(" "),a("el-table-column",{attrs:{label:"回款条件",width:"150",align:"center",prop:"returnedCondition"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"textarea",rows:1,disabled:t.row.disabledStatus2},model:{value:t.row.returnedCondition,callback:function(a){e.$set(t.row,"returnedCondition",a)},expression:"scope.row.returnedCondition"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"回款比例(%)",align:"center",width:"120",prop:"returnedProportion"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input-number",{staticStyle:{width:"100px"},attrs:{"controls-position":"right",disabled:t.row.disabledStatus2,min:0,max:100,step:10},on:{change:function(a){return e.selectChange(t.row)}},model:{value:t.row.returnedProportion,callback:function(a){e.$set(t.row,"returnedProportion",a)},expression:"scope.row.returnedProportion"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"回款金额(万元)",formatter:e.formatreturnedMoney,align:"center",width:"150",prop:"returnedMoney"}}),e._v(" "),a("el-table-column",{attrs:{label:"是否完成",formatter:e.formatisFinish,align:"center",width:"80",prop:"isFinish"}}),e._v(" "),a("el-table-column",{attrs:{label:"审核状态",formatter:e.formatStatus,align:"center",width:"80",prop:"status"}}),e._v(" "),a("el-table-column",{attrs:{label:"预计回款日期",align:"center",width:"180",prop:"returnedDate"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-date-picker",{staticStyle:{width:"150px"},attrs:{disabled:e.dateStatus,type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},on:{change:function(a){return e.dateChange(t.row)}},model:{value:t.row.returnedDate,callback:function(a){e.$set(t.row,"returnedDate",a)},expression:"scope.row.returnedDate"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"变更原因",align:"center",prop:"changReason"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"textarea",rows:1,disabled:t.row.changeResonStatus},on:{change:function(a){return e.changReasonChange(t.row)}},model:{value:t.row.changReason,callback:function(a){e.$set(t.row,"changReason",a)},expression:"scope.row.changReason"}})]}}])})],1)],1),e._v(" "),a("div",[a("h4",{staticStyle:{"margin-bottom":"0px","margin-top":"10px"}},[e._v("回款记录")]),e._v(" "),a("el-table",{ref:"rowData2",staticStyle:{width:"100%"},attrs:{data:e.tableData2,"summary-method":e.getSummaries,"show-summary":"",border:"","header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0}}},[a("el-table-column",{attrs:{type:"index",label:"回款记录",width:"80",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"回款日期",align:"center",prop:"returnedDate"}}),e._v(" "),a("el-table-column",{attrs:{label:"到款金额(万元)",align:"center",formatter:e.formatreturnedMoney,prop:"returnedMoney"}}),e._v(" "),a("el-table-column",{attrs:{label:"剩余未回金额(万元)",align:"center",formatter:e.formatoutstandingPayment,prop:"outMoney"}})],1)],1),e._v(" "),a("div",[a("h4",{staticStyle:{"margin-bottom":"0px","margin-top":"10px"}},[e._v("回款计划变更记录")]),e._v(" "),a("el-table",{ref:"rowData3",staticStyle:{width:"100%"},attrs:{data:e.tableData3,border:"","header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0}}},[a("el-table-column",{attrs:{label:"回款阶段",width:"80",align:"center",prop:"returnedStage"}}),e._v(" "),a("el-table-column",{attrs:{label:"回款条件",width:"200",align:"center",prop:"returnedCondition"}}),e._v(" "),a("el-table-column",{attrs:{label:"变更前回款日期",align:"center",width:"200",prop:"expectedDate"}}),e._v(" "),a("el-table-column",{attrs:{label:"变更后回款日期",align:"center",width:"200",prop:"changPaymentDate"}}),e._v(" "),a("el-table-column",{attrs:{label:"变更原因",align:"center",prop:"changReason"}})],1)],1)])])},staticRenderFns:[]};var I=a("VU/8")(T,x,!1,function(e){a("K9mm"),a("OUkd")},"data-v-387821bb",null).exports,P={name:"moneyback-two",props:["widget","models","datas"],data:function(){return{roleStatus:!1,disabledStatus:!0,saveStatus:!1,sumStatus:!1,browerHeight:window.innerHeight-250,projectName:"",contractNumber:"",contractMoney:0,nkcontractNumberAry:[],tableDataOne:[],tableData2:[],loading:!0}},beforeDestroy:function(){o.a.$off("projectContent")},created:function(){var e=window.localStorage;this.projectNumber=e.projectNumber,this.projectName=e.projectName,this.projectId=e.projectId,this.getMoneyValues()},mounted:function(){var e=this;o.a.$on("projectContent",function(t){t&&(e.projectNumber=t.projectNumber,e.projectName=t.projectName,e.projectId=t.id,e.getMoneyValues())}),o.a.$on("memberRole",function(t){e.roleStatus=1==t||3==t})},methods:{dateChange:function(e){e.reviewStatus=!0},getSummaries:function(e){var t=this,a=e.columns,o=e.data,n=[];return a.forEach(function(e,a){if(0!==a)if("outMoney"!=e.property){if("returnedMoney"==e.property){var i=o.map(function(t){return Number(t[e.property])});if(!i.every(function(e){return isNaN(e)})){n[a]=i.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0);var r=n[a]/1;r=t.formatThousands(r),n[a]=r+""}}if("returnedProportion"==e.property){var s=o.map(function(t){return Number(t[e.property])});s.every(function(e){return isNaN(e)})||(n[a]=s.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0))}}else{var l=o.map(function(t){return Number(t[e.property])}),c=l[l.length-1];n[a]=t.formatThousands(c)}else n[a]="总计"}),n},handleSave:function(){var e=this,t=[];if(this.tableDataOne.forEach(function(e){"1"==e.isSatisfy?e.isSatisfy=1:e.isSatisfy=0,e.reviewStatus&&t.push(e)}),t.length>0){Object(s._29)("/sgpm/rest/api/server/pm/project/return/money/plan",t).then(function(t){200==t.data.code?(alert("保存成功"),e.tableDataOne.forEach(function(e){1==e.isSatisfy?e.isSatisfy="1":e.isSatisfy="0"})):alert("保存失败")}).catch(function(e){})}else alert("更新失败！请修改满足条件及描述内容"),this.tableDataOne.forEach(function(e){1==e.isSatisfy?e.isSatisfy="1":e.isSatisfy="0"})},getPlanDatas:function(){var e=this;this.tableDataOne=[];var t={contractNumber:this.contractNumber};Object(s._28)("/sgpm/rest/api/server/pm/project/return/money/plan",t).then(function(t){var a=t.data.data;if(e.loading=!1,null!=a){e.tableDataOne=a;e.tableDataOne.forEach(function(e){e.returnedMoney,e.returnedProportion,1==e.isSatisfy?e.isSatisfy="1":e.isSatisfy="0",e.reviewStatus=!1})}}).catch(function(e){})},getPlanDatas2:function(){var e=this;this.tableData2=[];var t={contractNumber:this.contractNumber};Object(s._28)("/sgpm/rest/api/server/pm/project/return/money/item",t).then(function(t){var a=t.data.data,o=1e4*e.contractMoney;a.forEach(function(e){o-=e.returnedMoney,e.outMoney=o}),e.tableData2=a}).catch(function(e){})},getProjectData:function(){var e=this,t={projectId:this.projectId};Object(s._28)("/sgpm/rest/api/server/pm/project",t).then(function(t){var a=t.data.data;if(null!=a&&null!=a.CONTRACTNUMBER&&""!=a.CONTRACTNUMBER){var o=[];a.CONTRACTNUMBER.split(",").forEach(function(e,t){o.push(b()({},{value:e,label:e}))}),e.nkcontractNumberAry=o,e.contractNumber=o[0].label,e.getPlanDatas(),e.getPlanDatas2(),e.getContractData()}else e.contractNumber="项目未签约",e.tableDataOne=[],e.tableData2=[],e.saveStatus=!0}).catch(function(e){})},formatoutstandingPayment:function(e){return this.formatThousands(e.outMoney)},formatreturnedMoney:function(e){return this.formatThousands(e.returnedMoney)},formatThousands:function(e){e=(e/=1e4).toFixed(2);if(0==/^[0-9]*[1-9][0-9]*$/.test(e))return e&&e.toString().replace(/(\d)(?=(\d{3})+\.)/g,function(e,t){return t+","});return(e+"").replace(/\d{1,3}(?=(\d{3})+$)/g,"$&,")},formatreturnedProportion:function(e){return 100*e.returnedProportion+"%"},formatStatus:function(e){switch(e.status){case 0:return"已保存";case 1:return"审核中";case 2:return"已审核";default:return"未知"}},formatisFinish:function(e){switch(e.isFinish){case 0:return"否";case 1:return"是";default:return""}},getMoneyValues:function(){var e=this,t={projectId:this.projectId};Object(s._28)("/sgpm/rest/api/server/pm/project/return/money/percentage",t).then(function(t){var a=t.data.data;null!=a?(e.value1=a.contractAmount,e.contractMoney=a.contractAmount):e.value1="--",e.getProjectData()}).catch(function(e){})},getContractData:function(){var e=this,t={contractNumber:this.contractNumber},a="/sgpm/rest/api/integration/data/contract/"+JSON.parse(localStorage.getItem("projectData")).company_id;Object(s.Y)(a,t).then(function(t){var a=t.data.data;null!=a&&(e.contractMoney=(a.CONTRACTMONEY/1e4).toFixed(2),e.getPlanDatas(),e.getPlanDatas2())}).catch(function(e){})},contractChange:function(e){this.contractNumber=e,this.getContractData()}}},O={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Layout"},[a("div",{staticStyle:{"font-size":"14px","font-weight":"bold","text-align":"center"}},[e._v(e._s(e.projectName))]),e._v(" "),a("div",["项目未签约"==e.contractNumber?a("div",{staticClass:"content",staticStyle:{color:"#f56954"}},[e._v("合同编号："+e._s(e.contractNumber))]):a("div",{staticClass:"content"},[e._v("\n      合同编号:\n      "),a("el-select",{attrs:{size:"mini",placeholder:"请选择"},on:{change:e.contractChange},model:{value:e.contractNumber,callback:function(t){e.contractNumber=t},expression:"contractNumber"}},e._l(e.nkcontractNumberAry,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("div",{staticClass:"content",staticStyle:{"margin-left":"10px"}},[e._v("合同金额："+e._s(e.contractMoney)+" 万元")]),e._v(" "),a("div",{staticStyle:{float:"right","margin-right":"20px"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:1!=e.roleStatus||e.saveStatus},on:{click:e.handleSave}},[e._v("保存")])],1),e._v(" "),a("div",{staticStyle:{clear:"left"}})]),e._v(" "),a("div",{staticClass:"tables",style:{maxHeight:e.browerHeight+"px"}},[a("div",[a("h4",{staticStyle:{"margin-bottom":"0px","margin-top":"10px"}},[e._v("回款条件review")]),e._v(" "),a("el-table",{ref:"rowData",staticStyle:{width:"100%"},attrs:{data:e.tableDataOne,"summary-method":e.getSummaries,"show-summary":"",border:"","header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0}}},[a("el-table-column",{attrs:{label:"回款阶段",width:"80",align:"center",prop:"returnedStage"}}),e._v(" "),e._e(),e._v(" "),a("el-table-column",{attrs:{label:"回款条件",width:"150",align:"center",prop:"returnedCondition"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"textarea",rows:1,disabled:e.disabledStatus},model:{value:t.row.returnedCondition,callback:function(a){e.$set(t.row,"returnedCondition",a)},expression:"scope.row.returnedCondition"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"回款比例(%)",align:"center",width:"150",prop:"returnedProportion"}}),e._v(" "),a("el-table-column",{attrs:{label:"回款金额(万元)",formatter:e.formatreturnedMoney,align:"center",width:"150",prop:"returnedMoney"}}),e._v(" "),a("el-table-column",{attrs:{label:"回款日期",align:"center",width:"120",prop:"returnedDate"}}),e._v(" "),a("el-table-column",{attrs:{label:"是否完成",formatter:e.formatisFinish,align:"center",width:"80",prop:"isFinish"}}),e._v(" "),a("el-table-column",{attrs:{label:"是否满足回款条件",align:"center",width:"140",prop:"isSatisfy"},scopedSlots:e._u([{key:"default",fn:function(t){return["总计"==t.row.returnedStage?a("div"):a("div",[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0","active-text":"是","inactive-text":"否"},on:{change:function(a){return e.dateChange(t.row)}},model:{value:t.row.isSatisfy,callback:function(a){e.$set(t.row,"isSatisfy",a)},expression:"scope.row.isSatisfy"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"满足情况描述",align:"center",prop:"satisfactionDesc"},scopedSlots:e._u([{key:"default",fn:function(t){return["总计"==t.row.returnedStage?a("div"):a("div",[a("el-input",{attrs:{type:"textarea",rows:1},on:{change:function(a){return e.dateChange(t.row)}},model:{value:t.row.satisfactionDesc,callback:function(a){e.$set(t.row,"satisfactionDesc",a)},expression:"scope.row.satisfactionDesc"}})],1)]}}])})],1)],1),e._v(" "),a("div",[a("h4",{staticStyle:{"margin-bottom":"0px","margin-top":"10px"}},[e._v("回款记录")]),e._v(" "),a("el-table",{ref:"rowData2",staticStyle:{width:"100%"},attrs:{data:e.tableData2,"summary-method":e.getSummaries,"show-summary":"",border:"","header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0}}},[a("el-table-column",{attrs:{type:"index",label:"回款记录",width:"80",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"回款日期",align:"center",prop:"returnedDate"}}),e._v(" "),a("el-table-column",{attrs:{label:"到款金额(万元)",formatter:e.formatreturnedMoney,align:"center",prop:"returnedMoney"}}),e._v(" "),a("el-table-column",{attrs:{label:"剩余未回金额(万元)",formatter:e.formatoutstandingPayment,align:"center",prop:"outMoney"}})],1)],1)])])},staticRenderFns:[]};var E=a("VU/8")(P,O,!1,function(e){a("mnht"),a("p0R0")},"data-v-1122e258",null).exports,M=a("mtWM"),F=a.n(M),A=a("xrTZ").Base64,R={data:function(){return{saftHardList:[],projectName:"",projectNumber:"",contractNum:"",companyId:"",companyName:"",userId:"",browerHeight:window.innerHeight-200,nkcontractNumberAry:[]}},created:function(){this.initData(),this.getSaftHardList()},computed:y()({},Object(w.c)(["userinfo"])),methods:{handleSelectFile:function(e){e.upload_status=!1},submitUpload:function(e){return this.userId!==this.userinfo.memberid?(this.$refs[e.id].clearFiles(),this.$message.warning("项目经理才能上传操作")):(this.$refs[e.id].uploadFiles,0==this.$refs[e.id].uploadFiles.length?this.$message.warning("请选择文件"):void this.uploadFile(e))},uploadFile:function(e){var t=this,a=this.$refs[e.id].uploadFiles[0].raw;if(a.size/1024/1024>50)return this.$message.warning("请选择50M以下的文件");this.$refs[e.id].clearFiles(),e.upload_status=!0,e.file_status=!0,e.progress_status=!0,e.fileName="上传中....";var o=new FormData;o.append("file",a),o.append("projectName",this.projectName),o.append("id",e.id),o.append("company",this.companyName),o.append("uploadPeople",this.userinfo.memberid),o.append("projectNumber",this.projectNumber);var n={onUploadProgress:function(t){var a=t.loaded/t.total*100|0;a<100&&(e.progress=a)}},i=Object(s.H)("/sgpm/rest/api/server/pm/project/deliverable/soft/hard/upload");F.a.post(i,o,n).then(function(o){200==o.data.code?(e.progress=100,e.fileName=a.name,e.status=0,e.file_url=t.get_download_file_url(e),t.submitFileAudit(e)):t.$message.error("文档上传失败"),e.upload_status=!0,e.progress=0,e.progress_status=!1})},submitFileAudit:function(e){var t=this,a={deliverableId:e.id,username:A.encode(this.userinfo.login_name),projectNumber:this.projectNumber};Object(s.v)("/sgpm/rest/api/integration/oa/deliverable/soft/hard/flow",a).then(function(a){200==a.data.code?(t.$message.success("提交审批流程成功"),e.status=2,e.file_status=!0):(t.$message.error("提交审批流程失败"),e.file_status=!1,e.status=0)}).catch(function(e){})},get_download_file_url:function(e){var t=this.companyName;return Object(s.H)("/sgpm/rest/api/server/pm/project/deliverable/soft/hard/download?id=")+e.id+"&company="+t},initData:function(){var e=JSON.parse(window.localStorage.getItem("projectData"));if(e){this.projectName=e.PROJECTNAME,this.projectNumber=e.PROJECTNUMBER,this.companyId=e.company_id,this.companyName=e.company_name,this.userId=e.user_id;var t=e.contractNumber;if(t){var a=[];(t=t.split(",")).forEach(function(e,t){a.push(b()({},{value:e,label:e}))}),this.nkcontractNumberAry=a,this.contractNum=a[0].label}}},handleSave:function(){var e=this;return this.contractNum?this.userId!==this.userinfo.memberid?this.$message.warning("项目经理才能保存操作"):0==this.saftHardList.length?this.$message.warning("没数据暂不能保存"):void Object(s._29)("/sgpm/rest/api/server/pm/project/sh",this.saftHardList).then(function(t){if(200!==t.data.code)return e.$message.error("保存数据失败");e.$message.success("保存成功"),e.getSaftHardList(),t.data}).catch(function(e){}):this.$message.warning("合同未签约暂不能保存")},formatcompletePercentage:function(e){return e.completePercentage+"%"},formatFinishDate:function(e){return""==e.finishDate?"--":e.finishDate},formatSubItemContractMoney:function(e){return e.subItemContractMoney.toFixed(1)},formatDeliverableAuditDeliverable:function(e){switch(e.auditDeliverable){case 0:return"否";case 1:return"是";default:return"--"}},formatDeliverableStatus:function(e){switch(e.status){case 1:return"未上传";case 0:return"已上传";case 2:return"待审核";case 3:return"审核通过";case 4:return"驳回";default:return"未知"}},getSaftHardList:function(){var e=this;this.saftHardList=[];var t={contractNum:this.contractNum};Object(s._28)("/sgpm/rest/api/server/pm/project/sh/"+this.companyId+"/"+this.projectNumber,t).then(function(t){if(null!==t.data.data){var a=t.data.data;a.forEach(function(t){t.file_status=!1,t.progress_status=!1,t.upload_status=!0,t.fileList=[],t.progress=0,t.fileName&&(t.file_url=e.get_download_file_url(t))}),e.saftHardList=a}}).catch(function(e){})},contractChange:function(e){this.contractNum=e,this.getSaftHardList()},headerStyle:function(){return{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"}}}},L={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Layout"},[a("div",{staticClass:"titleStyle"},[a("span",[e._v("项目名称：")]),e._v("\n    "+e._s(e.projectName)+"\n    "),e._v(" "),a("span",{staticStyle:{"margin-right":"10px"}}),e._v(" "),a("span",[e._v("项目编号：")]),e._v("\n    "+e._s(e.projectNumber)+"\n    "),a("span",{staticStyle:{"margin-right":"10px"}}),e._v(" "),a("span",[e._v("合同编号：")]),e._v(" "),a("el-select",{attrs:{size:"mini",placeholder:"请选择"},on:{change:e.contractChange},model:{value:e.contractNum,callback:function(t){e.contractNum=t},expression:"contractNum"}},e._l(e.nkcontractNumberAry,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("div",{staticStyle:{float:"right","margin-right":"10px"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleSave}},[e._v("保存")])],1),e._v(" "),a("div",{staticStyle:{clear:"right"}}),e._v(" "),a("div",{staticClass:"content",style:{maxHeight:e.browerHeight+"px"}},[a("el-table",{attrs:{"default-expand-all":!0,"header-cell-style":e.headerStyle,"row-style":{height:"50px"},"cell-style":{padding:0},border:"",data:e.saftHardList}},[a("el-table-column",{attrs:{align:"center",prop:"projectMileStoneName",label:"里程碑名称",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"subItemContractMoney",formatter:e.formatSubItemContractMoney,label:"分项合同额",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",formatter:e.formatcompletePercentage,prop:"completePercentage",label:"完成百分比",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",formatter:e.formatDeliverableAuditDeliverable,prop:"auditDeliverable",width:"70",label:"是否审计文档"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"finishDate",width:"110",formatter:e.formatFinishDate,label:"实际完成时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"currentProblems",width:"120",label:"当前进展/问题"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"textarea",rows:1},model:{value:t.row.currentProblems,callback:function(a){e.$set(t.row,"currentProblems",a)},expression:"scope.row.currentProblems"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"deliverableName",label:"文档名称",width:"110"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"上传文档",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[2!=o.status&&3!=o.status&&o.id?a("div",[a("el-upload",{ref:o.id,attrs:{"file-list":o.fileList,action:"#",limit:1,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"mini",type:"text",disabled:o.file_status},on:{click:function(t){return e.handleSelectFile(o)}},slot:"trigger"},[e._v("选文件")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",disabled:o.upload_status},on:{click:function(t){return e.submitUpload(o)}}},[e._v("上传")])],1)],1):a("div",[a("el-button",{attrs:{size:"mini",type:"text",disabled:!0}},[e._v("选文件")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",disabled:!0}},[e._v("上传")])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"status",width:"80",formatter:e.formatDeliverableStatus,label:"文档状态"}}),e._v(" "),a("el-table-column",{attrs:{align:"center","show-overflow-tooltip":!0,label:"文件名"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("div",{directives:[{name:"show",rawName:"v-show",value:o.progress_status,expression:"row.progress_status"}]},[a("el-progress",{attrs:{"text-inside":!0,"stroke-width":15,percentage:o.progress,status:"success"}})],1),e._v(" "),1!=o.status?a("span",[a("u",[a("a",{staticStyle:{color:"dodgerblue"},attrs:{href:o.file_url,target:"_blank"}},[e._v(e._s(o.fileName))])])]):a("span",[e._v(e._s(o.fileName))])]}}])})],1)],1)])},staticRenderFns:[]};var B=a("VU/8")(R,L,!1,function(e){a("Fibe")},"data-v-6d3ed178",null).exports,U={name:"audittable-one",data:function(){return{projectNum:"",currentPage:1,page:{pageNum:1,pageSize:20,total:0},browerHeight:window.innerHeight-240,dialogTemporaryVisible:!1,tableData:[],showStatus:!0}},computed:y()({},Object(w.c)(["userinfo"])),created:function(){this.getTableDatas()},methods:y()({},Object(w.b)(["setDetailPage","setCacheParams","setAudittableOneNum"]),{openTemporaryDialog:function(){this.dialogTemporaryVisible=!0},TemporaryConfirm:function(){this.dialogTemporaryVisible=!1,window.open("http://oa.supermap.cn/seeyon/main.do?method=main")},handleSizeChange:function(e){this.page.pageSize=e,this.getTableDatas()},handleCurrentChange:function(e){this.page.pageNum=e,this.getTableDatas()},clearFilter:function(){this.showStatus=!0,this.tableData=[],this.getTableDatas()},rowClick:function(e){this.showStatus=!1,this.multipleSelection=e,localStorage.setItem("businessProjectId",e.projectId),e.projectNum=e.projectNumber,localStorage.setItem("projectInfo",i()(e))},detail:function(){this.setDetailPage(!0),this.getProjectMsyById()},getProjectMsyById:function(){this.multipleSelection;var e=this.multipleSelection.projectId,t=this.multipleSelection.projectNumber,a=this.multipleSelection.jumpType,o=this.multipleSelection.processName.slice(0,4),n=this.multipleSelection.processName.slice(0,7);return"项目结项"==o?("-1360422574114386809"==this.userinfo.account_id||"5326994013938795629"==this.userinfo.account_id?this.$router.push({path:"nonContractual?isShow=1",query:{id:e,judgelogo:"d",projectNum:this.multipleSelection.projectNumber}}):"-1814768306395265967"!=this.userinfo.account_id&&"8416498716893399290"!=this.userinfo.account_id&&"7638091599462351621"!=this.userinfo.account_id||this.$router.push({path:"gtNonContractual?isShow=1",query:{id:e,judgelogo:"d",projectNum:this.multipleSelection.projectNumber}}),!1):"合同结项"==o||"南康合同"==o||"项目合同"==o?(this.$router.push({path:"contractFinish?isShow=1",query:{id:e,judgelogo:"d",projectNum:this.multipleSelection.projectNumber}}),!1):"异常结项"==o||"南康异常"==o||"项目异常"==o?(this.$router.push({path:"abnormalProject?isShow=1",query:{id:e,judgelogo:"d",projectNum:this.multipleSelection.projectNumber}}),!1):"非合同项目结项"==n?(this.$router.push({path:"nonPostProject",query:{id:e,judgelogo:"d",projectNum:this.multipleSelection.projectNumber,isShow:1}}),!1):void(1==a?this.$router.push({path:"Businessproject",query:{isShow:1,id:e,projectNumber:this.multipleSelection.projectNumber}}):2==a?this.$router.push({path:"contractproject",query:{isShow:1,id:e}}):3==a?this.$router.push({name:"/childproject",params:{id:e}}):4==a?(localStorage.setItem("proId",e),this.$router.push({path:"projectstart",query:{id:e,category:1,judgestart:99,isShow:1}})):11==a?this.$router.push({path:"notContractProject",query:{isShow:1,id:e,projectNum:t}}):20==a?this.$router.push({path:"MilepostChangeShow",query:{projectNum:t}}):this.$message({message:"不能跳转",type:"warning"}))},getTableDatas:function(){var e=this,t={memberId:this.userinfo.memberid,pageNum:this.page.pageNum,pageSize:this.page.pageSize};Object(s.Y)("/sgpm/rest/api/integration/oa/pending/process/information",t).then(function(t){var a=t.data.data;200==t.data.code&&(e.tableData=a,e.page.total=t.data.meta.totalCount,e.$emit("totalCount",t.data.meta.totalCount),0==t.data.meta.totalCount&&(e.setAudittableOneNum(t.data.meta.totalCount),e.$parent.$parent.$parent.$parent.$parent.$parent.$parent.$parent.$parent.$parent.$children[0].getTableDatas()))}).catch(function(e){})}})},$={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("div",{staticClass:"btn-item"},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.showStatus},on:{click:e.detail}},[e._v("详情")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.openTemporaryDialog}},[e._v("审批")]),e._v(" "),a("el-button",{staticClass:"circle-menu btn-left",attrs:{type:"primary",icon:"el-icon-refresh",size:"mini",circle:""},on:{click:e.clearFilter}})],1),e._v(" "),a("div",{staticClass:"wrap"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","max-height":e.browerHeight,"highlight-current-row":"","header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0}},on:{"row-click":e.rowClick}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"processName",label:"流程名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"projectName",align:"center",label:"项目名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"auditStatus",align:"center",width:"100",label:"审核状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"senderName",align:"center",width:"100",label:"提交人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"waiterName",align:"center",width:"250",label:"待审人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"processStartDate",align:"center",label:"流程发起时间"}})],1),e._v(" "),a("div",{staticClass:"page right"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":1,"page-sizes":[20,30,40],layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"提示",visible:e.dialogTemporaryVisible,width:"30%"},on:{"update:visible":function(t){e.dialogTemporaryVisible=t}}},[a("span",[e._v("您接下来的操作，将会跳转oa系统中进行审批，请单击确定执行")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTemporaryVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.TemporaryConfirm}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var z=a("VU/8")(U,$,!1,function(e){a("EwQt")},"data-v-7acf2e72",null).exports,W={name:"audittable-two",data:function(){return{projectNum:"",currentPage:1,page:{pageNum:1,pageSize:20,total:0},browerHeight:window.innerHeight-230,dialogTemporaryVisible:!1,tableData:[],showStatus:!0,store:""}},computed:y()({},Object(w.c)(["userinfo"])),created:function(){this.getTableDatas(),this.$store},methods:y()({},Object(w.b)(["setDetailPage","setCacheParams","setAudittableTwoYFNum"]),{openTemporaryDialog:function(){this.dialogTemporaryVisible=!0},TemporaryConfirm:function(){this.dialogTemporaryVisible=!1,window.open("http://oa.supermap.cn/seeyon/index.jsp")},handleSizeChange:function(e){this.page.pageSize=e,this.getTableDatas()},handleCurrentChange:function(e){this.page.pageNum=e,this.getTableDatas()},clearFilter:function(){this.showStatus=!0,this.tableData=[],this.getTableDatas()},rowClick:function(e){this.showStatus=!1,this.multipleSelection=e,localStorage.setItem("businessProjectId",e.projectId),e.projectNum=e.projectNumber,localStorage.setItem("projectInfo",i()(e))},detail:function(){this.setDetailPage(!0),this.getProjectMsyById()},getProjectMsyById:function(){this.multipleSelection;var e=this.multipleSelection.projectId,t=this.multipleSelection.projectNumber,a=this.multipleSelection.jumpType,o=this.multipleSelection.processName.slice(0,4),n=this.multipleSelection.processName.slice(0,7);return"项目结项"==o?("-1360422574114386809"==this.userinfo.account_id||"5326994013938795629"==this.userinfo.account_id?this.$router.push({path:"nonContractual?isShow=1",query:{id:e,judgelogo:"d",projectNum:this.multipleSelection.projectNumber}}):"-1814768306395265967"!=this.userinfo.account_id&&"8416498716893399290"!=this.userinfo.account_id&&"7638091599462351621"!=this.userinfo.account_id||this.$router.push({path:"gtNonContractual?isShow=1",query:{id:e,judgelogo:"d",projectNum:this.multipleSelection.projectNumber}}),!1):"合同结项"==o||"南康合同"==o||"项目合同"==o?(this.$router.push({path:"contractFinish?isShow=1",query:{id:e,judgelogo:"d",projectNum:this.multipleSelection.projectNumber}}),!1):"异常结项"==o||"南康异常"==o||"项目异常"==o?(this.$router.push({path:"abnormalProject",query:{id:e,judgelogo:"d",projectNum:this.multipleSelection.projectNumber,isShow:1}}),!1):"非合同项目结项"==n?(this.$router.push({path:"nonPostProject",query:{id:e,judgelogo:"d",projectNum:this.multipleSelection.projectNumber,isShow:1}}),!1):void(1==a?this.$router.push({path:"Businessproject",query:{isShow:1,id:e,projectNumber:this.multipleSelection.projectNumber}}):2==a?this.$router.push({path:"contractproject",query:{isShow:1,id:e}}):3==a?this.$router.push({name:"/childproject",query:{isShow:1},params:{id:e}}):11==a?this.$router.push({path:"notContractProject",query:{isShow:1,id:e,projectNum:this.multipleSelection.projectNumber}}):4==a?(localStorage.setItem("proId",e),this.$router.push({path:"projectstart",query:{id:e,category:1,judgestart:99,isShow:1}})):11==a?this.$router.push({path:"notContractProject",query:{isShow:1,id:e,projectNum:t}}):20==a?this.$router.push({path:"MilepostChangeShow",query:{projectNum:t}}):this.$message({message:"不能跳转",type:"warning"}))},getTableDatas:function(){var e=this,t={memberId:this.userinfo.memberid,pageNum:this.page.pageNum,pageSize:this.page.pageSize};Object(s.Y)("/sgpm/rest/api/integration/oa/existing/process/information",t).then(function(t){var a=t.data.data;200==t.data.code&&(e.tableData=a,e.page.total=t.data.meta.totalCount,e.$emit("totalCount",t.data.meta.totalCount),0==t.data.meta.totalCount&&(e.setAudittableTwoYFNum(t.data.meta.totalCount),e.$parent.$parent.$parent.$parent.$parent.$parent.$parent.$parent.$parent.$parent.$children[0].getTableDatasYF()))}).catch(function(e){})}})},V={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"btn-item"},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.showStatus},on:{click:e.detail}},[e._v("详情")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",disabled:!0}},[e._v("撤回")]),e._v(" "),a("el-button",{staticClass:"circle-menu btn-left",attrs:{type:"primary",icon:"el-icon-refresh",size:"mini",circle:""},on:{click:e.clearFilter}})],1),e._v(" "),a("div",{staticClass:"wrap"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","max-height":e.browerHeight,"highlight-current-row":"","header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0}},on:{"row-click":e.rowClick}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"processName",label:"流程名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"projectName",align:"center",label:"项目名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"auditStatus",align:"center",width:"100",label:"审核状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"senderName",align:"center",width:"100",label:"提交人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"waiterName",align:"center",width:"250",label:"待审人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"processStartDate",align:"center",label:"流程发起时间"}})],1),e._v(" "),a("div",{staticClass:"page right"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":1,"page-sizes":[20,30,40],layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)])},staticRenderFns:[]};var q=a("VU/8")(W,V,!1,function(e){a("DTD0")},"data-v-9d3d161c",null).exports,K={name:"audittable-three",data:function(){return{currentPage:1,page:{pageNum:1,pageSize:20,total:0},projectNum:"",browerHeight:window.innerHeight-230,showStatus:!0,tableData:[]}},computed:y()({},Object(w.c)(["userinfo"])),created:function(){this.getTableDatas()},methods:y()({},Object(w.b)(["setDetailPage","setCacheParams","setAudittableThreeNum"]),{clearFilter:function(){this.showStatus=!0,this.tableData=[],this.getTableDatas()},handleSizeChange:function(e){this.page.pageSize=e,this.getTableDatas()},handleCurrentChange:function(e){this.page.pageNum=e,this.getTableDatas()},rowClick:function(e){this.showStatus=!1,this.multipleSelection=e,localStorage.setItem("businessProjectId",e.projectId),e.projectNum=e.projectNumber,localStorage.setItem("projectInfo",i()(e))},detail:function(){this.setDetailPage(!1),sessionStorage.setItem("isRevoke",2),this.getProjectMsyById()},getProjectMsyById:function(){this.multipleSelection;var e=this.multipleSelection.projectId,t=this.multipleSelection.projectNumber,a=this.multipleSelection.jumpType,o=this.multipleSelection.auditStatusNumber;if(!a)return this.$message({message:"不能跳转",type:"warning"}),!1;1==a&&10==o?this.$router.push({path:"Businessproject",query:{id:e,projectNumber:t}}):2==a&&10==o?this.$router.push({path:"contractproject",query:{id:e}}):3==a&&10==o?this.$router.push({name:"/childproject",params:{id:e}}):11==a&&10==o?this.$router.push({path:"notContractProject",query:{id:e,projectNum:t}}):30==o&&11!=a?"-1360422574114386809"==this.userinfo.account_id||"5326994013938795629"==this.userinfo.account_id?this.$router.push({path:"nonContractual",query:{id:e,judgelogo:"d",projectNum:t}}):"-1814768306395265967"!=this.userinfo.account_id&&"8416498716893399290"!=this.userinfo.account_id&&"7638091599462351621"!=this.userinfo.account_id||this.$router.push({path:"gtNonContractual",query:{id:e,judgelogo:"d",projectNum:t}}):30==o&&11==a?this.$router.push({path:"nonPostProject",query:{id:e,judgelogo:"d",projectNum:t}}):20==o?(localStorage.setItem("proId",e),this.$router.push({path:"projectstart",query:{id:e,category:this.multipleSelection.jumpType,judgestart:99}})):40==this.multipleSelection.auditStatusNumber?this.$router.push({path:"contractFinish",query:{id:e,projectNum:t}}):50==o?this.$router.push({path:"abnormalProject",query:{id:e,judgelogo:"c",projectNum:t}}):20==a&&this.$router.push({path:"MilepostChangeEdit",query:{projectNum:t}})},getTableDatas:function(){var e=this,t={memberId:this.userinfo.memberid,pageNum:this.page.pageNum,pageSize:this.page.pageSize};Object(s.Y)("/sgpm/rest/api/integration/oa/wait/sending/process/information",t).then(function(t){var a=t.data.data;200==t.data.code&&(e.tableData=a,e.page.total=t.data.meta.totalCount,e.$emit("totalCount",t.data.meta.totalCount),0==t.data.meta.totalCount&&(e.setAudittableThreeNum(t.data.meta.totalCount),e.$parent.$parent.$parent.$parent.$parent.$parent.$parent.$parent.$parent.$parent.$children[0].getTableDatasDF()))}).catch(function(e){})}})},Y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"btn-item"},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.showStatus},on:{click:e.detail}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"circle-menu btn-left",attrs:{type:"primary",icon:"el-icon-refresh",size:"mini",circle:""},on:{click:e.clearFilter}})],1),e._v(" "),a("div",{staticClass:"wrap"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","max-height":e.browerHeight,"highlight-current-row":"","header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0}},on:{"row-click":e.rowClick}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"processName",label:"流程名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"projectName",align:"center",label:"项目名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"auditStatus",align:"center",width:"100",label:"审核状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"submitName",align:"center",width:"100",label:"提交人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"needDate",align:"center",label:"修改时间"}})],1),e._v(" "),a("div",{staticClass:"page right"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":1,"page-sizes":[20,30,40],layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)])},staticRenderFns:[]};var G=a("VU/8")(K,Y,!1,function(e){a("chaU")},"data-v-2425ce9e",null).exports,H=a("ksDC"),J={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tables",style:{maxHeight:e.browerHeight+"px"}},[a("div",{},[a("div",{staticClass:"title",staticStyle:{"margin-bottom":"-20px"}},[e._v("商机信息")]),e._v(" "),a("div",{staticStyle:{margin:"20px"}}),e._v(" "),a("el-divider"),e._v(" "),a("div",[a("div",{staticClass:"title_right width1"},[e._v("商机名称：")]),e._v(" "),a("div",{staticClass:"title_left"},[e._v(e._s(e.b_BUSINESSNAME))]),e._v(" "),a("div",{staticStyle:{clear:"left"}})]),e._v(" "),a("div",{staticStyle:{margin:"10px"}}),e._v(" "),a("div",[a("div",{staticClass:"title_right width1"},[e._v("商机编号：")]),e._v(" "),a("div",{staticClass:"title_left width2"},[e._v(e._s(e.b_BUSINESSNUMBER))]),e._v(" "),a("div",{staticClass:"title_right width3"},[e._v("预计合同额(万元)：")]),e._v(" "),a("div",{staticClass:"title_left width4"},[e._v(e._s(e.b_CONTRACTMONEY))]),e._v(" "),a("div",{staticClass:"title_right width5"},[e._v("销售B级单位：")]),e._v(" "),a("div",{staticClass:"title_left width6"},[e._v(e._s(e.b_CUSTOMERCENTER))]),e._v(" "),a("div",{staticStyle:{clear:"left"}})]),e._v(" "),a("div",{staticStyle:{margin:"10px"}}),e._v(" "),a("div",[a("div",{staticClass:"title_right width1"},[e._v("项目销售：")]),e._v(" "),a("div",{staticClass:"title_left width2"},[e._v(e._s(e.b_CONTRACTMARKET))]),e._v(" "),e._m(0),e._v(" "),a("div",{staticClass:"title_left width4"},[a("span",[e._v(e._s(e.b_INDUSTRY))])]),e._v(" "),a("div",{staticClass:"title_right width5"},[e._v("销售C级单位：")]),e._v(" "),a("div",{staticClass:"title_left width6"},[e._v(e._s(e.b_CUSTOMERDEPARTMENT))]),e._v(" "),a("div",{staticStyle:{clear:"left"}})]),e._v(" "),a("div",{staticStyle:{margin:"10px"}}),e._v(" "),a("div",[e._m(1),e._v(" "),a("div",{staticClass:"title_left width2"},[a("span",[e._v(e._s(e.b_REGION))])]),e._v(" "),a("div",{staticStyle:{clear:"left"}})]),e._v(" "),a("div",{staticStyle:{margin:"10px"}})],1),e._v(" "),a("div",{staticStyle:{margin:"10px"}}),e._v(" "),a("div",{},[a("div",{staticClass:"title",staticStyle:{"margin-bottom":"-20px"}},[e._v("合同信息")]),e._v(" "),a("div",{staticStyle:{"margin-right":"20px","margin-top":"-10px",float:"right"}},[e.isShowBtn?a("el-button",{attrs:{type:"primary",size:"mini",disabled:1!=e.roleStatus||e.contractStatus},on:{click:function(t){e.dialogVisible=!0}}},[e._v("关联合同")]):e._e()],1),e._v(" "),a("div",{staticStyle:{margin:"10px"}}),e._v(" "),a("el-divider"),e._v(" "),"8416498716893399290"==this.userinfo.account_id?a("div",[a("div",{staticClass:"title_right width1"},[e._v("关联合同：")]),e._v(" "),a("div",{staticClass:"title_left"},[a("el-select",{attrs:{placeholder:"请选择",size:"small"},on:{change:e.contractChange},model:{value:e.CONTRACTNUMBER,callback:function(t){e.CONTRACTNUMBER=t},expression:"CONTRACTNUMBER"}},e._l(e.nkcontractNumberAry,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("div",{staticStyle:{clear:"left"}}),e._v(" "),a("div",{staticStyle:{margin:"5px"}})]):e._e(),e._v(" "),a("div",[a("div",{staticClass:"title_right width1"},[e._v("合同名称：")]),e._v(" "),"8416498716893399290"==this.userinfo.account_id?a("div",{staticClass:"title_left width2"},[e._v(e._s(e.FIELD0005))]):a("div",{staticClass:"title_left"},[e._v(e._s(e.FIELD0005))]),e._v(" "),a("div",{staticStyle:{clear:"left"}})]),e._v(" "),a("div",{staticStyle:{margin:"10px"}}),e._v(" "),a("div",[a("div",{staticClass:"title_right width1"},[e._v("合同编号：")]),e._v(" "),a("div",{staticClass:"title_left width2"},[e._v(e._s(e.CONTRACTNUMBER))]),e._v(" "),e._m(2),e._v(" "),a("div",{staticClass:"title_left width4"},[a("span",[e._v(e._s(e.CONTRACTMONEY))])]),e._v(" "),a("div",{staticClass:"title_right width5"},[e._v("销售B级单位：")]),e._v(" "),a("div",{staticClass:"title_left width6"},[e._v(e._s(e.CUSTOMERCENTER))]),e._v(" "),a("div",{staticStyle:{clear:"left"}})]),e._v(" "),a("div",{staticStyle:{margin:"10px"}}),e._v(" "),a("div",[a("div",{staticClass:"title_right width1"},[e._v("项目销售：")]),e._v(" "),a("div",{staticClass:"title_left width2"},[e._v(e._s(e.CONTRACTMARKET))]),e._v(" "),e._m(3),e._v(" "),a("div",{staticClass:"title_left width4"},[a("span",[e._v(e._s(e.INDUSTRY))])]),e._v(" "),a("div",{staticClass:"title_right width5"},[e._v("销售C级单位：")]),e._v(" "),a("div",{staticClass:"title_left width6"},[e._v(e._s(e.CUSTOMERDEPARTMENT))]),e._v(" "),a("div",{staticStyle:{clear:"left"}})]),e._v(" "),a("div",{staticStyle:{margin:"10px"}}),e._v(" "),a("div",[a("div",{staticClass:"title_right width1"},[e._v("区域：")]),e._v(" "),a("div",{staticClass:"title_left width2"},[e._v(e._s(e.REGION))]),e._v(" "),e._m(4),e._v(" "),a("div",{staticClass:"title_left width4"},[a("span",[e._v(e._s(e.CUSTOMERNAME))])]),e._v(" "),a("div",{staticClass:"title_right width5"},[e._v("合同签订时间：")]),e._v(" "),a("div",{staticClass:"title_left width6"},[e._v(e._s(e.CONTRACTSIGNINGDATE))]),e._v(" "),a("div",{staticStyle:{clear:"left"}})]),e._v(" "),a("div",{staticStyle:{margin:"10px"}}),e._v(" "),a("div",[e._m(5),e._v(" "),a("div",{staticClass:"title_left width2"},[a("span",[e._v(e._s(e.FILESTATUS))])]),e._v(" "),a("div",{staticClass:"title_right width3"},[e._v("合同状态：")]),e._v(" "),a("div",{staticClass:"title_left width4"},[e._v(e._s(e.CONTRACTSTATE))]),e._v(" "),a("div",{staticStyle:{clear:"left"}})]),e._v(" "),a("div",{staticStyle:{margin:"10px"}})],1),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.selectChange(e.contractNumber)}},model:{value:e.contractNumber,callback:function(t){e.contractNumber=t},expression:"contractNumber"}},e._l(e.contractDatas,function(e){return a("el-option",{key:e.contractNumber,attrs:{label:e.contractName,value:e.contractNumber}})}),1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title_right width3"},[t("span",[this._v("行业：")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title_right width1"},[t("span",[this._v("区域：")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title_right width3"},[t("span",[this._v("合同额(万元)：")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title_right width3"},[t("span",[this._v("行业：")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title_right width3"},[t("span",[this._v("客户名称：")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title_right width1"},[t("span",[this._v("归档状态：")])])}]};var Q=function(e){a("yYYH")},X=a("VU/8")(H.a,J,!1,Q,"data-v-1e84de8e",null).exports,Z=a("N5RU"),ee={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tables",style:{maxHeight:e.browerHeight+"px"}},[a("div",{},[a("div",{staticClass:"title",staticStyle:{"margin-bottom":"-20px"}},[e._v("商机信息")]),e._v(" "),a("div",{staticStyle:{margin:"20px"}}),e._v(" "),a("el-divider"),e._v(" "),a("div",[a("div",{staticClass:"title_right width1"},[e._v("商机名称：")]),e._v(" "),a("div",{staticClass:"title_left"},[e._v(e._s(e.b_BUSINESSNAME))]),e._v(" "),a("div",{staticStyle:{clear:"left"}})]),e._v(" "),a("div",{staticStyle:{margin:"20px"}}),e._v(" "),a("div",[a("div",{staticClass:"title_right width1"},[e._v("商机编号：")]),e._v(" "),a("div",{staticClass:"title_left width2"},[e._v(e._s(e.b_BUSINESSNUMBER))]),e._v(" "),a("div",{staticClass:"title_right width3"},[e._v("预计合同额(万元)：")]),e._v(" "),a("div",{staticClass:"title_left width4"},[e._v(e._s(e.b_CONTRACTMONEY))]),e._v(" "),a("div",{staticClass:"title_right width5"},[e._v("销售B级单位：")]),e._v(" "),a("div",{staticClass:"title_left width6"},[e._v(e._s(e.b_CUSTOMERCENTER))]),e._v(" "),a("div",{staticStyle:{clear:"left"}})]),e._v(" "),a("div",{staticStyle:{margin:"20px"}}),e._v(" "),a("div",[a("div",{staticClass:"title_right width1"},[e._v("项目销售：")]),e._v(" "),a("div",{staticClass:"title_left width2"},[e._v(e._s(e.b_CONTRACTMARKET))]),e._v(" "),e._m(0),e._v(" "),a("div",{staticClass:"title_left width4"},[a("span",[e._v(e._s(e.b_INDUSTRY))])]),e._v(" "),a("div",{staticClass:"title_right width5"},[e._v("销售C级单位：")]),e._v(" "),a("div",{staticClass:"title_left width6"},[e._v(e._s(e.b_CUSTOMERDEPARTMENT))]),e._v(" "),a("div",{staticStyle:{clear:"left"}})]),e._v(" "),a("div",{staticStyle:{margin:"20px"}}),e._v(" "),a("div",[e._m(1),e._v(" "),a("div",{staticClass:"title_left width2"},[a("span",[e._v(e._s(e.b_REGION))])]),e._v(" "),a("div",{staticStyle:{clear:"left"}})]),e._v(" "),a("div",{staticStyle:{margin:"20px"}})],1),e._v(" "),a("div",{staticStyle:{margin:"20px"}})])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title_right width3"},[t("span",[this._v("行业：")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title_right width1"},[t("span",[this._v("区域：")])])}]};var te=function(e){a("Lqxd")},ae=a("VU/8")(Z.a,ee,!1,te,"data-v-7bd071cf",null).exports,oe=a("kUQa"),ne={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tables",style:{maxHeight:e.browerHeight+"px"}},[a("div",{},[a("div",{staticClass:"title",staticStyle:{"margin-bottom":"-20px"}},[e._v("合同信息")]),e._v(" "),a("el-divider"),e._v(" "),a("div",[a("div",{staticClass:"title_right width1"},[e._v("合同名称：")]),e._v(" "),a("div",{staticClass:"title_left"},[e._v(e._s(e.contractName))]),e._v(" "),a("div",{staticStyle:{clear:"left"}})]),e._v(" "),a("div",{staticStyle:{margin:"15px"}}),e._v(" "),a("div",[a("div",{staticClass:"title_right width1"},[e._v("合同编号：")]),e._v(" "),a("div",{staticClass:"title_left width2"},[e._v(e._s(e.contractNumber))]),e._v(" "),e._m(0),e._v(" "),a("div",{staticClass:"title_left width4"},[a("span",[e._v(e._s(e.contractMoneyWanYuan))])]),e._v(" "),a("div",{staticClass:"title_right width5"},[e._v("销售B级单位：")]),e._v(" "),a("div",{staticClass:"title_left width6"},[e._v(e._s(e.saleLevelOneName))]),e._v(" "),a("div",{staticStyle:{clear:"left"}})]),e._v(" "),a("div",{staticStyle:{margin:"15px"}}),e._v(" "),a("div",[a("div",{staticClass:"title_right width1"},[e._v("项目销售：")]),e._v(" "),a("div",{staticClass:"title_left width2"},[e._v(e._s(e.contractSaleName))]),e._v(" "),e._m(1),e._v(" "),a("div",{staticClass:"title_left width4"},[a("span",[e._v(e._s(e.industry))])]),e._v(" "),a("div",{staticClass:"title_right width5"},[e._v("销售C级单位：")]),e._v(" "),a("div",{staticClass:"title_left width6"},[e._v(e._s(e.saleLevelTwoName))]),e._v(" "),a("div",{staticStyle:{clear:"left"}})]),e._v(" "),a("div",{staticStyle:{margin:"15px"}}),e._v(" "),a("div",[a("div",{staticClass:"title_right width1"},[e._v("区域：")]),e._v(" "),a("div",{staticClass:"title_left width2"},[e._v(e._s(e.region))]),e._v(" "),e._m(2),e._v(" "),a("div",{staticClass:"title_left width4"},[a("span",[e._v(e._s(e.contractParty))])]),e._v(" "),a("div",{staticClass:"title_right width5"},[e._v("合同签订时间：")]),e._v(" "),a("div",{staticClass:"title_left width6"},[e._v(e._s(e.contractSigningTime))]),e._v(" "),a("div",{staticStyle:{clear:"left"}})]),e._v(" "),a("div",{staticStyle:{margin:"15px"}}),e._v(" "),a("div",[e._m(3),e._v(" "),a("div",{staticClass:"title_left width2"},[a("span",[e._v(e._s(e.archivingStatus))])]),e._v(" "),a("div",{staticClass:"title_right width3"},[e._v("合同状态：")]),e._v(" "),a("div",{staticClass:"title_left width4"},[e._v(e._s(e.contractStatus))]),e._v(" "),a("div",{staticClass:"title_right width5"},[e._v("项目预计开始时间：")]),e._v(" "),a("div",{staticClass:"title_left width6"},[e._v(e._s(e.expectProjectStartDate))]),e._v(" "),a("div",{staticStyle:{clear:"left"}})]),e._v(" "),a("div",{staticStyle:{margin:"15px"}}),e._v(" "),a("div",[e._m(4),e._v(" "),a("div",{staticClass:"title_left width2"},[a("span",[e._v(e._s(e.projectOperationalPeriod))])]),e._v(" "),a("div",{staticClass:"title_right width3"},[e._v("合同性质：")]),e._v(" "),a("div",{staticClass:"title_left width4"},[e._v(e._s(e.contractNative))]),e._v(" "),a("div",{staticClass:"title_right width5"},[e._v("项目预计结束时间：")]),e._v(" "),a("div",{staticClass:"title_left width6"},[e._v(e._s(e.expectProjectEndDate))]),e._v(" "),a("div",{staticStyle:{clear:"left"}})]),e._v(" "),a("div",{staticStyle:{margin:"15px"}}),e._v(" "),a("div",[e._m(5),e._v(" "),a("div",{staticClass:"title_left"},[e._v(e._s(e.contractContent))]),e._v(" "),a("div",{staticStyle:{clear:"left"}})])],1),e._v(" "),a("div",{staticClass:"title",staticStyle:{"margin-bottom":"-20px"}},[e._v("包含项目")]),e._v(" "),a("el-divider"),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","header-cell-style":{fontSize:"14px",color:"#303133",height:"50px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0}}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"35",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"projectNumber",align:"center",label:"项目编号",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"classUnitBName",align:"center",label:"实施B级单位",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"classUnitCName",align:"center",label:"实施C级单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"projectManagerName",align:"center",label:"实施项目经理"}}),e._v(" "),a("el-table-column",{attrs:{prop:"projectName",align:"center",width:"150","show-overflow-tooltip":!0,label:"项目名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"milestoneWeight",align:"center",width:"150",label:"项目占合同里程碑进度权重(%)"}})],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title_right width3"},[t("span",[this._v("合同额(万元)：")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title_right width3"},[t("span",[this._v("行业：")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title_right width3"},[t("span",[this._v("客户名称：")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title_right width1"},[t("span",[this._v("归档状态：")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title_right width1"},[t("span",[this._v("项目运维期：")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title_right width1"},[t("span",[this._v("合同建设内容：")])])}]};var ie=function(e){a("rxbQ")},re=a("VU/8")(oe.a,ne,!1,ie,"data-v-96c1308c",null).exports,se={name:"accounting",data:function(){return{isExpand:!1,cardList:[{id:"1",projectName:"合同额",filed76:"12321.2",filed77:"3232.34",filed78:"2298"},{id:"3",projectName:"纯合同额",filed76:"4323.32",filed77:"3917.22",filed78:"7831.23"},{id:"4",projectName:"回款",filed76:"1211.23",filed77:"782.49",filed78:"3204.3",children:[{id:"42",projectName:"主营业务回款",filed76:"3842.33",filed77:"8321.29",filed78:"9321.22",isExpand:!0,children:[{id:"421",projectName:"自有基础软件",filed76:"3842.33",filed77:"8321.29",filed78:"9321.22"},{id:"422",projectName:"自有应用软件",filed76:"3842.33",filed77:"8321.29",filed78:"9321.22"},{id:"423",projectName:"自有数据产品",filed76:"3842.33",filed77:"8321.29",filed78:"9321.22"}]},{id:"43",projectName:"其他业务回款",filed76:"4392.29",filed77:"3221.11",filed78:"3921.78"}]},{id:"5",projectName:"采购支出",filed76:"23321.22",filed77:"19876.52",filed78:"9845.65",children:[{id:"52",projectName:"主营业务采购支出",filed76:"3459.44",filed77:"8594.54",filed78:"2349.3"},{id:"53",projectName:"其他业务采购支出",filed76:"4323.33",filed77:"3223.98",filed78:"9844.65"}]},{id:"6",projectName:"纯回款",filed76:"9221.34",filed77:"8223.55",filed78:"2382.54"},{id:"7",projectName:"预扣成本",filed76:"4358.39",filed77:"9442.33",filed78:"4892.44"},{id:"8",projectName:"纯收入",filed76:"4328.39",filed77:"9842.33",filed78:"4832.44"},{id:"9",projectName:"税金及附加",filed76:"4328.39",filed77:"9842.33",filed78:"4832.44"},{id:"10",projectName:"实施费用",filed76:"23321.22",filed77:"19876.52",filed78:"9845.65",children:[{id:"11",projectName:"人工费用",filed76:"32459.44",filed77:"85934.54",filed78:"23249.3"},{id:"12",projectName:"运营费用",filed76:"43293.33",filed77:"38223.98",filed78:"98144.65"}]}]}},created:function(){var e=this;o.a.$on("projectContent",function(t){e.getAccountData()})},mounted:function(){this.getAccountData()},filters:{formatThousands:function(e){if(0==/^[0-9]*[1-9][0-9]*$/.test(e))return e&&e.toString().replace(/(\d)(?=(\d{3})+\.)/g,function(e,t){return t+","});return(e+"").replace(/\d{1,3}(?=(\d{3})+$)/g,"$&,")}},methods:{getAccountData:function(){var e=this,t={projectId:localStorage.getItem("projectNumber")};Object(s.b)("/accounting/bg/center/department/data/tree",t).then(function(t){e.cardList=t.data.data}).catch(function(e){})}}},le={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"accounting"},[a("div",{staticClass:"Blockunit"},[e._v("单位：万元")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{slot:"empty","max-height":"750",data:e.cardList,type:"index","row-key":"id",border:"","default-expand-all":e.isExpand,"tree-props":{children:"children",hasChildren:"hasChildren"},"cell-style":{padding:0},"header-cell-style":{fontSize:"14px",color:"#303133",height:"50px",padding:0,backgroundColor:"#ccd1d5"}},slot:"empty"},[a("el-table-column",{attrs:{prop:"projectName",fixed:"",label:"项目",width:"310"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{"white-space":"pre-wrap","font-size":"15px"},attrs:{type:"text"}},[e._v(e._s(t.row.projectName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"projectPhase",label:"项目阶段",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("formatThousands")(t.row.projectPhase)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"boPhase",label:"商机阶段",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("formatThousands")(t.row.boPhase)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"boAndProject",label:"商机+项目累计",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("formatThousands")(t.row.boAndProject)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"projectBudget",label:"项目预算",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("formatThousands")(t.row.projectBudget)))])]}}])})],1)],1)},staticRenderFns:[]};var ce=a("VU/8")(se,le,!1,function(e){a("EMcV")},"data-v-0c92696d",null).exports,ue={name:"superviseItem",components:{},data:function(){return{superviseData:[],RoleId:null,filterText:"",tagAry:"",defaultProps:{children:"children",label:"label"},isChecked:!1,treeData:[],id:null,checkKeys:[],checkNodes:[]}},mounted:function(){this.getMemberTreeData()},watch:{filterText:function(e){this.$refs.superviseTree.filter(e)}},created:function(){var e=this;o.a.$on("checkNode",function(t){var a=JSON.parse(i()(t));e.RoleId=a.id,e.getSuperviseByRole(e.RoleId)})},updated:function(){},methods:{getMemberTreeData:function(){var e=this;Object(s.I)("/system/group/tree",null).then(function(t){var a=t.data.data;e.superviseData=a}).catch(function(e){})},delLeafData:function(e){var t=this,a=this;e.forEach(function(e){e.children&&e.children.length>=0?t.delLeafData(e.children):a.$refs.superviseTree.remove(e)})},getSuperviseByRole:function(e){var t=this;Object(s.V)("/sgpm/rest/api/system/role/scopes?roleId="+this.RoleId,null).then(function(e){var a=[],o=[];e.data.data.forEach(function(e){o.push(e.departmentId),a.push(e)}),t.checkKeys=o,t.$refs.superviseTree&&t.$refs.superviseTree.setCheckedKeys(o),t.tagAry=a}).catch(function(e){})},filterNode:function(e,t){return!e||(t.label?-1!==t.label.indexOf(e):void 0)},handleCheck:function(e,t){var a=this,o=[];t.checkedNodes.forEach(function(e){o.push({roleId:a.RoleId,departmentId:e.id,departmentName:e.label,companyId:e.accountId,companyName:e.accountName,type:e.type})}),this.tagAry=o},closeTag:function(e){this.tagAry;var t=[];this.tagAry.filter(function(t){return t.id!=e}).forEach(function(e){t.push(e.id)});var a=0;this.tagAry.forEach(function(t,o){t.id==e&&(a=o)}),this.$refs.superviseTree.setCheckedKeys(t),this.tagAry.splice(a,1)},submit:function(){var e=this,t=this.tagAry;0==this.tagAry.length&&(t=[{roleId:this.RoleId}]),Object(s._34)("/sgpm/rest/api/system/role/scopes",t).then(function(t){"200"==t.data.code?(e.$message({message:"操作成功",type:"success"}),localStorage.removeItem("menuList")):e.$message({message:"操作失败",type:"error"})}).catch(function(e){})}}},de={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"menu-item"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"child-tree"},[a("el-row",[a("el-col",{attrs:{span:13}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}})],1)],1),e._v(" "),a("el-tree",{ref:"superviseTree",attrs:{data:e.superviseData,"show-checkbox":"","node-key":"id",props:e.defaultProps,"filter-node-method":e.filterNode,"check-strictly":""},on:{check:e.handleCheck}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple-light"},e._l(e.tagAry,function(t){return a("el-tag",{key:t.id,staticClass:"tag",attrs:{closable:""},on:{close:function(a){return e.closeTag(t.id)}}},[e._v(e._s(t.departmentName))])}),1)])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:3,push:17}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submit}},[e._v("提交")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var pe=a("VU/8")(ue,de,!1,function(e){a("hve7")},null,null).exports,me={name:"ProjectList",props:["widget","models","rules","remote","datas"],data:function(){return{dialogTemporaryVisible:!1,form:{dicName:"All"},currentPage:1,tableData:[],selectAry:[],page:{pageNum:1,pageSize:20,total:0},listConfig:[{key:"auditStatus",label:"审核状态",isShow:!0},{key:"projectNum",label:"项目编号",isShow:!1},{key:"levelOneName",label:"实施B级单位",isShow:!0},{key:"levelTwoName",label:"实施C级单位",isShow:!1},{key:"projectManager",label:"项目经理",isShow:!0},{key:"customerCenter",label:"销售B级单位",isShow:!0},{key:"saleTwoName",label:"销售C级单位",isShow:!1},{key:"contractMarket",label:"销售人员",isShow:!0},{key:"projectType",label:"项目类型",isShow:!0,filters:[{text:"开发类项目",value:"开发类项目"},{text:"数据服务类项目",value:"数据服务类项目"},{text:"测绘类项目",value:"测绘类项目"},{text:"运维类项目",value:"运维类项目"},{text:"规划设计类项目",value:"规划设计类项目"},{text:"咨询服务类项目",value:"咨询服务类项目"},{text:"监理类项目",value:"监理类项目"},{text:"科研类项目",value:"科研类项目"},{text:"集成类项目",value:"集成类项目"},{text:"其他类项目",value:"其他类项目"},{text:"内部研发类项目",value:"内部研发类项目"},{text:"市场类项目",value:"市场类项目"},{text:"事务型项目",value:"事务型项目"}]},{key:"projectLevel",label:"项目级别",isShow:!1,filters:[{text:"超大型",value:"超大型"},{text:"大型",value:"大型"},{text:"中型",value:"中型"},{text:"小型",value:"小型"}]},{key:"contractAmount",label:"合同额",isShow:!0,isQfw:1,sortable:"custom"},{key:"backMoney",label:"回款额",isShow:!0,isQfw:1,sortable:"custom"},{key:"projectStatus",label:"项目状态",isShow:!0,filters:[{text:"已登记",value:"已登记"},{text:"运行中",value:"运行中"},{text:"暂停",value:"暂停"},{text:"完成",value:"完成"},{text:"关闭",value:"关闭"},{text:"异常关闭",value:"异常关闭"}]},{key:"stageName",label:"当前阶段",isShow:!0,filters:[{text:"启动",value:"启动"},{text:"规划",value:"规划"},{text:"实施",value:"实施"},{text:"收尾",value:"收尾"}]},{key:"percentageComplete",label:"实施进度",isShow:!0,isPercent:!0,sortable:"custom"},{key:"contractNumber",label:"合同编号",isShow:!1},{key:"totalBudget",label:"总预算",isShow:!0,isQfw:1,sortable:"custom"},{key:"totalCost",label:"总成本",isShow:!0,isQfw:1,sortable:"custom"},{key:"predictGrossProfit",label:"预计毛利润",isShow:!0,isQfw:1,sortable:"custom"},{key:"curGrossProfit",label:"当前毛利润",isShow:!0,isQfw:1,sortable:"custom"},{key:"predictNetPorfit",label:"预计净利润",isShow:!0,isQfw:1,sortable:"custom"},{key:"curNetPorfit",label:"当前净利润",isShow:!0,isQfw:1,sortable:"custom"},{key:"progressProblems",label:"当前进展问题",isShow:!1},{key:"reviewTime",label:"最近Review时间",isShow:!1,sortable:"custom"},{key:"clientName",label:"客户名称",isShow:!1},{key:"contractSigningTime",label:"合同签订日期",isShow:!1,sortable:"custom"},{key:"contractCheckTime",label:"合同约定项目结束时间",isShow:!1,sortable:"custom"},{key:"proStartTime",label:"项目预计开始时间",isShow:!1,sortable:"custom"},{key:"proEndTime",label:"项目预计结束时间",isShow:!1,sortable:"custom"},{key:"trade",label:"行业",isShow:!1},{key:"region",label:"区域",isShow:!1},{key:"pigeonholeStatus",label:"归档状态",isShow:!1},{key:"Aunit",label:"A级单位",isShow:!1}],isStart:!1,isRecall:!0,isEditor:!0,multipleSelection:[],editorBtnMark:"",dialogVisible:!1,dialogShowField:!1,checkedField:[],aLLField:[],tableLoading:!0,examineDialog:!1,passForm:{attitude:"1",comment:""},isWaitMeBtn:!1,proParams:{},tableData1:[{role:"公司PMO专员意见",content:[{msgText:"项目登记信息规范完整",model:"2",disabled:!1},{msgText:"同意项目登记",model:"1"}],user:{date:"2010-2-3",userName:"张三"},auditComment:""},{role:"客户中心销售人员意见",content:[{msgText:"登记信息已知晓，同意项目登记",model:"1"}],user:{date:"2010-2-3",userName:"张三"},auditComment:""},{role:"工程中心部门经理意见",content:[{msgText:"项目基本信息、项目简介可通过",model:"1"},{msgText:"同意项目登记",model:"1"}],user:{date:"2010-2-3",userName:"张三"},auditComment:""},{role:"工程中心项目总监意见",content:[{msgText:"项目基本信息、项目简介可通过",model:"1"},{msgText:"同意项目登记",model:"1"}],user:{date:"2010-2-3",userName:"张三"},auditComment:""},{role:"工程中心总经理意见",content:[{msgText:"登记信息已知晓，同意项目登记",model:"1"}],user:{date:"2010-2-3",userName:"张三"},auditComment:""}],fieldName:"",fieldContent:[],sortFieldName:"",sort:null,isCared:null,tookenId:"",oaConfig:{1:"待发",3:"待处理",4:"处理中",6:"回退",7:"取回",5:"撤销",15:"终止",0:"结束"}}},filters:{formatThousands:function(e){if("--"==e)return"--";e=(e/=1e4).toFixed(2);if(0==/^[0-9]*[1-9][0-9]*$/.test(e))return e&&e.toString().replace(/(\d)(?=(\d{3})+\.)/g,function(e,t){return t+","});return(e+"").replace(/\d{1,3}(?=(\d{3})+$)/g,"$&,")},formatTip:function(e){return null==e?"--":parseFloat((100*e).toFixed(10))+"%"}},watch:{datas:{deep:!0,handler:function(e){}}},computed:y()({},Object(w.c)(["userinfo","cacheParams"]),{projectType:function(){return this.datas.options.pro_type},copyListConfig:function(){return JSON.parse(i()(this.listConfig))},listCode:function(){return"waitMe"},asideHeight:function(){return document.documentElement.clientHeight-240}}),mounted:function(){this.init(),this.getTooken()},methods:y()({},Object(w.b)(["setDetailPage","setCacheParams"]),{init:function(){this.getProjectTable()},getTooken:function(){var e=this;Object(s._39)().then(function(t){e.tookenId=t.data.id}).catch(function(e){})},tableRowClassName:function(e){e.row;var t=e.rowIndex;return 1===t?"warning-row":3===t?"success-row":""},getProjectTable:function(e){var t=this;this.tableLoading=!e;var a={code:this.listCode,memberId:this.userinfo.memberid,pageNum:this.page.pageNum,pageSize:this.page.pageSize,fieldName:""!=this.fieldName?this.fieldName:void 0,content:""!=this.fieldContent?this.fieldContent:void 0,sortFieldName:""!=this.sortFieldName?this.sortFieldName:void 0,sort:null!=this.sort?this.sort:void 0};this.cacheParams.fieldName&&""!=this.cacheParams.fieldName?(this.form.dicName=this.cacheParams.code,a=this.cacheParams):"waitMe"!=this.cacheParams.code&&(this.form.dicName=this.cacheParams.code,a=a),Object(s._18)("/sgpm/rest/api/server/pm/projects/item/dynamic",a).then(function(e){t.tableLoading=!1;var a=e.data.data||[];t.tableData=e.data.data||[],t.page.total=e.data.meta.totalCount,t.$emit("totalCount",e.data.meta.totalCount),t.getOaStatus(a)}).catch(function(e){})},getOaStatus:function(e){var t=this;e.forEach(function(e){e.processId?Object(s._4)("/flow/state/"+e.processId+"?token="+t.tookenId,null).then(function(a){e.auditStatus=t.oaConfig[a.data]}).catch(function(e){}):e.auditStatus="登记待提交"})},selectChange:function(e){this.form.dicName=e,this.page.pageNum=1,this.$refs.refTable.clearFilter(),this.fieldContent=void 0,this.fieldName=void 0,this.sort=void 0,this.sortFieldName=void 0,this.setCacheParams({}),this.getProjectTable()},handleSizeChange:function(e){this.getProjectTable()},handleCurrentChange:function(e){this.page.pageNum=e,this.getProjectTable()},filterHandler:function(e,t,a){0!=a.filteredValue.length&&(this.fieldName=a.property,this.fieldContent=a.filteredValue,this.sort=void 0,this.sortFieldName=void 0,this.setCacheParams({}),this.getProjectTable(),this.$refs.refTable.clearFilter())},clearFilter:function(){this.$refs.refTable.clearFilter(),this.fieldContent=void 0,this.fieldName=void 0,this.sort=void 0,this.sortFieldName=void 0,this.form.dicName="All",this.setCacheParams({}),this.getProjectTable()},handleSortChange:function(e,t,a){this.sortFieldName=e.prop,this.sort="ascending"==e.order?1:2,this.fieldName=void 0,this.fieldContent=void 0,this.getProjectTable()},handleSelectionChange:function(e){if(e){this.isPass=!1,this.isReject=!1;var t=e.auditStatus||"";this.editorBtnMark=t,this.isStart="登记已审核"!=e.auditStatus,this.isRecall="审核中"!==t,this.isWaitMeBtn=!1}this.isEditor="登记待提交"!=t,this.multipleSelection=e},handleCell:function(e,t,a,o){var n=this;if(3===a.cellIndex){var i={id:e.d_care_id,user_id:this.userinfo.memberid,project_id:e.id};e.d_care_id?(this.$message({message:"取消关注",type:"success"}),a.firstChild.firstChild.className="el-icon-star-on startGrey"):(this.$message({message:"关注成功",type:"success"}),a.firstChild.firstChild.className="el-icon-star-on startYellow"),Object(s.i)("/sgpm/rest/api/server/pm/project/care",i).then(function(e){200==e.data.code&&n.getProjectTable("care")}).catch(function(e){})}},getProjectMsyById:function(){var e=this,t=this.multipleSelection.id,a=this.multipleSelection.jumpType,n=this.multipleSelection.audit_status;a||this.$message({message:"不能跳转",type:"warning"}),Object(s._19)("/sgpm/rest/api/server/pm/project?projectId="+t,null).then(function(a){var n=a.data.data,i=e.updateJsonData(n);setTimeout(function(){o.a.$emit("audit",{obj:i,projectId:t})},1e3)}).catch(function(e){}),1==a&&20!=n&&21!=n&&22!=n?this.$router.push({name:"/Businessproject",params:{id:this.multipleSelection.id}}):2==a&&20!=n&&21!=n&&22!=n?this.$router.push({name:"/contractproject",params:{id:this.multipleSelection.id}}):3==a&&20!=n&&21!=n&&22!=n?this.$router.push({name:"/childproject",params:{id:this.multipleSelection.id}}):20!=n&&21!=n&&22!=n||this.$router.push({name:"/projectstart",params:{id:this.multipleSelection.id,category:this.multipleSelection.jumpType,judgestart:99}})},updateJsonData:function(e){var t={};for(var a in e)if("CONTRACT"==a||"BUSINESS"==a)for(var o in e[a])t[o]=e[a][o];else t[a]=e[a];return t},handleRecall:function(){alert("撤回了"),this.dialogVisible=!1},openExamineDialog:function(){var e=this;this.examineDialog=!0;var t=this.multipleSelection,a=this.userinfo.account_id;Object(s.f)("/sgpm/rest/api/integration/audit/record?accountId="+a+"&processId="+t.processId+"&type="+t.jumpType,null).then(function(t){var a=t.data.data,o=JSON.parse(i()(a));o.forEach(function(t){0==t.modify?(t.content.forEach(function(e){e.disabled=!0}),t.isAuditComment=!0):t.user.userName=e.userinfo.emp_name});e.tableData1=o}).catch(function(e){})},confirmPass:function(e){var t=this,a={};JSON.parse(i()(this.tableData1)).forEach(function(e){1==e.modify&&(a=e,e.isAudit=1)}),a.projectId=this.multipleSelection.id,a.memberId=this.userinfo.memberid,a.attitude=e,a.projectNumber=this.multipleSelection.projectNum,Object(s._24)("/sgpm/rest/api/integration/audit/record",a).then(function(e){t.getProjectTable(),t.$message({message:"审核已经提交",type:"success"})}).catch(function(e){}),this.examineDialog=!1},rejectedHandle:function(e){var t=this,a={};JSON.parse(i()(this.tableData1)).forEach(function(e){1==e.modify&&(a=e,e.isAudit=1)}),a.projectId=this.multipleSelection.id,a.memberId=this.userinfo.memberid,a.attitude=e,a.isPass=e,a.login_name=this.userinfo.login_name,a.projectNumber=this.multipleSelection.projectNum,Object(s._24)("/sgpm/rest/api/integration/audit/record",a).then(function(e){t.getProjectTable(),t.$message({message:"审核已经提交",type:"success"})}).catch(function(e){}),this.examineDialog=!1},detail:function(){this.setDetailPage(!0),this.getProjectMsyById()},openTemporaryDialog:function(){this.examineDialog=!0},TemporaryConfirm:function(){this.dialogTemporaryVisible=!1,window.open("http://oa.supermap.cn/seeyon/index.jsp")}})},he={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"list-container"},[a("header",{staticClass:"list-header"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{md:24,lg:24}},[a("el-row",{staticClass:"btn-item"},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.isWaitMeBtn},on:{click:e.detail}},[e._v("详情")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.isWaitMeBtn},on:{click:e.openTemporaryDialog}},[e._v("审批")]),e._v(" "),a("el-popover",{staticClass:"popover",attrs:{placement:"left",width:"200",trigger:"click"}},[e._l(e.listConfig,function(t){return a("el-checkbox",{key:t.key,staticClass:"popover-checkbox",model:{value:t.isShow,callback:function(a){e.$set(t,"isShow",a)},expression:"item.isShow"}},[e._v("\n              "+e._s(t.label))])}),e._v(" "),a("el-button",{staticClass:"circle-menu btn-left",attrs:{slot:"reference",type:"primary",icon:"el-icon-menu",size:"mini",circle:""},slot:"reference"})],2),e._v(" "),a("el-button",{staticClass:"circle-menu btn-left",attrs:{type:"primary",icon:"el-icon-refresh",size:"mini",circle:""},on:{click:e.clearFilter}})],1)],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"refTable",staticClass:"father-pro-table",staticStyle:{width:"100%","margin-bottom":"20px","min-height":"400px"},attrs:{data:e.tableData,"highlight-current-row":"",border:"",height:e.asideHeight,"header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0},"row-key":"id","default-expand-all":"","tree-props":{children:"son_project",hasChildren:"hasChildren"}},on:{"cell-click":e.handleCell,"current-change":e.handleSelectionChange,"sort-change":e.handleSortChange}},[a("el-table-column",{attrs:{type:"index",width:"38",align:"center",label:"序号",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{width:"280",fixed:"",label:"项目名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"35",label:"进度",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e._f("formatTip")(t.row.delayPercentage),placement:"right"}},[1==t.row.color?a("div",{staticClass:"progress progress-red"}):e._e(),e._v(" "),2==t.row.color?a("div",{staticClass:"progress progress-yellow"}):e._e(),e._v(" "),3==t.row.color?a("div",{staticClass:"progress progress-green"}):e._e(),e._v(" "),null==t.row.color?a("div",{staticClass:"progress"}):e._e()])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"35",label:"关注",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-star-on startGrey",class:{"el-icon-star-on":e.isCared?e.isCared:t.row.isCare,startYellow:e.isCared?e.isCared:t.row.isCare}})]}}])}),e._v(" "),e._l(e.listConfig,function(t){return t.isShow?a("el-table-column",{key:t.key,attrs:{prop:t.key,label:t.label,width:"130",align:"center",sortable:t.sortable?t.sortable:null,filters:t.filters?t.filters:null,"filter-method":t.filters?e.filterHandler:null},scopedSlots:e._u([{key:"default",fn:function(o){return[t.isShow&&1==t.isQfw?a("span",[e._v(e._s(e._f("formatThousands")(null==o.row[t.key]?"--":o.row[t.key])))]):e._e(),e._v(" "),t.isShow&&t.isPercent?a("span",[e._v(e._s(null==o.row[t.key]?"--":100*o.row[t.key]+"%"))]):e._e(),e._v(" "),t.isShow&&1!=t.isQfw&&!t.isPercent?a("span",[e._v(e._s(null==o.row[t.key]||""==o.row[t.key]?"--":o.row[t.key]))]):e._e()]}}],null,!0)}):e._e()})],2),e._v(" "),a("div",{staticClass:"page right"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":1,"page-sizes":[20,30,40],layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1),e._v(" "),a("div",{staticClass:"block"}),e._v(" "),a("el-dialog",{staticClass:"dialog",attrs:{title:"提示",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("i",{staticClass:"icon-message red"}),e._v(" "),a("span",{staticClass:"red"},[e._v("危险提示")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleRecall}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{staticClass:"dialog",attrs:{title:"登记审批",visible:e.examineDialog,width:"80%"},on:{"update:visible":function(t){e.examineDialog=t}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData1,"header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0}}},[a("el-table-column",{attrs:{prop:"role",label:"审批角色",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.role))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"审核内容",width:"360"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.content,function(t,o){return a("span",{key:o,staticStyle:{display:"inline-block"}},[a("span",[e._v(e._s(t.msgText))]),e._v(" "),a("el-radio",{attrs:{label:"1",disabled:t.disabled},model:{value:t.model,callback:function(a){e.$set(t,"model",a)},expression:"item.model"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"0",disabled:t.disabled},model:{value:t.model,callback:function(a){e.$set(t,"model",a)},expression:"item.model"}},[e._v("否")])],1)})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"审批人及日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{display:"block"}},[e._v("审批人："+e._s(t.row.user.userName))]),e._v(" "),a("span",{staticStyle:{display:"block"}},[e._v("日期："+e._s(t.row.user.date))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"审核意见"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:t.row.isAuditComment},model:{value:t.row.auditComment,callback:function(a){e.$set(t.row,"auditComment",a)},expression:"scope.row.auditComment"}})]}}])})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.rejectedHandle(0)}}},[e._v("驳 回")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.confirmPass(1)}}},[e._v("通 过")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"dialog",attrs:{title:"提示",visible:e.dialogShowField,width:"30%"},on:{"update:visible":function(t){e.dialogShowField=t}}},[e._l(e.listConfig,function(t){return a("el-checkbox",{key:t.key,model:{value:t.isShow,callback:function(a){e.$set(t,"isShow",a)},expression:"item.isShow"}},[e._v(e._s(t.label))])}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleRecall}},[e._v("确 定")])],1)],2),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.dialogTemporaryVisible,width:"30%"},on:{"update:visible":function(t){e.dialogTemporaryVisible=t}}},[a("span",[e._v("您接下来的操作，将会跳转oa系统中进行审批，请单击确定执行")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTemporaryVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.TemporaryConfirm}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var _e=a("VU/8")(me,he,!1,function(e){a("0jd9")},"data-v-63417f95",null).exports,fe={name:"MyAuditList",data:function(){return{globalParams:{},currentPage:1,tableData:[],selectAry:[],page:{pageNum:1,pageSize:20,total:0},listConfig:[{key:"auditStatus",label:"审核状态",isShow:!0},{key:"projectNum",label:"项目编号",isShow:!1},{key:"levelOneName",label:"实施B级单位",isShow:!0},{key:"levelTwoName",label:"实施C级单位",isShow:!1},{key:"projectManager",label:"项目经理",isShow:!0},{key:"customerCenter",label:"销售B级单位",isShow:!0},{key:"saleTwoName",label:"销售C级单位",isShow:!1},{key:"contractMarket",label:"销售人员",isShow:!0},{key:"projectType",label:"项目类型",isShow:!0,filters:[{text:"开发类项目",value:"开发类项目"},{text:"数据服务类项目",value:"数据服务类项目"},{text:"测绘类项目",value:"测绘类项目"},{text:"运维类项目",value:"运维类项目"},{text:"规划设计类项目",value:"规划设计类项目"},{text:"咨询服务类项目",value:"咨询服务类项目"},{text:"监理类项目",value:"监理类项目"},{text:"科研类项目",value:"科研类项目"},{text:"集成类项目",value:"集成类项目"},{text:"其他类项目",value:"其他类项目"},{text:"内部研发类项目",value:"内部研发类项目"},{text:"市场类项目",value:"市场类项目"},{text:"事务型项目",value:"事务型项目"}]},{key:"projectLevel",label:"项目级别",isShow:!1,filters:[{text:"超大型",value:"超大型"},{text:"大型",value:"大型"},{text:"中型",value:"中型"},{text:"小型",value:"小型"}]},{key:"contractAmount",label:"合同额",isShow:!0,isQfw:1,sortable:"custom"},{key:"backMoney",label:"回款额",isShow:!0,isQfw:1,sortable:"custom"},{key:"projectStatus",label:"项目状态",isShow:!0,filters:[{text:"已登记",value:"已登记"},{text:"运行中",value:"运行中"},{text:"暂停",value:"暂停"},{text:"完成",value:"完成"},{text:"关闭",value:"关闭"},{text:"异常关闭",value:"异常关闭"}]},{key:"stageName",label:"当前阶段",isShow:!0,filters:[{text:"启动",value:"启动"},{text:"规划",value:"规划"},{text:"实施",value:"实施"},{text:"收尾",value:"收尾"}]},{key:"percentageComplete",label:"实施进度",isShow:!0,isPercent:!0,sortable:"custom"},{key:"contractNumber",label:"合同编号",isShow:!1},{key:"totalBudget",label:"总预算",isShow:!0,isQfw:1,sortable:"custom"},{key:"totalCost",label:"总成本",isShow:!0,isQfw:1,sortable:"custom"},{key:"predictGrossProfit",label:"预计毛利润",isShow:!0,isQfw:1,sortable:"custom"},{key:"curGrossProfit",label:"当前毛利润",isShow:!0,isQfw:1,sortable:"custom"},{key:"predictNetPorfit",label:"预计净利润",isShow:!0,isQfw:1,sortable:"custom"},{key:"curNetPorfit",label:"当前净利润",isShow:!0,isQfw:1,sortable:"custom"},{key:"progressProblems",label:"当前进展问题",isShow:!1},{key:"reviewTime",label:"最近Review时间",isShow:!1,sortable:"custom"},{key:"clientName",label:"客户名称",isShow:!1},{key:"contractSigningTime",label:"合同签订日期",isShow:!1,sortable:"custom"},{key:"contractCheckTime",label:"合同约定项目结束时间",isShow:!1,sortable:"custom"},{key:"proStartTime",label:"项目预计开始时间",isShow:!1,sortable:"custom"},{key:"proEndTime",label:"项目预计结束时间",isShow:!1,sortable:"custom"},{key:"trade",label:"行业",isShow:!1},{key:"region",label:"区域",isShow:!1},{key:"pigeonholeStatus",label:"归档状态",isShow:!1},{key:"Aunit",label:"A级单位",isShow:!1}],isStart:!1,isRecall:!0,isEditor:!0,multipleSelection:[],editorBtnMark:"",dialogVisible:!1,dialogShowField:!1,checkedField:[],aLLField:[],tableLoading:!0,examineDialog:!1,passForm:{attitude:"1",comment:""},isWaitMeBtn:!0,proParams:{},tableData1:[{role:"公司PMO专员意见",content:[{msgText:"项目登记信息规范完整",model:"2",disabled:!0},{msgText:"同意项目登记",model:"1"}],user:{date:"2010-2-3",userName:"张三"},auditComment:""},{role:"客户中心销售人员意见",content:[{msgText:"登记信息已知晓，同意项目登记",model:"1"}],user:{date:"2010-2-3",userName:"张三"},auditComment:""},{role:"工程中心部门经理意见",content:[{msgText:"项目基本信息、项目简介可通过",model:"1"},{msgText:"同意项目登记",model:"1"}],user:{date:"2010-2-3",userName:"张三"},auditComment:""},{role:"工程中心项目总监意见",content:[{msgText:"项目基本信息、项目简介可通过",model:"1"},{msgText:"同意项目登记",model:"1"}],user:{date:"2010-2-3",userName:"张三"},auditComment:""},{role:"工程中心总经理意见",content:[{msgText:"登记信息已知晓，同意项目登记",model:"1"}],user:{date:"2010-2-3",userName:"张三"},auditComment:""}],fieldName:"",fieldContent:[],sortFieldName:"",sort:null,isCared:null,tookenId:"",oaConfig:{1:"待发",3:"待处理",4:"处理中",6:"回退",7:"取回",5:"撤销",15:"终止",0:"结束"},isRevoke:null}},filters:{formatThousands:function(e){if("--"==e)return"--";e=(e/=1e4).toFixed(2);if(0==/^[0-9]*[1-9][0-9]*$/.test(e))return e&&e.toString().replace(/(\d)(?=(\d{3})+\.)/g,function(e,t){return t+","});return(e+"").replace(/\d{1,3}(?=(\d{3})+$)/g,"$&,")},formatTip:function(e){return null==e?"--":parseFloat((100*e).toFixed(10))+"%"}},watch:{},computed:y()({},Object(w.c)(["userinfo","cacheParams"]),{copyListConfig:function(){return JSON.parse(i()(this.listConfig))},listCode:function(){return"myWait"},asideHeight:function(){return document.documentElement.clientHeight-320}}),mounted:function(){this.init(),this.getTooken()},methods:y()({},Object(w.b)(["setDetailPage","setCacheParams"]),{init:function(){this.getProjectTable()},getTooken:function(){var e=this;Object(s._39)().then(function(t){e.tookenId=t.data.id}).catch(function(e){})},getProjectTable:function(e){var t=this;this.tableLoading=!e;var a={code:this.listCode,memberId:this.userinfo.memberid,pageNum:this.page.pageNum,pageSize:this.page.pageSize,fieldName:""!=this.fieldName?this.fieldName:void 0,content:""!=this.fieldContent?this.fieldContent:void 0,sortFieldName:""!=this.sortFieldName?this.sortFieldName:void 0,sort:null!=this.sort?this.sort:void 0};this.cacheParams.fieldName&&""!=this.cacheParams.fieldName?a=this.cacheParams:"myWait"!=this.cacheParams.code&&(a=a),Object(s._18)("/sgpm/rest/api/server/pm/projects/item/dynamic",a).then(function(e){t.tableLoading=!1;var a=e.data.data||[];t.tableData=e.data.data||[],t.$emit("totalCount",e.data.meta.totalCount),t.page.total=e.data.meta.totalCount,t.getOaStatus(a)}).catch(function(e){})},getOaStatus:function(e){var t=this;e.forEach(function(e){e.processId?Object(s._4)("/flow/state/"+e.processId+"?token="+t.tookenId,null).then(function(a){a.data,e.auditStatus=t.oaConfig[a.data]}).catch(function(e){}):e.auditStatus="已保存"})},selectChange:function(e){this.page.pageNum=1,this.$refs.refTable.clearFilter(),this.fieldContent=void 0,this.fieldName=void 0,this.sort=void 0,this.sortFieldName=void 0,this.setCacheParams({}),this.getProjectTable()},handleSizeChange:function(e){this.getProjectTable()},handleCurrentChange:function(e){this.page.pageNum=e,this.getProjectTable()},filterHandler:function(e,t,a){0!=a.filteredValue.length&&(this.fieldName=a.property,this.fieldContent=a.filteredValue,this.sort=void 0,this.sortFieldName=void 0,this.setCacheParams({}),this.getProjectTable(),this.$refs.refTable.clearFilter())},clearFilter:function(){this.$refs.refTable.clearFilter(),this.fieldContent=void 0,this.fieldName=void 0,this.sort=void 0,this.sortFieldName=void 0,this.setCacheParams({}),this.getProjectTable()},handleSortChange:function(e,t,a){this.sortFieldName=e.prop,this.sort="ascending"==e.order?1:2,this.fieldName=void 0,this.fieldContent=void 0,this.getProjectTable(),this.listConfig},handleSelectionChange:function(e){if(e){this.isPass=!1,this.isReject=!1;var t=e.auditStatus||"";this.editorBtnMark=t,this.isStart="登记已审核"!=e.auditStatus,this.isRecall="审核中"!==t,this.isWaitMeBtn=!1}this.isEditor="已保存"!=t&&"撤销"!=t,this.multipleSelection=e,this.multipleSelection,localStorage.setItem("businessProjectId",this.multipleSelection.id)},handleCell:function(e,t,a,o){var n=this;if(3===a.cellIndex){var i={id:e.d_care_id,user_id:this.userinfo.memberid,project_id:e.id};e.d_care_id?(this.$message({message:"取消关注",type:"success"}),a.firstChild.firstChild.className="el-icon-star-on startGrey"):(this.$message({message:"关注成功",type:"success"}),a.firstChild.firstChild.className="el-icon-star-on startYellow"),Object(s.i)("/sgpm/rest/api/server/pm/project/care",i).then(function(e){200==e.data.code&&n.getProjectTable("care")}).catch(function(e){})}},reviewEditor:function(){this.setDetailPage(!1),this.getProjectMsyById(),"撤销"==this.multipleSelection.auditStatus?sessionStorage.setItem("isRevoke",1):sessionStorage.setItem("isRevoke",2)},getProjectMsyById:function(){var e=this;this.multipleSelection;var t=this.multipleSelection.id,a=this.multipleSelection.jumpType;a||this.$message({message:"不能跳转",type:"warning"}),Object(s._19)("/sgpm/rest/api/server/pm/project?projectId="+t,null).then(function(a){var n=a.data.data,i=e.updateJsonData(n);setTimeout(function(){o.a.$emit("audit",{obj:i,projectId:t})},500)}).catch(function(e){}),1==a?this.$router.push({name:"/Businessproject",params:{id:this.multipleSelection.id}}):2==a?this.$router.push({name:"/contractproject",params:{id:this.multipleSelection.id}}):3==a&&this.$router.push({name:"/childproject",params:{id:this.multipleSelection.id}})},updateJsonData:function(e){var t={};for(var a in e)if("CONTRACT"==a||"BUSINESS"==a)for(var o in e[a])t[o]=e[a][o];else t[a]=e[a];return t},reviewRecall:function(){this.dialogVisible=!0},handleRecall:function(){alert("撤回了"),this.dialogVisible=!1}})},ge={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"list-container"},[a("header",{staticClass:"list-header"},[a("div",{staticClass:"list-header-myreview"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{md:24,lg:24}},[a("el-row",{staticClass:"btn-item"},[a("el-button",{attrs:{type:"primary",disabled:e.isEditor,size:"mini"},on:{click:e.reviewEditor}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:e.isRecall,size:"mini"},on:{click:e.reviewRecall}},[e._v("撤回")]),e._v(" "),a("el-popover",{staticClass:"popover",attrs:{placement:"left",width:"200",trigger:"click"}},[e._l(e.listConfig,function(t){return a("el-checkbox",{key:t.key,staticClass:"popover-checkbox",model:{value:t.isShow,callback:function(a){e.$set(t,"isShow",a)},expression:"item.isShow"}},[e._v("\n                "+e._s(t.label))])}),e._v(" "),a("el-button",{staticClass:"circle-menu btn-left",attrs:{slot:"reference",type:"primary",icon:"el-icon-menu",size:"mini",circle:""},slot:"reference"})],2),e._v(" "),a("el-button",{staticClass:"circle-menu btn-left",attrs:{type:"primary",icon:"el-icon-refresh",size:"mini",circle:""},on:{click:e.clearFilter}})],1)],1)],1)],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"refTable",staticClass:"father-pro-table",staticStyle:{width:"100%","margin-bottom":"20px","min-height":"400px"},attrs:{data:e.tableData,"highlight-current-row":"",border:"",height:e.asideHeight,"header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0},"row-key":"id","default-expand-all":"","tree-props":{children:"son_project",hasChildren:"hasChildren"}},on:{"cell-click":e.handleCell,"current-change":e.handleSelectionChange,"sort-change":e.handleSortChange}},[a("el-table-column",{attrs:{type:"index",width:"38",align:"center",label:"序号",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{width:"280",fixed:"",label:"项目名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"35",label:"进度",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e._f("formatTip")(t.row.delayPercentage),placement:"right"}},[1==t.row.color?a("div",{staticClass:"progress progress-red"}):e._e(),e._v(" "),2==t.row.color?a("div",{staticClass:"progress progress-yellow"}):e._e(),e._v(" "),3==t.row.color?a("div",{staticClass:"progress progress-green"}):e._e(),e._v(" "),null==t.row.color?a("div",{staticClass:"progress"}):e._e()])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"35",label:"关注",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-star-on startGrey",class:{"el-icon-star-on":e.isCared?e.isCared:t.row.isCare,startYellow:e.isCared?e.isCared:t.row.isCare}})]}}])}),e._v(" "),e._l(e.listConfig,function(t){return t.isShow?a("el-table-column",{key:t.key,attrs:{prop:t.key,label:t.label,width:"130",align:"center",sortable:t.sortable?t.sortable:null,filters:t.filters?t.filters:null,"filter-method":t.filters?e.filterHandler:null},scopedSlots:e._u([{key:"default",fn:function(o){return[t.isShow&&1==t.isQfw?a("span",[e._v(e._s(e._f("formatThousands")(null==o.row[t.key]?"--":o.row[t.key])))]):e._e(),e._v(" "),t.isShow&&t.isPercent?a("span",[e._v(e._s(null==o.row[t.key]?"--":100*o.row[t.key]+"%"))]):e._e(),e._v(" "),t.isShow&&1!=t.isQfw&&!t.isPercent?a("span",[e._v(e._s(null==o.row[t.key]||""==o.row[t.key]?"--":o.row[t.key]))]):e._e()]}}],null,!0)}):e._e()})],2),e._v(" "),a("div",{staticClass:"page right"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":1,"page-sizes":[20,30,40],layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1),e._v(" "),a("div",{staticClass:"block"}),e._v(" "),a("el-dialog",{staticClass:"dialog",attrs:{title:"提示",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("i",{staticClass:"icon-message red"}),e._v(" "),a("span",{staticClass:"red"},[e._v("危险提示")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleRecall}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{staticClass:"dialog",attrs:{title:"登记审批",visible:e.examineDialog},on:{"update:visible":function(t){e.examineDialog=t}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData1,"header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0}}},[a("el-table-column",{attrs:{prop:"role",label:"审批角色",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.role))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"审核内容",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.content,function(t,o){return a("span",{key:o,staticStyle:{display:"inline-block"}},[a("el-radio",{attrs:{label:"1",disabled:t.disabled},model:{value:t.model,callback:function(a){e.$set(t,"model",a)},expression:"item.model"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"0",disabled:t.disabled},model:{value:t.model,callback:function(a){e.$set(t,"model",a)},expression:"item.model"}},[e._v("否")])],1)})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"审批人及日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{display:"block"}},[e._v("审批人："+e._s(t.row.user.userName))]),e._v(" "),a("span",{staticStyle:{display:"block"}},[e._v("日期："+e._s(t.row.user.date))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"审核意见"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:t.row.isAuditComment},model:{value:t.row.auditComment,callback:function(a){e.$set(t.row,"auditComment",a)},expression:"scope.row.auditComment"}})]}}])})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",disabled:""},on:{click:function(t){return e.confirmPass("2")}}},[e._v("驳 回")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.confirmPass(1)}}},[e._v("通 过")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"dialog",attrs:{title:"提示",visible:e.dialogShowField,width:"30%"},on:{"update:visible":function(t){e.dialogShowField=t}}},[e._l(e.listConfig,function(t){return a("el-checkbox",{key:t.key,model:{value:t.isShow,callback:function(a){e.$set(t,"isShow",a)},expression:"item.isShow"}},[e._v(e._s(t.label))])}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleRecall}},[e._v("确 定")])],1)],2)],1)},staticRenderFns:[]};var be=a("VU/8")(fe,ge,!1,function(e){a("IZdT")},"data-v-35fa05f3",null).exports,ve=a("Zjz6"),ye=a("ApmE"),we=a("pdpF"),je={name:"TableBar",components:{chart:we.a},props:["tableList","tableTitle","tooltip"],data:function(){return{tableData:this.tableList,yCount:null,option:{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},toolbox:{show:!0,feature:{saveAsImage:{show:!0}}},legend:{data:["严重延期","一般延期","正常"],top:"3%",left:"40%"},grid:{left:"3%",right:"4%",bottom:"22px",containLabel:!0},xAxis:{type:"value",splitLine:{show:!1},axisTick:{interval:0}},yAxis:{type:"category",splitLine:{show:!1},axisTick:{interval:0},axisLabel:{interval:0},data:[]},series:[]}}},mounted:function(){var e=this;this.$nextTick(function(){e.getBarOption(e.tableList)})},created:function(){},computed:{},methods:{getBarOption:function(e){var t=[],a=[],o=[],n=[];JSON.parse(i()(e)).forEach(function(e){t.push(e.badDelay),a.push(e.generalDelay),o.push(e.normal),n.push(e.bLevelUnit)}),this.option.series.push({color:"#FF9999",name:"严重延期",type:"bar",stack:"总量",label:{normal:{show:!0,position:"insideRight",color:"#000",formatter:function(e,t){if(0==e.value)return""}}},data:t.reverse()}),this.option.series.push({color:"#ffd699",name:"一般延期",type:"bar",stack:"总量",label:{normal:{show:!0,position:"insideRight",color:"#000",formatter:function(e,t){if(0==e.value)return""}}},data:a.reverse()}),this.option.series.push({color:"#8deb8d",name:"正常",type:"bar",stack:"总量",label:{normal:{show:!0,position:"insideRight",color:"#000",formatter:function(e,t){if(0==e.value)return""}}},data:o.reverse()}),this.option.yAxis.data=n.reverse(),this.$refs.chartRef},getSummaries:function(e){var t=e.columns,a=e.data,o=[];return t.forEach(function(e,t){if(0!==t){var n=a.map(function(t){return Number(t[e.property])});n.every(function(e){return isNaN(e)})?o[t]="--":(o[t]=n.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),o[t]+="")}else o[t]="合计"}),o}}},Ce={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-bar"},[a("el-row",[a("h3",{staticClass:"default"},[e._v(e._s(e.tableTitle))])]),e._v(" "),a("el-row",{staticClass:"con",attrs:{gutter:40}},[a("p",{staticClass:"unit default"},[e._v("单位：个")]),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData,border:"","summary-method":e.getSummaries,"show-summary":"","max-height":"260","header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0}}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bLevelUnit",label:"经营单位",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"badDelay",label:"严重延期",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{staticClass:"bad-delay",attrs:{size:"medium"}},[e._v(e._s(t.row.badDelay))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"generalDelay",label:"一般延期",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{staticClass:"general-delay",attrs:{size:"medium"}},[e._v(e._s(t.row.generalDelay))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"normal",label:"正常",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{staticClass:"normal",attrs:{size:"medium"}},[e._v(e._s(t.row.normal))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"allCount",label:"总数",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.allCount))])]}}])})],1)],1),e._v(" "),a("el-col",{staticClass:"chart-border",attrs:{span:12}},[a("chart",{ref:"chartRef",attrs:{options:e.option}}),e._v(" "),a("div",{staticClass:"smark"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.tooltip,placement:"bottom"}},[a("el-button",{attrs:{type:"text"}},[a("i",{staticClass:"el-icon-warning-outline smark-icon"})])],1)],1)],1)],1)],1)},staticRenderFns:[]};var Se=a("VU/8")(je,Ce,!1,function(e){a("2r/s")},"data-v-0e5532da",null).exports,ke={name:"TableBarSecond",components:{chart:we.a},props:["tableList"],data:function(){return{tableData:this.tableList,option:{toolbox:{show:!0,feature:{saveAsImage:{show:!0}}},title:{text:"在实施项目回款延期",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"cross",axis:"x",crossStyle:{color:"#999"}}},grid:{bottom:"20%"},xAxis:[{type:"category",data:[],axisLabel:{rotate:20}}],yAxis:[{type:"value",name:"个数",splitLine:{show:!1},axisLabel:{formatter:"{value}"}}],series:[]}}},mounted:function(){var e=this;this.$nextTick(function(){e.init()})},computed:{},methods:{init:function(){this.getBarOption(this.tableList)},getSummaries:function(e){var t=e.columns,a=e.data,o=[];return t.forEach(function(e,t){if(0!==t){var n=a.map(function(t){return Number(t[e.property])});n.every(function(e){return isNaN(e)})?o[t]="--":(o[t]=n.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),o[t]+="")}else o[t]="合计"}),o},getBarOption:function(e){var t=[],a=[];JSON.parse(i()(e)).forEach(function(e){a.push(e.allCount),t.push(e.bLevelUnit)}),this.option.series.push({color:"#65cee8",itemStyle:{opacity:.7,color:"#ade1fb"},name:"回款延期项目个数",type:"bar",data:a,label:{normal:{show:!0,position:"top",color:"#000"}}}),this.option.xAxis[0].data=t}}},De={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-bar"},[a("el-row",[a("h3",{staticClass:"default"},[e._v("在实施项目回款延期")])]),e._v(" "),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:12}},[a("p",{staticClass:"unit default"},[e._v("单位：个")]),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData,border:"","summary-method":e.getSummaries,"show-summary":"","max-height":"300","header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0}}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bLevelUnit",label:"经营单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"allCount",label:"回款延期项目个数"}})],1)],1),e._v(" "),a("el-col",{staticClass:"chart-border",attrs:{span:12}},[a("chart",{attrs:{options:e.option}}),e._v(" "),a("div",{staticClass:"smark"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"1）在实施项目：项目启动但未验收关闭；\n          2）严重延期：实际回款日期滞后回款计划3个月以上； \n          3）一般延期：实际回款日期滞后回款计划3个月以内；\n          4）正常：回款未延期 ",placement:"bottom"}},[a("el-button",{attrs:{type:"text"}},[a("i",{staticClass:"el-icon-warning-outline smark-icon"})])],1)],1)],1)],1)],1)},staticRenderFns:[]};var Ne=a("VU/8")(ke,De,!1,function(e){a("5Swz")},"data-v-6b098276",null).exports,Te={name:"ProgressWarning",components:{chart:we.a,TableBar:Se,TableBarSecond:Ne},data:function(){return{path:{managerBoard:"应用业务群",managerBoardGroup:"集团",managerBoardPlatform:"平台业务群",managerBoardCloud:"云业务群",managerBoardInternational:"国际业务群",managerBoardResearch:"研究院",ManagerBoardGT:"国图信息",ManagerBoardNK:"南康科技",ManagerBoardAT:"北京世纪安图"},pathReversal:{"应用业务群":"managerBoard","平台业务群":"managerBoardPlatform","云业务群":"managerBoardCloud","国际业务群":"managerBoardInternational","研究院":"managerBoardResearch","国图信息":"ManagerBoardGT","南康科技":"ManagerBoardNK","北京世纪安图":"ManagerBoardAT"},progressTable:[],checkTable:[],proBiggerTable:[],backMoneyTable:[],implementOption:{title:{text:"在实施项目不同阶段数量和金额分析",left:"center"},toolbox:{show:!0,feature:{saveAsImage:{show:!0}}},tooltip:{trigger:"axis",axisPointer:{type:"cross",axis:"x",crossStyle:{color:"#999"}}},grid:{top:"80"},legend:{data:["合同额","项目个数"],top:"10%"},xAxis:[{type:"category",data:["启动","规划","实施","收尾"]}],yAxis:[{type:"value",name:"金额(万元)",splitLine:{show:!1},axisLabel:{formatter:"{value}"}},{type:"value",name:"个数",splitLine:{show:!1},axisLabel:{formatter:"{value} "}}],series:[]},implementTypeOption:{title:{text:"在实施项目进度分析",left:"center"},toolbox:{show:!0,feature:{saveAsImage:{show:!0}}},tooltip:{trigger:"axis",axisPointer:{type:"cross",axis:"x",crossStyle:{color:"#999"}}},grid:{top:"80"},xAxis:[{type:"category",data:["严重延期","一般延期","正常"]}],yAxis:[{type:"value",name:"金额(万元)",splitLine:{show:!1},axisLabel:{formatter:"{value}"}},{type:"value",name:"个数",splitLine:{show:!1},axisLabel:{formatter:"{value} "}}],series:[]},isProgressTable:!0,ischeckTable:!0,isProBiggerTable:!0,isBackMoneyTable:!0}},mounted:function(){var e=this;this.$nextTick(function(){e.init()})},computed:{asideHeight:function(){return document.documentElement.clientHeight-150}},methods:{init:function(){this.getImplementOptionData(),this.projectImplementTypeChart(),this.progressStatisticsTableBar(),this.proCheck(),this.proBigger(),this.getProBackMoney()},getImplementOptionData:function(){var e=this,t=this.$route.path.slice(1);Object(s._15)("/board/process/project/overview?group="+this.path[t],null).then(function(t){if(200==t.data.code){var a={},o=[];t.data.data.forEach(function(e){if("项目个数"==e.name)e.type="line",e.yAxisIndex=1,e.lineStyle={color:"#fecb42",shadowOffsetY:3,shadowColor:"#af8003",shadowBlur:6},e.itemStyle={color:"#ffb900"},a=e,o.push(a);else{e.type="bar",e.color="#65cee8",e.label={normal:{show:!0,position:"top",color:"#000"}},e.itemStyle={opacity:.7,color:"#ade1fb"};var t=e.data.map(function(e){return e.toFixed(2)});a=e,e.data=t,o.push(a)}}),e.implementOption.series=o.reverse(),e.implementOption.xAxis[0].data}}).catch(function(e){})},projectImplementTypeChart:function(){var e=this,t=this.$route.path.slice(1);Object(s._16)("/board/process/project/states?group="+this.path[t],null).then(function(t){if(200==t.data.code){var a=t.data.data[0].data,o={name:"合同额",type:"bar",data:[]},n={};t.data.data[1].data.forEach(function(e,t){0==t?o.data.push({name:"严重延期",value:e,itemStyle:{color:"#FF9999"},label:{normal:{show:!0,position:"top",color:"#000"}}}):1==t?o.data.push({name:"一般延期",value:e,itemStyle:{color:"#ffd699"},label:{normal:{show:!0,position:"top",color:"#000"}}}):o.data.push({name:"正常",value:e,itemStyle:{color:"#8deb8d"},label:{normal:{show:!0,position:"top",color:"#000"}}})}),n.type="line",n.name="项目个数",n.data=a,n.yAxisIndex=1,n.lineStyle={color:"#fecb42",shadowOffsetY:3,shadowColor:"#af8003",shadowBlur:6},n.itemStyle={color:"#ffb900"},e.implementTypeOption.series.push(n),e.implementTypeOption.series.push(o)}}).catch(function(e){})},progressStatisticsTableBar:function(){var e=this;this.isProgressTable=!1;var t=this.$route.path.slice(1);Object(s._11)("/board/process/project/statistics?group="+this.path[t],null).then(function(t){if(200==t.data.code){var a=t.data.data;e.isProgressTable=!0,e.progressTable=a}}).catch(function(e){})},proCheck:function(){var e=this,t=this.$route.path.slice(1);this.ischeckTable=!1,Object(s._11)("/board/process/project/check?group="+this.path[t],null).then(function(t){if(200==t.data.code){var a=t.data.data;e.ischeckTable=!0,e.checkTable=a}}).catch(function(e){})},proBigger:function(){var e=this,t=this.$route.path.slice(1);this.isProBiggerTable=!1,Object(s._10)("/board/process/project/big/check?group="+this.path[t],null).then(function(t){if(200==t.data.code){var a=t.data.data;e.isProBiggerTable=!0,e.proBiggerTable=a}}).catch(function(e){})},getProBackMoney:function(){var e=this,t=this.$route.path.slice(1);this.isBackMoneyTable=!1,Object(s._9)("/board/process/receiced/delay/statistics?group="+this.path[t],null).then(function(t){if(200==t.data.code){var a=t.data.data;e.isBackMoneyTable=!0,e.backMoneyTable=a}}).catch(function(e){})}}},xe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"board-warning",style:{height:e.asideHeight+"px"}},[a("el-row",{staticClass:"board-row",attrs:{gutter:50}},[a("el-col",{staticClass:"chart-border",attrs:{span:12}},[a("chart",{attrs:{options:e.implementOption}}),e._v(" "),a("div",{staticClass:"smark"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"在实施项目不同项目阶段的个数和累计合同额 ",placement:"bottom"}},[a("el-button",{attrs:{type:"text"}},[a("i",{staticClass:"el-icon-warning-outline smark-icon"})])],1)],1)],1),e._v(" "),a("el-col",{staticClass:"chart-border",attrs:{span:12}},[a("chart",{attrs:{options:e.implementTypeOption}}),e._v(" "),a("div",{staticClass:"smark"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"1）在实施项目：项目启动但未验收关闭；\n         2）延期率：所处阶段延期天数/总工期；\n         3）严重延期：延期率〉30% ；\n          4）一般延期：30%>延期率>=10% ；\n          5）正常项目：延期率<10%",placement:"bottom"}},[a("el-button",{attrs:{type:"text"}},[a("i",{staticClass:"el-icon-warning-outline smark-icon"})])],1)],1)],1)],1),e._v(" "),a("el-row",{staticClass:"board-row",attrs:{gutter:50}},[a("el-col",{attrs:{span:24}},[e.isProgressTable?a("table-bar",{attrs:{"table-list":e.progressTable,"table-title":"各经营单位在实施项目进度分析",tooltip:"1）在实施项目：项目启动但未验收关闭； 2）延期率：所处阶段延期天数/总工期；3）严重延期：延期率〉30% ； 4）一般延期：30%>延期率>=10% ；5）正常项目：延期率<10%"}}):e._e()],1),e._v(" "),a("el-col",{attrs:{span:24}},[e.ischeckTable?a("table-bar",{attrs:{"table-list":e.checkTable,"table-title":"在实施项目验收延期",tooltip:"1）验收延期：计划验收但实际未验收的项目；2）严重延期：验收延期三个月以上；3）一般延期：验收延期三个月以内；4）正常：验收未延期"}}):e._e()],1),e._v(" "),a("el-col",{attrs:{span:24}},[e.isProBiggerTable?a("table-bar",{attrs:{"table-list":e.proBiggerTable,"table-title":"500万以上在实施项目进度延期",tooltip:"1）延期率：所处阶段延期天数/总工期；2）严重延期：延期率〉30% ； 3）一般延期：30%>延期率>=10% ；4）正常项目：延期率<10%"}}):e._e()],1),e._v(" "),a("el-col",{attrs:{span:24}},[e.isBackMoneyTable?a("table-bar-second",{attrs:{"table-list":e.backMoneyTable}}):e._e()],1)],1)],1)},staticRenderFns:[]};var Ie=a("VU/8")(Te,xe,!1,function(e){a("Nn3G")},"data-v-7f2bd285",null).exports,Pe={name:"WorkingHour",data:function(){return{tableData1:[],tableData2:[],dateList:[],dataConfig:[],dismissedSuggestionsConfig:{0:"未编写",1:"已保存",2:"已提交",3:"已评价"},projectTypeNameConfig:{1:"技术工作",2:"管理沟通工作",3:"人员培养团队建设工作",4:"默认技术工作,行政事务",5:"售前支持",6:"员工培养",7:"个人学习",8:"默认行政事务"}}},created:function(){var e=this;o.a.$on("projectContent",function(t){e.queryWorkSheetTable(),e.WorkSheetStatisticsTable()})},mounted:function(){this.queryWorkSheetTable(),this.WorkSheetStatisticsTable()},computed:y()({},Object(w.c)(["userinfo"]),{table1nK:function(){return"8416498716893399290"!=this.userinfo.account_id},listConfig:function(){var e=[{key:"subDeptName",label:"B级单位"},{key:"deptName",label:"C级单位"},{key:"staffName",label:"姓名"}];return"8416498716893399290"==this.userinfo.account_id&&e.splice(1,1),e}}),methods:{queryWorkSheetTable:function(){var e=this,t=window.localStorage;Object(s._20)("/worksheet/hours/item/project?projectId="+t.projectNumber+"&staffCode="+this.userinfo.code,null).then(function(t){var a=t.data.data;e.tableData1=a}).catch(function(e){})},WorkSheetStatisticsTable:function(){var e=this,t=window.localStorage,a=new Date,o=a.getFullYear(),n=a.getMonth()+1,i=o+"-"+(n=n<10?"0"+n:n)+"-"+a.getDate();Object(s._41)("/worksheet/project/hours/query?projectId="+t.projectNumber+"&startTime=2019-01-01&endTime="+i+"&staffCode="+this.userinfo.code+"&accountId="+t.companyId,null).then(function(t){e.dataConfig=[];for(var a=t.data.data,o=e.getNowFormatDate(),n=[],i=[],r=0;r<o;r++)n.push("2020-0"+(r+1));e.dateList=n,n.forEach(function(t,a){e.dataConfig.push({key:a+1+"月",label:a+1+"月"})}),a.forEach(function(e,t){for(var a=[],o=0;o<n.length;o++)e.month.filter(function(e){e.msgTime==n[o]&&(a.push(e),o++)}),a.push({hours:0,msgTime:n[o]});var r={};a.forEach(function(e,t){r[t+1+"月"]=e.hours}),i.push(y()({projectName:e.projectName,subDeptName:e.subDeptName,deptName:e.deptName,staffName:e.staffName,littleHour:e.littleHour,countHour:e.countHour},r))}),e.tableData2=i}).catch(function(e){})},jqDate:function(e){return Number(e.match(/-(\S*)/)[1])},getNowFormatDate:function(){var e=new Date,t=(e.getFullYear(),e.getMonth()+1),a=e.getDate();return t>=1&&t<=9&&(t="0"+t),a>=0&&a<=9&&(a="0"+a),t},getSummaries:function(e){var t=e.columns,a=e.data,o=[];return t.forEach(function(e,t){if(0!==t){var n=a.map(function(t){return Number(t[e.property])});n.every(function(e){return isNaN(e)})?o[t]="--":(o[t]=n.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),o[t]+="")}else o[t]="合计"}),o}}},Oe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"work-sheet"},[e.table1nK?a("div",{staticClass:"table1"},[a("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"grid-content bg-purple"},[a("p",{staticClass:"titile"},[e._v("查询工时")])])]),e._v(" "),a("el-col",{staticClass:"unit",attrs:{span:2}},[a("div",{staticClass:"grid-content bg-purple-light"},[e._v("单位：月")])])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData1,"header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0},stripe:"",border:"",height:"250"}},[a("el-table-column",{attrs:{type:"index",width:"38",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"staffname",label:"姓名",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{label:"工时描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.row.taskDesc,placement:"bottom"}},[a("span",{staticClass:"project-name"},[e._v(e._s(t.row.taskDesc))])])]}}],null,!1,3528181988)}),e._v(" "),a("el-table-column",{attrs:{label:"工作类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"project-name"},[e._v(e._s(e.projectTypeNameConfig[t.row.projectTypeName]))])]}}],null,!1,3102697203)}),e._v(" "),a("el-table-column",{attrs:{prop:"workSheet",label:"实际工时",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{label:"工时占比",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"project-name"},[e._v(e._s(100*t.row.hourScale+"%"))])]}}],null,!1,2873970130)}),e._v(" "),a("el-table-column",{attrs:{label:"审核状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"project-name"},[e._v(e._s(e.dismissedSuggestionsConfig[t.row.status]))])]}}],null,!1,4261592291)}),e._v(" "),a("el-table-column",{attrs:{prop:"dismissedSuggestions",label:"审核内容",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"msgdatetime",label:"时间",width:"90"}})],1)],1):e._e(),e._v(" "),a("div",{staticClass:"table-work"},[a("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"grid-content bg-purple"},[a("p",{staticClass:"titile"},[e._v("项目工时统计")])])]),e._v(" "),a("el-col",{staticClass:"unit",attrs:{span:2}},[e._v("单位："+e._s(e.table1nK?"月":"天"))])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData2,"header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0},stripe:"",border:"","show-summary":"","summary-method":e.getSummaries,"max-height":"250"}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),e._v(" "),e._l(e.listConfig,function(e){return a("el-table-column",{key:e.val,attrs:{prop:e.key,label:e.label}})}),e._v(" "),e._l(e.dataConfig,function(e){return a("el-table-column",{key:e.val,attrs:{prop:e.key,label:e.label}})}),e._v(" "),a("el-table-column",{attrs:{prop:"littleHour",label:"小计"}}),e._v(" "),a("el-table-column",{attrs:{prop:"countHour",label:"总工时合计",width:"100"}})],2)],1)])},staticRenderFns:[]};var Ee=a("VU/8")(Pe,Oe,!1,function(e){a("2lDM")},"data-v-0cfd4f87",null).exports,Me=(a("7+uW"),{name:"MyTabs",props:["widget","models","rules","remote","datas"],components:{GtBusinessPage:ae,menuItem:u,roleItem:m,memberItem:f,authorityItem:D,superviseItem:pe,Milepost:N.a,MoneybackOne:I,MoneybackTwo:E,AudittableOne:z,AudittableTwo:q,AudittableThree:G,AuditListMe:_e,MyAuditList:be,ManagementHome:ve.a,BoardWarning:ye.a,ProgressWarning:Ie,ProjectContract:X,ContractInfo:re,WorkingHour:Ee,accounTing:ce,SoftHardwareReview:B},data:function(){return{remoteFuncs:{},editData:{},dynaComponents:"",isPmo:!1,myAuditListBadgeValue:0,auditListMeBadgeValue:0,auditTableOneValue:0,auditTableTwoValue:0,auditTableThreeValue:0,warningTab:!0,progressTab:!0}},computed:{memberItem:function(){return"memberItem"}},mounted:function(){},created:function(){var e=this;o.a.$on("isPmo",function(t){e.isPmo=t})},watch:{datas:{deep:!0,handler:function(e){this.datas,this.datas.options.url_a}}},methods:{tabClick:function(e){var t=this;"预警"==e.label?(this.dynaComponents="memberItem",this.warningTab=!1,setTimeout(function(){t.warningTab=!0},200)):"进度"==e.label&&(this.progressTab=!1,setTimeout(function(){t.progressTab=!0},200))},myAuditListCount:function(e){this.myAuditListBadgeValue=e},auditListMeCount:function(e){this.auditListMeBadgeValue=e},auditTableOneCount:function(e){this.auditTableOneValue=e},auditTableTwoCount:function(e){this.auditTableTwoValue=e},auditTableThreeCount:function(e){this.auditTableThreeValue=e}}}),Fe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-tabs",{on:{"tab-click":e.tabClick}},e._l(e.datas.tabs,function(t,o){return a("el-tab-pane",{key:o,attrs:{label:t.name,disabled:!e.isPmo&&"监管部门"==t.name}},["基本信息"==t.name?a("project-information"):e._e(),e._v(" "),"商机/合同"==t.name?a("project-contract"):e._e(),e._v(" "),"商机"==t.name?a("gt-business-page"):e._e(),e._v(" "),"合同信息"==t.name?a("contract-info"):e._e(),e._v(" "),"里程碑Review"==t.name?a("milepost"):e._e(),e._v(" "),"回款里程碑计划"==t.name?a("moneyback-one"):e._e(),e._v(" "),"回款条件Review"==t.name?a("moneyback-two"):e._e(),e._v(" "),"软硬件进度Review"==t.name?a("soft-hardware-review"):e._e(),e._v(" "),"待审流程"==t.name?a("audittable-one",{on:{totalCount:e.auditTableOneCount}}):e._e(),e._v(" "),"已发流程"==t.name?a("audittable-two",{on:{totalCount:e.auditTableTwoCount}}):e._e(),e._v(" "),"待发流程"==t.name?a("audittable-three",{on:{totalCount:e.auditTableThreeCount}}):e._e(),e._v(" "),"待审流程"==t.name?a("span",{attrs:{slot:"label"},slot:"label"},[a("el-badge",{staticClass:"item",attrs:{value:e.auditTableOneValue}},[e._v("待审流程")])],1):e._e(),e._v(" "),"已发流程"==t.name?a("span",{attrs:{slot:"label"},slot:"label"},[a("el-badge",{staticClass:"item",attrs:{value:e.auditTableTwoValue}},[e._v("已发流程")])],1):e._e(),e._v(" "),"待发流程"==t.name?a("span",{attrs:{slot:"label"},slot:"label"},[a("el-badge",{staticClass:"item",attrs:{value:e.auditTableThreeValue}},[e._v("待发流程")])],1):e._e(),e._v(" "),"项目工时"==t.name?a("working-hour"):e._e(),e._v(" "),"菜单信息"==t.name?a("menu-item"):e._e(),e._v(" "),"角色信息"==t.name?a("role-item"):e._e(),e._v(" "),"菜单授权"==t.name?a("authority-item"):e._e(),e._v(" "),"监管部门"==t.name?a("supervise-item"):e._e(),e._v(" "),"核算"==t.name?a("management-home"):e._e(),e._v(" "),e.warningTab?["预警"==t.name?a("board-warning"):e._e()]:e._e(),e._v(" "),e.progressTab?["进度"==t.name?a("progress-warning"):e._e()]:e._e(),e._v(" "),"我提交待审核的项目"==t.name?a("my-audit-list",{on:{totalCount:e.myAuditListCount}}):e._e(),e._v(" "),"我提交待审核的项目"==t.name?a("span",{attrs:{slot:"label"},slot:"label"},[a("el-badge",{staticClass:"item",attrs:{value:e.myAuditListBadgeValue}},[e._v("我提交待审核的项目")])],1):e._e(),e._v(" "),"待我审核的项目"==t.name?a("span",{attrs:{slot:"label"},slot:"label"},[a("el-badge",{staticClass:"item",attrs:{value:e.auditListMeBadgeValue}},[e._v("待我审核的项目")])],1):e._e(),e._v(" "),"待我审核的项目"==t.name?a("audit-list-me",{on:{totalCount:e.auditListMeCount}}):e._e(),e._v(" "),"成员信息"==t.name?a(e.memberItem,{tag:"component"}):e._e(),e._v(" "),"项目核算"==t.name?a("accoun-ting"):e._e()],2)}),1)],1)},staticRenderFns:[]};var Ae=a("VU/8")(Me,Fe,!1,function(e){a("ql1g")},null,null);t.a=Ae.exports},"H9/9":function(e,t){},HtpU:function(e,t){},IHqm:function(e,t){},IOH6:function(e,t){},IWIe:function(e,t){},IZdT:function(e,t){},IrCT:function(e,t){},IxFQ:function(e,t){},K7Gf:function(e,t){},K9mm:function(e,t){},KVxN:function(e,t){},KZTV:function(e,t){},Kiaf:function(e,t){},KxyF:function(e,t){},"L/ru":function(e,t){},L0z8:function(e,t){},"Lm+e":function(e,t){},Lqxd:function(e,t){},Lsv0:function(e,t,a){"use strict";var o=a("Dd8w"),n=a.n(o),i=a("Lokx"),r=a.n(i),s=a("NYxO"),l=a("P9l9"),c={name:"milestone-template",data:function(){return{rowExpands:[],loading:!1,currentPage:1,page:{pageNum:1,pageSize:5,total:0},btnMaxWidth:150,isPname:!0,addStatus:!1,file:{},roleAllStatus:!1,templateCompanyId:"",roleId:[],roleData:[],dialogVisible:!1,table1status:!1,table2status:!1,table3status:!1,templateId:"",milestoneId:"",multipleSelection1:[],multipleSelection2:[],multipleSelection3:[],table1select:"",table2select:"",tableData1:[],typeData:{value:"",options:[]},tableData2:[],stageData:{value:"",options:[{value:"启动",label:"启动"},{value:"规划",label:"规划"},{value:"实施",label:"实施"},{value:"收尾",label:"收尾"}]},tableData3:[]}},computed:n()({},Object(s.c)(["userinfo"])),created:function(){this.getRoleData([]),this.getTypeData(),this.getTableData1()},methods:{handleSizeChange:function(e){this.page.pageSize=e,this.getTableData1()},handleCurrentChange:function(e){this.page.pageNum=e,this.getTableData1()},headerDragend:function(e,t,a,o){this.btnMaxWidth=e,e>150?this.isPname=!1:(this.isPname=!0,this.btnMaxWidth=150)},formatter_company_id:function(e){switch(e.company_id){case"5326994013938795629":return"超图信息";case"-1360422574114386809":return"超图软件";case"-8234401961992436364":return"超图国际";case"8416498716893399290":return"上海南康";case"-1814768306395265967":return"国图信息";case"7638091599462351621":return"世纪安图";case"-5099447302419035828":return"上海数慧";case"2257482669678084552":return"超图数据";case"-7975978055853456035":return"地图慧";default:return""}},rowClick1:function(e){this.templateCompanyId=e.company_id,this.tableData3=[],e&&(this.table1select=e,this.templateId=e.id,this.milestoneId=null,this.getTableData2(e.id),this.table2status=!0)},contentChange:function(e){e.contentChange=!0},warnMessage:function(e){this.$message({showClose:!0,message:e,type:"success"})},switchChange1:function(e){if(e.contentChange=!0,1==e.status?this.warnMessage("模板 启用"):this.warnMessage("模板 停用"),""!=e.id){var t=[e];Object(l._38)("/sgpm/rest/api/system/milestone/template",t).then(function(e){200==e.data.code||alert("保存失败")}).catch(function(e){})}},switchChange2:function(e){if(1==e.isCut?this.warnMessage("里程碑 可裁剪"):this.warnMessage("里程碑 不可裁剪"),""==e.id)return!1;e.sortIndex=this.tableData2.indexOf(e)+1;var t=[e];Object(l._38)("/sgpm/rest/api/system/milestone",t).then(function(e){200==e.data.code||alert("保存失败")}).catch(function(e){})},switchChange3:function(e){if(1==e.isCut?this.warnMessage("交付物 可裁剪"):this.warnMessage("交付物 不可裁剪"),""==e.id)return!1;var t=[e];Object(l._38)("/sgpm/rest/api/system/deliverable/add/or/update",t).then(function(e){200==e.data.code||alert("保存失败")}).catch(function(e){})},switchChange4:function(e){if(1==e.auditDeliverable?this.warnMessage("是审计文档"):this.warnMessage("不是审计文档"),""==e.id)return!1;var t=[e];Object(l._38)("/sgpm/rest/api/system/deliverable/add/or/update",t).then(function(e){200==e.data.code||alert("保存失败")}).catch(function(e){})},table2handleCurrentChange:function(e){e&&(this.getTableData3(e.id),this.milestoneId=e.id)},rowDrop:function(e){this.table2select=e;var t=document.querySelector("#tableData2 .el-table__body-wrapper tbody "),a=this;r.a.create(t,{onEnd:function(e){var t=e.newIndex,o=e.oldIndex,n=a.tableData2.splice(o,1)[0];a.tableData2.splice(t,0,n)}})},handleSubmit:function(){var e=this,t={},a="";t.milestoneTemplateId=this.templateId,this.roleAllStatus&&this.roleData.forEach(function(e){a+=e.accountId+","}),this.roleAllStatus||this.roleData.forEach(function(e){e.checkedStatus&&(a+=e.accountId+",")}),a=a.substr(0,a.length-1),t.companyIds=a,this.dialogVisible=!1;Object(l._38)("/sgpm/rest/api/system/milestone/template/authorization/add/update",t).then(function(t){200==t.data.code?(e.multipleSelection1[0].companys=[],e.roleAllStatus&&e.roleData.forEach(function(t){var a={accountId:t.accountId,account_name:t.account_name};e.multipleSelection1[0].companys.push(a)}),e.roleAllStatus||e.roleData.forEach(function(t){if(t.checkedStatus){var a={accountId:t.accountId,account_name:t.account_name};e.multipleSelection1[0].companys.push(a)}})):alert("保存失败")}).catch(function(e){})},getRoleData:function(e){var t=this;this.roleData=[];Object(l._36)("/sgpm/rest/api/system/milestone/template/accounts").then(function(a){a.data.data.forEach(function(a){a.account_name=t.companyNameStr(a),e.includes(a.accountId)?a.status=1:a.status=0,t.roleData.push(a)}),t.roleData}).catch(function(e){})},companyNameStr:function(e){switch(e.accountId){case"5326994013938795629":return"超图信息";case"-1360422574114386809":return"超图软件";case"-8234401961992436364":return"超图国际";case"8416498716893399290":return"上海南康";case"-1814768306395265967":return"国图信息";case"7638091599462351621":return"世纪安图";case"-5099447302419035828":return"上海数慧";case"2257482669678084552":return"超图数据";case"-7975978055853456035":return"地图慧";default:return""}},handleChange:function(e,t){this.file=e.raw},handleRemove:function(e,t){},handleSelectFile:function(e){""!=e.id?e.upload_status=!1:this.warnMessage("未保存不能上传")},handleSelectFile2:function(){this.warnMessage("未保存不能上传")},handleAvatarSuccess:function(e,t){},submitUpload:function(e){var t=this;if(0==this.$refs[e.id].uploadFiles.length)return this.warnMessage("请选择文件"),!1;var a=this.$refs[e.id].uploadFiles[0].raw;if(a.size/1024/1024>50)this.warnMessage("文件太大，请选择50M以下的文件");else{this.$refs[e.id].clearFiles(),e.upload_status=!0,e.file_status=!0,e.file_name="上传中....";var o=new FormData;o.append("file",a),o.append("id",e.id);var n=JSON.parse(localStorage.getItem("userinfo"));if(n)var i=n.account_name;o.append("company",i),Object(l.z)("/sgpm/rest/api/server/pm/project/deliverable/upload/template",o).then(function(o){200==o.data.code?(t.warnMessage("上传成功"),e.file_name=a.name,e.fileName=a.name,e.template_file_url=t.get_download_file_url(e)):alert("上传失败"),e.upload_status=!0,e.file_status=!1})}},get_download_file_url:function(e){var t=JSON.parse(localStorage.getItem("userinfo"));if(t)var a=t.account_name;return Object(l.H)("/sgpm/rest/api/server/pm/project/deliverable/download/template?id="+e.id+"&company="+a)},selectChange1:function(e){var t=this;if(this.userinfo.account_id,this.templateCompanyId=e.company_id,this.userinfo.account_id!=e.company_id)return this.warnMessage("请编辑自己公司的模板"),e.checkedStatus=!1,!1;if(this.rowExpands=[],e.checkedStatus?this.rowExpands.push(e.id):this.rowExpands=[],this.tableData3=[],this.table3status=!1,this.roleAllStatus=!1,e.checkedStatus){if(this.multipleSelection1.push(e),2==this.multipleSelection1.length){var a=this.multipleSelection1[0];a.contentChange&&this.$confirm("上次选择的模板未保存，确定保存吗？").then(function(e){t.handleSave1([a])}).catch(function(e){a.milestoneTemplateName=a.field1,a.type=a.field2,a.description=a.field3,a.status=a.field4,a.contentChange=!1}),this.multipleSelection1[0].checkedStatus=!1,this.multipleSelection1.splice(0,1)}}else this.multipleSelection1.splice(this.multipleSelection1.indexOf(e),1),e.contentChange&&this.$confirm("选择的模板未保存，确定保存吗？").then(function(a){t.handleSave1([e])}).catch(function(t){e.milestoneTemplateName=e.field1,e.type=e.field2,e.description=e.field3,e.status=e.field4,e.contentChange=!1});if(this.multipleSelection1.length>0&&""!=this.multipleSelection1[0].id?(this.table1status=!0,this.addStatus=!0):(this.table1status=!1,this.addStatus=!1),this.multipleSelection1.length>0&&""!=this.multipleSelection1[0].id){var o=this.multipleSelection1[0].companys;o.length>0?(this.roleId=[],o.forEach(function(e){t.roleId.push(e.accountId)})):this.roleId=[]}this.getRoleData(this.roleId)},selectChange2:function(e){if(this.userinfo.account_id!=this.templateCompanyId)return this.warnMessage("请编辑自己公司的里程碑"),e.checkedStatus=!1,!1;e.checkedStatus?(this.multipleSelection2.push(e),2==this.multipleSelection2.length&&(this.multipleSelection2[0].checkedStatus=!1,this.multipleSelection2.splice(0,1))):this.multipleSelection2.splice(this.multipleSelection2.indexOf(e),1),this.multipleSelection2.length>0&&(this.milestoneId=this.multipleSelection2[0].id,this.table3status=!0)},selectChange3:function(e){if(this.userinfo.account_id!=this.templateCompanyId)return this.warnMessage("请编辑自己公司的交付物"),e.checkedStatus=!1,!1;e.checkedStatus?(this.multipleSelection3.push(e),2==this.multipleSelection3.length&&(this.multipleSelection3[0].checkedStatus=!1,this.multipleSelection3.splice(0,1))):this.multipleSelection3.splice(this.multipleSelection3.indexOf(e),1)},getTypeData:function(){var e=this;Object(l._36)("/sgpm/rest/api/system/milestone/template/type").then(function(t){t.data.data,e.typeData.options=t.data.data}).catch(function(e){})},getTableData1:function(){var e=this;this.loading=!0,this.tableData1=[],this.tableData=[],this.multipleSelection1=[],this.table1status=!1;this.userinfo.memberid;var t="/sgpm/rest/api/system/milestone/template/list/"+this.page.pageNum+"/"+this.page.pageSize;Object(l._36)(t).then(function(t){t.data.data,200==t.data.code?(e.loading=!1,t.data.data.forEach(function(t){t.contentStatus=!1,t.field1=t.milestoneTemplateName,t.field2=t.type,t.field3=t.description,t.field4=t.status,t.company_id=t.createrCompanyId,t.createrCompanyId==e.userinfo.account_id?t.editStatus=!1:t.editStatus=!0,t.companys.forEach(function(t){t.account_name=e.companyNameStr(t)})}),e.tableData1=t.data.data,e.page.total=t.data.meta.totalCount,e.table1select=t.data.data[0]):alert("请求失败")}).catch(function(e){})},getTableData2:function(e){var t=this;if(this.tableData2=[],this.multipleSelection2=[],!e)return!1;if(this.templateCompanyId==this.userinfo.account_id)var a=!1;else a=!0;var o="/sgpm/rest/api/system/milestone/list/"+e;Object(l._36)(o).then(function(e){e.data.data.forEach(function(e){e.isCut=e.isCut+"",e.editStatus=a}),t.tableData2=e.data.data}).catch(function(e){})},getTableData3:function(e){var t=this;if(this.tableData3=[],!e)return!1;if(this.templateCompanyId==this.userinfo.account_id)var a=!1;else a=!0;var o="/sgpm/rest/api/system/deliverable/list/"+e;Object(l._36)(o).then(function(e){e.data.data.forEach(function(e){if(e.milestoneId=t.milestoneId,e.file_status=!1,e.upload_status=!0,e.fileList=[],e.isCut=e.isCut+"",e.editStatus=a,e.fileName){e.file_name=e.fileName;var o=JSON.parse(localStorage.getItem("userinfo"));if(o)var n=o.account_name;var i=Object(l.H)("/sgpm/rest/api/server/pm/project/deliverable/download/template?id="+e.id+"&company="+n);e.template_file_url=i}else e.file_name="";t.tableData3.push(e),t.tableData3})}).catch(function(e){})},handleDelete1:function(e){var t=this;if(e.id)this.$confirm("确定要删除里程碑模板吗？").then(function(a){var o="/sgpm/rest/api/system/milestone/template/"+e.id;Object(l._35)(o).then(function(e){200==e.data.code?t.getTableData1():alert("删除失败")}).catch(function(e){})}).catch(function(e){});else{var a=this.tableData1.indexOf(e);this.tableData1.splice(a,1),this.multipleSelection1=[],this.table2status=!1,this.addStatus=!1}},handleDelete2:function(e){var t=this;if(!e)return this.warnMessage("请先选择一个里程碑"),!1;if(e.id)this.$confirm("确定要删除里程碑吗？").then(function(a){var o="/sgpm/rest/api/system/milestone/"+e.id;Object(l._35)(o).then(function(e){200==e.data.code?(t.getTableData2(t.templateId),t.milestoneId=null):alert("删除失败")}).catch(function(e){})}).catch(function(e){});else{var a=this.tableData2.indexOf(e);this.tableData2.splice(a,1),this.multipleSelection2.splice(a,1)}},handleDelete3:function(e){var t=this;if(!e)return this.warnMessage("请先选择一个交付物"),!1;if(e.id)this.$confirm("确定要删除交付物吗？").then(function(a){var o="/sgpm/rest/api/system/deliverable/"+e.id;Object(l._35)(o).then(function(e){200==e.data.code?t.getTableData3(t.milestoneId):alert("删除失败")}).catch(function(e){})}).catch(function(e){});else{var a=this.tableData3.indexOf(e);this.tableData3.splice(a,1)}},getNowDate:function(){var e=new Date,t=e.getFullYear(),a=(e.getMonth()+1).toString(),o=e.getDate().toString();return 1==a.length&&(a="0"+a),1==o.length&&(o="0"+o),t+"-"+a+"-"+o},isEmpty:function(e){return void 0===e||null==e||""==e},checkTable1Params:function(e){var t=this,a=!0;return e.forEach(function(e){t.isEmpty(e.milestoneTemplateName)&&(a=!1),t.isEmpty(e.type)&&(a=!1)}),a},checkTable2Params:function(e){var t=this,a=!0;return e.forEach(function(e){t.isEmpty(e.stageName)&&(a=!1),t.isEmpty(e.milestoneName)&&(a=!1)}),a},checkTable3Params:function(e){var t=this,a=!0;return e.forEach(function(e){t.isEmpty(e.deliverableName)&&(a=!1),t.isEmpty(e.description)&&(a=!1)}),a},handleSave1:function(e){var t=this;if(0==e.length)return this.warnMessage("请先编辑一个模板"),!1;if(!this.checkTable1Params(e))return this.warnMessage("模板名称、类型 不能为空"),!1;var a=e;Object(l._38)("/sgpm/rest/api/system/milestone/template",a).then(function(e){200==e.data.code?(t.getTableData1(),t.tableData2=[],t.tableData3=[],t.addStatus=!1,t.table2status=!1,t.templateId=null):alert("保存失败")}).catch(function(e){})},handleSave2:function(){var e=this;if(this.templateCompanyId!=this.userinfo.account_id)return this.$message.warning("请编辑自己公司的里程碑"),!1;if(0==this.tableData2.length)return this.$message.warning("请先编辑里程碑"),!1;if(!this.checkTable2Params(this.tableData2))return this.$message.warning("阶段名称、里程碑名称 不能为空"),!1;for(var t=0;t<this.tableData2.length;t++){this.tableData2[t].sortIndex=t+1}var a=this.tableData2;Object(l._38)("/sgpm/rest/api/system/milestone",a).then(function(t){200==t.data.code?(e.getTableData2(e.templateId),e.tableData3=[]):alert("保存失败")}).catch(function(e){})},handleSave3:function(){var e=this;if(0==this.tableData3.length)return this.warnMessage("请先新建或编辑交付物"),!1;if(!this.checkTable3Params(this.tableData3))return this.warnMessage("文档名称、文档描述 不能为空"),!1;var t=this.tableData3;Object(l._38)("/sgpm/rest/api/system/deliverable/add/or/update",t).then(function(t){200==t.data.code?e.getTableData3(e.milestoneId):alert("保存失败")}).catch(function(e){})},handleAdd1:function(){if(this.tableData1[0],this.tableData1[0]&&""==this.tableData1[0].id)return this.warnMessage("请先编辑保存第一条记录"),!1;var e={milestoneTemplateName:"",description:"",id:"",createName:this.userinfo.emp_name,createId:this.userinfo.memberid,createDate:this.getNowDate(),createrCompanyId:this.userinfo.account_id,company_id:this.userinfo.account_id,type:"",checkedStatus:!0};this.tableData1.unshift(e),this.multipleSelection1.push(e),this.addStatus=!0},handleAdd2:function(){if(this.templateCompanyId!=this.userinfo.account_id)return this.warnMessage("请选择自己公司的里程碑模板"),!1;if(!this.templateId)return this.warnMessage("请选择一个已保存的模板"),!1;var e={id:"",stageName:"",milestoneName:"",progressPercentage:"5",isCut:"0",description:"",milestoneTemplateId:this.templateId,checkedStatus:!0};this.tableData2.push(e),this.multipleSelection2.push(e)},handleAdd3:function(){if(this.templateCompanyId!=this.userinfo.account_id)return this.warnMessage("请选择自己公司的里程碑"),!1;if(!this.milestoneId)return this.warnMessage("请先选择一个已保存的里程碑"),!1;var e={id:"",deliverableName:"",isCut:"0",auditDeliverable:"0",description:"",milestoneId:this.milestoneId,file_status:!0,upload_status:!0,checkedStatus:!0};this.tableData3.push(e)},handleClose:function(e){var t=this;if(!this.table1status)return this.warnMessage("请先选择一个模板"),!1;var a=this.multipleSelection1[0];a.companys.splice(a.companys.indexOf(e),1);var o="";a.companys.length>0&&(a.companys.forEach(function(e){o+=e.accountId+","}),o=o.substr(0,o.length-1));var n={milestoneTemplateId:a.id,companyIds:o};Object(l._38)("/sgpm/rest/api/system/milestone/template/authorization/add/update",n).then(function(e){if(200!==e.data.code)return alert("更新失败");t.getRoleData(o.split(","))}).catch(function(e){})}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"milestoneTemplate"},[a("div",[a("div",{staticStyle:{float:"right","margin-right":"20px","margin-bottom":"5px"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.addStatus},on:{click:e.handleAdd1}},[e._v("新建")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleSave1(e.multipleSelection1)}}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",disabled:!e.table1status},on:{click:function(t){e.dialogVisible=!0}}},[e._v("授权")])],1),e._v(" "),a("div",{staticStyle:{clear:"left"}}),e._v(" "),a("div",[a("el-dialog",{attrs:{title:"公司授权",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("el-checkbox",{model:{value:e.roleAllStatus,callback:function(t){e.roleAllStatus=t},expression:"roleAllStatus"}},[e._v("集团")]),e._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),e._l(e.roleData,function(t,o){return a("el-checkbox",{key:o,attrs:{checked:1==t.status},model:{value:t.checkedStatus,callback:function(a){e.$set(t,"checkedStatus",a)},expression:"role.checkedStatus"}},[e._v(e._s(t.account_name))])})],2),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("确 定")])],1)])],1),e._v(" "),a("h4",{staticStyle:{"margin-bottom":"0px","margin-top":"7px"}},[e._v("里程碑模板列表")]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData1,border:"","row-key":"id","expand-row-keys":e.rowExpands,"highlight-current-row":"","header-cell-style":{fontSize:"12px",color:"#303133",height:"34px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"34px"},"cell-style":{padding:0}},on:{"current-change":e.rowClick1,"header-dragend":e.headerDragend}},[a("el-table-column",{attrs:{width:"35",label:"编辑"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(a){return e.selectChange1(t.row)}},model:{value:t.row.checkedStatus,callback:function(a){e.$set(t.row,"checkedStatus",a)},expression:"scope.row.checkedStatus"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{type:"expand",width:"35"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("h4",{staticStyle:{"margin-bottom":"0px","margin-top":"-10px"}},[e._v("授权公司名称")]),e._v(" "),t.row.checkedStatus?a("div",e._l(t.row.companys,function(t){return a("el-tag",{key:t.accountId,attrs:{closable:""},on:{close:function(a){return e.handleClose(t)}}},[e._v(e._s(t.account_name))])}),1):a("div",e._l(t.row.companys,function(t){return a("el-tag",{key:t.accountId},[e._v("\n              "+e._s(t.account_name)+"\n            ")])}),1)]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",type:"index",width:"50",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{width:e.btnMaxWidth,prop:"milestoneTemplateName",align:"center",label:"模板名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.checkedStatus?a("div",[a("el-input",{attrs:{type:"text",size:"mini",placeholder:"请输入模板名称"},on:{change:function(a){return e.contentChange(t.row)}},model:{value:t.row.milestoneTemplateName,callback:function(a){e.$set(t.row,"milestoneTemplateName",a)},expression:"scope.row.milestoneTemplateName"}})],1):a("div",[a("span",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.row.milestoneTemplateName,placement:"right"}},[a("el-button",{class:{pname:e.isPname},staticStyle:{color:"#606266"},style:{maxWidth:e.btnMaxWidth-30+"px"},attrs:{type:"text"}},[e._v(e._s(t.row.milestoneTemplateName))])],1)],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"type",align:"center","show-overflow-tooltip":!0,width:"130",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.checkedStatus?a("div",[a("el-select",{attrs:{size:"mini",placeholder:"请选择"},on:{change:function(a){return e.contentChange(t.row)}},model:{value:t.row.type,callback:function(a){e.$set(t.row,"type",a)},expression:"scope.row.type"}},e._l(e.typeData.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.dicName,value:e.dicName}})}),1)],1):a("div",[a("span",[e._v("\n              "+e._s(t.row.type)+"\n              ")])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"description","show-overflow-tooltip":!0,align:"center",label:"模板描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.checkedStatus?a("div",[a("el-input",{attrs:{type:"text",size:"mini",placeholder:"请输入模板描述"},on:{change:function(a){return e.contentChange(t.row)}},model:{value:t.row.description,callback:function(a){e.$set(t.row,"description",a)},expression:"scope.row.description"}})],1):a("div",[e._v("\n            "+e._s(t.row.description)+"\n            ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createName",align:"center",width:"60",label:"创建者"}}),e._v(" "),a("el-table-column",{attrs:{prop:"company_id",align:"center",width:"70",formatter:e.formatter_company_id,label:"所属公司"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createDate",width:"100",align:"center",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",align:"center",width:"70",label:"启用"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0","active-text":"",disabled:t.row.editStatus,"inactive-text":""},on:{change:function(a){return e.switchChange1(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",align:"center",width:"50",label:"删除"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",disabled:t.row.editStatus},on:{click:function(a){return e.handleDelete1(t.row)}}},[a("i",{staticClass:"el-icon-delete-solid",class:t.row.editStatus?"":"isEdit",staticStyle:{"font-size":"20px"}})])]}}])})],1),e._v(" "),a("div",{staticClass:"page",staticStyle:{"margin-bottom":"5px"}},[a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.currentPage,"page-size":1,"page-sizes":[5,10,20],layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1),e._v(" "),a("div",{staticStyle:{width:"50%",float:"left"},attrs:{id:"tableData2"}},[a("div",{staticStyle:{float:"right","margin-right":"20px"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleAdd2}},[e._v("新建")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleSave2}},[e._v("保存")])],1),e._v(" "),a("div",{staticStyle:{clear:"left"}}),e._v(" "),a("h4",{staticStyle:{"margin-bottom":"0px","margin-top":"7px"}},[e._v("里程碑")]),e._v(" "),a("el-table",{staticStyle:{width:"100%","font-size":"10px"},attrs:{data:e.tableData2,border:"","row-key":"id","highlight-current-row":"","header-cell-style":{fontSize:"12px",color:"#303133",height:"34px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"34px"},"cell-style":{padding:0}},on:{"row-click":e.rowDrop,"current-change":e.table2handleCurrentChange}},[a("el-table-column",{attrs:{width:"35",label:"编辑"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(a){return e.selectChange2(t.row)}},model:{value:t.row.checkedStatus,callback:function(a){e.$set(t.row,"checkedStatus",a)},expression:"scope.row.checkedStatus"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",type:"index",width:"40",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"stageName",align:"center",width:"100",label:"阶段名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.checkedStatus?a("div",[a("el-select",{attrs:{size:"mini",placeholder:"请选择"},model:{value:t.row.stageName,callback:function(a){e.$set(t.row,"stageName",a)},expression:"scope.row.stageName"}},e._l(e.stageData.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1):a("div",[e._v(e._s(t.row.stageName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"milestoneName",align:"center",width:"150",label:"里程碑名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.checkedStatus?a("div",[a("el-input",{attrs:{size:"mini",placeholder:"请输入里程碑名称"},model:{value:t.row.milestoneName,callback:function(a){e.$set(t.row,"milestoneName",a)},expression:"scope.row.milestoneName"}})],1):a("div",[e._v(e._s(t.row.milestoneName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"progressPercentage",align:"center",width:"110",label:"对应权重"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.checkedStatus?a("div",[a("el-input-number",{staticStyle:{width:"90px"},attrs:{"controls-position":"right",min:5,max:100,step:5},model:{value:t.row.progressPercentage,callback:function(a){e.$set(t.row,"progressPercentage",a)},expression:"scope.row.progressPercentage"}})],1):a("div",[e._v(e._s(t.row.progressPercentage))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"isCut",align:"center",width:"65",label:"是否可裁剪"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0","active-text":"",disabled:t.row.editStatus,"inactive-text":""},on:{change:function(a){return e.switchChange2(t.row)}},model:{value:t.row.isCut,callback:function(a){e.$set(t.row,"isCut",a)},expression:"scope.row.isCut"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"description","show-overflow-tooltip":!0,align:"center",width:"150",label:"里程碑描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.checkedStatus?a("div",[a("el-input",{attrs:{size:"mini",type:"textarea",rows:1,placeholder:"请输入里程碑描述"},model:{value:t.row.description,callback:function(a){e.$set(t.row,"description",a)},expression:"scope.row.description"}})],1):a("div",[e._v("\n            "+e._s(t.row.description)+"\n            ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",align:"center",width:"50",label:"删除"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",disabled:t.row.editStatus},on:{click:function(a){return e.handleDelete2(t.row)}}},[a("i",{staticClass:"el-icon-delete-solid",class:t.row.editStatus?"":"isEdit",staticStyle:{"font-size":"20px"}})])]}}])})],1)],1),e._v(" "),a("div",{staticStyle:{width:"49%",float:"left","margin-left":"5px"}},[a("div",{staticStyle:{float:"right","margin-right":"20px"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleAdd3}},[e._v("新建")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleSave3}},[e._v("保存")])],1),e._v(" "),a("div",{staticStyle:{clear:"left"}}),e._v(" "),a("h4",{staticStyle:{"margin-bottom":"0px","margin-top":"7px"}},[e._v("交付物")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData3,border:"","header-cell-style":{fontSize:"12px",color:"#303133",height:"34px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"34px"},"cell-style":{padding:0}}},[a("el-table-column",{attrs:{width:"35",label:"编辑"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(a){return e.selectChange3(t.row)}},model:{value:t.row.checkedStatus,callback:function(a){e.$set(t.row,"checkedStatus",a)},expression:"scope.row.checkedStatus"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",type:"index",width:"40",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deliverableName",align:"center",width:"150",label:"文档名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.checkedStatus?a("div",[a("el-input",{attrs:{type:"textarea",rows:1,placeholder:"请输入文档名称"},model:{value:t.row.deliverableName,callback:function(a){e.$set(t.row,"deliverableName",a)},expression:"scope.row.deliverableName"}})],1):a("div",[e._v(e._s(t.row.deliverableName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"description","show-overflow-tooltip":!0,align:"center",width:"150",label:"文档描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.checkedStatus?a("div",[a("el-input",{attrs:{type:"textarea",rows:1,placeholder:"请输入文档描述"},model:{value:t.row.description,callback:function(a){e.$set(t.row,"description",a)},expression:"scope.row.description"}})],1):a("div",[e._v("\n            "+e._s(t.row.description)+"\n            ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"isCut",align:"center",width:"65",label:"是否为审计"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0","active-text":"",disabled:t.row.editStatus,"inactive-text":""},on:{change:function(a){return e.switchChange4(t.row)}},model:{value:t.row.auditDeliverable,callback:function(a){e.$set(t.row,"auditDeliverable",a)},expression:"scope.row.auditDeliverable"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"isCut",align:"center",width:"65",label:"是否可裁剪"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0","active-text":"",disabled:t.row.editStatus,"inactive-text":""},on:{change:function(a){return e.switchChange3(t.row)}},model:{value:t.row.isCut,callback:function(a){e.$set(t.row,"isCut",a)},expression:"scope.row.isCut"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"上传模板",width:"150",align:"center","fixed-width":""},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[""==o.id||o.editStatus?a("div",[a("el-button",{attrs:{slot:"trigger",size:"small",type:"text"},on:{click:function(t){return e.handleSelectFile2(o)}},slot:"trigger"},[e._v("选文件")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"text",disabled:o.upload_status}},[e._v("上传")])],1):a("div",[a("el-upload",{ref:o.id,staticClass:"upload-demo",attrs:{"file-list":o.fileList,action:"#","on-change":e.handleChange,"on-remove":e.handleRemove,"on-success":e.handleAvatarSuccess,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"text"},on:{click:function(t){return e.handleSelectFile(o)}},slot:"trigger"},[e._v("选文件")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"text",disabled:o.upload_status},on:{click:function(t){return e.submitUpload(o)}}},[e._v("上传")])],1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"file_name",width:"150",align:"center",label:"文件名"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[o.fileName?a("span",[a("u",[a("a",{staticStyle:{color:"dodgerblue"},attrs:{href:o.template_file_url,target:"_blank"}},[e._v(e._s(o.file_name))])])]):a("span",[e._v(e._s(o.file_name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",align:"center",width:"50",label:"删除"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",disabled:t.row.editStatus},on:{click:function(a){return e.handleDelete3(t.row)}}},[a("i",{staticClass:"el-icon-delete-solid",class:t.row.editStatus?"":"isEdit",staticStyle:{"font-size":"20px"}})])]}}])})],1)],1)])},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(e){a("VAzx"),a("zCDY")},"data-v-4466042f",null);t.a=d.exports},M56A:function(e,t){},MFzR:function(e,t){},Mco3:function(e,t){},MlP1:function(e,t){},N1kN:function(e,t){},N5RU:function(e,t,a){"use strict";(function(e){var o=a("P9l9"),n=a("14gb");t.a={name:"gt-business-page",data:function(){return{roleStatus:!1,dialogVisible:!1,contractDatas:[],contractNumber:"",projectData:{},contractStatus:!1,browerHeight:window.innerHeight-250,CONTRACTNUMBER:"-",FIELD0005:"-",CONTRACTSIGNINGDATE:"-",CONTRACTMARKET:"-",CUSTOMERCENTER:"-",CUSTOMERDEPARTMENT:"-",CONTRACTPROSTARTDATE:"-",CONTRACTPROENDDATE:"-",CONTRACTSTATE:"-",CUSTOMERNAME:"-",INDUSTRY:"-",REGION:"-",FILESTATUS:"-",CONTRACTMONEY:"-",b_BUSINESSNAME:"-",b_BUSINESSNUMBER:"-",b_CONTRACTMONEY:"-",b_CONTRACTMARKET:"-",b_CUSTOMERCENTER:"-",b_CUSTOMERDEPARTMENT:"-",b_INDUSTRY:"-",b_REGION:"-"}},beforeDestroy:function(){n.a.$off("projectContent")},created:function(){var e=localStorage.getItem("businessNumber");this.getBusinessData(e)},mounted:function(){var e=this;n.a.$on("projectContent",function(e){}),n.a.$on("memberRole",function(t){e.roleStatus=1==t||3==t})},methods:{selectChange:function(e){this.contractNumber=e,this.getContractData(e)},updateContractData:function(t){e.each(t,function(e,a){null==t[e]&&(t[e]="-")}),this.CONTRACTNUMBER=t.CONTRACTNUMBER,this.FIELD0005=t.FIELD0005,this.CONTRACTSIGNINGDATE=t.CONTRACTSIGNINGDATE,this.CONTRACTMARKET=t.CONTRACTMARKET,this.CUSTOMERCENTER=t.CUSTOMERCENTER,this.CUSTOMERDEPARTMENT=t.CUSTOMERDEPARTMENT,this.CONTRACTPROSTARTDATE=t.CONTRACTPROSTARTDATE,this.CONTRACTPROENDDATE=t.CONTRACTPROENDDATE,this.CONTRACTSTATE=t.CONTRACTSTATE,this.CUSTOMERNAME=t.CUSTOMERNAME,this.INDUSTRY=t.INDUSTRY,this.REGION=t.REGION,this.FILESTATUS=t.FILESTATUS,this.CONTRACTMONEY=t.CONTRACTMONEY},resetContractData:function(){this.CONTRACTNUMBER="-",this.FIELD0005="-",this.CONTRACTSIGNINGDATE="-",this.CONTRACTMARKET="-",this.CUSTOMERCENTER="-",this.CUSTOMERDEPARTMENT="-",this.CONTRACTPROSTARTDATE="-",this.CONTRACTPROENDDATE="-",this.CONTRACTSTATE="-",this.CUSTOMERNAME="-",this.INDUSTRY="-",this.REGION="-",this.FILESTATUS="-",this.CONTRACTMONEY="-"},updateProject:function(e){var t={id:this.projectData.ID,project:{custom_field_values:{13:e},project_no:this.projectData.PROJECTNUMBER}};Object(o._25)("/sgpm/rest/api/server/pm/project",t).then(function(e){200==e.data.code?alert("保存成功!"):201==e.data.code&&alert("保存失败!")}).catch(function(e){})},getContractData:function(e){var t=this,a="/sgpm/rest/api/integration/data/contract/"+this.userinfo.account_id+"?contractNumber="+e;Object(o.Y)(a).then(function(a){a.data.data,t.updateContractData(a.data.data),t.updateProject(e)}).catch(function(e){})},getProjectData:function(e){var t=this,a={projectId:e};Object(o._28)("/sgpm/rest/api/server/pm/project",a).then(function(e){if(e.data.data,t.projectData=e.data.data,e.data.data.BUSINESS){var a=e.data.data.BUSINESS;t.updateBusinessData(a)}else t.resetBusinessData();e.data.data.CONTRACT?(t.updateContractData(e.data.data.CONTRACT),t.contractStatus=!0):(t.resetContractData(),t.contractStatus=!1)}).catch(function(e){})},getBusinessData:function(e){var t=this,a="/sgpm/rest/api/integration/oa/business/wanyuan/"+e;Object(o.Y)(a).then(function(e){e.data.data,null==e.data.data?t.resetBusinessData():t.updateBusinessData(e.data.data)}).catch(function(e){})},updateBusinessData:function(t){e.each(t,function(e,a){null==t[e]&&(t[e]="-")}),this.b_BUSINESSNAME=t.BUSINESSNAME,this.b_BUSINESSNUMBER=t.BUSINESSNUMBER,this.b_CONTRACTMONEY=t.CONTRACTMONEY,this.b_CONTRACTMARKET=t.CONTRACTMARKET,this.b_CUSTOMERCENTER=t.CUSTOMERCENTER,this.b_CUSTOMERDEPARTMENT=t.CUSTOMERDEPARTMENT,this.b_INDUSTRY=t.INDUSTRY,this.b_REGION=t.REGION},resetBusinessData:function(){this.b_BUSINESSNAME="-",this.b_BUSINESSNUMBER="-",this.b_CONTRACTMONEY="-",this.b_CONTRACTMARKET="-",this.b_CUSTOMERCENTER="-",this.b_CUSTOMERDEPARTMENT="-",this.b_INDUSTRY="-",this.b_REGION="-"},getContractDatas:function(){var e=this,t=JSON.parse(localStorage.getItem("userinfo"));if(t)var a=t.memberid;var n="/sgpm/rest/api/integration/data/contracts/"+t.account_id+"?memberId="+a;Object(o.Y)(n).then(function(t){t.data.data,e.contractDatas=t.data.data}).catch(function(e){})},formatThousands:function(e){e=(e/=1e4).toFixed(2);if(0==/^[0-9]*[1-9][0-9]*$/.test(e))return e&&e.toString().replace(/(\d)(?=(\d{3})+\.)/g,function(e,t){return t+","});return(e+"").replace(/\d{1,3}(?=(\d{3})+$)/g,"$&,")}}}}).call(t,a("7t+N"))},NBzD:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("tvR6"),a("5W1q"),a("BeWi");var o=a("Z9LF"),n=a("7+uW"),i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[this.routerAlive?t("router-view"):this._e()],1)},staticRenderFns:[]},r=a("VU/8")({name:"app",data:function(){return{routerAlive:!0}},provide:function(){return{routerRefresh:this.routerRefresh}},methods:{routerRefresh:function(){var e=this;this.routerAlive=!1,this.$nextTick(function(){e.routerAlive=!0})}}},i,!1,null,null,null).exports,s=a("zL8q"),l=a.n(s),c=a("mtWM"),u=a.n(c),d=a("D/cR"),p=Object(d.b)();u.a.interceptors.request.use(function(e){return p&&(e.headers.Authorization=Object(d.b)()),e},function(e){return Promise.reject(e)}),u.a.interceptors.response.use(function(e){return e},function(e){return err,Promise.reject(e)});var m=a("mw3O"),h=a.n(m),_=(a("qBF2"),a("+EWF"),a("YaEn"));a("7xIN");n.default.directive("dialogDrag",{bind:function(e,t,a,o){var n=e.querySelector(".el-dialog__header"),i=e.querySelector(".el-dialog");n.style.cursor="move";var r=i.currentStyle||window.getComputedStyle(i,null);n.onmousedown=function(e){var t=e.clientX-n.offsetLeft,a=e.clientY-n.offsetTop,o=void 0,s=void 0;r.left.includes("%")?(o=+document.body.clientWidth*(+r.left.replace(/\%/g,"")/100),s=+document.body.clientHeight*(+r.top.replace(/\%/g,"")/100)):(o=+r.left.replace(/\px/g,""),s=+r.top.replace(/\px/g,"")),document.onmousemove=function(e){var n=e.clientX-t,r=e.clientY-a;i.style.left=n+o+"px",i.style.top=r+s+"px"},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}}),n.default.directive("dialogDragWidth",{bind:function(e,t,a,o){var n=t.value.$el.querySelector(".el-dialog");e.onmousedown=function(t){var a=t.clientX-e.offsetLeft;document.onmousemove=function(e){e.preventDefault();var t=e.clientX-a;n.style.width=t+"px"},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}});var f={getNowDate:function(){var e=new Date,t=e.getFullYear(),a=(e.getMonth()+1).toString(),o=e.getDate().toString();return 1==a.length&&(a="0"+a),1==o.length&&(o="0"+o),t+"-"+a+"-"+o},getOAMilestone:function(e){var t=[];if(null!=e)for(var a=0;a<e.length;a++){var o=e[a];if(o.deliverableStatus){var n={};n.stageName=o.stageName,n.milestoneName=o.milestoneName,n.progressPercentage=o.progressPercentage,n.isCut=1==o.isCut?"是":"否",n.description=o.description,n.estimatedStartDate=o.expectedBeginTime,n.estimatedFinishDate=o.expectedEndTime,n.estimatedWorkingHours=o.workHours;var i="";o.deliverable.forEach(function(e){e.checkedStatus&&(i+=e.deliverableName+"、")}),n.delStr=i.substr(0,i.length-1),t.push(n)}}return t}},g=a("NYxO"),b=a("mvHQ"),v=a.n(b),y=a("K/Lq"),w=a.n(y),j={addNode:function(e,t){e.checkTreeAry.push(t.id)},getUserInfo:function(e,t){w.a;var a={account_id:w.a.get("account_id"),JSESSIONID:w.a.get("JSESSIONID"),account_name:w.a.get("account_name"),code:w.a.get("code"),dept_id:w.a.get("dept_id"),dept_name:w.a.get("dept_name"),e_mail:w.a.get("e_mail"),emp_name:w.a.get("emp_name"),login_name:w.a.get("login_name"),memberid:w.a.get("memberid"),post_id:w.a.get("post_id"),post_name:w.a.get("post_name"),subdept_id:w.a.get("subdept_id"),subdept_name:w.a.get("subdept_name"),telnumber:w.a.get("telnumber"),token:w.a.get("token")},o=JSON.parse(localStorage.getItem("userinfo"));void 0!=w.a.get("memberid")?(e.userinfo=a,localStorage.setItem("userinfo",v()(a))):e.userinfo=o},setDetailPage:function(e,t){e.isDetail=t},setCacheParams:function(e,t){e.cacheParams=t},setCacheContractParams:function(e,t){e.cacheContractParams=t},setAllProMsg:function(e,t){e.selectedAllProMsg=t},setGJFromModel:function(e,t){e.gjFromModel=t},setGJFromContractModel:function(e,t){e.gjFromContractModel=t},setGJFromCheck:function(e,t){e.gjFromCheckList=t},setAudittableOneNum:function(e,t){e.audittableOne=t},setAudittableThreeNum:function(e,t){e.audittableThreeDF=t},setAudittableTwoYFNum:function(e,t){e.audittableTwoYF=t}};a("P9l9"),a("QmSG");n.default.use(g.a);var C=new g.a.Store({state:{leftNavState:"",checkTreeAry:[],userinfo:{},isDetail:!1,cacheParams:{code:"All",pageNum:1,pageSize:20},cacheContractParams:{},selectedAllProMsg:{},gjFromModel:{domains:[{value:"",value1:"",isDisabled:!1}]},gjFromContractModel:{domains:[{value:"",value1:"",isDisabled:!1}]},gjFromCheckList:[],audittableOne:null,audittableThreeDF:null,audittableTwoYF:null},actions:{addNode:function(e,t){var a=e.commit;e.state,a("addNode",t)},getUserInfo:function(e,t){var a=e.commit;e.state,a("getUserInfo",t)},setDetailPage:function(e,t){var a=e.commit;e.state,a("setDetailPage",t)},setCacheParams:function(e,t){var a=e.commit;e.state,a("setCacheParams",t)},setCacheContractParams:function(e,t){var a=e.commit;e.state,a("setCacheContractParams",t)},setAllProMsg:function(e,t){var a=e.commit;e.state,a("setAllProMsg",t)},setGJFromModel:function(e,t){var a=e.commit;e.state,a("setGJFromModel",t)},setGJFromContractModel:function(e,t){var a=e.commit;e.state,a("setGJFromContractModel",t)},setGJFromCheck:function(e,t){var a=e.commit;e.state,a("setGJFromCheck",t)},setAudittableOneNum:function(e,t){var a=e.commit;e.state,a("setAudittableOneNum",t)},setAudittableThreeNum:function(e,t){var a=e.commit;e.state,a("setAudittableThreeNum",t)},setAudittableTwoYFNum:function(e,t){var a=e.commit;e.state,a("setAudittableTwoYFNum",t)}},mutations:j}),S=a("t6md");n.default.use(o.a.Plugin),n.default.prototype.axios=u.a,n.default.prototype.qs=h.a,n.default.prototype.$request=d.a,n.default.use(l.a),n.default.prototype.util=f,n.default.component("ProjectInformation",S.a),new n.default({el:"#app",router:_.a,store:C,components:{App:r},template:"<App/>"})},NaLQ:function(e,t){},Nmmd:function(e,t){},Nn3G:function(e,t){},NxwK:function(e,t){},OUkd:function(e,t){},Oznh:function(e,t,a){"use strict";var o=a("Dd8w"),n=a.n(o),i=a("c/Tr"),r=a.n(i),s=a("lHA8"),l=a.n(s),c=a("mvHQ"),u=a.n(c),d=a("NYxO"),p=a("P9l9"),m=a("gyMJ"),h=a("mtWM"),_=a.n(h),f=(a("//Fk"),function(e){var t=document.createElement("iframe");t.style.display="none",t.style.height=0,t.src=e,document.body.appendChild(t),setTimeout(function(){t.remove()},3e5)}),g={name:"pendingDocument",props:["widget","models","rules","remote","datas"],data:function(){return{tableData:[],currentPage:1,isGoods:null,isDownload:!0,isCheck:!0,tableLoading:!1,form:{dicName:"waitMe",keyWord:""},downloadhttp:m.a.urlPort04+"/sgpm/rest/api/server/pm/project/deliverable/download",selectAry:[{dicName:"待我审核的文档",dicCode:"waitMe"},{dicName:"我上传的文档",dicCode:"uploadPeople"},{dicName:"我管理项目的文档",dicCode:"user"},{dicName:"我管理部门的文档",dicCode:"supervise"}],examineDialog:!1,opinionDialog:!1,opinionData:[],tableData1:[{role:"项目经理意见",content:[{msgText:"审核文档已按要求完成",model:"1",disabled:!0}],user:{date:"2010-2-3",userName:"张三"}},{role:"部门经理意见",content:[{msgText:"审核文档已按要求完成",model:"1",ensure:"是否完成"}],user:{date:"2010-2-3",userName:"张三"},auditComment:""},{role:"公司PMO专员意见",content:[{msgText:"审核文档是否规范、完成",model:"1",ensure:"是否通过"}],user:{date:"2010-2-3",userName:"张三"},auditComment:""},{role:"集团PMO专员意见",content:[{msgText:"审核文档是否规范、完成",model:"1",ensure:"是否通过"}],user:{date:"2010-2-3",userName:"张三"},auditComment:""}],agree:"1",opinion:"",page:{pageNo:1,pageSize:20,totalCount:0},selectionLen:[],approve:{deliveraId:"",companyName:""},downloadListIds:[],orderAttachment:[]}},watch:{datas:{deep:!0,handler:function(e){}}},mounted:function(){this.init()},methods:{init:function(){this.tableLoading=!0;var e={memberId:this.userinfo.memberid,pageNum:1,pageSize:20,code:"waitMe"};this.defaultTable(e)},onSubmit:function(){},formatter:function(e,t){return e.address},filterTag:function(e,t,a){if(0!=a.filteredValue.length){var o={memberId:this.userinfo.memberid,pageNum:1,pageSize:20,code:this.form.dicName,keyWord:this.form.keyWord.trim(),auditDeliverable:e};this.defaultTable(o),this.$refs.refTable.clearFilter()}},handleSizeChange:function(e){},handleCurrentChange:function(e){if(this.tableLoading=!0,""==this.form.keyWord)var t={memberId:this.userinfo.memberid,code:this.form.dicName,pageNum:e,pageSize:this.page.pageSize};else t={memberId:this.userinfo.memberid,pageNum:e,pageSize:this.page.pageSize,code:this.form.dicName,keyWord:this.form.keyWord};this.defaultTable(t)},handleCell:function(e,t,a,o){var n=this;0==e.goods?e.goods=1:e.goods=0,2===a.cellIndex&&(0==e.goods?a.firstChild.firstChild.className="el-icon-star-on startGrey":a.firstChild.firstChild.className="el-icon-star-on startGreen"),Object(p.y)("/sgpm/rest/api/server/pm/project/deliverable/"+e.id+"?fileType="+e.fileType+"&goods="+e.goods,null).then(function(e){if(200==e.data.code){var t={memberId:n.userinfo.memberid,pageNum:1,pageSize:20,code:n.form.dicName,keyWord:n.form.keyWord.trim()};n.defaultTable(t)}}).catch(function(e){})},selectHandle:function(e,t){0!=e.length&&""!=t.processId&&"审核通过"!=t.deliverableStatus&&"驳回"!=t.deliverableStatus&&-1!=t.auditName.indexOf(this.userinfo.emp_name)?this.isCheck=!1:this.isCheck=!0,0!=e.length&&(this.isDownload=!1),this.selectionLen=e,this.approve.deliveraId=t.id,this.approve.processId=t.processId,this.approve.companyName=t.companyName,this.downloadListIds=e},selectAllHandle:function(e){this.selectionLen=e,0!=e.length&&(this.isDownload=!1),this.downloadListIds=e},keyWordSearch:function(){this.tableLoading=!0;var e={memberId:this.userinfo.memberid,pageNum:1,pageSize:20,code:this.form.dicName,keyWord:this.form.keyWord.trim()};this.defaultTable(e)},defaultTable:function(e){var t=this;Object(p.o)("/sgpm/rest/api/server/pm/project/deliverable",e).then(function(e){if(200==e.data.code){t.tableLoading=!1,t.page=e.data.meta;var a=e.data.data;t.tableData=a}}).catch(function(e){})},clearRefresh:function(){this.form.dicName="waitMe",this.form.keyWord="",this.$refs.refTable.clearSelection(),this.tableLoading=!0;var e={memberId:this.userinfo.memberid,pageNum:1,pageSize:20,code:"waitMe"};this.defaultTable(e)},selectChange:function(){this.tableLoading=!0,"waitMe"==this.form.dicName?this.isCheck=!1:this.isCheck=!0;var e={memberId:this.userinfo.memberid,code:this.form.dicName,pageNum:1,pageSize:20};this.defaultTable(e)},clearFilter:function(){var e=this;if(0==this.selectionLen.length)this.$notify({title:"请选择审批文档",duration:9e3});else if(this.selectionLen.length>1)this.$notify({title:"暂不支持批量审批",duration:9e3});else if(1==this.selectionLen.length){this.examineDialog=!0;var t={accountId:this.userinfo.account_id,processId:this.approve.processId,type:6};Object(p.u)("/sgpm/rest/api/integration/audit/record",t).then(function(t){if(200==t.data.code){var a=t.data.data,o=JSON.parse(u()(a));o.forEach(function(t){0==t.modify?(t.content.forEach(function(e){e.disabled=!0}),t.isAuditComment=!0):t.user.userName=e.userinfo.emp_name});e.tableData1=o}}).catch(function(e){})}},closeExamine:function(){this.opinion="",this.agree="1"},cancel:function(){this.examineDialog=!1},present:function(){var e=this;if(0==this.agree&&""==this.opinion)this.$notify.info({title:"请输入审核意见",duration:8e3});else{var t={};JSON.parse(u()(this.tableData1)).forEach(function(a){1==a.modify&&(t=a,1==e.agree?t.isAudit=1:0==e.agree&&(t.isAudit=0),t.auditComment=e.opinion,t.attitude=e.agree,t.login_name=e.userinfo.login_name,t.memberId=e.userinfo.memberid,t.deliverableId=e.approve.deliveraId,Object(p.x)("/sgpm/rest/api/integration/audit/record",t).then(function(t){200==t.data.code&&(t.data,e.$notify({title:"审批提交成功",duration:9e3,offset:100}),e.examineDialog=!1,e.clearRefresh(),e.isCheck=!0)}))})}},opinionyj:function(e){var t=this;this.opinionDialog=!0;var a={deliverableId:e};Object(p.t)("/sgpm/rest/api/integration/audit/record/log",a).then(function(e){200==e.data.code&&(e.data,t.opinionData=e.data.data)}).catch(function(e){})},verifyDownLoad:function(){var e=new l.a;return this.selectionLen.forEach(function(t,a){e.add(t.contractNumber)}),1==e.size&&""!=r()(e)[0]?r()(e)[0]:1==e.size&&""==r()(e)[0]?1:2},download:function(){var e=this;this.tableLoading=!0;var t=this.verifyDownLoad(),a=[];this.selectionLen.forEach(function(e,t){a.push(e.id)});var o={zipName:"downloadFile",ids:a,company:this.userinfo.account_name};_()({method:"post",url:m.a.urlPort04+"/sgpm/rest/api/server/pm/project/deliverable/download/zip",data:o,responseType:"blob"}).then(function(a){if(e.tableLoading=!1,2!=t)if(1==t){var o="fileDown"+function(e,t){var a=void 0,o={"Y+":t.getFullYear().toString(),"m+":(t.getMonth()+1).toString(),"d+":t.getDate().toString(),"H+":t.getHours().toString(),"M+":t.getMinutes().toString(),"S+":t.getSeconds().toString()};for(var n in o)(a=new RegExp("("+n+")").exec(e))&&(e=e.replace(a[1],1==a[1].length?o[n]:o[n].padStart(a[1].length,"0")));return e}("YYYY-mm-dd HH:MM",new Date);e.downloadFile(a.data,o)}else e.downloadFile(a.data,t);else e.$message({message:"不好意思，您需要选择相同合同编号类型进行下载",type:"warning"})})},downloadFile:function(e,t){var a=new Blob([e],{type:"application/zip"}),o=window.URL.createObjectURL(a),n=document.createElement("a");n.href=o,n.download=t,n.click(),URL.revokeObjectURL(o)}},computed:n()({},Object(d.c)(["userinfo"]),{asideHeight:function(){return document.documentElement.clientHeight-205}})},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"list-container-doc"},[a("div",{staticClass:"header"},[a("el-form",{ref:"form",staticClass:"list-form",attrs:{model:e.form,inline:!0,"label-width":"60px"}},[a("el-row",{staticClass:"one-row",attrs:{gutter:5,type:"flex",justify:"space-between"}}),e._v(" "),a("el-row",{staticClass:"headertit",attrs:{gutter:5,type:"flex",justify:"space-between"}},[a("el-col",{attrs:{md:10,xl:9,sm:10,lg:8}},[a("el-form-item",{attrs:{label:"查看范围"}},[a("el-select",{attrs:{size:"mini"},on:{change:e.selectChange},model:{value:e.form.dicName,callback:function(t){e.$set(e.form,"dicName",t)},expression:"form.dicName"}},e._l(e.selectAry,function(e){return a("el-option",{key:e.dicCode,attrs:{label:e.dicName,value:e.dicCode}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{md:14,xl:9,sm:14,lg:14}},[a("div",{staticClass:"header-search"},[a("el-form-item",[a("el-input",{attrs:{placeholder:"合同编号/项目编号/项目名称/上传文档名称/上传人/",size:"mini"},model:{value:e.form.keyWord,callback:function(t){e.$set(e.form,"keyWord",t)},expression:"form.keyWord"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.keyWordSearch},slot:"append"})],1)],1),e._v(" "),a("el-button",{staticClass:"download",attrs:{type:"primary",disabled:e.isDownload,size:"mini"},on:{click:e.download}},[a("i",{staticClass:"el-icon-download"},[e._v("下载")])]),e._v(" "),a("el-button",{staticClass:"circle-btn",attrs:{type:"primary",size:"mini",circle:"",disabled:e.isCheck},on:{click:e.clearFilter}},[e._v("\n              审批")]),e._v(" "),a("el-button",{staticClass:"circle-btn",attrs:{type:"primary",icon:"el-icon-refresh",size:"mini",circle:""},on:{click:e.clearRefresh}})],1)])],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"refTable",staticClass:"father-pro-table",staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{data:e.tableData,"highlight-current-row":"",border:"","max-height":e.asideHeight,"header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0}},on:{"cell-click":e.handleCell,select:e.selectHandle,"select-all":e.selectAllHandle}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{prop:"index",type:"index",width:"40",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{width:"40",label:"优秀",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"iconfont iconzan",class:{"el-icon-star-on":e.isGoods?e.isGoods:t.row.goods,startGreen:e.isGoods?e.isGoods:t.row.goods}})]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"140",prop:"projectNumber",label:"项目编号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("\n          "+e._s(""==t.row.projectNumber?"--":t.row.projectNumber)+"\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"190",prop:"contractNumber",label:"合同编号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("\n          "+e._s(""==t.row.contractNumber?"--":t.row.contractNumber)+"\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"90",label:"项目名称",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{attrs:{href:"javascript:void(0);"}},[e._v(e._s(""==t.row.projectName?"--":t.row.projectName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"130",prop:"projectMilestoneName",label:"里程碑名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("\n          "+e._s(""==t.row.projectMilestoneName?"--":t.row.projectMilestoneName)+"\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"120",label:"上传文档名称",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticStyle:{cursor:"pointer",color:"#409EFF"},attrs:{href:e.downloadhttp+"?id="+t.row.id+"&company="+t.row.companyName,download:"",title:"下载"}},[e._v(e._s(""==t.row.fileName?"--":t.row.fileName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"130",prop:"deliverableName",align:"center",label:"对应里程碑文档"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("\n          "+e._s(""==t.row.deliverableName?"--":t.row.deliverableName)+"\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"80",prop:"deliverableStatus",label:"审核状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("\n          "+e._s(""==t.row.deliverableStatus?"--":t.row.deliverableStatus)+"\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"260",prop:"auditName",label:"审核人",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(""==t.row.auditName?"--":t.row.auditName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"70",prop:"uploadPeopleName",label:"上传人",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("\n          "+e._s(""==t.row.uploadPeopleName?"--":t.row.uploadPeopleName)+"\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"170",prop:"implDepartmentBName",label:"实施B级单位",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("\n          "+e._s(""==t.row.implDepartmentBName?"--":t.row.implDepartmentBName)+"\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"100",prop:"uploadDate",label:"上传时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(""==t.row.uploadDate?"--":t.row.uploadDate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"80",prop:"fileSize",label:"大小",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(""==t.row.fileSize?"--":t.row.fileSize))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"90",align:"center",prop:"auditDeliverable",label:"审计所需",filters:[{text:"是",value:"1"},{text:"否",value:"0"}],"filter-method":e.filterTag,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("\n          "+e._s("0"==t.row.auditDeliverable?"否":"1"==t.row.auditDeliverable?"是":"")+"\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"80",align:"center",label:"审核意见"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-document pendings",on:{click:function(a){return e.opinionyj(t.row.id)}}})]}}])})],1),e._v(" "),a("div",{staticClass:"page right"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":1,"page-sizes":[20],layout:"total, sizes, prev, pager, next, jumper",total:e.page.totalCount},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"dialog",staticStyle:{"text-algin":"left"},attrs:{title:"审批",visible:e.examineDialog,width:"55%"},on:{close:e.closeExamine,"update:visible":function(t){e.examineDialog=t}}},[a("div",{staticClass:"dialoglef"},[a("el-table",{staticStyle:{width:"70%"},attrs:{data:e.tableData1,"row-style":{height:"50px"},"cell-style":{padding:0},border:""}},[a("el-table-column",{attrs:{prop:"role",label:"",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.role))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.content,function(t,o){return a("div",{key:o,staticStyle:{display:"inline-block"}},[a("span",{staticStyle:{margin:"2px 0"}},[e._v(e._s(t.msgText))]),e._v(" "),a("div",[a("span",{staticStyle:{"margin-right":"10px"}},[e._v("是否完成:")]),e._v(" "),a("el-radio",{attrs:{label:"1",disabled:t.disabled},model:{value:t.model,callback:function(a){e.$set(t,"model",a)},expression:"item.model"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"0",disabled:t.disabled},model:{value:t.model,callback:function(a){e.$set(t,"model",a)},expression:"item.model"}},[e._v("否")])],1)])})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{display:"block"}},[e._v("审批人："+e._s(t.row.user.userName))]),e._v(" "),a("span",{staticStyle:{display:"block"}},[e._v("日期："+e._s(t.row.user.date))])]}}])})],1),e._v(" "),a("div",{staticClass:"final"},[a("el-radio",{attrs:{label:"1"},model:{value:e.agree,callback:function(t){e.agree=t},expression:"agree"}},[e._v("同意")]),e._v(" "),a("el-radio",{attrs:{label:"0"},model:{value:e.agree,callback:function(t){e.agree=t},expression:"agree"}},[e._v("不同意")]),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.opinion,expression:"opinion"}],staticClass:"el-textarea__inner",attrs:{autocomplete:"off",rows:"6",placeholder:""},domProps:{value:e.opinion},on:{input:function(t){t.target.composing||(e.opinion=t.target.value)}}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.cancel()}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.present()}}},[e._v("提交")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"dialog",staticStyle:{"text-algin":"left"},attrs:{title:"审核意见",visible:e.opinionDialog,width:"45%"},on:{"update:visible":function(t){e.opinionDialog=t}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"refTable",staticClass:"father-pro-table",staticStyle:{width:"100%"},attrs:{data:e.opinionData,"highlight-current-row":"",border:"","header-cell-style":{fontSize:"14px",color:"#303133",height:"34px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"34px"},"cell-style":{padding:0}}},[a("el-table-column",{attrs:{prop:"auditRole",label:"审核角色",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"auditName",label:"审核人",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(""==t.row.auditName?"--":t.row.auditName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"auditComment",label:"审核意见",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"auditTime",label:"审核时间",align:"center"}})],1)],1)],1)},staticRenderFns:[]};a.d(t,!1,function(){return f});var v=a("VU/8")(g,b,!1,function(e){a("whBr")},null,null);t.a=v.exports},P9l9:function(e,t,a){"use strict";var o=a("mtWM"),n=a.n(o),i=a("//Fk"),r=a.n(i),s=a("D/cR");function l(e){return new r.a(function(t,a){var o=Object(s.b)();n.a.create({headers:{"Content-Type":"application/json",Authorization:o},timeout:3e4})(e).then(function(e){t(e)}).catch(function(e){a(e)})})}var c=a("gyMJ");t.H=function(e){return c.a.urlPort04+e},t.z=function(e,t){return l({url:c.a.urlPort04+e,method:"POST",data:t})},t.Y=function(e,t){return l({url:c.a.urlPort03+e,method:"GET",params:t})},t._29=function(e,t){return l({url:c.a.urlPort04+e,method:"POST",data:t})},t._30=function(e,t){return l({url:c.a.urlPort04+e,method:"PUT",data:t})},t.w=function(e,t){return l({url:c.a.urlPort03+e,method:"POST",data:t})},t.v=function(e,t){return l({url:c.a.urlPort03+e,method:"POST",data:t})},t._28=function(e,t){return l({url:c.a.urlPort04+e,method:"GET",params:t})},t._27=function(e,t){return l({url:c.a.urlPort04+e,method:"DELETE",params:t})},t._35=function(e,t){return l({url:c.a.urlPort05+e,method:"DELETE",params:t})},t._38=function(e,t){return l({url:c.a.urlPort05+e,method:"POST",data:t})},t._36=function(e,t){return l({url:c.a.urlPort05+e,method:"GET",params:t})},t.G=function(e,t){return l({url:c.a.urlPort04+"/sgpm/rest/api/server/pm/project"+e,method:"GET",params:t})},t.N=function(e,t){return l({url:c.a.urlPort05+"/sgpm/rest/api/system"+e,method:"GET",params:t})},t.W=function(e,t){return l({url:c.a.urlPort05+"/sgpm/rest/api/system"+e,method:"GET",params:t})},t.F=function(e,t){return l({url:c.a.urlPort03+e,method:"GET",params:t})},t._33=function(e,t){return l({url:c.a.urlPort03+e,method:"POST",data:t})},t.T=function(e,t){return l({url:c.a.urlPort04+"/sgpm/rest/api/server"+e,method:"GET",params:t})},t.R=function(e,t){return l({url:c.a.urlPort05+e,method:"get",params:t})},t.S=function(e,t){return l({url:c.a.urlPort05+e,method:"get",params:t})},t.c=function(e,t,a){return l({url:c.a.urlPort05+e,method:a,data:t})},t.d=function(e,t,a){return l({url:c.a.urlPort05+e,method:a,data:t})},t.J=function(e,t){return l({url:c.a.urlPort05+e,method:"get",params:t})},t.V=function(e,t){return l({url:c.a.urlPort05+e,method:"get",params:t})},t.I=function(e,t){return l({url:c.a.urlPort18085+e,method:"get",params:t})},t.Q=function(e,t){return l({url:c.a.urlPort04+e,method:"GET",params:t})},t.P=function(e,t){return l({url:c.a.urlPort05+e,method:"GET",params:t})},t._40=function(e,t){return l({url:c.a.urlPort04+e,method:"POST",data:t})},t._25=function(e,t){return l({url:c.a.urlPort04+e,method:"POST",data:t})},t._32=function(e,t){return l({url:c.a.urlPort05+e,method:"post",data:t})},t.h=function(e,t){return l({url:c.a.urlPort05+e,method:"post",data:t})},t.g=function(e,t){return l({url:c.a.urlPort05+e,method:"put",data:t})},t.s=function(e,t){return l({url:c.a.urlPort04+e,method:"PUT",data:t})},t._19=function(e,t){return l({url:c.a.urlPort04+e,method:"get",params:t})},t._34=function(e,t){return l({url:c.a.urlPort05+e,method:"post",data:t})},t.i=function(e,t){return l({url:c.a.urlPort04+e,method:"post",data:t})},t._39=function(){return l({url:"http://oa.supermap.cn/seeyon/rest/token/lishuaiqiang/123456",method:"get"})},t._4=function(e,t){return l({url:"http://oa.supermap.cn/seeyon/rest"+e,method:"GET",params:t})},t._18=function(e,t){return l({url:c.a.urlPort04+e,method:"post",data:t})},t.j=function(e,t){return l({url:c.a.urlPort03+e,method:"post",data:t})},t._3=function(e,t){return l({url:c.a.urlPort04+e,method:"post",data:t})},t._17=function(e,t){return l({url:c.a.urlPort04+e,method:"GET",params:t})},t.m=function(e,t){return l({url:c.a.urlPortplan51+e,method:"get",params:t})},t.n=function(e,t){return l({url:c.a.urlPortplan51+e,method:"post",data:t})},t.f=function(e,t){return l({url:c.a.urlPort03+e,method:"get",params:t})},t._24=function(e,t){return l({url:c.a.urlPort03+e,method:"post",data:t})},t.D=function(e,t){return l({url:c.a.urlPortplan51+e,method:"get",params:t})},t._23=function(e,t){return l({url:c.a.urlPortplan51+e,method:"get",params:t})},t._14=function(e,t){return l({url:c.a.urlPortplan51+e,method:"get",params:t})},t.b=function(e,t){return l({url:"http://192.168.23.207:8085"+e,method:"get",params:t})},t.a=function(e,t){return l({url:c.a.urlPort04+e,method:"get",params:t})},t._15=function(e,t){return l({url:c.a.urlPortplan51+e,method:"get",params:t})},t._16=function(e,t){return l({url:c.a.urlPortplan51+e,method:"get",params:t})},t._11=function(e,t){return l({url:c.a.urlPortplan51+e,method:"get",params:t})},t._10=function(e,t){return l({url:c.a.urlPortplan51+e,method:"get",params:t})},t._9=function(e,t){return l({url:c.a.urlPortplan51+e,method:"get",params:t})},t.q=function(e,t){return l({url:c.a.urlPortplan51+e,method:"get",params:t})},t._22=function(e,t){return l({url:c.a.urlPortplan51+e,method:"get",params:t})},t._21=function(e,t){return l({url:c.a.urlPortplan51+e,method:"get",params:t})},t._5=function(e,t){return l({url:c.a.urlPortplan51+e,method:"get",params:t})},t.r=function(e,t){return l({url:c.a.urlPortplan51+e,method:"get",params:t})},t._12=function(e,t){return l({url:c.a.urlPortplan51+e,method:"get",params:t})},t._13=function(e,t){return l({url:c.a.urlPortplan51+e,method:"get",params:t})},t._20=function(e,t){return l({url:c.a.urlPort8686+e,method:"get",params:t})},t._41=function(e,t){return l({url:c.a.urlPort8686+e,method:"get",params:t})},t.e=function(e,t){return l({url:c.a.urlPort04+e,method:"get",params:t})},t.Z=function(e,t){return l({url:c.a.urlPort04+"/sgpm/rest/api/server/pm/project"+e,method:"get",params:t})},t._1=function(e,t){return l({url:c.a.urlPort05+"/sgpm/rest/api/system"+e,method:"post",data:t})},t._6=function(e,t){return l({url:c.a.urlPort04+e,method:"get",params:t})},t._0=function(e,t){return l({url:c.a.urlPort04+e,method:"post",data:t})},t._8=function(e,t){return l({url:c.a.urlPort03+e,method:"post",data:t})},t._7=function(e,t){return l({url:c.a.urlPort04+e,method:"get",params:t})},t.l=function(e,t){return l({url:c.a.urlPort04+e,method:"get",params:t})},t.A=function(e,t){return l({url:c.a.urlPort05+e,method:"get",params:t})},t.p=function(e,t){return l({url:c.a.urlPort05+e,method:"post",data:t})},t._2=function(e,t){return l({url:c.a.urlPort04+e,method:"post",data:t})},t._31=function(e,t){return l({url:c.a.urlPort04+e,method:"post",data:t})},t.O=function(e,t){return l({url:c.a.urlPort04+e,method:"post",data:t})},t.B=function(e,t){return l({url:c.a.urlPort04+e,method:"get",params:t})},t.U=function(e,t){return l({url:c.a.urlPort04+e,method:"post",data:t})},t.X=function(e,t){return l({url:c.a.urlPort04+e,method:"get",params:t})},t.M=function(e,t){return l({url:c.a.urlPort03+e,method:"get",params:t})},t.L=function(e,t){return l({url:c.a.urlPort04+e,method:"get",params:t})},t._26=function(e,t){return l({url:c.a.urlPort04+e,method:"post",data:t})},t._37=function(e,t){return l({url:c.a.urlPort05+e,method:"get",params:t})},t.o=function(e,t){return l({url:c.a.urlPort04+e,method:"post",data:t})},t.u=function(e,t){return l({url:c.a.urlPort03+e,method:"get",params:t})},t.x=function(e,t){return l({url:c.a.urlPort03+e,method:"post",data:t})},t.t=function(e,t){return l({url:c.a.urlPort03+e,method:"get",params:t})},t.C=function(e,t){return l({url:c.a.urlPort04+e,method:"get",params:t})},t.E=function(e,t){return l({url:c.a.urlPort04+e,method:"post",data:t})},t.k=function(e,t){return l({url:c.a.urlPort04+e,method:"delete",data:t})},t.K=function(e,t){return l({url:c.a.urlPort04+e,method:"get",data:t})},t.y=function(e,t){return l({url:c.a.urlPort04+e,method:"put",data:t})}},PiAx:function(e,t){},QAFk:function(e,t){},QfHk:function(e,t){},QmSG:function(e,t,a){"use strict";t.a={list:{total:7,code:200,data:[{updated_on:"05/09/2019/ 03:26 AM",sale_id:null,projectManager:null,user_name:null,project_status:"立项待审核",level_one_name:null,description:"ceshi demo999999",industry:"201902661112",levelOneName:null,id:65,rgt:148,level_two_name:null,contractLeaderNumber:null,identifier:"demo376-project",level_two_id:null,company_id:null,levelTwoName:null,level_one_id:null,project_no:"RJ-H-2019-0002",created_on:"05/09/2019/ 03:26 AM",user_id:"20",parent_id:null,company_name:null,son_project:[{updated_on:"05/09/2019/ 03:41 AM",sale_id:null,identifier:"demo380-project",level_two_id:null,company_id:null,user_name:null,project_status:"已提交",level_one_name:null,description:"ceshi demo22555",level_one_id:null,project_no:"RJ-H-2019-0005",created_on:"05/09/2019/ 03:41 AM",user_id:"20",parent_id:65,company_name:null,name:"demo380-project",is_public:!1,id:69,lft:146,sale_name:null,rgt:147,status:1,level_two_name:null,access_time:null}],name:"demo376-project",is_public:!1,projectNum:"RJ-H-2019-0002",lft:145,sale_name:null,status:1,access_time:null},{updated_on:"05/09/2019/ 03:27 AM",sale_id:null,projectManager:null,user_name:null,project_status:"已立项",level_one_name:null,description:"ceshi demo00000000",industry:"201902661112",levelOneName:null,id:66,rgt:12,level_two_name:null,contractLeaderNumber:null,identifier:"demo377-project",level_two_id:null,company_id:null,levelTwoName:null,level_one_id:null,project_no:"RJ-H-2019-0003",created_on:"05/09/2019/ 03:27 AM",user_id:"20",parent_id:null,company_name:null,son_project:[],name:"demo377-project",is_public:!1,projectNum:"RJ-H-2019-0003",lft:11,sale_name:null,status:1,access_time:null},{updated_on:"05/09/2019/ 03:41 AM",sale_id:null,projectManager:null,user_name:null,project_status:"已启动",level_one_name:null,description:"ceshi demo22555",industry:"201902661112",levelOneName:null,id:70,rgt:14,level_two_name:null,contractLeaderNumber:null,identifier:"demo381-project",level_two_id:null,company_id:null,levelTwoName:null,level_one_id:null,project_no:"RJ-H-2019-0006",created_on:"05/09/2019/ 03:41 AM",user_id:"20",parent_id:null,company_name:null,son_project:[],name:"demo381-project",is_public:!1,projectNum:"RJ-H-2019-0006",lft:13,sale_name:null,status:1,access_time:null},{updated_on:"05/31/2019/ 03:00 AM",sale_id:null,projectManager:null,user_name:null,project_status:"已提交",level_one_name:null,description:"ceshi demo22555",industry:"201902661112",levelOneName:null,id:72,rgt:18,level_two_name:null,contractLeaderNumber:null,identifier:"demo400-project",level_two_id:null,company_id:null,levelTwoName:null,level_one_id:null,project_no:"RJ-H-2019-0008",created_on:"05/31/2019/ 03:00 AM",user_id:"20",parent_id:null,company_name:null,son_project:[],name:"demo400-project",is_public:!1,projectNum:"RJ-H-2019-0008",lft:17,sale_name:null,status:1,access_time:null},{updated_on:"05/31/2019/ 03:01 AM",sale_id:null,projectManager:null,user_name:null,project_status:"已立项",level_one_name:null,description:"ceshi demo22555",industry:"201902661112",levelOneName:null,id:73,rgt:20,level_two_name:null,contractLeaderNumber:null,identifier:"demo401-project",level_two_id:null,company_id:null,levelTwoName:null,level_one_id:null,project_no:"RJ-H-2019-0009",created_on:"05/31/2019/ 03:01 AM",user_id:"20",parent_id:null,company_name:null,son_project:[],name:"demo401-project",is_public:!1,projectNum:"RJ-H-2019-0009",lft:19,sale_name:null,status:1,access_time:null},{updated_on:"05/31/2019/ 03:02 AM",sale_id:null,projectManager:"经理1",user_name:"经理1",project_status:"已立项",level_one_name:null,description:"ceshi demo22555",industry:"201902661112",levelOneName:null,id:74,rgt:22,level_two_name:null,contractLeaderNumber:null,identifier:"demo402-project",level_two_id:null,company_id:null,levelTwoName:null,level_one_id:null,project_no:"RJ-H-2019-0001",created_on:"05/31/2019/ 03:02 AM",user_id:"20",parent_id:null,company_name:null,son_project:[],name:"demo402-project",is_public:!1,projectNum:"RJ-H-2019-0001",lft:21,sale_name:null,status:1,access_time:null},{updated_on:"05/31/2019/ 03:22 AM",sale_id:"20192222",projectManager:"经理1",user_name:"经理1",project_status:"未提交",level_one_name:"一级部门",description:"ceshi demo22555",industry:"201902661112",levelOneName:"一级部门",id:78,rgt:30,level_two_name:"二级部门",contractLeaderNumber:"销售1",identifier:"demo406-project",level_two_id:"3666666",company_id:"1254555",levelTwoName:"二级部门",level_one_id:"225555",project_no:"RJ-H-2019-0014",created_on:"05/31/2019/ 03:22 AM",user_id:"20",parent_id:null,company_name:"公司1",son_project:[],name:"demo406-project",is_public:!1,projectNum:"RJ-H-2019-0014",lft:29,sale_name:"销售1",status:1,access_time:"06/05/2019/ 13:33 PM"}],success:!0,page_num:1,message:"获取成功"},treeData:{element:[{isShow:1,isLeaf:0,children:[{isShow:1,isLeaf:1,children:[],code:"MY_SHOUYE",icon:"sidebar-zysprk",id:2,name:"我的首页",pid:1,path:"./homepage",leaf:!0,find:!0},{isShow:1,isLeaf:1,children:[],code:"MY_YIBAOPAN",icon:null,id:3,name:"我的仪表盘",pid:1,path:"./instrumentboard",leaf:!0,find:!0},{isShow:1,isLeaf:1,children:[],code:"MY_ZILIAO",icon:"sidebar-sjgs",id:4,name:"我的资料",pid:1,path:"./mydata",leaf:!0,find:!0}],code:"GEREN_SHITU",icon:"",id:1,name:"个人视图",pid:0,path:"./personalview",leaf:!1,find:!0},{isShow:1,isLeaf:0,children:[{isShow:1,isLeaf:0,children:[{isShow:1,isLeaf:1,children:[],code:"MY_PROJECT_ITEM",icon:null,id:7,name:"项目列表",pid:6,path:"./projectitem",leaf:!0,find:!0},{isShow:1,isLeaf:1,children:[],code:"PROJECT_CREATE",icon:null,id:8,name:"项目立项登记",pid:6,path:"./projectregistration",leaf:!0,find:!0},{isShow:1,isLeaf:1,children:[],code:"PROJECT_START",icon:null,id:9,name:"项目启动",pid:6,path:"./projectstart",leaf:!0,find:!0},{isShow:1,isLeaf:1,children:[],code:"PROJECT_FINISH",icon:null,id:10,name:"项目结项",pid:6,path:"./projectfinish",leaf:!0,find:!0},{isShow:1,isLeaf:1,children:[],code:"MY_AUDIT_ITEM",icon:null,id:35,name:"审批列表",pid:6,path:"./audititem",leaf:!0,find:!0}],code:"MY_PROJECT_VIEW",icon:"sidebar-dlss",id:6,name:"项目视图",pid:5,path:"./projectitem",leaf:!1,find:!0},{isShow:1,isLeaf:0,children:[{isShow:1,isLeaf:1,children:[],code:"XIANGMUSHOUYE",icon:null,id:12,name:"项目首页",pid:11,path:"./projectshouye",leaf:!0,find:!0},{isShow:1,isLeaf:1,children:[],code:"XIANGMUXINXI",icon:null,id:13,name:"项目信息",pid:11,path:"./xiangmuxinxi",leaf:!0,find:!0},{isShow:1,isLeaf:1,children:[],code:"LICHENGBEI",icon:null,id:14,name:"里程碑",pid:11,path:"./projectmilestone",leaf:!0,find:!0},{isShow:1,isLeaf:1,children:[],code:"XIANGMUTUANDUI",icon:null,id:15,name:"项目团队",pid:11,path:"./xiangmutuandui",leaf:!0,find:!0},{isShow:1,isLeaf:1,children:[],code:"XIANGMUWENDANG",icon:null,id:16,name:"项目文档",pid:11,path:"./xiangmuwendang",leaf:!0,find:!0},{isShow:1,isLeaf:1,children:[],code:"XIANGMUBAOGAO",icon:null,id:17,name:"项目报告",pid:11,path:"./xiangmubaogao",leaf:!0,find:!0},{isShow:1,isLeaf:1,children:[{isShow:1,isLeaf:1,children:[],code:"PROJECT_HE_SUAN",icon:null,id:29,name:"项目核算",pid:18,path:"./application",leaf:!0,find:!0},{},{isShow:1,isLeaf:1,children:[],code:"PROJECT_CHENG_BEN",icon:null,id:30,name:"项目成本",pid:18,path:"./projectchengben",leaf:!0,find:!0},{isShow:1,isLeaf:1,children:[],code:"PROJECT_FEI_YONG",icon:null,id:31,name:"项目费用",pid:18,path:"./projectfeiyong",leaf:!0,find:!0},{isShow:1,isLeaf:1,children:[],code:"PROJECT_HUI_KUAN",icon:null,id:32,name:"项目回款",pid:18,path:"./projecthuikuan",leaf:!0,find:!0},{isShow:1,isLeaf:1,children:[],code:"PROJECT_JIE_SUAN",icon:null,id:33,name:"项目结算",pid:18,path:"./projectjiesuan",leaf:!0,find:!0},{isShow:1,isLeaf:1,children:[],code:"PEOJECT_GONG_SHI",icon:null,id:34,name:"项目工时",pid:18,path:"./projectgongshi",leaf:!0,find:!0}],code:"XIANGMUBAOBIAO",icon:null,id:18,name:"项目报表",pid:11,path:"./xiangmubaobiao",leaf:!0,find:!0}],code:"YIZHANGTUGONGXIANGPINGTAI",icon:null,id:11,name:"一张图共享平台",pid:5,path:"./yizhangtugongxiangpingtai",leaf:!1,find:!0}],code:"MY_PROJECT_VIEWS",icon:null,id:5,name:"项目视图",pid:0,path:"./projectviews",leaf:!1,find:!0},{isShow:1,isLeaf:0,children:[],code:"GONGSHIGUANLI",icon:null,id:19,name:"工时管理",pid:0,path:"./gongshiguanli",leaf:!1,find:!0},{isShow:1,isLeaf:0,children:[{isShow:1,isLeaf:0,children:[],code:"ZONGHECHAXUN",icon:null,id:21,name:"综合查询",pid:20,path:"./zonghechaxun",leaf:!1,find:!0},{isShow:1,isLeaf:0,children:[{isShow:1,isLeaf:1,children:[],code:"GERENYIBIAOPAN",icon:null,id:23,name:"个人仪表盘",pid:22,path:"./gerenyibiaopan",leaf:!0,find:!0},{isShow:1,isLeaf:1,children:[],code:"XIANGMUYIBIAOPAN",icon:null,id:24,name:"项目仪表盘",pid:22,path:"./xiangmuyibiaopan",leaf:!0,find:!0},{isShow:1,isLeaf:1,children:[],code:"GUANLIYIBIAOPAN",icon:null,id:25,name:"管理仪表盘",pid:22,path:"./guanliyibiaopan",leaf:!0,find:!0}],code:"YIBIAOPAN",icon:null,id:22,name:"仪表盘",pid:20,path:"./yibiaopan",leaf:!1,find:!0},{isShow:1,isLeaf:0,children:[],code:"CAIWUSHITU",icon:null,id:26,name:"财务视图",pid:20,path:"./caiwushitu",leaf:!1,find:!0},{isShow:1,isLeaf:0,children:[],code:"XIANGMUJIANKONG",icon:null,id:27,name:"项目监控",pid:20,path:"./xiangmujiankong",leaf:!1,find:!0},{isShow:1,isLeaf:0,children:[],code:"SHENHESHITU",icon:null,id:28,name:"审核视图",pid:20,path:"./shenheshitu",leaf:!1,find:!0}],code:"GUANLISHITU",icon:"",id:20,name:"管理视图",pid:0,path:"./guanlishitu",leaf:!1,find:!0}]},templaSelect:[{value:"",label:"暂无模板"},{value:"/externalPage",label:"无"},{value:"/homepage",label:"我的首页"},{value:"/instrumentboard",label:"我的仪表盘"},{value:"/mydata",label:"我的资料"},{value:"/personalview",label:"个人视图"},{value:"/projectitem",label:"项目列表"},{value:"/managerBoard",label:"项目管理看板-应用业务群"},{value:"/managerBoardGroup",label:"项目管理看板-集团"},{value:"/managerBoardPlatform",label:"项目管理看板-平台业务群"},{value:"/managerBoardCloud",label:"项目管理看板-云业务群"},{value:"/managerBoardInternational",label:"项目管理看板-国际业务群"},{value:"/ManagerBoardGT",label:"项目管理看板-南京国图"},{value:"/ManagerBoardNK",label:"项目管理看板-上海南康"},{value:"/ManagerBoardAT",label:"项目管理看板-北京世纪安图"},{value:"/managerBoardResearch",label:"项目管理看板-研究院"},{value:"/projectregistration",label:"项目立项登记"},{value:"/projectstart",label:"项目启动"},{value:"/projectfinish",label:"项目结项"},{value:"/audititem",label:"审批列表"},{value:"/projectview",label:"项目视图"},{value:"/projectHome",label:"项目首页"},{value:"/projectInformation",label:"项目信息"},{value:"/projectmilestone",label:"里程碑"},{value:"/xiangmutuandui",label:"项目团队"},{value:"/xiangmubaogao",label:"项目报告"},{value:"/application",label:"项目核算"},{value:"/projectAdjust",label:"核算详细"},{value:"/projectchengben",label:"项目成本"},{value:"/projectfeiyong",label:"项目费用"},{value:"/projecthuikuan",label:"项目回款"},{value:"/projectgongshi",label:"项目工时"},{value:"/xiangmubaobiao",label:"项目报表"},{value:"/yizhangtugongxiangpingtai",label:"一张图共享平台"},{value:"/gongshiguanli",label:"工时管理"},{value:"/zonghechaxun",label:"综合查询"},{value:"/sysMenu",label:"菜单配置"},{value:"/sysRole",label:"角色配置"},{value:"/sysAuthority",label:"授权管理"},{value:"/milestoneTemplate",label:"里程碑模板"},{value:"/projectChange",label:"项目信息变更"},{value:"/contractitem",label:"合同列表"},{value:"/ContractAssociated",label:"合同关联"},{value:"/ContractMilestone",label:"合同里程碑"},{value:"/ContractInformation",label:"合同信息"},{value:"/notContractitem",label:"非合同列表"},{value:"/subPackageItem",label:"分包项目列表"},{value:"/mounthOutputItem",label:"月度项目产值"},{value:"/residueOutputItem",label:"在建项目剩余合同产值"},{value:"/associatedOutputItem",label:"已关联已分配 剩余合同产值"},{value:"/notAssociatedOutputItem",label:"未关联剩余合同产值"},{value:"/budgetItem",label:"预算拆分"},{value:"/pendingDocument",label:"待审文档"},{value:"/cashDepositItem",label:"保证金综合查询"}],roleTreeData:[{id:1,label:"普通用户",pid:0,roleCode:"PTYH",sortIndex:1,remark:null,createDate:"2019-04-24"},{id:2,label:"管理团队",pid:0,roleCode:"GLTD",sortIndex:1,remark:null,createDate:"2019-05-08"}],spaceOptions:[{value:"5326994013938795629",label:"北京超图信息技术有限公司"},{value:"-1360422574114386809",label:"北京超图软件股份有限公司"},{value:"-8234401961992436364",label:"超图国际有限公司"},{value:"-5099447302419035828",label:"上海数慧系统技术有限公司"},{value:"-1814768306395265967",label:"南京国图信息产业有限公司"},{value:"-7975978055853456035",label:"成都地图慧科技有限公司"},{value:"4973420561000907696",label:"日本超图株式会社"},{value:"7034660345998100768",label:"河南超图信息技术有限公司"},{value:"7638091599462351621",label:"北京世纪安图数码科技发展有限责任公司"},{value:"8416498716893399290",label:"上海南康科技有限公司"}],authrory:{element:[{isShow:1,isLeaf:0,children:[{isShow:1,isLeaf:1,children:[],code:"MY_SHOUYE",icon:"sidebar-zysprk",id:2,name:"我的首页",pid:1,path:"./homepage",leaf:!0,find:!0},{isShow:1,isLeaf:1,children:[],code:"MY_YIBAOPAN",icon:null,id:3,name:"我的仪表盘",pid:1,path:"./instrumentboard",leaf:!0,find:!0},{isShow:1,isLeaf:1,children:[],code:"MY_ZILIAO",icon:"sidebar-sjgs",id:4,name:"我的资料",pid:1,path:"./mydata",leaf:!0,find:!0},{isShow:1,isLeaf:1,children:[],code:"fdfdfdf",icon:"",id:63,name:"个人试图测试",pid:1,path:"./instrumentboard",leaf:!0,find:!0},{isShow:1,isLeaf:0,children:[{isShow:1,isLeaf:1,children:[],code:"ceshiceshi1",icon:"",id:65,name:"测试测试1",pid:64,path:"./homepage",leaf:!0,find:!0},{isShow:1,isLeaf:1,children:[],code:"ceshiceshi4444",icon:"",id:67,name:"测试测试444",pid:64,path:"./homepage",leaf:!0,find:!0},{isShow:1,isLeaf:1,children:[],code:"ceshi5555888000",icon:"",id:68,name:"测试555588999",pid:64,path:"./instrumentboard",leaf:!0,find:!0}],code:"测试测试",icon:"",id:64,name:"测试测试",pid:1,path:"./homepage",leaf:!1,find:!0}],code:"GEREN_SHITU",icon:"",id:1,name:"个人视图",pid:0,path:"./personalview",leaf:!1,find:!0}]},advancedOptions:[{value:"levelOneName",label:"实施B级单位"},{value:"levelTwoName",label:"实施C级单位"},{value:"projectManager",label:"项目经理"},{value:"projectType",label:"项目类型"},{value:"projectLevel",label:"项目级别"},{value:"contractMarket",label:"销售人员"},{value:"audit_status",label:"审核进度"}],menuList:[{isShow:1,isLeaf:0,children:[{isShow:1,isLeaf:0,children:[{isShow:1,isLeaf:1,children:[],code:"XMLB",icon:"iconhetongguizeguankong",id:171,name:"项目列表",pid:170,path:"/projectitem",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!0},{isShow:1,isLeaf:1,children:[],code:"informationChange",icon:"icon_lianjie",id:172,name:"项目变更",pid:170,path:"/projectChange",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!0},{isShow:1,isLeaf:1,children:[],code:"ContractAssociated",icon:"iconfuzhilianjiemian",id:173,name:"合同关联",pid:170,path:"/ContractAssociated",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!0}],code:"GCSSP",icon:"iconhetongdengji",id:170,name:"合同项目",pid:5,path:"/externalPage",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!1},{isShow:1,isLeaf:1,children:[],code:"MY_AUDIT_ITEM",icon:"iconcustom-approve",id:176,name:"审批列表",pid:5,path:"/audititem",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!0},{isShow:1,isLeaf:0,children:[{isShow:1,isLeaf:1,children:[],code:"projectInformation",icon:"iconxinxiinfo21",id:13,name:"项目信息",pid:11,path:"/projectInformation",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!0},{isShow:1,isLeaf:1,children:[],code:"LICHENGBEI",icon:"icon333333",id:14,name:"里程碑",pid:11,path:"/projectmilestone",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!0},{isShow:1,isLeaf:1,children:[],code:"XIANGMUTUANDUI",icon:"iconrenshu",id:15,name:"项目团队",pid:11,path:"/xiangmutuandui",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!0}],code:"YIZHANGTUGONGXIANGPINGTAI",icon:"iconxiangmu",id:11,name:"未指定项目",pid:5,path:"/yizhangtugongxiangpingtai",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!1}],code:"MY_PROJECT_VIEWS",icon:"",id:5,name:"项目视图",pid:0,path:"/projectitem",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!1},{isShow:1,isLeaf:0,children:[{isShow:1,isLeaf:1,children:[],code:"HT_LIEBIAO",icon:"iconhetongshenpi",id:166,name:"合同列表",pid:165,path:"/contractitem",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!0},{isShow:1,isLeaf:0,children:[{isShow:1,isLeaf:1,children:[],code:"HT_XX",icon:"iconhetongguizeguankong",id:169,name:"合同信息",pid:167,path:"/ContractInformation",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!0},{isShow:1,isLeaf:1,children:[],code:"HT_LICHENGBEI",icon:"icon333333",id:168,name:"合同里程碑",pid:167,path:"/ContractMilestone",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!0}],code:"HT_ROOT",icon:"iconliebiao",id:167,name:"未指定合同",pid:165,path:"/externalPage",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!1},{isShow:1,isLeaf:0,children:[{isShow:1,isLeaf:1,children:[],code:"BZJ_CX",icon:"iconchaxun",id:178,name:"综合查询",pid:177,path:"/cashDepositItem",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!0}],code:"BZJ",icon:"iconbaozhengjindanbao",id:177,name:"保证金",pid:165,path:"/externalPage",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!1}],code:"HETONG_VIEW",icon:"",id:165,name:"合同视图",pid:0,path:"/contractitem",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!1},{isShow:1,isLeaf:0,children:[{isShow:1,isLeaf:0,children:[{isShow:1,isLeaf:1,children:[],code:"GLSY_JT",icon:"icon959ca7",id:89,name:"集团",pid:91,path:"/managerBoardGroup",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!0},{isShow:1,isLeaf:1,children:[],code:"GLSY_YYYWQ",icon:"icon959ca7",id:92,name:"应用业务群",pid:91,path:"/managerBoard",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!0},{isShow:1,isLeaf:1,children:[],code:"GLKB_PTYWQ",icon:"icon959ca7",id:94,name:"平台业务群",pid:91,path:"/managerBoardPlatform",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!0},{isShow:1,isLeaf:1,children:[],code:"GLKB_YYWQ",icon:"icon959ca7",id:95,name:"云业务群",pid:91,path:"/managerBoardCloud",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!0},{isShow:1,isLeaf:1,children:[],code:"GLKB_GJYWQ",icon:"icon959ca7",id:96,name:"国际业务群",pid:91,path:"/managerBoardInternational",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!0},{isShow:1,isLeaf:1,children:[],code:"GLKB_YJY",icon:"icon959ca7",id:97,name:"研究院",pid:91,path:"/managerBoardResearch",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!0}],code:"GLSY",icon:"iconshujukanban",id:91,name:"管理看板",pid:20,path:"/managerBoard",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!1},{isShow:1,isLeaf:1,children:[],code:"budget",icon:"iconGrouping",id:180,name:"项目预算分配",pid:20,path:"/budgetItem",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!0},{isShow:1,isLeaf:0,children:[{isShow:1,isLeaf:1,children:[],code:"milestoneTemplate",icon:"icon333333",id:187,name:"里程碑模板",pid:186,path:"/milestoneTemplate",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!0}],code:"PZGL",icon:"iconshebeipeizhi",id:186,name:"配置管理",pid:20,path:"/externalPage",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!1}],code:"GUANLISHITU",icon:"",id:20,name:"管理视图",pid:0,path:"/budgetItem",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!1},{isShow:1,isLeaf:0,children:[{isShow:1,isLeaf:1,children:[],code:"pendingDocument",icon:"iconwendang",id:189,name:"项目文档",pid:188,path:"/pendingDocument",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!0}],code:"docManagement",icon:"",id:188,name:"文档管理",pid:0,path:"/pendingDocument",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!1},{isShow:1,isLeaf:0,children:[{isShow:1,isLeaf:1,children:[],code:"menuManger",icon:"iconsystemmenu",id:72,name:"菜单管理",pid:71,path:"/sysMenu",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!0},{isShow:1,isLeaf:1,children:[],code:"roleManger",icon:"iconjiaoseguanli",id:73,name:"角色管理",pid:71,path:"/sysRole",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!0},{isShow:1,isLeaf:1,children:[],code:"authorityManger",icon:"iconshebeishouquan",id:74,name:"授权管理",pid:71,path:"/sysAuthority",sortIndex:null,address:"",companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!0}],code:"sysManger",icon:"",id:71,name:"系统管理",pid:0,path:"/sysMenu",sortIndex:null,address:null,companyId:"5326994013938795629",showType:null,saveType:"1",find:!0,leaf:!1}],notContractProjectConfig:{list:[{columns:[{list:[{name:"自定义文字",icon:"icon-row",options:{remoteFunc:"func_1566350920000_41226",defaultValue:"",width:"100%",pattern:"",disabled:!1,listened:!1,placeholder:"非合同项目登记",required:!1},model:"row_1566350920000_41226",rules:[],type:"row",key:"1566350920000_41226",isShow:"false"}],span:24}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1566350913000_8079",gutter:0,justify:"start",listened:!1,align:"top"},model:"grid_1566350913000_8079",rules:[],type:"grid",key:"1566350913000_8079"},{columns:[{list:[{name:"自定义文字",icon:"icon-row",options:{remoteFunc:"func_1566352164000_58397",defaultValue:"",width:"100%",pattern:"",disabled:!1,listened:!1,placeholder:"项目信息",required:!1},model:"row2_1566352164000_58397",rules:[],type:"row2",key:"1574908275000_75677",isShow:"false"}],span:24}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1566352146000_47091",gutter:0,justify:"start",listened:!1,align:"top"},model:"grid_1566352146000_47091",rules:[],type:"grid",key:"1566352146000_47091"},{columns:[{list:[{name:"项目名称",icon:"icon-input",options:{remoteFunc:"func_1564644929000_47281",defaultValue:"",dataType:"string",width:"60%",pattern:"",disabled:!1,listened:!1,placeholder:"",required:!0},model:"projectname",rules:[{type:"string",message:"项目名称格式不正确"},{message:"项目名称必须填写",required:!0}],type:"input",url:"",key:"1564644929000_47281",isShow:"true"},{name:"项目经理",icon:"icon-input",options:{remoteFunc:"func_1566352387000_42173",defaultValue:"",dataType:"string",width:"60%",pattern:"",disabled:!0,listened:!1,placeholder:"",required:!1},model:"projectmanager",rules:[{type:"string",message:"项目经理格式不正确"}],type:"input",url:"",key:"1566352387000_42173",isShow:"true"},{name:"项目类型",icon:"icon-select",options:{remoteFunc:"func_1590386880000_44306",filterable:!1,clearable:!1,defaultValue:"新选项",remoteOptions:[],multiple:!1,remote:!0,required:!0,showLabel:!1,listen:[],props:{label:"value",value:"value",url:"`http://192.168.102.101:11104/sgpm/rest/api/server/pm/project/enum/group?param=ProjectType&group_id=${this.arg.account_id}`"},width:"60%",options:[],disabled:!1,listened:!1,placeholder:""},model:"projecttype",rules:[{required:!0,message:"项目类型必须填写"}],type:"select",config:{labelPosition:""},url:"",key:"1590386880000_44306",isShow:"true"}],span:8},{list:[{name:"项目编号",icon:"icon-input",options:{remoteFunc:"func_1564644952000_46749",defaultValue:"",dataType:"string",width:"60%",pattern:"",disabled:!0,listened:!1,placeholder:"",required:!1},model:"projectnumber",rules:[{type:"string",message:"项目编号格式不正确"}],type:"input",url:"",key:"1564644952000_46749",isShow:"true"},{name:"实施B级单位",icon:"icon-input",options:{remoteFunc:"func_1567500253000_41504",defaultValue:"",dataType:"string",width:"60%",pattern:"",disabled:!0,listened:!1,placeholder:"",required:!1},model:"implementationdepartment",rules:[{type:"string",message:"实施B级单位格式不正确"}],type:"input",url:"",key:"1567500253000_41504",isShow:"true"},{name:"项目预计开始时间",icon:"icon-date",options:{remoteFunc:"func_1590386903000_81379",clearable:!0,defaultValue:"",editable:!0,format:"yyyy-MM-dd",type:"date",required:!0,readonly:!1,startPlaceholder:"",width:"60%",disabled:!1,listened:!1,placeholder:"",endPlaceholder:"",timestamp:!1},model:"expectprojectstartdate",rules:[{required:!0,message:"项目预计开始时间必须填写"}],type:"date",key:"1590386903000_81379",isShow:"true"}],span:8},{list:[{name:"项目预算",icon:"icon-input",options:{remoteFunc:"func_1590386935000_12976",defaultValue:"",dataType:"number",width:"60%",pattern:"",disabled:!1,listened:!1,placeholder:"",required:!1},model:"projectbudget",rules:[{type:"number",message:"项目预算格式不正确"}],type:"input",url:"",key:"1590386935000_12976",isShow:"true"},{name:"实施C级单位",icon:"icon-input",options:{remoteFunc:"func_1573129471000_17117",defaultValue:"",dataType:"string",width:"60%",pattern:"",disabled:!0,listened:!1,placeholder:"",required:!1},model:"implementationsecondary",rules:[{type:"string",message:"实施C级单位格式不正确"}],type:"input",url:"",key:"1573129471000_17117",isShow:"true"},{name:"项目预计结束时间",icon:"icon-date",options:{remoteFunc:"func_1590386911000_57129",clearable:!0,defaultValue:"",editable:!0,format:"yyyy-MM-dd",type:"date",required:!0,readonly:!1,startPlaceholder:"",width:"60%",disabled:!1,listened:!1,placeholder:"",endPlaceholder:"",timestamp:!1},model:"expectprojectenddate",rules:[{message:"项目预计结束时间必须填写",required:!0}],type:"date",key:"1590386911000_57129",isShow:"true"}],span:8}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1564644868000_65758",gutter:0,justify:"start",listened:!1,align:"top"},model:"grid_1564644868000_65758",rules:[],type:"grid",key:"1564644868000_65758"},{columns:[{list:[{type:"tag",name:"项目关键字",icon:"icon-jilianxuanze",isShow:"true",url:"",options:{width:"",defaultValue:[],required:!1,pattern:"",placeholder:"",remoteFunc:"func_1597889889000_99135",listened:!1},key:"1597889889000_99135",model:"tag_1597889889000_99135",rules:[]},{name:"配置库地址",icon:"icon-input",options:{remoteFunc:"func_1573111857000_33853",defaultValue:"",dataType:"string",width:"87%",pattern:"",disabled:!1,listened:!1,placeholder:"",required:!1},model:"repositoryaddress",rules:[{type:"string",message:"配置库地址格式不正确"}],type:"input",url:"",key:"1573111857000_33853",isShow:"true"},{name:"建设内容",icon:"icon-diy-com-textarea",options:{remoteFunc:"func_1573110328000_18819",defaultValue:"",width:"87%",pattern:"",listened:!1,placeholder:"根据整个项目的作业工序和任务性质，XX主要包括五大任务：标准规范与政策体系建设，网络支持环境建设、数据体系建设、1库1平台软件体系建设、5个应用示范系统建设。不超过200字。",url:"",required:!0},model:"projectcontent",rules:[{required:!0,message:"建设内容必须填写"}],type:"textarea",url:"",key:"1573110328000_18819",isShow:"true"}],span:24}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1573110202000_38715",gutter:0,justify:"start",listened:!1,align:"top"},model:"grid_1573110202000_38715",rules:[],type:"grid",key:"1573110202000_38715"},{columns:[{list:[{name:"自定义文字",icon:"icon-row",options:{remoteFunc:"func_1574908280000_9907",defaultValue:"",width:"100%",pattern:"",disabled:!1,listened:!1,placeholder:"跨部门协同分工",required:!1},model:"row2_1574908280000_9907",rules:[],type:"row2",key:"1574908280000_9907",isShow:"false"},{name:"跨部门协同分工",icon:"icon-jilianxuanze",options:{remoteFunc:"func_1574908369000_84001",clearable:!1,defaultValue:[],remoteOptions:[],url_a:"",width:"",disabled:!1,listened:!1,placeholder:"",remote:!0,props:{children:"children",label:"label",value:"value"}},model:"synergyInformation_1574908369000_84001",rules:[],type:"synergyInformation",key:"1574908369000_84001"}],span:24}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1566352637000_65726",gutter:0,justify:"start",listened:!1,align:"top"},model:"grid_1566352637000_65726",rules:[],type:"grid",key:"1566352637000_65726"},{columns:[{list:[{name:"自定义文字",icon:"icon-row",options:{remoteFunc:"func_1566353005000_63421",defaultValue:"",width:"100%",pattern:"",disabled:!1,listened:!1,placeholder:"项目里程碑实施计划",required:!1},model:"row2_1566353005000_63421",rules:[],type:"row2",key:"1566353005000_63421",isShow:"false"},{name:"",icon:"icon-select",options:{remoteFunc:"func_1560396916000_5379",filterable:!1,clearable:!1,defaultValue:[],remoteOptions:[],remote:!1,required:!1,switch:{head:!0,isContractDeliverable:!0,workHours:!0,delayDays:!0,isFinished:!0,sonSelect:!0},props:{label:"label",value:"value"},url_b:"",url_a:"",width:"",disabled:!1,listened:!1},model:"milestone_1560396916000_5379",rules:[],type:"milestone",config:{labelPosition:"left"},url:"",key:"1560396916000_5379",isShow:"true"}],span:24}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1566352756000_21271",gutter:0,justify:"start",listened:!1,align:"top"},model:"grid_1566352756000_21271",rules:[],type:"grid",key:"1566352756000_21271"}],config:{size:"small",labelPosition:"right",labelWidth:120}},nonPostProject:{list:[{columns:[{list:[{name:"自定义文字",icon:"icon-row",options:{remoteFunc:"func_1566350920000_41226",defaultValue:"",width:"100%",pattern:"",disabled:!1,listened:!1,placeholder:"非合同项目结项",required:!1},model:"row_1566350920000_41226",rules:[],type:"row",key:"1566350920000_41226",isShow:"false"}],span:24}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1566350913000_8079",gutter:0,justify:"start",listened:!1,align:"top"},model:"grid_1566350913000_8079",rules:[{type:"string",message:"单行文本1格式不正确"}],type:"grid",key:"1566350913000_8079"},{columns:[{list:[{name:"自定义文字",icon:"icon-row",options:{remoteFunc:"func_1582534665000_33564",defaultValue:"",width:"100%",pattern:"",disabled:!1,listened:!1,placeholder:"项目基本信息",required:!1},model:"row2_1582534665000_33564",rules:[],type:"row2",key:"1582534665000_33564",isShow:"false"}],span:24}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1576566164000_78586",gutter:0,justify:"start",listened:!1,align:"top"},model:"grid_1576566164000_78586",rules:[],type:"grid",key:"1576566164000_78586"},{columns:[{list:[{name:"项目名称",icon:"icon-input",options:{remoteFunc:"func_1582180543000_9733",defaultValue:"",dataType:"string",width:"50%",pattern:"",disabled:!0,listened:!1,placeholder:"",required:!1},model:"projectname",rules:[{type:"string",message:"项目名称格式不正确"}],type:"input",url:"",key:"1582180543000_9733",isShow:"true"},{name:"实施B级单位",icon:"icon-input",options:{remoteFunc:"func_1576566215000_20039",defaultValue:"",dataType:"string",width:"50%",pattern:"",disabled:!0,listened:!1,placeholder:"",required:!1},model:"classunitbname",rules:[{type:"string",message:"实施B级单位格式不正确"}],type:"input",url:"",key:"1584673649000_30063",isShow:"true"},{name:"预算金额",icon:"icon-input",options:{remoteFunc:"func_1576566215000_20039",defaultValue:"",dataType:"string",width:"50%",pattern:"",disabled:!0,listened:!1,placeholder:"",required:!1},model:"projectbudget",rules:[{type:"string",message:"预算金额格式不正确"}],type:"input",url:"",key:"1576566215000_20039",isShow:"true"},{name:"项目实际验收时间",icon:"icon-input",options:{remoteFunc:"func_1582180599000_99017",defaultValue:"",dataType:"string",width:"50%",pattern:"",disabled:!0,listened:!1,placeholder:"",required:!1},model:"acceptancedate",rules:[{type:"string",message:"项目实际验收时间格式不正确"}],type:"input",url:"",key:"1582180599000_99017",isShow:"true"},{name:"工时总计(小时)",icon:"icon-input",options:{remoteFunc:"func_1576566280000_78051",defaultValue:"",dataType:"number",width:"50%",pattern:"",disabled:!0,listened:!1,placeholder:"",required:!1},model:"totalworkinghours",rules:[{type:"number",message:"工时总计(小时)格式不正确"}],type:"input",url:"",key:"1576566280000_78051",isShow:"true"}],span:12},{list:[{name:"项目经理",icon:"icon-input",options:{remoteFunc:"func_1582180566000_98179",defaultValue:"",dataType:"string",width:"50%",pattern:"",disabled:!0,listened:!1,placeholder:"",required:!1},model:"projectmanagername",rules:[{type:"string",message:"项目经理格式不正确"}],type:"input",url:"",key:"1582180566000_98179",isShow:"true"},{name:"实施C级单位",icon:"icon-input",options:{remoteFunc:"func_1576566258000_35721",defaultValue:"",dataType:"string",width:"50%",pattern:"",disabled:!0,listened:!1,placeholder:"",required:!1},model:"classunitcname",rules:[{type:"string",message:"实施C级单位格式不正确"}],type:"input",url:"",key:"1576566258000_35721",isShow:"true"},{name:"支付金额",icon:"icon-input",options:{remoteFunc:"func_1576566291000_5764",defaultValue:"",dataType:"number",width:"50%",pattern:"",disabled:!0,listened:!1,placeholder:"",required:!1},model:"paymentamount",rules:[{type:"number",message:"支付金额格式不正确"}],type:"input",url:"",key:"1582181094000_20417",isShow:"true"},{name:"项目完成进度",icon:"icon-input",options:{remoteFunc:"func_1576566291000_5764",defaultValue:"",dataType:"string",width:"50%",pattern:"",disabled:!0,listened:!1,placeholder:"",required:!1},model:"percentagecomplete",rules:[{type:"string",message:"项目完成进度格式不正确"}],type:"input",url:"",key:"1590456190000_70941",isShow:"true"},{name:"配置库地址",icon:"icon-input",options:{remoteFunc:"func_1576566291000_5764",defaultValue:"",dataType:"string",width:"50%",pattern:"",disabled:!0,listened:!1,placeholder:"",required:!1},model:"repositoryaddress",rules:[{type:"string",message:"配置库地址格式不正确"}],type:"input",url:"",key:"1576566291000_5764",isShow:"true"}],span:12}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1576566188000_68718",gutter:0,justify:"start",listened:!1,align:"top"},model:"grid_1576566188000_68718",rules:[],type:"grid",key:"1576566188000_68718"},{columns:[{list:[{name:"",icon:"icon-row",options:{remoteFunc:"func_1590456253000_53748",defaultValue:"",width:"100%",pattern:"",listened:!1,placeholder:"申请结项原因",required:!1},model:"row2_1590456253000_53748",rules:[],type:"row2",key:"1590456253000_53748",isShow:"false"},{type:"textarea",name:"",icon:"icon-diy-com-textarea",isShow:"true",url:"",options:{width:"100%",disabled:!0,defaultValue:"简要说明项目工作完成情况及申请结项原因",pattern:"",placeholder:"简要说明项目工作完成情况及申请结项原因",url:"",remoteFunc:"func_1590456409000_49116",listened:!1},key:"1590456409000_49116",model:"closereason",rules:[{type:"string",message:"申请结项原因格式不正确"}]}],span:24}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1582181437000_3200",gutter:0,justify:"start",listened:!1,align:"top"},model:"grid_1582181437000_3200",rules:[],type:"grid",key:"1582181437000_3200"},{columns:[{list:[{name:"",icon:"icon-row",options:{remoteFunc:"func_1582534602000_32885",defaultValue:"",width:"100%",pattern:"",disabled:!1,listened:!1,placeholder:"经验教训总结",required:!1},model:"row2_1582534602000_32885",rules:[],type:"row2",key:"1582534602000_32885",isShow:"false"},{name:"经验教训组件",icon:"icon-jilianxuanze",options:{remoteFunc:"func_1582181667000_65815",clearable:!1,defaultValue:[],remoteOptions:[],remote:!0,props:{children:"children",label:"label",value:"value"},url_f:"",url_g:"",url_d:"",url_e:"",url_b:"",url_c:"",url_a:"",width:"",disabled:!1,placeholder:"",listened:!1},model:"conclusion_1582181667000_65815",rules:[],type:"conclusion",key:"1582181667000_65815"}],span:24}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1582181450000_96951",gutter:0,justify:"start",listened:!1,align:"top"},model:"grid_1582181450000_96951",rules:[],type:"grid",key:"1582181450000_96951"}],config:{size:"small",labelPosition:"right",labelWidth:170}},gtTest:{list:[{columns:[{list:[{name:"自定义文字",icon:"icon-row",options:{remoteFunc:"func_1566350920000_41226",defaultValue:"",width:"100%",pattern:"",disabled:!1,listened:!1,placeholder:"项目合同信息",required:!1},model:"row_1566350920000_41226",rules:[],type:"row",key:"1566350920000_41226",isShow:"false"}],span:24}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1566350913000_8079",gutter:0,justify:"start",listened:!1,align:"top"},model:"grid_1566350913000_8079",rules:[],type:"grid",key:"1566350913000_8079"},{columns:[{list:[{name:"项目名称",icon:"icon-input",options:{remoteFunc:"func_1575524855000_64516",defaultValue:"",dataType:"string",width:"87%",pattern:"",disabled:!1,listened:!1,placeholder:"",required:!1},model:"projectname",rules:[{type:"string",message:"项目名称格式不正确"}],type:"input",url:"",key:"1575524855000_64516",isShow:"true"}],span:24}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1575524829000_98912",gutter:0,justify:"start",listened:!1,align:"top"},model:"grid_1575524829000_98912",rules:[],type:"grid",key:"1575524829000_98912"},{columns:[{list:[{name:"项目经理",icon:"icon-input",options:{remoteFunc:"func_1575524079000_86331",defaultValue:"",dataType:"string",width:"60%",pattern:"",disabled:!0,listened:!1,placeholder:"",required:!1},model:"projectmanagername",rules:[],type:"input",url:"",key:"1575524079000_86331",isShow:"true"},{name:"实施B级单位",icon:"icon-input",options:{remoteFunc:"func_1575524083000_58407",defaultValue:"",dataType:"string",width:"60%",pattern:"",disabled:!0,listened:!1,placeholder:"",required:!1},model:"classUnitBName",rules:[{type:"string",message:"实施B级单位格式不正确"}],type:"input",url:"",key:"1575524083000_58407",isShow:"true"},{name:"实施C级单位",icon:"icon-input",options:{remoteFunc:"func_1575524081000_80815",defaultValue:"",dataType:"string",width:"60%",pattern:"",disabled:!0,listened:!1,placeholder:"",required:!1},model:"classunitcname",rules:[{type:"string",message:"实施C级单位格式不正确"}],type:"input",url:"",key:"1575524081000_80815",isShow:"true"},{name:"项目预计开始时间",icon:"icon-date",options:{remoteFunc:"func_1570607023000_83666",filterable:!1,clearable:!0,defaultValue:"",editable:!0,format:"yyyy-MM-dd",type:"date",remote:!0,required:!0,readonly:!1,startPlaceholder:"",width:"60%",disabled:!1,listened:!1,placeholder:"",endPlaceholder:"",timestamp:!1},model:"expectprojectstartdate",rules:[{message:"项目预计开始时间必须填写",required:!0}],type:"date",key:"1570607106000_62373",isShow:"true"},{name:"项目类型",icon:"icon-select",options:{remoteFunc:"func_1575524681000_62358",filterable:!1,clearable:!1,defaultValue:"新选项",remoteOptions:[],multiple:!1,remote:!0,required:!0,showLabel:!1,listen:[],props:{label:"value",value:"value",url:"`http://192.168.102.101:11104/sgpm/rest/api/server/pm/project/ProjectType`"},width:"60%",options:[],disabled:!1,listened:!1,placeholder:""},model:"contractprojecttype",rules:[{message:"项目类型必须填写",required:!0}],type:"select",config:{labelPosition:""},url:"",key:"1575524681000_62358",isShow:"true"}],span:8},{list:[{name:"",icon:"icon-jilianxuanze",options:{remoteFunc:"func_1575524088000_29456",clearable:!1,defaultValue:[],remoteOptions:[],inputTwo:"销售C级单位",remote:!0,selectName:"项目销售",required:!1,props:{children:"children",label:"label",value:"value"},inputOne:"销售B级单位",url_d:"",url_b:"http://192.168.102.101:11105/sgpm/rest/api/system/user/department/part",url_c:"",url_a:"http://192.168.102.101:11105/sgpm/rest/api/system/user/info/fuzzy/search",width:"",disabled:!1,listened:!1,placeholder:""},model:"marketSelect_1575524088000_29456",rules:[],type:"marketSelect",url:"",key:"1575524088000_29456",isShow:"true"},{name:"项目预计结束时间",icon:"icon-date",options:{remoteFunc:"func_1570607108000_70116",filterable:!1,clearable:!0,defaultValue:"",editable:!0,format:"yyyy-MM-dd",type:"date",remote:!0,required:!0,readonly:!1,startPlaceholder:"",width:"60%",disabled:!1,listened:!1,placeholder:"",endPlaceholder:"",timestamp:!1},model:"expectprojectenddate",rules:[{message:"项目预计结束时间必须填写",required:!0}],type:"date",key:"1570607108000_70116",isShow:"true"},{name:"项目运维期（年）",icon:"icon-select",options:{remoteFunc:"func_1575524687000_30864",filterable:!1,clearable:!1,defaultValue:"新选项",remoteOptions:[],multiple:!1,remote:!1,required:!0,showLabel:!1,props:{label:"label",value:"value"},width:"60%",options:[{value:"1"},{value:"2"},{value:"3"},{value:"4"},{value:"5"},{value:"无"}],disabled:!1,listened:!1,placeholder:""},model:"projectoperationalperiod",rules:[{message:"项目运维期（年）必须填写",required:!0}],type:"select",config:{labelPosition:""},url:"",key:"1575524687000_30864",isShow:"true"}],span:8},{list:[{name:"预计合同额(万元)",icon:"icon-input",options:{remoteFunc:"func_1575524458000_77662",defaultValue:"",dataType:"string",width:"60%",pattern:"",disabled:!1,listened:!1,placeholder:"",required:!0},model:"expectcontractamount",rules:[{type:"string",message:"预计合同额(万元)格式不正确"},{message:"预计合同额(万元)必须填写",required:!0}],type:"inputguotu",url:"",key:"1575524458000_77662",isShow:"true"},{name:"项目级别",icon:"icon-input",options:{remoteFunc:"func_1575515361000_79901",defaultValue:"",dataType:"string",width:"60%",pattern:"",disabled:!0,listened:!1,placeholder:"",required:!1},model:"contractprojectlevel",rules:[{type:"string",message:"项目级别格式不正确"}],type:"inputguotulevel",url:"",key:"1575515361000_79901",isShow:"true"},{name:"合同预计签订时间",icon:"icon-date",options:{remoteFunc:"func_1575524654000_61418",filterable:!1,clearable:!0,defaultValue:"",editable:!0,format:"yyyy-MM-dd",type:"date",remote:!0,required:!0,readonly:!1,startPlaceholder:"",width:"60%",disabled:!1,listened:!1,placeholder:"",endPlaceholder:"",timestamp:!1},model:"expectcontractsigningdate",rules:[{message:"合同预计签订时间必须填写",required:!0}],type:"date",key:"1575524654000_61418",isShow:"true"},{name:"业务类型",icon:"icon-select",options:{remoteFunc:"func_1575524661000_45805",filterable:!1,clearable:!1,defaultValue:"",remoteOptions:[],multiple:!1,remote:!0,required:!0,showLabel:!1,listen:[],props:{label:"value",value:"value",url:"`http://192.168.102.101:11104/sgpm/rest/api/server/pm/project/enum/group?param=BusinessType&group_id=${this.arg.subdept_id}`"},width:"60%",options:[{value:"下拉框1"},{value:"下拉框2"},{value:"下拉框3"}],disabled:!1,listened:!1,placeholder:""},model:"professionalworktypes",rules:[{message:"业务类型必须填写",required:!0}],type:"select",config:{labelPosition:""},url:"",key:"1575524661000_45805",isShow:"true"},{name:"项目子类",icon:"icon-select",options:{remoteFunc:"func_1577252189000_33911",filterable:!1,clearable:!1,defaultValue:"",remoteOptions:[],multiple:!1,remote:!0,required:!0,showLabel:!1,listen:[],props:{label:"value",value:"value",url:"`http://192.168.102.101:11104/sgpm/rest/api/server/pm/project/enum/group?param=ProjectChild&group_id=${this.arg.subdept_id}`"},width:"60%",options:[{value:"下拉框1"},{value:"下拉框2"},{value:"下拉框3"}],disabled:!1,listened:!1,placeholder:""},model:"projectchildtype",rules:[{message:"项目子类必须填写",required:!0}],type:"select",config:{labelPosition:""},url:"",key:"projectchildtype",isShow:"true"}],span:8}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1564644868000_65758",gutter:0,justify:"start",listened:!1,align:"top"},model:"grid_1564644868000_65758",rules:[],type:"grid",key:"1564644868000_65758"},{columns:[{list:[{name:"项目关键字",icon:"icon-jilianxuanze",options:{remoteFunc:"func_1575525002000_3351",defaultValue:[],width:"80%",pattern:"",listened:!1,placeholder:"",required:!1},model:"keyword",rules:[],type:"tag",url:"",key:"1575525002000_3351",isShow:"true"},{name:"拟使用的关键技术",icon:"icon-jilianxuanze",options:{remoteFunc:"func_1571300556000_60231",defaultValue:[],width:"80%",pattern:"",listened:!1,placeholder:"",required:!1},model:"keytechnology",rules:[],type:"tag",url:"",key:"1571300556000_60231",isShow:"true"}],span:24}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1570607360000_99910",gutter:0,justify:"start",listened:!1,align:"top"},model:"grid_1570607360000_99910",rules:[],type:"grid",key:"1570607360000_99910"},{columns:[{list:[{name:"项目建设内容",icon:"icon-diy-com-textarea",options:{remoteFunc:"func_1570607926000_86531",defaultValue:"",width:"87%",pattern:"",listened:!1,placeholder:"",url:"",required:!0},model:"contractcontent",rules:[{required:!0,message:"合同建设内容必须填写"}],type:"textarea",url:"",key:"1570607926000_86531",isShow:"true"}],span:24}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1570607413000_98654",gutter:0,justify:"start",listened:!1,align:"top"},model:"grid_1570607413000_98654",rules:[],type:"grid",key:"1570607413000_98654"}],config:{size:"mini",labelPosition:"right",labelWidth:120}},contractTableConfigNk:[{key:"auditStatus",label:"审核进度",isShow:!0},{key:"projectNumber",label:"项目编号",isShow:!0},{key:"classUnitBName",label:"实施B级单位",isShow:!0},{key:"projectManagerName",label:"项目经理",isShow:!0},{key:"projectStatus",label:"项目状态",isShow:!0},{key:"projectType",label:"项目类型",isShow:!0},{key:"keyword",label:"工程代码",isShow:!0},{key:"expectProjectStartDate",label:"项目预计开始时间",isShow:!0},{key:"expectProjectEndDate",label:"项目预计结束时间",isShow:!0},{key:"note",label:"备注",isShow:!0}],projectTableConfigNk:[{key:"projectNum",label:"项目编号",isShow:!0},{key:"levelOneName",label:"实施B级单位",isShow:!0},{key:"levelTwoName",label:"实施C级单位",isShow:!1},{key:"projectManager",label:"项目经理",isShow:!0},{key:"keyword",label:"工程代码",isShow:!0},{key:"projectType",label:"项目类型",isShow:!0,filters:[{text:"开发类项目",value:"开发类项目"},{text:"数据服务类项目",value:"数据服务类项目"},{text:"测绘类项目",value:"测绘类项目"},{text:"运维类项目",value:"运维类项目"},{text:"规划设计类项目",value:"规划设计类项目"},{text:"咨询服务类项目",value:"咨询服务类项目"},{text:"监理类项目",value:"监理类项目"},{text:"科研类项目",value:"科研类项目"},{text:"集成类项目",value:"集成类项目"},{text:"其他类项目",value:"其他类项目"},{text:"内部研发类项目",value:"内部研发类项目"},{text:"市场类项目",value:"市场类项目"},{text:"事务型项目",value:"事务型项目"}]},{key:"projectLevel",label:"项目级别",isShow:!0,filters:[{text:"超大型",value:"超大型"},{text:"大型",value:"大型"},{text:"中型",value:"中型"},{text:"小型",value:"小型"}]},{key:"contractAmount",label:"累计合同额",isShow:!0,isQfw:1,sortable:"custom"},{key:"backMoney",label:"累计回款额",isShow:!0,isQfw:1,sortable:"custom"},{key:"projectStatus",label:"项目状态",isShow:!0,filters:[{text:"已登记",value:"已登记"},{text:"运行中",value:"运行中"},{text:"暂停",value:"暂停"},{text:"完成",value:"完成"},{text:"关闭",value:"关闭"},{text:"异常关闭",value:"异常关闭"}]},{key:"stageName",label:"当前阶段",isShow:!0,filters:[{text:"启动",value:"启动"},{text:"规划",value:"规划"},{text:"实施",value:"实施"},{text:"收尾",value:"收尾"}]},{key:"percentageComplete",label:"实施进度",isShow:!0,isPercent:!0,sortable:"custom"},{key:"progressProblems",label:"当前进展问题",isShow:!0},{key:"reviewTime",label:"最近Review时间",isShow:!0,sortable:"custom"},{key:"proStartTime",label:"项目预计开始时间",isShow:!0,sortable:"custom"},{key:"proEndTime",label:"项目预计结束时间",isShow:!0,sortable:"custom"},{key:"company_name",label:"A级单位",isShow:!0}],projectTableConfigGT:[{key:"projectNum",label:"项目编号",isShow:!0},{key:"levelOneName",label:"实施B级单位",isShow:!0},{key:"levelTwoName",label:"实施C级单位",isShow:!1},{key:"projectManager",label:"项目经理",isShow:!0},{key:"resolution",label:"项目经费",isShow:!0},{key:"customerCenter",label:"销售B级单位",isShow:!0},{key:"customerDepartment",label:"销售C级单位",isShow:!1},{key:"contractMarket",label:"销售人员",isShow:!0},{key:"projectType",label:"项目类型",isShow:!0,filters:[{text:"开发类项目",value:"开发类项目"},{text:"数据服务类项目",value:"数据服务类项目"},{text:"测绘类项目",value:"测绘类项目"},{text:"运维类项目",value:"运维类项目"},{text:"规划设计类项目",value:"规划设计类项目"},{text:"咨询服务类项目",value:"咨询服务类项目"},{text:"监理类项目",value:"监理类项目"},{text:"科研类项目",value:"科研类项目"},{text:"集成类项目",value:"集成类项目"},{text:"其他类项目",value:"其他类项目"},{text:"内部研发类项目",value:"内部研发类项目"},{text:"市场类项目",value:"市场类项目"},{text:"事务型项目",value:"事务型项目"}]},{key:"projectLevel",label:"项目级别",isShow:!1,filters:[{text:"超大型",value:"超大型"},{text:"大型",value:"大型"},{text:"中型",value:"中型"},{text:"小型",value:"小型"}]},{key:"contractAmount",label:"合同额",isShow:!0,isQfw:1,sortable:"custom"},{key:"backMoney",label:"回款额",isShow:!0,isQfw:1,sortable:"custom"},{key:"projectStatus",label:"项目状态",isShow:!0,filters:[{text:"已登记",value:"已登记"},{text:"运行中",value:"运行中"},{text:"暂停",value:"暂停"},{text:"完成",value:"完成"},{text:"关闭",value:"关闭"},{text:"异常关闭",value:"异常关闭"}]},{key:"stageName",label:"当前阶段",isShow:!0,filters:[{text:"启动",value:"启动"},{text:"规划",value:"规划"},{text:"实施",value:"实施"},{text:"收尾",value:"收尾"}]},{key:"percentageComplete",label:"实施进度",isShow:!0,isPercent:!0,sortable:"custom"},{key:"contractNumber",label:"合同编号",isShow:!0},{key:"keyword",label:"关键字",isShow:!0},{key:"totalBudget",label:"总预算",isShow:!0,isQfw:1,sortable:"custom"},{key:"totalCost",label:"总成本",isShow:!0,sortable:"custom"},{key:"outsourcePaymentRate",label:"外包支付率",isShow:!0,isPercentNot100:!0,sortable:"custom"},{key:"returnmoneypercentage",label:"回款率",isShow:!0,isPercent:!0,sortable:"custom"},{key:"predictGrossProfit",label:"预计毛利润",isShow:!0,isQfw:1,sortable:"custom"},{key:"curGrossProfit",label:"当前毛利润",isShow:!0,isQfw:1,sortable:"custom"},{key:"predictNetPorfit",label:"预计净利润",isShow:!0,isQfw:1,sortable:"custom"},{key:"curNetPorfit",label:"当前净利润",isShow:!0,isQfw:1,sortable:"custom"},{key:"progressProblems",label:"当前进展问题",isShow:!1},{key:"reviewTime",label:"最近Review时间",isShow:!1,sortable:"custom"},{key:"clientName",label:"客户名称",isShow:!1},{key:"contractSigningTime",label:"合同签订日期",isShow:!1,sortable:"custom"},{key:"contractCheckTime",label:"合同约定项目结束时间",isShow:!1,sortable:"custom"},{key:"proStartTime",label:"项目预计开始时间",isShow:!1,sortable:"custom"},{key:"proEndTime",label:"项目预计结束时间",isShow:!1,sortable:"custom"},{key:"trade",label:"行业",isShow:!1},{key:"region",label:"区域",isShow:!1},{key:"pigeonholeStatus",label:"归档状态",isShow:!1},{key:"company_name",label:"A级单位",isShow:!1}]}},Qq8v:function(e,t){},RQZO:function(e,t,a){"use strict";var o=a("bOdI"),n=a.n(o),i=a("woOf"),r=a.n(i),s=a("lHA8"),l=a.n(s),c=a("c/Tr"),u=a.n(c),d=a("mvHQ"),p=a.n(d),m=a("Dd8w"),h=a.n(m),_=a("P9l9"),f=a("QmSG"),g=(a("14gb"),a("NYxO")),b={name:"conChange",props:{labelName:{type:String,default:"项目经理"}},data:function(){return{loading:!0,Marketform:{emp_name:"",subdept_name:"",dept_id:"",account_name:""},subdeptList:[],marksetSelectAry:[],dept_name:""}},mounted:function(){},computed:h()({},Object(g.c)(["userinfo"])),created:function(){},methods:{remoteMethod:function(e){var t=this;Object(_.A)("/sgpm/rest/api/system/user/info/fuzzy/search?memberId="+this.userinfo.memberid+"&search="+e+"&pageSize=1000&pageNum=1",null).then(function(e){200==e.data.code&&(t.loading=!1,t.marksetSelectAry=e.data.data)}).catch(function(e){})},changeHandle:function(e){var t=this;Object(_.A)("/sgpm/rest/api/system/user/department/part?memberId="+e,null).then(function(e){if(200==e.data.code){var a=e.data.data;t.Marketform=a,t.subdeptList=a.departments,t.dept_name=a.dept_name,"管理团队"==a.dept_name&&(t.Marketform.dept_id=""),t.$emit("MarketSelectInfo",t.Marketform)}}).catch(function(e){})},deptNameChange:function(e){var t=this.Marketform.departments.filter(function(t){if(t.deptId==e)return t.deptName})[0].deptName;this.Marketform.dept_name=t,this.Marketform,this.$emit("MarketSelectInfo",this.Marketform)},resetForm:function(){var e=this;this.$nextTick(function(){e.Marketform.emp_name="",e.Marketform.account_name="",e.Marketform.subdept_name="",e.Marketform.dept_id=""})}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"condition-change"},[a("el-form",{ref:"Marketform",staticStyle:{width:"100%"},attrs:{model:e.Marketform,size:"mini","label-width":"75px"}},[a("el-form-item",{attrs:{label:e.labelName}},[a("el-select",{staticStyle:{width:"64%"},attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入项目经理","remote-method":e.remoteMethod,loading:e.loading,"loading-text":"请输入项目经理"},on:{change:e.changeHandle},model:{value:e.Marketform.emp_name,callback:function(t){e.$set(e.Marketform,"emp_name",t)},expression:"Marketform.emp_name"}},e._l(e.marksetSelectAry,function(e,t){return a("el-option",{key:t,attrs:{label:e.empInfo,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"A级单位"}},[a("el-input",{staticStyle:{width:"64%"},model:{value:e.Marketform.account_name,callback:function(t){e.$set(e.Marketform,"account_name",t)},expression:"Marketform.account_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"实施B级单位"}},[a("el-input",{staticStyle:{width:"64%"},model:{value:e.Marketform.subdept_name,callback:function(t){e.$set(e.Marketform,"subdept_name",t)},expression:"Marketform.subdept_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"实施C级单位"}},[a("el-select",{staticStyle:{width:"64%"},attrs:{placeholder:""},on:{change:e.deptNameChange},model:{value:e.Marketform.dept_id,callback:function(t){e.$set(e.Marketform,"dept_id",t)},expression:"Marketform.dept_id"}},e._l(e.subdeptList,function(e,t){return a("el-option",{key:t,attrs:{label:e.deptName,value:e.deptId}})}),1)],1)],1)],1)},staticRenderFns:[]};var y={name:"ProjectList",props:["widget","models","rules","remote","datas"],components:{conChange:a("VU/8")(b,v,!1,function(e){a("V5qo")},"data-v-542cc095",null).exports},data:function(){return{isShowHtCon:!1,checkedU:!0,checkedD:!1,statusForm:{after_name:"",change_reason:""},statusChangeDialog:!1,managerForm:{},managerFormHT:{},reason:"",depName:"",isStatusChange:!0,empName:"",empNameHT:"",formOld:{projectManager:"",company_name:"",levelOneName:"",levelTwoName:""},formHTOld:{projectManager:"",company_name:"",levelOneName:"",levelTwoName:""},isPname:!0,btnMaxWidth:180,dynamiCheckList:[],form:{dicName:"All",keyWord:""},advancedDialog:!1,advancedForm:{fieldName:"",fieldValue:""},dynamicValidateForm:{domains:[{value:"",value1:"",isDisabled:!1}],type:[]},isTest:!1,checkFixed:!0,currentPage:1,advancedList:[],tableData:[],selectAry:[],page:{pageNum:1,pageSize:20,total:0},btnLoding:!1,statusBtnLoding:!1,statusOptionList:[{value:0,label:"已登记"},{value:1,label:"运行中"},{value:3,label:"暂停"},{value:2,label:"完成"},{value:4,label:"关闭"},{value:5,label:"异常关闭"},{value:6,label:"验收"}],listConfig:[{key:"projectNum",label:"项目编号",isShow:!0},{key:"levelOneName",label:"实施B级单位",isShow:!0},{key:"levelTwoName",label:"实施C级单位",isShow:!1},{key:"projectManager",label:"项目经理",isShow:!0},{key:"customerCenter",label:"销售B级单位",isShow:!0},{key:"customerDepartment",label:"销售C级单位",isShow:!1},{key:"contractMarket",label:"销售人员",isShow:!0},{key:"projectType",label:"项目类型",isShow:!0,filters:[{text:"开发类项目",value:"开发类项目"},{text:"数据服务类项目",value:"数据服务类项目"},{text:"测绘类项目",value:"测绘类项目"},{text:"运维类项目",value:"运维类项目"},{text:"规划设计类项目",value:"规划设计类项目"},{text:"咨询服务类项目",value:"咨询服务类项目"},{text:"监理类项目",value:"监理类项目"},{text:"科研类项目",value:"科研类项目"},{text:"集成类项目",value:"集成类项目"},{text:"其他类项目",value:"其他类项目"},{text:"内部研发类项目",value:"内部研发类项目"},{text:"市场类项目",value:"市场类项目"},{text:"事务型项目",value:"事务型项目"}]},{key:"projectLevel",label:"项目级别",isShow:!1,filters:[{text:"超大型",value:"超大型"},{text:"大型",value:"大型"},{text:"中型",value:"中型"},{text:"小型",value:"小型"}]},{key:"contractAmount",label:"合同额",isShow:!0,isQfw:1,sortable:"custom"},{key:"backMoney",label:"回款额",isShow:!0,isQfw:1,sortable:"custom"},{key:"projectStatus",label:"项目状态",isShow:!0,filters:[{text:"已登记",value:"已登记"},{text:"运行中",value:"运行中"},{text:"暂停",value:"暂停"},{text:"完成",value:"完成"},{text:"关闭",value:"关闭"},{text:"异常关闭",value:"异常关闭"}]},{key:"stageName",label:"当前阶段",isShow:!0,filters:[{text:"启动",value:"启动"},{text:"规划",value:"规划"},{text:"实施",value:"实施"},{text:"收尾",value:"收尾"}]},{key:"percentageComplete",label:"实施进度",isShow:!0,isPercent:!0,sortable:"custom"},{key:"keyword",label:"关键字",isShow:!0},{key:"contractNumber",label:"合同编号",isShow:!0},{key:"totalBudget",label:"总预算",isShow:!0,isQfw:1,sortable:"custom"},{key:"totalCost",label:"总成本",isShow:!0,isQfw:1,sortable:"custom"},{key:"outsourcePaymentRate",label:"外包支付率",isShow:!0,isPercentNot100:!0,sortable:"custom"},{key:"returnmoneypercentage",label:"回款率",isShow:!0,isPercentNot100:!0,sortable:"custom"},{key:"predictGrossProfit",label:"预计毛利润",isShow:!0,isQfw:1,sortable:"custom"},{key:"curGrossProfit",label:"当前毛利润",isShow:!0,isQfw:1,sortable:"custom"},{key:"predictNetPorfit",label:"预计净利润",isShow:!0,isQfw:1,sortable:"custom"},{key:"curNetPorfit",label:"当前净利润",isShow:!0,isQfw:1,sortable:"custom"},{key:"progressProblems",label:"当前进展问题",isShow:!1},{key:"reviewTime",label:"最近Review时间",isShow:!1,sortable:"custom"},{key:"clientName",label:"客户名称",isShow:!1},{key:"contractSigningTime",label:"合同签订日期",isShow:!1,sortable:"custom"},{key:"contractCheckTime",label:"合同约定项目结束时间",isShow:!1,sortable:"custom"},{key:"proStartTime",label:"项目预计开始时间",isShow:!1,sortable:"custom"},{key:"proEndTime",label:"项目预计结束时间",isShow:!1,sortable:"custom"},{key:"trade",label:"行业",isShow:!1},{key:"region",label:"区域",isShow:!1},{key:"pigeonholeStatus",label:"归档状态",isShow:!1},{key:"company_name",label:"A级单位",isShow:!1}],isAlready:!1,isStart:!1,isFinish:!0,isRecall:!0,isEditor:!0,multipleSelection:[],advancedOptions:f.a.advancedOptions,advancedMultiples:{},editorBtnMark:"",dialogVisible:!1,dialogShowField:!1,checkedField:[],aLLField:[],tableLoading:!0,examineDialog:!1,passForm:{attitude:"1",comment:""},isWaitMeBtn:!0,proParams:{},tableData1:[{role:"公司PMO专员意见",content:[{msgText:"项目登记信息规范完整",model:"2",disabled:!0},{msgText:"同意项目登记",model:"1"}],user:{date:"2010-2-3",userName:"张三"},auditComment:""},{role:"客户中心销售人员意见",content:[{msgText:"登记信息已知晓，同意项目登记",model:"1"}],user:{date:"2010-2-3",userName:"张三"},auditComment:""},{role:"工程中心部门经理意见",content:[{msgText:"项目基本信息、项目简介可通过",model:"1"},{msgText:"同意项目登记",model:"1"}],user:{date:"2010-2-3",userName:"张三"},auditComment:""},{role:"工程中心项目总监意见",content:[{msgText:"项目基本信息、项目简介可通过",model:"1"},{msgText:"同意项目登记",model:"1"}],user:{date:"2010-2-3",userName:"张三"},auditComment:""},{role:"工程中心总经理意见",content:[{msgText:"登记信息已知晓，同意项目登记",model:"1"}],user:{date:"2010-2-3",userName:"张三"},auditComment:""}],fieldName:"",fieldContent:[],sortFieldName:"",sort:null,isCared:null,tookenId:"",managerChangeDialog:!1,selectCheckoutAry:[],auditConfig:{10:"登记待提交",11:"登记审核中",12:"登记已审核",20:"启动待提交",21:"启动审核中",22:"启动已审核",30:"工作结项待提交",31:"工作结项审核中",32:"工作结项已审核",40:"合同结项待提交",41:"合同结项审核中",42:"合同结项已审核",50:"异常结项待提交",51:"异常结项审核中",52:"异常结项已审核"},selectList:[],curProManage:!0}},filters:{formatThousands:function(e){if("--"==e)return"--";e=(e/=1e4).toFixed(2);if(0==/^[0-9]*[1-9][0-9]*$/.test(e))return e&&e.toString().replace(/(\d)(?=(\d{3})+\.)/g,function(e,t){return t+","});return(e+"").replace(/\d{1,3}(?=(\d{3})+$)/g,"$&,")},formatTip:function(e){var t=void 0!=e?parseFloat((100*e).toFixed(10)):"--";return t<10?"进度正常("+t+"%)":t>=10&&t<30?"一般延期("+t+"%)":t>=30?"严重延期("+t+"%)":"--"}},watch:{datas:{deep:!0,handler:function(e){this.datas,this.datas.options.url_a}}},computed:h()({},Object(g.c)(["userinfo","cacheParams","gjFromModel","gjFromCheckList"]),{isShowText:function(){return"8416498716893399290"===this.userinfo.account_id||"-1814768306395265967"===this.userinfo.account_id},projectType:function(){return this.datas.options.pro_type},copyListConfig:function(){return JSON.parse(p()(this.listConfig))},listCode:function(){return this.form.dicName},asideHeight:function(){return document.documentElement.clientHeight-205},isChangeBtn:function(){return 0==this.selectCheckoutAry.length}}),mounted:function(){this.init(),"8416498716893399290"==this.userinfo.account_id?this.listConfig=f.a.projectTableConfigNk:"-1814768306395265967"==this.userinfo.account_id&&(this.listConfig=f.a.projectTableConfigGT)},methods:h()({},Object(g.b)(["setDetailPage","setCacheParams","setGJFromModel","setGJFromCheck"]),{changeCur:function(e){e?(this.selectHandle(this.selectList),this.curProManage=e):(this.formOld={projectManager:"",company_name:"",levelOneName:"",levelTwoName:""},this.curProManage=e,this.$refs.formNew.resetForm(),this.empName=""),this.curProManage},changeHT:function(e){var t=this;if(this.isShowHtCon=!0,e){if(this.selectCheckoutAry.length>1)return this.$message({message:"变更合同项目经理暂不能选择多个项目，请重新选择",type:"warning"}),!1;var a=this.selectCheckoutAry[0];Object(_.K)("/sgpm/rest/api/server/pm/project/parent/manager/change?id="+a,null).then(function(e){var a=e.data.data;null==a?t.$message({message:"没有查到合同项目经理",type:"warning"}):(t.formHTOld.projectManager=a.userName,t.formHTOld.company_name=a.companyName,t.formHTOld.levelOneName=a.classUnitBName,t.formHTOld.levelTwoName=a.classUnitCName)}).catch(function(e){})}else this.formHTOld={projectManager:"",company_name:"",levelOneName:"",levelTwoName:""},this.$refs.formNewHT.resetForm(),this.empNameHT="",this.managerFormHT={},this.isShowHtCon=!1},selectHandle:function(e,t){this.selectList=e,this.isStatusChange=!1;var a=[],o=[];(e.forEach(function(e){a.push(e.id),o.push(e.levelTwoName)}),this.selectCheckoutAry=a,1==e.length)?(this.formOld.projectManager=e[0].projectManager,this.formOld.company_name=e[0].company_name,this.formOld.levelOneName=e[0].levelOneName,this.formOld.levelTwoName=e[0].levelTwoName):1==u()(new l.a(o)).length?(this.formOld.projectManager=e[0].projectManager,this.formOld.company_name=e[0].company_name,this.formOld.levelOneName=e[0].levelOneName,this.formOld.levelTwoName=e[0].levelTwoName):(this.formOld.projectManager="",this.formOld.company_name="",this.formOld.levelOneName="",this.formOld.levelTwoName="")},selectAllHandle:function(e){var t=[];e.forEach(function(e){t.push(e.id)}),this.selectCheckoutAry=t},headerDragend:function(e,t,a,o){this.btnMaxWidth=e,e>200?this.isPname=!1:(this.isPname=!0,this.btnMaxWidth=200)},projectStartHandle:function(){localStorage.removeItem("globalParams"),localStorage.removeItem("keyWords"),localStorage.removeItem("keytechnologys"),localStorage.setItem("proId",this.multipleSelection.id),this.$router.push({name:"/projectstart",params:{id:this.multipleSelection.id,category:this.multipleSelection.jumpType,judgestart:99}})},init:function(){"-1814768306395265967"==this.userinfo.account_id||"8416498716893399290"==this.userinfo.account_id?this.isAlready=!0:this.isAlready=!1,this.getProjectTable(),this.getSelectList()},managerChangeDialogClose:function(){this.$refs.formNew.resetForm(),this.$refs.formNewHT.resetForm(),this.reason="",this.$refs.refTable.clearSelection(),this.empName="",this.empNameHT="",this.selectCheckoutAry=[],this.isStatusChange=!0,this.checkedD=!1,this.isShowHtCon=!1,this.curProManage=!0,this.managerFormHT={},this.formHTOld={projectManager:"",company_name:"",levelOneName:"",levelTwoName:""}},advancedConfirm:function(){var e={isStart:this.dynamiCheckList};this.setCacheParams({});var t={};this.dynamicValidateForm.domains.forEach(function(e){e.value1.length>0&&(t[e.value]=e.value1)}),this.dynamiCheckList.length>0&&(t=r()(t,e)),this.advancedMultiples=t;var a={code:this.listCode,pageNum:this.page.pageNum,pageSize:this.page.pageSize,memberId:this.userinfo.memberid,fieldName:this.fieldName,content:this.fieldContent,multiples:this.advancedMultiples,sortFieldName:this.sortFieldName,sort:"ascending"==this.sort?1:2};this.getProjectTable(a),this.setGJFromModel(this.dynamicValidateForm),this.setGJFromCheck(e),this.advancedDialog=!1},advancedChange:function(e,t){var a=this;this.dynamicValidateForm.domains[t].value1="",Object(_.e)("/sgpm/rest/api/server/pm/project/condition?projectKey="+e,null).then(function(e){a.advancedList=e.data.data}).catch(function(e){})},popoverShow:function(){this.checkFixed=!1},popoverHide:function(){this.checkFixed=!0},advancedDialogOpen:function(){this.advancedDialog=!0,this.dynamicValidateForm=this.gjFromModel,this.dynamiCheckList=this.gjFromCheckList.isStart||[]},managerChange:function(){var e=this;this.checkedU=!0,this.$nextTick(function(){e.$refs.formNew&&e.$refs.formNew.resetForm()}),this.managerChangeDialog=!0},getProjectTable:function(e){var t=this;this.tableLoading=!0;var a=this.cacheParams;e?a=e:("{}"==p()(a)&&(a={code:"All",pageNum:1,pageSize:20}),a=r()(a,{memberId:this.userinfo.memberid}),this.form.keyWord=a.keyWord,this.form.dicName=a.code),Object(_._18)("/sgpm/rest/api/server/pm/projects/item/dynamic",a).then(function(e){t.tableLoading=!1;e.data.data;t.tableData=e.data.data||[],t.page.total=e.data.meta.totalCount,t.setCacheParams(a)}).catch(function(e){})},keyWordSearch:function(){var e={code:this.listCode,pageNum:this.page.pageNum,pageSize:this.page.pageSize,memberId:this.userinfo.memberid,keyWord:this.form.keyWord,fieldName:this.fieldName,content:this.fieldContent,multiples:this.advancedMultiples,sortFieldName:this.sortFieldName,sort:"ascending"==this.sort?1:2};this.getProjectTable(e)},getSelectList:function(){var e=this;Object(_._17)("/sgpm/rest/api/server/pm/project/item?param=1",null).then(function(t){var a=t.data.data;e.selectAry=a}).catch(function(e){})},selectChange:function(e){var t=n()({code:this.listCode,memberId:this.userinfo.memberid,pageNum:this.page.pageNum,pageSize:this.page.pageSize},"memberId",this.userinfo.memberid);this.getProjectTable(t)},handleCurrentChange:function(e){var t,a=(t={code:this.listCode,memberId:this.userinfo.memberid,pageNum:e,pageSize:this.page.pageSize},n()(t,"memberId",this.userinfo.memberid),n()(t,"keyWord",this.form.keyWord),n()(t,"fieldName",this.fieldName),n()(t,"content",this.fieldContent),n()(t,"multiples",this.advancedMultiples),n()(t,"sortFieldName",this.sortFieldName),n()(t,"sort","ascending"==this.sort?1:2),t);this.getProjectTable(a)},filterHandler:function(e,t,a){if(0!=a.filteredValue.length){var o;this.fieldName=a.property,this.fieldContent=a.filteredValue;var i=(o={code:this.listCode,memberId:this.userinfo.memberid,pageNum:this.page.pageNum,pageSize:this.page.pageSize},n()(o,"memberId",this.userinfo.memberid),n()(o,"fieldName",a.property),n()(o,"content",a.filteredValue),n()(o,"multiples",this.advancedMultiples),o);this.getProjectTable(i),this.$refs.refTable.clearFilter()}},clearFilter:function(){this.$refs.refTable.clearFilter(),this.form.keyWord="",this.form.dicName="All",this.advancedMultiples={},this.dynamiCheckList=[],this.setGJFromModel({domains:[{value:"",value1:[],isDisabled:!1}]}),this.setGJFromCheck([]);var e={code:"All",pageNum:1,pageSize:20,memberId:this.userinfo.memberid,multiples:{}};this.getProjectTable(e)},handleSortChange:function(e,t,a){this.sortFieldName=e.prop,this.sort="ascending"==e.order?1:2;var o={code:this.listCode,memberId:this.userinfo.memberid,pageNum:this.page.pageNum,pageSize:this.page.pageSize,keyWord:this.form.keyWord,sortFieldName:e.prop,sort:"ascending"==e.order?1:2,multiples:this.advancedMultiples};this.getProjectTable(o)},handleSelectionChange:function(e){if(localStorage.setItem("projectInfo",p()(e)),e){this.isPass=!1,this.isReject=!1;var t=e.auditStatus||"";this.editorBtnMark=t,this.isStart=12==e.audit_status&&this.userinfo.emp_name==e.projectManager,this.isRecall="审核中"!==t,(30!=e.audit_status&&31!=e.audit_status&&32!=e.audit_status||this.userinfo.emp_name!=e.projectManager)&&100*e.percentageComplete==100&&22==e.audit_status&&this.userinfo.emp_name==e.projectManager?this.isFinish=!1:this.isFinish=!0,this.isWaitMeBtn=!1}this.isEditor="登记待提交"!=t,this.multipleSelection=e},handleCommandAdd:function(e){localStorage.removeItem("projectMsg"),this.setDetailPage(!1),sessionStorage.setItem("isRevoke",2),localStorage.removeItem("keyWords"),localStorage.removeItem("keytechnologys"),"a"==e?(localStorage.removeItem("businessProjectId"),localStorage.removeItem("globalParams"),this.$router.push({path:"Businessproject",query:{judgelogo:e}})):"b"==e?(localStorage.removeItem("businessProjectId"),localStorage.removeItem("globalParams"),this.$router.push({path:"Contractproject",query:{judgelogo:e}})):"c"==e?(localStorage.removeItem("globalParams"),localStorage.removeItem("keyWords"),localStorage.removeItem("keytechnologys"),localStorage.setItem("proId",this.multipleSelection.id),this.$router.push({name:"/projectstart",params:{id:this.multipleSelection.id,category:this.multipleSelection.jumpType,judgestart:99}})):"d"==e&&this.$router.push({path:"nonContractual",query:{id:this.multipleSelection.id,judgelogo:e,projectNum:this.multipleSelection.projectNum}})},dropdownJX:function(e){"a"==e&&this.$router.push({path:"nonContractual",query:{id:this.multipleSelection.id,judgelogo:e,projectNum:this.multipleSelection.projectNum}})},MarketSelectInfo:function(e){this.empName=e.emp_name,this.depName=e.dept_name,this.managerForm=e,"管理团队"==e.dept_name&&this.$notify({title:"请指定实施C级单位",message:"实施C级单位不能为管理团队",duration:9e3})},MarketSelectHTInfo:function(e){this.empNameHT=e.emp_name,this.managerFormHT=e},startPorject:function(e){localStorage.removeItem("globalParams"),localStorage.removeItem("keyWords"),localStorage.removeItem("keytechnologys"),localStorage.setItem("proId",this.multipleSelection.id),this.$router.push({name:"/projectstart",params:{id:this.multipleSelection.id,category:this.multipleSelection.jumpType,judgestart:99}})},handleCell:function(e,t,a,o){var n=this;if(4===a.cellIndex){var i={id:e.d_care_id,user_id:this.userinfo.memberid,project_id:e.id};e.d_care_id?(this.$message({message:"取消关注",type:"success"}),a.firstChild.firstChild.className="el-icon-star-on startGrey"):(this.$message({message:"关注成功",type:"success"}),a.firstChild.firstChild.className="el-icon-star-on startYellow"),Object(_.i)("/sgpm/rest/api/server/pm/project/care",i).then(function(e){200==e.data.code&&n.getProjectTable()}).catch(function(e){})}},submitForm:function(e){this.$refs[e].validate(function(e){if(!e)return!1;alert("submit!")})},removeDomain:function(e,t){if(1!=t){var a=this.dynamicValidateForm.domains.indexOf(e);-1!==a&&this.dynamicValidateForm.domains.splice(a,1)}else this.$notify({title:"最后一条啦"})},addDomain:function(){var e=this;this.dynamicValidateForm.domains.push({value:""}),this.dynamicValidateForm.domains.forEach(function(t,a){e.dynamicValidateForm.domains.length-1==a?t.isDisabled=!1:t.isDisabled=!0})},managerConfirm:function(e){var t=this;if(this.btnLoding=!0,"管理团队"==this.depName)return this.$notify({title:"请指定实施C级单位",message:"实施C级单位不能为管理团队",duration:9e3}),void(this.btnLoding=!1);if(""==this.empName&&this.checkedU)return this.$notify({title:"请选择变更经理",type:"warning"}),void(this.btnLoding=!1);if(this.checkedD&&""==this.empNameHT)return this.$notify({title:"如果勾选合同项目经理，需要选择变更的合同项目经理进行提交",type:"warning"}),void(this.btnLoding=!1);var a={userName:this.managerFormHT.emp_name,userId:this.managerFormHT.memberid,level_one_name:this.managerFormHT.subdept_name,level_one_id:this.managerFormHT.subdept_id,level_two_name:this.managerFormHT.dept_name,level_two_id:this.managerFormHT.dept_id},o={project_ids:this.selectCheckoutAry,user_id:this.curProManage?this.managerForm.memberid:"",operation_person:this.userinfo.emp_name,level_one_id:this.managerForm.subdept_id,level_two_id:this.managerForm.dept_id,level_one_name:this.managerForm.subdept_name,level_two_name:this.managerForm.dept_name,change_reason:this.reason,user_name:this.managerForm.emp_name,company_id:this.managerForm.account_id,company_name:this.managerForm.account_name,parentProject:a};this.curProManage||(o={project_ids:this.selectCheckoutAry,user_id:this.curProManage?this.managerForm.memberid:"",operation_person:this.userinfo.emp_name,company_id:this.userinfo.account_id,company_name:this.userinfo.account_name,parentProject:a}),Object(_._2)("/sgpm/rest/api/server/pm/project/manager/change",o).then(function(e){if(200==e.data.code){t.btnLoding=!1;var a=e.data.data;t.$message({message:a,type:"success"}),t.managerChangeDialog=!1,t.getProjectTable()}else t.btnLoding=!1,t.$message({message:e.data.message,type:"error"})}).catch(function(e){})},statusChangeConfirm:function(){var e=this;if(this.statusBtnLoding=!0,""===this.statusForm.after_name)return this.$notify({title:"请选择要变更的项目状态",type:"warning"}),void(this.statusBtnLoding=!1);var t={project_ids:this.selectCheckoutAry,operation_person:this.userinfo.emp_name};t=r()(t,this.statusForm),Object(_._31)("/sgpm/rest/api/server/pm/project/status/change",t).then(function(t){if(200==t.data.code){e.statusBtnLoding=!1;var a=t.data.data;e.$message({message:a,type:"success"}),e.statusChangeDialog=!1,e.getProjectTable()}else e.statusBtnLoding=!1}).catch(function(e){})},statusChangeDialogClose:function(){this.statusForm={},this.$refs.refTable.clearSelection(),this.isStatusChange=!0},statusChange:function(){this.statusChangeDialog=!0}})},w={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"list-container"},[a("div",{staticClass:"header"},[a("el-form",{ref:"form",staticClass:"search-form",attrs:{model:e.form,size:"mini",inline:!0}},[a("div",{staticClass:"search-left"},[a("el-form-item",{attrs:{label:"查看范围"}},[a("el-select",{attrs:{size:"mini",placeholder:"查看范围"},on:{change:e.selectChange},model:{value:e.form.dicName,callback:function(t){e.$set(e.form,"dicName",t)},expression:"form.dicName"}},e._l(e.selectAry,function(e){return a("el-option",{key:e.dicCode,attrs:{label:e.dicName,value:e.dicCode}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"search-right"},[a("el-form-item",[a("el-input",{attrs:{placeholder:"项目名称/项目/合同编号/项目关键字",size:"mini"},model:{value:e.form.keyWord,callback:function(t){e.$set(e.form,"keyWord",t)},expression:"form.keyWord"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.keyWordSearch},slot:"append"})],1)],1),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.advancedDialogOpen}},[e._v("高级查询")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.isChangeBtn},on:{click:e.managerChange}},[e._v("项目经理变更")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.isStatusChange},on:{click:e.statusChange}},[e._v("项目状态变更")]),e._v(" "),a("el-button",{staticClass:"circle-btn",attrs:{type:"primary",icon:"el-icon-refresh",size:"mini",circle:""},on:{click:e.clearFilter}}),e._v(" "),a("el-popover",{staticClass:"popover",attrs:{placement:"right",width:"200",trigger:"click"},on:{show:e.popoverShow,hide:e.popoverHide}},[e._l(e.listConfig,function(t){return a("el-checkbox",{key:t.key,staticClass:"popover-checkbox",model:{value:t.isShow,callback:function(a){e.$set(t,"isShow",a)},expression:"item.isShow"}},[e._v(e._s(t.label))])}),e._v(" "),a("el-button",{staticClass:"circle-btn",attrs:{slot:"reference",type:"primary",icon:"el-icon-menu",size:"mini",circle:""},slot:"reference"})],2)],1)])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"refTable",staticClass:"father-pro-table",staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{data:e.tableData,"highlight-current-row":"",border:"","max-height":e.asideHeight,"header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0},"row-key":"id","default-expand-all":"","tree-props":{children:"son_project",hasChildren:"hasChildren"}},on:{"cell-click":e.handleCell,"current-change":e.handleSelectionChange,"sort-change":e.handleSortChange,"header-dragend":e.headerDragend,select:e.selectHandle,"select-all":e.selectAllHandle}},[a("el-table-column",{attrs:{type:"selection",width:"40",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",width:"38",align:"center",label:"序号",fixed:e.checkFixed}}),e._v(" "),a("el-table-column",{attrs:{label:"项目名称",width:"140",align:"center",fixed:e.checkFixed,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"/projectInformation",params:{id:t.row.id,category:t.row.jumpType,projectName:t.row.name,projectNumber:t.row.projectNum,parent_id:t.row.parent_id,judgeproject:"项目信息"}}}},[a("span",{staticClass:"num"},[e._v(e._s(t.row.name))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"38",label:"进度",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e._f("formatTip")(t.row.delayPercentage),placement:"right"}},[1==t.row.color?a("div",{staticClass:"progress progress-red"}):e._e(),e._v(" "),2==t.row.color?a("div",{staticClass:"progress progress-yellow"}):e._e(),e._v(" "),3==t.row.color?a("div",{staticClass:"progress progress-green"}):e._e(),e._v(" "),null==t.row.color?a("div",{staticClass:"progress"}):e._e()])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"38",label:"关注",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-star-on startGrey",class:{"el-icon-star-on":e.isCared?e.isCared:t.row.isCare,startYellow:e.isCared?e.isCared:t.row.isCare}})]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"110",label:"审核进度",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.auditConfig[t.row.audit_status]))])]}}])}),e._v(" "),e._l(e.listConfig,function(t,o){return t.isShow?a("el-table-column",{key:o,attrs:{prop:t.key,label:t.label,width:"140",align:"center",sortable:t.sortable?t.sortable:null,filters:t.filters?t.filters:null,"filter-method":t.filters?e.filterHandler:null},scopedSlots:e._u([{key:"default",fn:function(o){return[t.isShow&&1==t.isQfw?a("span",[e._v("\n          "+e._s(e._f("formatThousands")(null==o.row[t.key]?"--":o.row[t.key]))+"\n        ")]):e._e(),e._v(" "),t.isShow&&t.isPercent?a("span",[e._v("\n          "+e._s(null==o.row[t.key]?"--":Math.round(100*o.row[t.key])+"%")+"\n        ")]):e._e(),e._v(" "),t.isShow&&t.isPercentNot100?a("span",[e._v("\n          "+e._s(null==o.row[t.key]?"--":Math.round(o.row[t.key])+"%")+"\n        ")]):e._e(),e._v(" "),!t.isShow||1==t.isQfw||t.isPercent||t.isPercentNot100?e._e():a("span",[e._v(e._s(null==o.row[t.key]?"--":o.row[t.key]))])]}}],null,!0)}):e._e()})],2),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"高级筛选",visible:e.advancedDialog,width:"51%",center:""},on:{"update:visible":function(t){e.advancedDialog=t}}},[a("div",{staticClass:"dialog-wrap"},[a("div",{staticClass:"wrap-left"},[a("el-form",{ref:"dynamicValidateForm",staticClass:"demo-dynamic",attrs:{model:e.dynamicValidateForm,"label-width":"200px"}},e._l(e.dynamicValidateForm.domains,function(t,o){return a("el-form-item",{key:t.key,attrs:{prop:"domains."+o+".value",size:"mini"}},[a("el-select",{attrs:{placeholder:"请选择查询字段"},on:{change:function(a){return e.advancedChange(t.value,o)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.advancedOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-select",{attrs:{disabled:t.isDisabled,filterable:"",multiple:"",placeholder:"请选择"},model:{value:t.value1,callback:function(a){e.$set(t,"value1",a)},expression:"domain.value1"}},e._l(e.advancedList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,size:"mini",value:e.label}})}),1),e._v(" "),a("el-button",{staticClass:"btn-item",attrs:{type:"text"},on:{click:function(a){return a.preventDefault(),e.removeDomain(t,e.dynamicValidateForm.domains.length)}}},[a("i",{staticClass:"el-icon-remove btn-del"})]),e._v(" "),a("el-button",{staticClass:"btn-item",attrs:{type:"text"},on:{click:function(t){return t.preventDefault(),e.addDomain(t)}}},[a("i",{staticClass:"el-icon-circle-plus btn-plus"})])],1)}),1)],1),e._v(" "),a("div",{staticClass:"wrap-right"},[a("div",{staticClass:"grid-content bg-purple"},[a("el-checkbox-group",{model:{value:e.dynamiCheckList,callback:function(t){e.dynamiCheckList=t},expression:"dynamiCheckList"}},[a("el-checkbox",{attrs:{label:"可启动"}}),e._v(" "),a("el-checkbox",{attrs:{label:"可结项"}}),e._v(" "),a("el-checkbox",{attrs:{label:"本月未Review"}})],1)],1)])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.advancedDialog=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.advancedConfirm}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"manager-dialog",attrs:{title:"项目经理变更","destroy-on-close":!0,visible:e.managerChangeDialog,width:"50%",center:""},on:{"update:visible":function(t){e.managerChangeDialog=t},close:e.managerChangeDialogClose}},[a("el-row",{staticClass:"row-wrap",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:11}},[a("h4",{staticClass:"title"},[a("el-checkbox",{on:{change:function(t){return e.changeCur(e.checkedU)}},model:{value:e.checkedU,callback:function(t){e.checkedU=t},expression:"checkedU"}}),e._v("  当前项目经理\n        ")],1),e._v(" "),a("div",{staticClass:"old-form"},[a("el-form",{ref:"formOld",staticStyle:{width:"100%"},attrs:{model:e.formOld,disabled:!0,size:"mini","label-width":"75px"}},[a("el-form-item",{attrs:{label:"项目经理"}},[a("el-input",{staticStyle:{width:"64%"},model:{value:e.formOld.projectManager,callback:function(t){e.$set(e.formOld,"projectManager",t)},expression:"formOld.projectManager"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"A级单位"}},[a("el-input",{staticStyle:{width:"64%"},model:{value:e.formOld.company_name,callback:function(t){e.$set(e.formOld,"company_name",t)},expression:"formOld.company_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"实施B级单位"}},[a("el-input",{staticStyle:{width:"64%"},model:{value:e.formOld.levelOneName,callback:function(t){e.$set(e.formOld,"levelOneName",t)},expression:"formOld.levelOneName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"实施C级单位"}},[a("el-input",{staticStyle:{width:"64%"},model:{value:e.formOld.levelTwoName,callback:function(t){e.$set(e.formOld,"levelTwoName",t)},expression:"formOld.levelTwoName"}})],1)],1)],1)]),e._v(" "),a("el-col",{attrs:{span:11}},[a("h4",{staticClass:"title",staticStyle:{margin:"0px 0 0 16px"}},[e._v("变更后项目经理")]),e._v(" "),a("con-change",{ref:"formNew",attrs:{labelName:"项目经理"},on:{MarketSelectInfo:e.MarketSelectInfo}})],1)],1),e._v(" "),a("el-row",{staticClass:"row-wrap",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:11}},[e.isShowText?a("h4",{staticClass:"title"},[a("span",{staticClass:"ht-check"},[a("el-checkbox",{on:{change:function(t){return e.changeHT(e.checkedD)}},model:{value:e.checkedD,callback:function(t){e.checkedD=t},expression:"checkedD"}})],1),e._v("\n            合同项目经理\n          "),a("el-tooltip",{attrs:{placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n              是否选择对合同项目经理进行变更，如:"),a("br"),e._v('\n               "勾选" 确定对合同项目经理变更;'),a("br"),e._v(' "不勾选" 仅对子项目经理变更;\n            ')]),e._v(" "),a("i",{staticClass:"el-icon-question"})])],1):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowHtCon,expression:"isShowHtCon"}],staticClass:"old-form"},[a("el-form",{ref:"formHTOld",staticStyle:{width:"100%"},attrs:{model:e.formHTOld,disabled:!0,size:"mini","label-width":"75px"}},[a("el-form-item",{attrs:{label:"项目经理"}},[a("el-input",{staticStyle:{width:"64%"},model:{value:e.formHTOld.projectManager,callback:function(t){e.$set(e.formHTOld,"projectManager",t)},expression:"formHTOld.projectManager"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"A级单位"}},[a("el-input",{staticStyle:{width:"64%"},model:{value:e.formHTOld.company_name,callback:function(t){e.$set(e.formHTOld,"company_name",t)},expression:"formHTOld.company_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"实施B级单位"}},[a("el-input",{staticStyle:{width:"64%"},model:{value:e.formHTOld.levelOneName,callback:function(t){e.$set(e.formHTOld,"levelOneName",t)},expression:"formHTOld.levelOneName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"实施C级单位"}},[a("el-input",{staticStyle:{width:"64%"},model:{value:e.formHTOld.levelTwoName,callback:function(t){e.$set(e.formHTOld,"levelTwoName",t)},expression:"formHTOld.levelTwoName"}})],1)],1)],1)]),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.isShowHtCon,expression:"isShowHtCon"}],attrs:{span:11}},[a("h4",{staticClass:"title",staticStyle:{margin:"0px 0 0 16px"}},[e._v("变更后合同项目经理")]),e._v(" "),a("con-change",{ref:"formNewHT",attrs:{labelName:"合同项目经理"},on:{MarketSelectInfo:e.MarketSelectHTInfo}})],1)],1),e._v(" "),a("div",{staticClass:"reason"},[a("span",{staticClass:"label"},[e._v("变更原因")]),e._v(" "),a("el-input",{attrs:{type:"textarea",size:"mini",autosize:{minRows:4,maxRows:8},placeholder:"请输入变更原因"},model:{value:e.reason,callback:function(t){e.reason=t},expression:"reason"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.managerChangeDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.btnLoding,size:"mini"},on:{click:e.managerConfirm}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"manager-dialog",attrs:{title:"项目状态变更",visible:e.statusChangeDialog,width:"45%",center:""},on:{"update:visible":function(t){e.statusChangeDialog=t},close:e.statusChangeDialogClose}},[a("div",{staticClass:"status-wrap"},[a("el-form",{ref:"form",attrs:{model:e.statusForm,size:"mini","label-width":"130px"}},[a("el-form-item",{attrs:{label:"项目状态"}},[a("el-select",{staticStyle:{width:"60%"},attrs:{placeholder:"请选择项目状态"},model:{value:e.statusForm.after_name,callback:function(t){e.$set(e.statusForm,"after_name",t)},expression:"statusForm.after_name"}},e._l(e.statusOptionList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"变更原因"}},[a("el-input",{staticStyle:{width:"60%"},attrs:{type:"textarea",size:"mini",autosize:{minRows:4,maxRows:8},placeholder:"请输入变更原因"},model:{value:e.statusForm.change_reason,callback:function(t){e.$set(e.statusForm,"change_reason",t)},expression:"statusForm.change_reason"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.statusChangeDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.statusBtnLoding,size:"mini"},on:{click:e.statusChangeConfirm}},[e._v("确 定")])],1)]),e._v(" "),a("div",{staticClass:"page right"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":1,"page-sizes":[20],layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)},staticRenderFns:[]};var j=a("VU/8")(y,w,!1,function(e){a("5bok"),a("IxFQ")},"data-v-4f161596",null);t.a=j.exports},RVsA:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__=__webpack_require__("mvHQ"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__),__WEBPACK_IMPORTED_MODULE_1__components_CreateForm_GenerateForm__=__webpack_require__("bqq5"),__WEBPACK_IMPORTED_MODULE_2__components_CreateForm_styles_FormCreate_css__=__webpack_require__("3gcX"),__WEBPACK_IMPORTED_MODULE_2__components_CreateForm_styles_FormCreate_css___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__components_CreateForm_styles_FormCreate_css__);__webpack_exports__.a={name:"indivdualtable",components:{GenerateForm:__WEBPACK_IMPORTED_MODULE_1__components_CreateForm_GenerateForm__.a},data:function(){return{jsonData:{list:[{type:"grid",name:"栅格布局",icon:"icon-grid-",columns:[{span:12,list:[{type:"input",name:"单行文本",icon:"icon-input",isShow:"true",url:"",options:{width:"100%",defaultValue:"",required:!0,dataType:"string",pattern:"",placeholder:"",disabled:!1,remoteFunc:"func_1556089126000_64703"},key:"1556089126000_64703",model:"input_1556089126000_64703",rules:[{type:"string",message:"单行文本格式不正确"},{required:!0,message:"单行文本必须填写"}]}]},{span:12,list:[{type:"select",name:"下拉选择框",icon:"icon-select",isShow:"true",url:"",options:{defaultValue:"",multiple:!1,disabled:!1,clearable:!1,placeholder:"",required:!1,showLabel:!1,width:"",options:[{value:"下拉框1"},{value:"下拉框2"},{value:"下拉框3"}],remote:!1,filterable:!1,remoteOptions:[],props:{value:"value",label:"label"},remoteFunc:"func_1556089132000_46498"},config:{labelPosition:""},key:"1556089132000_46498",model:"select_1556089132000_46498",rules:[]}]}],options:{gutter:0,justify:"start",align:"top",remoteFunc:"func_1556089124000_56334"},key:"1556089124000_56334",model:"grid_1556089124000_56334",rules:[]}],config:{labelWidth:100,labelPosition:"top",size:"small"}},editData:{},remoteFuncs:{func_1554774527000_80223:function(e){e(this.jsonA)}}}},created:function created(){this.axios.get("http://1.202.165.51:8989/plan/subordinates?staffCode=10307").then(function(response){var list=response.data.data,list=__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(list),list=list.replace(/"staffName"/g,"value"),jsonA=eval("("+list+")");return jsonA}).catch(function(e){})},methods:{handleSubmit:function(){this.$refs.generateForm.getData().then(function(e){}).catch(function(e){})}}}},SHgS:function(e,t){},SINa:function(e,t){},SaUE:function(e,t,a){"use strict";a("NYxO"),a("14gb");var o={name:"paymentInformation",props:["widget","models","rules","remote","datas"],data:function(){return{tableData:[],price:""}},created:function(){var e=this;setTimeout(function(){var t=JSON.parse(localStorage.getItem("projectData"));if(t.subcontractPaymentInformationVOList.length>0){e.tableData=t.subcontractPaymentInformationVOList;for(var a=0,o=0;o<e.tableData.length;o++)a+=parseInt(e.tableData[o].reimbursementAmount);e.price=a}},500)},methods:{}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"max-height":"250"}},[a("el-table-column",{attrs:{fixed:"",prop:"reimbursementSerialNumber",label:"报销流水号",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"reimbursementTime",label:"报销时间",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"reimbursement",label:"报销人",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"attributionDepartment",label:"归属部门",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"associatedProjectName",label:"关联项目名称",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{prop:"reimbursementAmount",label:"报销金额",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注",width:""}})],1),e._v(" "),a("el-row",{staticClass:"cumulative"},[a("el-col",{staticClass:"num",attrs:{span:3}},[a("div",[e._v("累计报销金额(元)")])]),e._v(" "),a("el-col",{attrs:{span:9}},[a("div",{staticStyle:{"padding-left":"15px"}},[e._v(e._s(e.price))])])],1)],1)},staticRenderFns:[]};var i=a("VU/8")(o,n,!1,function(e){a("b5sD")},"data-v-b4283986",null);t.a=i.exports},THAo:function(e,t){},TKHo:function(e,t){},Tsfr:function(e,t){},UBC1:function(e,t){},UHqU:function(e,t){},UOkd:function(e,t){},UwrZ:function(e,t,a){"use strict";var o=a("d7EF"),n=a.n(o),i=a("Dd8w"),r=a.n(i),s=a("tZ2h"),l=a("P9l9"),c=a("NYxO"),u=(a("14gb"),{name:"application",props:["widget","models","datas"],components:{Time:s.a},data:function(){return{loading:!0,department:[{groupName:"应用群",centresV2V2:[{id:"1",filed75:"智慧中心",filed76:"11",filed10:"12",filed26:"22",filed31:"11",filed32:"21",filed33:"22",filed34:"22",filed35:"12",filed36:"12",filed37:"12",filed38:"12",children:[{id:"11",filed75:"智慧中心",filed76:"11",filed10:"12",filed26:"22",filed31:"11",filed32:"21",filed33:"22",filed34:"22",filed35:"12",filed36:"12",filed37:"12",filed38:"12"},{id:"12",filed75:"智慧中心",filed76:"11",filed10:"12",filed26:"22",filed31:"11",filed32:"21",filed33:"22",filed34:"22",filed35:"12",filed36:"12",filed37:"12",filed38:"12"}]}]},{groupName:"应用群",centresV2:[{id:"1",filed75:"智慧中心",filed76:"11",filed10:"12",filed26:"22",filed31:"11",filed32:"21",filed33:"22",filed34:"22",filed35:"12",filed36:"12",filed37:"12",filed38:"12",children:[{id:"11",filed75:"智慧中心",filed76:"11",filed10:"12",filed26:"22",filed31:"11",filed32:"21",filed33:"22",filed34:"22",filed35:"12",filed36:"12",filed37:"12",filed38:"12"},{id:"12",filed75:"智慧中心",filed76:"11",filed10:"12",filed26:"22",filed31:"11",filed32:"21",filed33:"22",filed34:"22",filed35:"12",filed36:"12",filed37:"12",filed38:"12"}]}]}],depname:"Application",names:{names:"departments",screen:3}}},computed:r()({},Object(c.c)(["userinfo"])),created:function(){this.getDepartmentTabel()},methods:{labScreen:function(){var e=this,t={staffCode:this.userinfo.code,status:this.names.screen};Object(l.m)("/accounting/bg/data/v2",t).then(function(t){e.department=t.data.data,e.loading=!1}).catch(function(e){})},downloadFile:function(){},transferParameters:function(e){var t=n()(e,2),a=t[0],o=t[1];"合计"!=a&&this.$router.push({path:"projectAdjust",query:{payment:a,status:o}})},getDepartmentTabel:function(){var e=this,t={staffCode:this.userinfo.code,status:3};Object(l.m)("/accounting/bg/data/v2",t).then(function(t){e.department=t.data.data,e.loading=!1}).catch(function(e){})}},filters:{formatThousands:function(e){if(0==/^[0-9]*[1-9][0-9]*$/.test(e))return e&&e.toString().replace(/(\d)(?=(\d{3})+\.)/g,function(e,t){return t+","});return(e+"").replace(/\d{1,3}(?=(\d{3})+$)/g,"$&,")}}}),d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"application"},[""!=this.department?a("div",{staticClass:"navTop",staticStyle:{float:"right"}},[a("el-row",{staticClass:"el-right mr15 navrig"},[a("el-col",{staticClass:"monad",attrs:{span:2,offset:11}},[e._v("单位：万元")]),e._v(" "),a("Time",{staticClass:"navrtime",attrs:{span:4,name:e.depname}}),e._v(" "),a("el-radio-group",{staticStyle:{"margin-right":"25px",float:"right","margin-top":"12px"},on:{change:e.labScreen},model:{value:e.names.screen,callback:function(t){e.$set(e.names,"screen",t)},expression:"names.screen"}},[a("el-radio",{attrs:{label:3},model:{value:e.names.screen,callback:function(t){e.$set(e.names,"screen",t)},expression:"names.screen"}},[e._v("全部")]),e._v(" "),a("el-radio",{attrs:{label:1},model:{value:e.names.screen,callback:function(t){e.$set(e.names,"screen",t)},expression:"names.screen"}},[e._v("在实施项目")]),e._v(" "),a("el-radio",{attrs:{label:0},model:{value:e.names.screen,callback:function(t){e.$set(e.names,"screen",t)},expression:"names.screen"}},[e._v("验收待结项")])],1)],1),e._v(" "),a("hr")],1):e._e(),e._v(" "),e._l(e.department,function(t,o){return a("div",{key:o,staticClass:"cation",attrs:{value:o}},[a("el-row",{staticClass:"latabTit",attrs:{gutter:24}},[a("el-col",{attrs:{span:9,offset:0,xs:13}},[e._v(e._s(e.department[o].groupName))])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{slot:"empty","max-height":"600",data:e.department[o].centresV2,"row-key":"id",border:"","default-expand-all":!1,"tree-props":{children:"children",hasChildren:"hasChildren"},"cell-style":{padding:0},"header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"}},slot:"empty"},[a("el-table-column",{attrs:{prop:"filed75",label:"中心名称",width:"185"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{"white-space":"pre-wrap"},attrs:{type:"text"},on:{click:function(a){return e.transferParameters([t.row.filed75,e.names.screen])}}},[e._v(e._s(t.row.filed75))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"filed76",label:"项目个数",width:"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"filed10",label:"合同额",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("formatThousands")(t.row.filed10)))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"filed26",label:"预计纯合同额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("formatThousands")(t.row.filed26)))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"filed31",label:"预计毛利润",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("formatThousands")(t.row.filed31)))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"filed32",label:"预计毛利率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.filed32)+"%")])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"filed33",label:"预计损益",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("formatThousands")(t.row.filed33)))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"filed34",label:"预计损益收益率",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.filed34)+"%")])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"filed26",label:"实际纯合同额",width:"125"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("formatThousands")(t.row.filed26)))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"filed35",label:"实际毛利润",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("formatThousands")(t.row.filed35)))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"filed36",label:"实际毛利率",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.filed36)+"%")])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"filed37",label:"实际损益",width:"107"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("formatThousands")(t.row.filed37)))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"filed38",label:"实际损益收益率",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.filed38)+"%")])]}}],null,!0)})],1)],1)}),e._v(" "),""==this.department?a("div",{staticClass:"popout"},[e._v("所管理部门无相关信息或无操作权限")]):e._e()],2)},staticRenderFns:[]};var p=a("VU/8")(u,d,!1,function(e){a("xcIX"),a("SHgS")},"data-v-0e53cfd4",null);t.a=p.exports},V5qo:function(e,t){},VAzx:function(e,t){},VYN8:function(e,t){},WASS:function(e,t){},Wdj3:function(e,t){},We4G:function(e,t,a){"use strict";a("NYxO"),a("14gb");var o={name:"contractInformation",props:["widget","models","rules","remote","datas"],data:function(){return{typeOfSubcontract:"",subcontractAmount:"",subcontractPaymentTerms:"",subcontractVOList:[]}},created:function(){var e=this;setTimeout(function(){var t=JSON.parse(localStorage.getItem("projectData"));e.typeOfSubcontract=t.typeOfSubcontract,e.subcontractAmount=t.subcontractAmount,e.subcontractPaymentTerms=t.subcontractPaymentTerms,t.subcontractVOList.length>0&&(e.subcontractVOList=t.subcontractVOList)},500)},methods:{}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("table",{staticClass:"myTable",staticStyle:{width:"100%"}},[a("tr",[a("td",{staticClass:"column"},[e._v("分包合同类别")]),e._v(" "),a("td",{staticClass:"column",attrs:{colspan:"3"}},[e._v(e._s(e.typeOfSubcontract))])]),e._v(" "),e._l(e.subcontractVOList,function(t,o){return a("tr",{key:o},[a("td",{staticClass:"column"},[e._v("分包合同单价(元)")]),e._v(" "),a("td",[e._v(e._s(t.unitPriceOfSubcontract))]),e._v(" "),a("td",{staticClass:"column"},[e._v("计价单位名称说明")]),e._v(" "),a("td",[e._v(e._s(t.descriptionOfUnitName))])])}),e._v(" "),a("tr",[a("td",{staticClass:"column"},[e._v("分包合同额(元)")]),e._v(" "),a("td",{staticClass:"column",attrs:{colspan:"3"}},[e._v(e._s(e.subcontractAmount))])]),e._v(" "),a("tr",[a("td",{staticClass:"column"},[e._v("分包合同付款条件")]),e._v(" "),a("td",{staticClass:"column",attrs:{colspan:"3"}},[e._v(e._s(e.subcontractPaymentTerms))])])],2)])},staticRenderFns:[]};var i=a("VU/8")(o,n,!1,function(e){a("z417")},"data-v-b333fdaa",null);t.a=i.exports},"Wp+L":function(e,t){},WrWp:function(e,t){},X14y:function(e,t,a){"use strict";var o=a("Dd8w"),n=a.n(o),i=(a("OMJi"),a("14gb"),a("NYxO")),r={name:"FinancialCard",props:["widget","models","rules","remote","datas"],data:function(){return{iconClass:"",curProMsg:null,amountNum:null}},computed:n()({},Object(i.c)(["selectedAllProMsg"])),watch:{datas:{deep:!0,handler:function(e){this.datas,this.datas.options.url_a}}},created:function(){},mounted:function(){var e=this.selectedAllProMsg.CONTRACTNUMBER,t=this.selectedAllProMsg.PROJECTNUMBER,a=this.selectedAllProMsg.BUSINESSNUMBER,o=this.selectedAllProMsg.ID,n=this.selectedAllProMsg.CONTRACTMONEY;"contractAmount"==this.datas.model?this.getContractAmount(this.datas.options.url_a,e):"amountCashed"==this.datas.model?this.getAountCashed(this.datas.options.url_a,e):"allExpense"==this.datas.model?this.getAllExpense(this.datas.options.url_a,t,a,o):"allBudget"==this.datas.model?this.getAllBudget(this.datas.options.url_a,e):"profits"==this.datas.model&&this.getProfits(this.datas.options.url_a,e,t,a,n)},methods:{getContractAmount:function(e,t){var a=this;e=e+"/"+t;this.axios.get(e).then(function(e){var t=e.data.data;a.amountNum=t.CONTRACTMONEY}).catch(function(e){})},getAountCashed:function(e,t){var a=this;e=e+"?contractNumber="+t;this.axios.get(e).then(function(e){var t=e.data.data;a.amountNum=t}).catch(function(e){})},getAllExpense:function(e,t,a,o){var n=this;e=e+"?projectNumber="+t+"&businessNumber="+a+"&projectId="+o;this.axios.get(e).then(function(e){var t=e.data.data;n.amountNum=t}).catch(function(e){})},getAllBudget:function(e,t){var a=this;e=e+"?contractNumber="+t;this.axios.get(e).then(function(e){var t=e.data.data;a.amountNum=t}).catch(function(e){})},getProfits:function(e,t,a,o,n){var i=this;e=e+"?contractNumber="+t+"&projectNumber="+a+"&businessNumber="+o+"&contractMoney="+n;this.axios.get(e).then(function(e){var t=e.data.data;i.amountNum=t.toFixed(2)}).catch(function(e){})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-left",style:{background:e.datas.options.financialLeftColor}},[a("i",{staticClass:"card-left-icon",class:e.datas.options.financialIconClass})]),e._v(" "),a("div",{staticClass:"card-right"},[a("ul",[a("li",[e._v(e._s(e.datas.options.financialText))]),e._v(" "),a("li",[e._v(e._s(e._f("formatThousands")(e.amountNum)))])])])])])},staticRenderFns:[]};var l=a("VU/8")(r,s,!1,function(e){a("IHqm")},"data-v-43c66da6",null);t.a=l.exports},Xe7t:function(e,t){},YaEn:function(e,t,a){"use strict";var o=a("mvHQ"),n=a.n(o),i=a("7+uW"),r=a("/ocq"),s=a("D/cR"),l={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"hello"})},staticRenderFns:[]};a("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},l,!1,function(e){a("G+8Z")},"data-v-5f38caa5",null).exports;var c=a("RVsA"),u={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-col",{staticClass:"projectview",attrs:{span:20}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}}),this._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:this.handleSubmit}},[this._v("提交")])],1)},staticRenderFns:[]};var d=function(e){a("IrCT")},p=a("VU/8")(c.a,u,!1,d,"data-v-3bb9561a",null).exports,m=(a("mtWM"),a("bqq5")),h=(a("3gcX"),a("P9l9")),_={name:"CreateFrom_setname",components:{GenerateForm:m.a},data:function(){return{jsonData:{list:[{type:"grid",name:"栅格布局",icon:"icon-grid-",columns:[{span:24,list:[{type:"row",name:"",icon:"icon-row",isShow:"false",options:{width:"100%",defaultValue:"",required:!1,pattern:"",placeholder:"项目立项登记表",disabled:!1,remoteFunc:"func_1555331685000_33135"},key:"1555331685000_33135",model:"row_1555331685000_33135",rules:[]}]}],options:{gutter:0,justify:"start",align:"top",remoteFunc:"func_1555331674000_34871"},key:"1555331674000_34871",model:"grid_1555331674000_34871",rules:[]},{type:"grid",name:"栅格布局",icon:"icon-grid-",columns:[{span:3,list:[{type:"row",name:"自定义文字",icon:"icon-row",isShow:"false",options:{width:"100%",defaultValue:"",required:!1,pattern:"",placeholder:"项目基本信息",disabled:!1,remoteFunc:"func_1555331897000_59656"},key:"1555331897000_59656",model:"row_1555331897000_59656",rules:[]}]},{span:6,list:[{type:"checkboxSingle",name:"复选框",icon:"icon-check-box",isShow:"false",url:"",options:{defaultValue:"",width:"",remoteFunc:"func_1555331740000_71866"},props:{value:"value",label:"label"},remoteFunc:"",key:"1555331740000_71866",model:"subproject",rules:[]}]},{span:15,list:[]}],options:{gutter:0,justify:"start",align:"top",remoteFunc:"func_1555331720000_49524"},key:"1555331720000_49524",model:"grid_1555331720000_49524",rules:[]},{type:"grid",name:"栅格布局",icon:"icon-grid-",columns:[{span:24,list:[{type:"divider",name:"分割线",icon:"icon-divider",isShow:"false",options:{width:"100%",defaultValue:"",required:!1,pattern:"",placeholder:"",disabled:!1,remoteFunc:"func_1555332079000_4281"},key:"1555332079000_4281",model:"divider_1555332079000_4281",rules:[]}]}],options:{gutter:0,justify:"start",align:"top",remoteFunc:"func_1555332073000_12404"},key:"1555332073000_12404",model:"grid_1555332073000_12404",rules:[]},{type:"grid",name:"栅格布局",icon:"icon-grid-",columns:[{span:12,list:[{type:"select",name:"主项目名称",icon:"icon-select",isShow:"true",url:"",options:{defaultValue:"",multiple:!1,disabled:!1,clearable:!1,placeholder:"请选择",required:!1,showLabel:!1,width:"77%",options:[{value:"下拉框1"},{value:"下拉框2"},{value:"下拉框3"}],remote:!0,filterable:!1,remoteOptions:[],props:{value:"value",label:"label"},remoteFunc:"parentproject"},config:{labelPosition:""},key:"1555332105000_35875",model:"parentproject",rules:[]}]},{span:12,list:[]}],options:{gutter:0,justify:"start",align:"top",remoteFunc:"func_1555332082000_64752"},key:"1555332082000_64752",model:"grid_1555332082000_64752",rules:[]},{type:"grid",name:"栅格布局",icon:"icon-grid-",columns:[{span:12,list:[{type:"input",name:"项目名称",icon:"icon-input",isShow:"true",url:"",options:{width:"77%",defaultValue:"",required:!0,dataType:"string",pattern:"",placeholder:"请输入内容",disabled:!1,remoteFunc:"func_1555332175000_315"},key:"1555332175000_315",model:"projectname",rules:[{type:"string",message:"项目名称格式不正确"},{required:!0,message:"项目名称必须填写"}]}]},{span:12,list:[{type:"input",name:"项目编号",icon:"icon-input",isShow:"true",url:"",options:{width:"77%",defaultValue:"",required:!0,dataType:"string",pattern:"",placeholder:"请输入内容",disabled:!0,remoteFunc:"func_1555332176000_27169"},key:"1555332176000_27169",model:"projectnumber",rules:[{type:"string",message:"项目编号格式不正确"},{required:!0,message:"项目编号必须填写"}]}]}],options:{gutter:5,justify:"start",align:"top",remoteFunc:"func_1555332164000_12331"},key:"1555332164000_12331",model:"grid_1555332164000_12331",rules:[]},{type:"grid",name:"栅格布局",icon:"icon-grid-",columns:[{span:12,list:[{type:"select",name:"实施部门",icon:"icon-select",isShow:"true",url:"",options:{defaultValue:"",multiple:!1,disabled:!1,clearable:!1,placeholder:"请选择",required:!0,showLabel:!1,width:"77%",options:[{value:"下拉框1"},{value:"下拉框2"},{value:"下拉框3"}],remote:!0,filterable:!1,remoteOptions:[],props:{value:"value",label:"label"},remoteFunc:"impldepartment"},config:{labelPosition:""},key:"1555332316000_69984",model:"impldepartment",rules:[{required:!0,message:"项目名称必须填写"}]}]},{span:6,list:[{type:"select",name:"项目经理",icon:"icon-select",isShow:"true",url:"",options:{defaultValue:"",multiple:!1,disabled:!1,clearable:!1,placeholder:"请选择",required:!0,showLabel:!1,width:"53%",options:[{value:"下拉框1"},{value:"下拉框2"},{value:"下拉框3"}],remote:!0,filterable:!1,remoteOptions:[],props:{value:"value",label:"label"},remoteFunc:"projectmanager"},config:{labelPosition:""},key:"1555332451000_27659",model:"projectmanager",rules:[{required:!0,message:"项目经理必须填写"}]}]},{span:6,list:[{type:"input",name:"项目运维期",icon:"icon-input",isShow:"true",url:"",options:{width:"53%",defaultValue:"",required:!0,dataType:"string",pattern:"",placeholder:"请输入内容",disabled:!1,remoteFunc:"func_1555332320000_76710"},key:"1555332320000_76710",model:"operationalperiod",rules:[{type:"string",message:"项目运维期格式不正确"},{required:!0,message:"项目经理必须填写"}]}]}],options:{gutter:5,justify:"start",align:"top",remoteFunc:"func_1555332275000_73740"},key:"1555332275000_73740",model:"grid_1555332275000_73740",rules:[]},{type:"grid",name:"栅格布局",icon:"icon-grid-",columns:[{span:6,list:[{type:"select",name:"项目类别",icon:"icon-select",isShow:"true",url:"",options:{defaultValue:"",multiple:!1,disabled:!1,clearable:!1,placeholder:"请选择",required:!0,showLabel:!1,width:"53%",options:[{value:"下拉框1"},{value:"下拉框2"},{value:"下拉框3"}],remote:!0,filterable:!1,remoteOptions:[],props:{value:"value",label:"label"},remoteFunc:"projectcategory"},config:{labelPosition:""},key:"1555332603000_66925",model:"projectcategory",rules:[{required:!0,message:"项目类别必须填写"}]}]},{span:6,list:[{type:"select",name:"项目类型",icon:"icon-select",isShow:"true",url:"",options:{defaultValue:"",multiple:!1,disabled:!1,clearable:!1,placeholder:"请选择",required:!0,showLabel:!1,width:"53%",options:[{value:"下拉框1"},{value:"下拉框2"},{value:"下拉框3"}],remote:!0,filterable:!1,remoteOptions:[],props:{value:"value",label:"label"},remoteFunc:"projecttype"},config:{labelPosition:""},key:"1555332605000_42826",model:"projecttype",rules:[{required:!0,message:"项目类型必须填写"}]}]},{span:6,list:[{type:"select",name:"业务类型",icon:"icon-select",isShow:"true",url:"",options:{defaultValue:"",multiple:!1,disabled:!1,clearable:!1,placeholder:"请选择",required:!0,showLabel:!1,width:"53%",options:[{value:"下拉框1"},{value:"下拉框2"},{value:"下拉框3"}],remote:!0,filterable:!1,remoteOptions:[],props:{value:"value",label:"label"},remoteFunc:"businesstype"},config:{labelPosition:""},key:"1555332608000_32058",model:"businesstype",rules:[{type:"string",message:"项目监管级别格式不正确"},{required:!0,message:"业务类型必须填写"}]}]},{span:6,list:[]}],options:{gutter:5,justify:"start",align:"top",remoteFunc:"func_1555332571000_63293"},key:"1555332571000_63293",model:"grid_1555332571000_63293",rules:[]},{type:"grid",name:"栅格布局",icon:"icon-grid-",columns:[{span:6,list:[{type:"select",name:"项目监管级别",icon:"icon-select",isShow:"true",url:"",options:{defaultValue:"",multiple:!1,disabled:!1,clearable:!1,placeholder:"请选择",required:!0,showLabel:!1,width:"53%",options:[{value:"下拉框1"},{value:"下拉框2"},{value:"下拉框3"}],remote:!0,filterable:!1,remoteOptions:[],props:{value:"value",label:"label"},remoteFunc:"supervisorylevel"},config:{labelPosition:""},key:"1555376684000_98278",model:"supervisorylevel",rules:[{required:!0,message:"项目编号必须填写"}]}]},{span:6,list:[{type:"select",name:"项目级别",icon:"icon-select",isShow:"true",url:"",options:{defaultValue:"",multiple:!1,disabled:!1,clearable:!1,placeholder:"请选择",required:!0,showLabel:!1,width:"53%",options:[{value:"下拉框1"},{value:"下拉框2"},{value:"下拉框3"}],remote:!0,filterable:!1,remoteOptions:[],props:{value:"value",label:"label"},remoteFunc:"projectlevel"},config:{labelPosition:""},key:"1555376497000_57970",model:"projectlevel",rules:[{required:!0,message:"项目级别必须填写"}]}]},{span:6,list:[{type:"date",name:"项目预计开始时间",icon:"icon-date",isShow:"true",options:{defaultValue:"",readonly:!1,disabled:!1,editable:!0,clearable:!0,placeholder:"请选择日期",startPlaceholder:"",endPlaceholder:"",type:"date",format:"yyyy-MM-dd",timestamp:!1,required:!1,width:"53%",remoteFunc:"func_1555376816000_38737"},key:"1555376816000_38737",model:"prostartdate",rules:[]}]},{span:6,list:[{type:"date",name:"项目预计结束时间",icon:"icon-date",isShow:"true",options:{defaultValue:"",readonly:!1,disabled:!1,editable:!0,clearable:!0,placeholder:"请选择日期",startPlaceholder:"",endPlaceholder:"",type:"date",format:"yyyy-MM-dd",timestamp:!1,required:!1,width:"53%",remoteFunc:"func_1555377083000_9763"},key:"1555377083000_9763",model:"proenddate",rules:[]}]}],options:{gutter:5,justify:"start",align:"top",remoteFunc:"func_1555332942000_21880"},key:"1555332942000_21880",model:"grid_1555332942000_21880",rules:[]},{type:"grid",name:"栅格布局",icon:"icon-grid-",columns:[{span:18,list:[{type:"input",name:"项目关键字",icon:"icon-input",isShow:"true",url:"",options:{width:"85%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"请输入内容",disabled:!1,remoteFunc:"func_1555377183000_8816"},key:"1555377183000_8816",model:"keyword",rules:[{type:"string",message:"单行文本格式不正确"}]},{type:"input",name:"配置库地址",icon:"icon-input",isShow:"true",url:"",options:{width:"85%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"http://",disabled:!1,remoteFunc:"func_1555377232000_15677"},key:"1555377232000_15677",model:"repositoryaddress",rules:[]}]},{span:6,list:[]}],options:{gutter:0,justify:"start",align:"top",remoteFunc:"func_1555377164000_60758"},key:"1555377164000_60758",model:"grid_1555377164000_60758",rules:[{type:"string",message:"项目监管级别格式不正确"}]},{type:"grid",name:"栅格布局",icon:"icon-grid-",columns:[{span:6,list:[{type:"row",name:"",icon:"icon-row",isShow:"false",options:{width:"100%",defaultValue:"",required:!1,pattern:"",placeholder:"项目合同信息",disabled:!1,remoteFunc:"func_1555377348000_72312"},key:"1555377348000_72312",model:"row_1555377348000_72312",rules:[]}]},{span:12,list:[]},{span:3,list:[]},{span:3,list:[{type:"button",name:"按钮",icon:"icon-diy-com-textarea",isShow:"false",url:"",options:{width:"",defaultValue:"",required:!1,pattern:"",placeholder:"关联合同",remoteFunc:"func_1555377393000_76053"},key:"1555377393000_76053",model:"contract",rules:[]}]}],options:{gutter:0,justify:"start",align:"top",remoteFunc:"func_1555377321000_88744"},key:"1555377321000_88744",model:"grid_1555377321000_88744",rules:[]},{type:"grid",name:"栅格布局",icon:"icon-grid-",columns:[{span:24,list:[{type:"divider",name:"分割线",icon:"icon-divider",isShow:"false",options:{width:"100%",defaultValue:"",required:!1,pattern:"",placeholder:"",disabled:!1,remoteFunc:"func_1555377431000_66947"},key:"1555377431000_66947",model:"divider_1555377431000_66947",rules:[]}]}],options:{gutter:0,justify:"start",align:"top",remoteFunc:"func_1555377419000_10448"},key:"1555377419000_10448",model:"grid_1555377419000_10448",rules:[]},{type:"grid",name:"栅格布局",icon:"icon-grid-",columns:[{span:12,list:[{type:"input",name:"合同编号",icon:"icon-input",isShow:"true",url:"",options:{width:"77%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1555377464000_86195"},key:"1555377464000_86195",model:"contractnumber",rules:[{type:"string",message:"项目编号格式不正确"}]}]},{span:12,list:[]}],options:{gutter:0,justify:"start",align:"top",remoteFunc:"func_1555377457000_10674"},key:"1555377457000_10674",model:"grid_1555377457000_10674",rules:[]},{type:"grid",name:"栅格布局",icon:"icon-grid-",columns:[{span:6,list:[{type:"input",name:"所属客户中心",icon:"icon-input",isShow:"true",url:"",options:{width:"53%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1555377693000_29441"},key:"1555377693000_29441",model:"customercenter",rules:[{type:"string",message:"单行文本格式不正确"}]},{type:"input",name:"行业",icon:"icon-input",isShow:"true",url:"",options:{width:"53%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1555377865000_2394"},key:"1555377865000_2394",model:"industry",rules:[{type:"string",message:"行业格式不正确"}]}]},{span:6,list:[{type:"input",name:"所属销售",icon:"icon-input",isShow:"true",url:"",options:{width:"53%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1555377699000_92533"},key:"1555377699000_92533",model:"contractmarket",rules:[{type:"string",message:"单行文本格式不正确"}]},{type:"input",name:"区域",icon:"icon-input",isShow:"true",url:"",options:{width:"53%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1555377867000_51075"},key:"1555377867000_51075",model:"region",rules:[]}]},{span:6,list:[{type:"input",name:"合同金额",icon:"icon-input",isShow:"true",url:"",options:{width:"53%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1555377701000_24017"},key:"1555377701000_24017",model:"contractmoney",rules:[]},{type:"input",name:"合同预计开始时间",icon:"icon-input",isShow:"true",url:"",options:{width:"53%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1555377870000_97083"},key:"1555377870000_97083",model:"contractstartdate",rules:[]}]},{span:6,list:[{type:"input",name:"合同签订时间",icon:"icon-input",isShow:"true",url:"",options:{width:"53%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1555377703000_64533"},key:"1555377703000_64533",model:"contractsigningdate",rules:[]},{type:"input",name:"合同预计结束时间",icon:"icon-input",isShow:"true",url:"",options:{width:"53%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1555377872000_25736"},key:"1555377872000_25736",model:"contractenddate",rules:[{type:"string",message:"合同预计结束时间格式不正确"}]}]}],options:{gutter:5,justify:"start",align:"top",remoteFunc:"func_1555377665000_4717"},key:"1555377665000_4717",model:"grid_1555377665000_4717",rules:[]},{type:"grid",name:"栅格布局",icon:"icon-grid-",columns:[{span:12,list:[{type:"row",name:"自定义文字",icon:"icon-row",isShow:"false",options:{width:"100%",defaultValue:"",required:!1,pattern:"",placeholder:"项目简介",disabled:!1,remoteFunc:"func_1555378126000_55900"},key:"1555378126000_55900",model:"row_1555378126000_55900",rules:[]}]},{span:12,list:[]}],options:{gutter:0,justify:"start",align:"top",remoteFunc:"func_1555378121000_9928"},key:"1555378121000_9928",model:"grid_1555378121000_9928",rules:[]},{type:"grid",name:"栅格布局",icon:"icon-grid-",columns:[{span:24,list:[{type:"divider",name:"分割线",icon:"icon-divider",isShow:"false",options:{width:"100%",defaultValue:"",required:!1,pattern:"",placeholder:"",disabled:!1,remoteFunc:"func_1555378143000_45149"},key:"1555378143000_45149",model:"divider_1555378143000_45149",rules:[]}]}],options:{gutter:0,justify:"start",align:"top",remoteFunc:"func_1555378135000_62210"},key:"1555378135000_62210",model:"grid_1555378135000_62210",rules:[]},{type:"grid",name:"栅格布局",icon:"icon-grid-",columns:[{span:24,list:[{type:"textarea",name:"建设目标",icon:"icon-diy-com-textarea",isShow:"true",url:"",options:{width:"80%",defaultValue:"",pattern:"",placeholder:"请输入建设目标",url:"",remoteFunc:"func_1555378182000_90972",required:!0},key:"1555378182000_90972",model:"constructiongoals",rules:[{required:!0,message:"建设目标必须填写"}]},{type:"textarea",name:"建设内容",icon:"icon-diy-com-textarea",isShow:"true",url:"",options:{width:"80%",defaultValue:"",pattern:"",placeholder:"请输入建设内容",url:"",remoteFunc:"func_1555378229000_25260",required:!0},key:"1555378229000_25260",model:"constructioncontent",rules:[{required:!0,message:"建设内容必须填写"}]},{type:"textarea",name:"使用的关键技术",icon:"icon-diy-com-textarea",isShow:"true",url:"",options:{width:"80%",defaultValue:"",pattern:"",placeholder:"请输入使用的关键技术",url:"",remoteFunc:"func_1555378329000_17603"},key:"1555378329000_17603",model:"keytechnology",rules:[]},{type:"textarea",name:"预期项目成果",icon:"icon-diy-com-textarea",isShow:"true",url:"",options:{width:"80%",defaultValue:"",pattern:"",placeholder:"请输入预期项目成果",url:"",remoteFunc:"func_1555378381000_54153",required:!1},key:"1555378381000_54153",model:"projectresult",rules:[]},{type:"textarea",name:"合同约定交付物",icon:"icon-diy-com-textarea",isShow:"true",url:"",options:{width:"80%",defaultValue:"",pattern:"",placeholder:"请输入合同约定交付物",url:"",remoteFunc:"func_1555378454000_75394"},key:"1555378454000_75394",model:"contractagreeddelivery",rules:[]}]}],options:{gutter:0,justify:"start",align:"top",remoteFunc:"func_1555378145000_30158"},key:"1555378145000_30158",model:"grid_1555378145000_30158",rules:[]}],config:{labelWidth:100,labelPosition:"left",size:"small"}},editData:{},remoteFuncs:{parentproject:function(e){},impldepartment:function(e){},projectmanager:function(e){},projectcategory:function(e){Object(h.G)("/category").then(function(t){var a=t.data.data;e(a)}).catch(function(e){})},projecttype:function(e){Object(h.G)("/projecttype").then(function(t){var a=t.data.data;e(a)}).catch(function(e){})},businesstype:function(e){Object(h.G)("/businesstype").then(function(t){var a=t.data.data;e(a)}).catch(function(e){})},projectlevel:function(e){Object(h.G)("/projectLevel").then(function(t){var a=t.data.data;e(a)}).catch(function(e){})},supervisorylevel:function(e){Object(h.G)("/supervisorylevel").then(function(t){var a=t.data.data;e(a)}).catch(function(e){})}},values:{}}},methods:{handleSubmit:function(){this.$refs.generateForm.getData().then(function(e){}).catch(function(e){})}}},f={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-col",{staticClass:"projectview",attrs:{span:20}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}}),this._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:this.handleSubmit}},[this._v("提交")])],1)},staticRenderFns:[]};var g=a("VU/8")(_,f,!1,function(e){a("4Nrf"),a("cOXn")},"data-v-e8a6c11a",null).exports,b=a("/sMv"),v=a("idCy"),y=a("bOdI"),w=a.n(y),j=a("iBEn"),C=[],S=[],k=[],D={name:"CreateFrom_setname",components:{GenerateForm:m.a,GenetateFormItem:j.a},data:function(){var e;return{jsonData:{list:"",config:{labelPosition:"left",labelWidth:100,size:"small"}},editData:{},remoteFuncs:(e={parentproject:function(e){}},w()(e,"parentproject",function(e){var t=[{value:"项目管理系统"},{value:"计划执行系统"}];e(t)}),w()(e,"impldepartment",function(e){}),w()(e,"subproject",function(e){}),w()(e,"secondarydept",function(e){}),w()(e,"projectmanager",function(e){}),w()(e,"projectcategory",function(e){}),w()(e,"projecttype",function(e){}),w()(e,"businesstype",function(e){}),w()(e,"projectlevel",function(e){}),w()(e,"supervisorylevel",function(e){}),w()(e,"businessnumber",function(e){}),e)}},mounted:function(){var e=this;Object(h.N)("/template",{memberId:"7503529197009650726",menuId:8}).then(function(t){var a=t.data.data.list;localStorage.setItem("all_data",n()(a)),e.jsonData.list=t.data.data.list;for(var o=0;o<a.length;o++)for(var i=0;i<a[o].columns.length;i++)for(var r=0;r<a[o].columns[i].list.length;r++)S.push(a[o].columns[i].list[r]),"select"==a[o].columns[i].list[r].type&&C.push(a[o].columns[i].list[r]);var s=function(e){var t=e;for(var a in C)S[t].name==C[a].name&&(c=t,k.push(c),u=S[c].model,Object(h.G)("/"+u).then(function(e){S[t].options.remoteOptions=e.data.data}).catch(function(e){}))};for(var l in S){var c,u;s(l)}t.data.data.list.length>0&&(e.widgetFormSelect=t.data.data.list[0])}).catch(function(e){})},methods:{handleSubmit:function(){this.$refs.generateForm.getData().then(function(e){var t=JSON.parse(localStorage.getItem("contractList")),a=void 0;a="true"===(a=localStorage.getItem("isSubProject"))?1:0;var o=localStorage.getItem("pType");e={projectName:e.projectname,contractNumber:e.businessnumber,projectNumber:t.contractNumber,firstDepartment:t.contractLeaderNumber,secondDepartment:t.contractLeaderFirstDeptNumber,projectManager:t.projectManager,contractLeaderFirstDept:t.contractLeaderFirstDept,contractLeader:t.contractLeaderNumber,contractMoney:t.contractAmount,contractSigningDate:t.contractSigningDate,projectCategory:e.projectcategory,supervisoryLevel:e.supervisorylevel,projectLevel:e.projectlevel,projectOperationalPeriod:e.operationalperiod,industry:t.industry,contractAgreedProjectStartDate:t.contractAgreedProjectStartDate,projectAgreedStartDate:e.prostartdate,contractAgreedProjectFinishDate:t.contractAgreedProjectFinishDate,projectAgreedEndDate:e.proenddate,projectType:e.projecttype,businessType:e.businesstype,projectKeyword:e.keyword,configRepositoryAddress:e.repositoryaddress,province:t.region,constructionGoals:e.constructiongoals,constructionContent:e.constructioncontent,keyTechnology:e.keytechnology,contractDeliverable:e.contractagreeddelivery,projectResults:e.projectresult,registrationType:o,isSubProject:a,username:"lishuaiqiang",parentProjectName:e.parentproject.value};Object(h._33)("/sgpm/rest/api/integration/oa/flow",e).then(function(e){alert("提交成功!")}).catch(function(e){})}).catch(function(e){})},saveDate:function(){this.$refs.generateForm.getData().then(function(e){var t=JSON.parse(localStorage.getItem("contractList")),a=JSON.parse(localStorage.getItem("personInfor")),o=void 0;o=localStorage.getItem("isSubProject");var n=localStorage.getItem("pType");n=parseInt(n),o="true"===o?1:0;var i="";i=void 0==e.parentproject?"":e.parentproject.parent_id;e={project:{name:e.projectname,custom_field_values:{13:e.businessnumber,18:t.contractAmount,16:t.contractLeaderFirstDept,19:t.contractSigningDate,20:e.projectcategory,21:e.supervisorylevel,22:e.projectlevel,23:e.operationalperiod,24:t.industry,25:t.region,26:t.contractAgreedProjectStartDate,27:t.contractAgreedProjectFinishDate,28:e.prostartdate,29:e.proenddate,30:e.projecttype,31:e.businesstype,32:e.keyword,33:e.repositoryaddress,34:e.constructiongoals,35:e.constructioncontent,36:e.keytechnology,37:e.projectresult},parent_id:i,description:"",is_public:"1",user_id:"7503529197009650726",user_name:"李闻昊",project_no:"",sale_name:t.contractLeader,sale_id:t.contractLeaderNumber,company_name:a.account_name,company_id:a.account_id,level_one_name:a.subdept_name,level_one_id:a.subdept_id,level_two_name:a.dept_name,level_two_id:a.dept_id},child:o,category:n,account_name:"北京超图软件股份有限公司"};Object(h._25)("/sgpm/rest/api/server/pm/project",e).then(function(e){200==e.data.code?alert("保存成功!"):201==e.data.code&&alert("该项目已立项")}).catch(function(e){})}).catch(function(e){})}}},N={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-col",{staticClass:"projectview",attrs:{span:24}},[a("generate-form",{ref:"generateForm",attrs:{data:e.jsonData,remote:e.remoteFuncs,value:e.editData}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveDate}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("提交")])],1)},staticRenderFns:[]};var T=a("VU/8")(D,N,!1,function(e){a("j/PR")},null,null).exports,x=a("14gb"),I={name:"CreateFrom_setname",components:{GenerateForm:m.a,GenetateFormItem:j.a},data:function(){return{jsonData:{list:"",config:{labelPosition:"left",labelWidth:100,size:"small"}},editData:{},remoteFuncs:{}}},mounted:function(){var e=this,t={memberId:JSON.parse(localStorage.getItem("userinfo")).memberid,menuId:15};Object(h.N)("/template",t).then(function(t){t.data.data.list;e.jsonData.list=t.data.data.list}).catch(function(e){})},methods:{handleSubmit:function(){this.$refs.generateForm.getData().then(function(e){}).catch(function(e){})}}},P={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-col",{staticClass:"projectview",attrs:{span:24}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}})],1)},staticRenderFns:[]};var O=a("VU/8")(I,P,!1,function(e){a("Yvl6"),a("zQy3")},"data-v-997d3af4",null).exports,E=a("Dd8w"),M=a.n(E),F=a("NYxO"),A={name:"projectstart",components:{GenerateForm:m.a,GenetateFormItem:j.a},beforeRouteLeave:function(e,t,a){1==this.disabled?a():window.confirm("系统可能不会保存您所做的更改，确定要离开吗?")?a():a(!1)},data:function(){return{isShow:1!=this.$route.query.isShow,accountTableData:[{expendItem:"实施费用预算",budgetMoney:""},{expendItem:"--人工费用预算",budgetMoney:""},{expendItem:"--运营费用预算",budgetMoney:""},{expendItem:"销售费用预算",budgetMoney:""},{expendItem:"项目采购成本预算",budgetMoney:""},{expendItem:"项目总预算",budgetMoney:""}],jsonData:{list:"",config:{labelPosition:"left",labelWidth:100,size:"small"}},addData:"",addTableData:"",projectId:this.$route.query.id,editData:{},remoteFuncs:{},disabled:!1,isSave:!1,globalParams:{}}},computed:M()({},Object(F.c)(["userinfo"])),beforeDestroy:function(){x.a.$off("contractNumber")},created:function(){var e=this;this.globalParams.memberId=this.userinfo.memberid,this.globalParams.subdept_id=this.userinfo.subdept_id,this.globalParams.companyId=this.userinfo.account_id,this.globalParams.projectId=localStorage.getItem("proId"),this.initModule(),this.initProjectStartData(),x.a.$on("contractNumber",function(t){t&&e.getAccountData(t)}),this.$nextTick(function(){x.a.$on("audit",function(t){var a=t.obj,o=t.projectId;e.globalParams.businessProjectId=o,e.$set(e.globalParams,"data",a),e.$set(e.globalParams,"data1",a)})})},destroyed:function(){window.onbeforeunload=null},mounted:function(){var e=this;window.onbeforeunload=function(e){return(e=e||window.event)&&(e.returnValue="关闭提示"),"关闭提示"},localStorage.removeItem("addData"),localStorage.removeItem("projectMember"),x.a.$on("contractMes",function(t){t&&(e.contractMes=t)}),x.a.$on("addData",function(t){t&&(e.addData=t)}),x.a.$on("addTableData",function(t){t&&(e.addTableData=t)}),x.a.$on("keyword",function(t){t&&(e.keywordList=t)}),x.a.$on("keytechnology",function(t){t&&(e.keytechnologyList=t)});var t="/template/3/"+this.userinfo.account_id;Object(h.W)(t).then(function(t){e.jsonData=t.data.data,"8416498716893399290"==e.userinfo.account_id&&(e.jsonData.config.labelWidth=130)}).catch(function(e){})},methods:{back:function(){this.$router.go(-1)},initModule:function(){var e=this;this.$nextTick(function(){x.a.$on("contactcontract",function(t){t.model;var a=t.val;if(/.*[\u4e00-\u9fa5]+.*$/.test(a)){var o=a.lastIndexOf("-");return a=a.substring(0,o)}var n="/sgpm/rest/api/integration/data/contract/"+e.userinfo.account_id+"?contractNumber="+a;Object(h.F)(n).then(function(t){e.$set(e.globalParams,"data",t.data.data),t.data.data,e.projectInfo=t.data.data,t.data.data.CONTRACTNUMBER,e.getAccountData(t.data.data.CONTRACTNUMBER)})})})},initProjectStartData:function(){var e=this;localStorage.removeItem("keyWords"),localStorage.removeItem("keytechnologys"),localStorage.removeItem("projectCode"),localStorage.removeItem("globalParams");var t={projectId:localStorage.getItem("proId")||""};Object(h.T)("/pm/project",t).then(function(t){e.updateJsonData(t.data.data),t.data.data,null==t.data.data.KEYWORD&&(t.data.data.KEYWORD=""),null==t.data.data.KEYTECHNOLOGY&&(t.data.data.KEYTECHNOLOGY=""),"8416498716893399290"==e.userinfo.account_id?localStorage.setItem("projectCode",t.data.data.KEYWORD):localStorage.setItem("keyWords",t.data.data.KEYWORD),localStorage.setItem("keytechnologys",t.data.data.KEYTECHNOLOGY),t.data.data.BUSINESS="",e.$set(e.globalParams,"data",e.updateJsonData(t.data.data)),e.$set(e.globalParams,"data1",e.updateJsonData(t.data.data)),localStorage.setItem("globalParams",n()(e.updateJsonData(t.data.data)))})},keepTwoDecimalFull:function(e){var t=parseFloat(e);if(isNaN(t))return alert("传递参数错误，请检查！"),!1;var a=(t=Math.round(100*e)/100).toString(),o=a.indexOf(".");for(o<0&&(o=a.length,a+=".");a.length<=o+2;)a+="0";return a},formatThousands:function(e){e=(e/=1e4).toFixed(2);if(0==/^[0-9]*[1-9][0-9]*$/.test(e))return e&&e.toString().replace(/(\d)(?=(\d{3})+\.)/g,function(e,t){return t+","});return(e+"").replace(/\d{1,3}(?=(\d{3})+$)/g,"$&,")},updateJsonData:function(e){var t={};for(var a in e)if("CONTRACT"==a)for(var o in e[a])t[o]=e[a][o];else t[a]=e[a];return t},warnMessage:function(){this.$message({showClose:!0,message:"项目关键字不能为空",type:"warning"})},warnMessage3:function(){this.$message({showClose:!0,message:"工程代码不能为空",type:"warning"})},warnMessage2:function(){this.$message({showClose:!0,message:"拟使用的关键技术不能为空",type:"warning"})},handleSubmit:function(){var e=this;this.$refs.generateForm.getData().then(function(t){if(e.disabled=!0,e.isSave=!0,""==t.contractnumber&&null==t.contractnumber)return alert("该项目没有关联合同不能提交!"),e.disabled=!1,void(e.isSave=!1);localStorage.getItem("ProjectAccountParams")&&(e.accountTableData=JSON.parse(localStorage.getItem("ProjectAccountParams")));var a=JSON.parse(localStorage.getItem("projectMember"));if(a);var o=JSON.parse(localStorage.getItem("addData"));if(o);var n=localStorage.getItem("ProjectriskParams"),i=[];if(JSON.parse(n)&&(i=JSON.parse(n)),i&&i.length>0){e.handleSaveProjectRisk(i)}var r=localStorage.getItem("MilestoneParams"),s=JSON.parse(r);if(s);if(!e.checkMilestoneParams(s))return alert("里程碑模板请填写全部数据！"),e.disabled=!1,e.isSave=!1,!1;if(new Date(t.projectstartdate.replace(/\-/g,"/"))>=new Date(t.projectenddate.replace(/\-/g,"/")))return alert("项目预计开始时间不能大于项目预计结束时间！"),e.disabled=!1,e.isSave=!1,!1;var l="",c=localStorage.getItem("keyWords");if("8416498716893399290"==e.userinfo.account_id){if(localStorage.getItem("projectCode")&&(l=localStorage.getItem("projectCode")),""==l)return e.warnMessage3(),e.disabled=!1,void(e.isSave=!1)}else if(localStorage.getItem("keyWords")&&(l=c),""==l)return e.warnMessage(),e.disabled=!1,void(e.isSave=!1);var u="";if(localStorage.getItem("keytechnologys")&&(u=localStorage.getItem("keytechnologys")),""==u)return e.warnMessage2(),e.disabled=!1,void(e.isSave=!1);var d="";if(d=e.$route.query.id?e.$route.query.id:localStorage.getItem("proId"),"5326994013938795629"==e.userinfo.account_id||"-1360422574114386809"==e.userinfo.account_id||"-7975978055853456035"==e.userinfo.account_id||"-8234401961992436364"==e.userinfo.account_id){t={id:d,project:{name:t.projectname,custom_field_values:{12:t.projectnumber,13:t.contractnumber,16:t.customercenter,17:t.contractmarket,18:t.contractmoney,19:t.contractsigningdate,22:t.projectlevel,23:t.operationalperiod,24:t.industry,25:t.region,28:t.projectstartdate,29:t.projectenddate,30:t.projecttype,32:l,35:t.constructioncontent,36:u,39:t.businessnumber,41:t.businesssystem,42:1,43:t.customerdepartment,33:t.repositoryaddress},parent_id:"",description:"",is_public:"1",user_id:e.userinfo.memberid,user_name:e.userinfo.emp_name,company_name:e.userinfo.account_name,company_id:e.userinfo.account_id,level_one_name:e.userinfo.subdept_name,level_one_id:e.userinfo.subdept_id,level_two_name:e.userinfo.dept_name,level_two_id:e.userinfo.dept_id,sale_name:t.contractmarket,sale_id:t.saleid,project_no:t.projectnumber,audit_status:21},category:e.$route.query.category,account_name:e.userinfo.account_name,username:e.userinfo.login_name,start:1,project_member:a,customer_contact:o,risk:i,milestone:e.getOAMilestone(s),implement_budget:e.formatThousands(e.accountTableData[0].budgetMoney),labour_budget:e.formatThousands(e.accountTableData[1].budgetMoney),run_budget:e.formatThousands(e.accountTableData[2].budgetMoney),sale_budget:e.formatThousands(e.accountTableData[3].budgetMoney),purchase_budget:e.formatThousands(e.accountTableData[4].budgetMoney),project_budget:e.formatThousands(e.accountTableData[5].budgetMoney)};Object(h._33)("/sgpm/rest/api/integration/oa/flow",t).then(function(a){if(e.disabled=!0,e.isSave=!0,200==a.data.code){e.disabled=!0,alert("提交成功!"),e.saveCustom(JSON.parse(localStorage.getItem("addData")));var o=localStorage.getItem("MilestoneParams"),n=JSON.parse(o);t.project.project_no,n&&e.handleSaveProjectMilestone(t.project.project_no,n),e.$router.push({path:"audititem"})}else e.disabled=!1,e.isSave=!1,alert("提交失败!")}).catch(function(t){e.disabled=!1,e.isSave=!1,alert("提交失败!")})}else if("-1814768306395265967"==e.userinfo.account_id||"7638091599462351621"==e.userinfo.account_id){t={id:d,project:{name:t.projectname,custom_field_values:{12:t.projectnumber,13:t.contractnumber,16:t.customercenter,17:t.contractmarket,22:t.projectlevel,28:t.projectstartdate,29:t.projectenddate,30:t.projecttype,32:l,35:t.constructioncontent,36:u,39:t.businessnumber,42:1,31:t.businesstype,33:t.repositoryaddress,43:t.customerdepartment},projectChildType:t.projectchildtype||"",parent_id:"",description:"",is_public:"1",user_id:e.userinfo.memberid,user_name:e.userinfo.emp_name,company_name:e.userinfo.account_name,company_id:e.userinfo.account_id,level_one_name:e.userinfo.subdept_name,level_one_id:e.userinfo.subdept_id,level_two_name:e.userinfo.dept_name,level_two_id:e.userinfo.dept_id,sale_name:t.contractmarket,sale_id:t.saleid,project_no:t.projectnumber,expectContributions:t.expectcontributions,milestoneWeight:t.milestoneweight.substr(0,t.milestoneweight.length-1),audit_status:21},category:e.$route.query.category,account_name:e.userinfo.account_name,username:e.userinfo.login_name,start:1,project_member:a,customer_contact:o,risk:i,milestone:e.getOAMilestone(s)};Object(h._33)("/sgpm/rest/api/integration/oa/flow",t).then(function(a){if(e.disabled=!0,200==a.data.code){e.disabled=!0,e.isSave=!0,alert("提交成功!"),e.saveCustom(JSON.parse(localStorage.getItem("addData")));var o=localStorage.getItem("MilestoneParams"),n=JSON.parse(o);t.project.project_no,n&&e.handleSaveProjectMilestone(t.project.project_no,n),e.$router.push({path:"audititem"})}else e.disabled=!1,e.isSave=!1,alert("提交失败!")}).catch(function(t){e.disabled=!1,e.isSave=!1,alert("提交失败!")})}else if("8416498716893399290"==e.userinfo.account_id){t={id:d,project:{custom_field_values:{22:t.projectlevel,28:t.projectstartdate,29:t.projectenddate,30:t.projecttype,32:l,33:t.repositoryaddress,35:t.constructioncontent,36:u},parent_id:"",description:"",is_public:0,name:t.projectname,project_no:t.projectnumber,user_id:e.userinfo.memberid,user_name:e.userinfo.emp_name,company_name:e.userinfo.account_name,company_id:e.userinfo.account_id,level_one_name:e.userinfo.subdept_name,level_one_id:e.userinfo.subdept_id,sale_id:t.saleid||"",sale_name:t.contractmarket,customercenter:t.customercenter,customercenternumber:t.customercenternumber,expectContributions:t.expectcontributions,milestoneWeight:t.milestoneweight.substr(0,t.milestoneweight.length-1),audit_status:20},username:e.userinfo.login_name,category:1,account_name:e.userinfo.account_name,start:1,project_member:a,customer_contact:o,risk:i,milestone:e.getOAMilestone(s)};Object(h._33)("/sgpm/rest/api/integration/oa/nk/workflow/start",t).then(function(a){if(e.disabled=!0,200==a.data.code){e.disabled=!0,e.isSave=!0,alert("提交成功!"),e.saveCustom(JSON.parse(localStorage.getItem("addData")));var o=localStorage.getItem("MilestoneParams"),n=JSON.parse(o);t.project.project_no,n&&n.length>0&&e.handleSaveProjectMilestone(t.project.project_no,n),e.$router.push({path:"audititem"})}else e.disabled=!1,e.isSave=!1,alert("提交失败!")}).catch(function(t){e.disabled=!1,e.isSave=!1,alert("提交失败!")})}})},saveDate1:function(){var e=localStorage.getItem("ProjectriskParams"),t=JSON.parse(e);if(t){var a=["riskType","riskDescription","possibilityGrade","severityProbability","urgency","solutions"];this.getOAStrRisk(t,a),this.handleSaveProjectRisk(t)}e=localStorage.getItem("MilestoneParams");var o=JSON.parse(e);a=["stageName","milestoneName","progressPercentage","isCut","expectedBeginTime","expectedEndTime","workHours","description"];this.getOAStrMilestone(o,a);this.checkMilestoneParams(o);var n=JSON.parse(localStorage.getItem("projectMember"));if(n){this.getOAStrMember(n,["user_name","role","status","enter_time","leave_time","unit_name","level_one","level_two"])}var i=JSON.parse(localStorage.getItem("addData"));if(i){this.getOAStrCustomer(i,["LMName","CustomName","BusRole","Email","ZipCode","MobilePhont","PostInfo","FAddress"])}},saveDate:function(){var e=this;this.$refs.generateForm.getData().then(function(t){e.isSave=!0,e.disabled=!0;if(localStorage.getItem("ProjectAccountParams")&&(e.accountTableData=JSON.parse(localStorage.getItem("ProjectAccountParams"))),JSON.parse(localStorage.getItem("projectMember")));if(d=JSON.parse(localStorage.getItem("addData")));var a=localStorage.getItem("ProjectriskParams"),o=[];if(JSON.parse(a)&&(o=JSON.parse(a)),o&&o.length>0){e.handleSaveProjectRisk(o)}var n=localStorage.getItem("MilestoneParams");if(c=JSON.parse(n));if(new Date(t.projectstartdate.replace(/\-/g,"/"))>=new Date(t.projectenddate.replace(/\-/g,"/")))return alert("项目预计开始时间不能大于项目预计结束时间！"),e.isSave=!1,e.disabled=!1,!1;var i="",r=localStorage.getItem("keyWords");if("8416498716893399290"==e.userinfo.account_id){if(localStorage.getItem("projectCode")&&(i=localStorage.getItem("projectCode")),""==i)return e.warnMessage3(),e.disabled=!1,void(e.isSave=!1)}else if(localStorage.getItem("keyWords")&&(i=r),""==i)return e.warnMessage(),e.isSave=!1,void(e.disabled=!1);var s="";if(localStorage.getItem("keytechnologys")&&(s=localStorage.getItem("keytechnologys")),""==s)return e.warnMessage2(),e.isSave=!1,void(e.disabled=!1);var l="";if(l=e.$route.query.id?e.$route.query.id:localStorage.getItem("proId"),"5326994013938795629"==e.userinfo.account_id||"-1360422574114386809"==e.userinfo.account_id||"-7975978055853456035"==e.userinfo.account_id||"-8234401961992436364"==e.userinfo.account_id)t={id:l,project:{name:t.projectname,custom_field_values:{12:t.projectnumber,13:t.contractnumber,16:t.customercenter,17:t.contractmarket,18:t.contractmoney,19:t.contractsigningdate,22:t.projectlevel,23:t.operationalperiod,24:t.industry,25:t.region,28:t.projectstartdate,29:t.projectenddate,30:t.projecttype,32:i,35:t.constructioncontent,36:s,39:t.businessnumber,41:t.businesssystem,42:1,43:t.customerdepartment,33:t.repositoryaddress},parent_id:"",description:"",is_public:"1",user_id:e.userinfo.memberid,user_name:e.userinfo.emp_name,company_name:e.userinfo.account_name,company_id:e.userinfo.account_id,level_one_name:e.userinfo.subdept_name,level_one_id:e.userinfo.subdept_id,level_two_name:e.userinfo.dept_name,level_two_id:e.userinfo.dept_id,sale_name:t.contractmarket,sale_id:t.saleid,project_no:t.projectnumber,audit_status:20},account_name:e.userinfo.account_name,username:e.userinfo.login_name,start:1};else if("-1814768306395265967"==e.userinfo.account_id||"7638091599462351621"==e.userinfo.account_id)t={id:l,project:{name:t.projectname,custom_field_values:{12:t.projectnumber,13:t.contractnumber,16:t.customercenter,17:t.contractmarket,22:t.projectlevel,28:t.projectstartdate,29:t.projectenddate,30:t.projecttype,32:i,35:t.constructioncontent,36:s,39:t.businessnumber,42:1,31:t.businesstype,33:t.repositoryaddress,43:t.customerdepartment},projectChildType:t.projectchildtype||"",parent_id:"",description:"",is_public:"1",user_id:e.userinfo.memberid,user_name:e.userinfo.emp_name,company_name:e.userinfo.account_name,company_id:e.userinfo.account_id,level_one_name:e.userinfo.subdept_name,level_one_id:e.userinfo.subdept_id,level_two_name:e.userinfo.dept_name,level_two_id:e.userinfo.dept_id,sale_name:t.contractmarket,sale_id:t.saleid,project_no:t.projectnumber,expectContributions:t.expectcontributions,milestoneWeight:t.milestoneweight.substr(0,t.milestoneweight.length-1),audit_status:20},category:e.$route.query.category,account_name:e.userinfo.account_name,username:e.userinfo.login_name,start:1};else if("8416498716893399290"==e.userinfo.account_id)t={id:l,project:{custom_field_values:{22:t.projectlevel,28:t.projectstartdate,29:t.projectenddate,30:t.projecttype,32:i,33:t.repositoryaddress,35:t.constructioncontent,36:s},parent_id:"",description:"",is_public:0,name:t.projectname,project_no:t.projectnumber,user_id:e.userinfo.memberid,user_name:e.userinfo.emp_name,company_name:e.userinfo.account_name,company_id:e.userinfo.account_id,level_one_name:e.userinfo.subdept_name,level_one_id:e.userinfo.subdept_id,sale_id:t.saleid||"",sale_name:t.contractmarket,customercenter:t.customercenter,customercenternumber:t.customercenternumber,audit_status:20},username:e.userinfo.login_name,category:1,account_name:e.userinfo.account_name,start:1};Object(h._25)("/sgpm/rest/api/server/pm/project",t).then(function(t){200==t.data.code?(alert("保存成功!"),e.isSave=!1,e.disabled=!1):201==t.data.code&&(alert("保存失败!"),e.isSave=!1,e.disabled=!1)}).catch(function(t){e.isSave=!1,e.disabled=!1});n=localStorage.getItem("ProjectriskParams"),n=localStorage.getItem("MilestoneParams");var c=JSON.parse(n);if(t.project.project_no,c&&c.length>0){e.handleSaveProjectMilestone(t.project.project_no,c);var u=["stageName","milestoneName","progressPercentage","expectedBeginTime","expectedEndTime","workHours","description"];e.getOAStr(c,u)}var d=JSON.parse(localStorage.getItem("addData"));u=["BusRole","CustomName","Email","FAddress","LMName","MobilePhont","PostInfo","ZipCode"];e.saveCustom(d);JSON.parse(localStorage.getItem("projectMember")),u=["user_name","enter_time","leave_time","level_one","level_two","role","status","unit_name"]})},saveCustom:function(e){Object(h._29)("/sgpm/rest/api/server/pm/project/customercontact",e).then(function(e){x.a.$emit("customercontactSave",{code:200,success:!0})}).catch(function(e){})},getOAStr:function(e,t){if(null!=e&&void 0!=t)for(var a="",o=0;o<e.length;o++){var n=e[o],i="";t.forEach(function(e){var t=n[e];""!=t&&void 0!=t||(t="无"),i+=t+="|"}),a+=i+="\r\n"}else a="";return a},getOAStrMember:function(e,t){var a=this;if(null!=e&&void 0!=t){var o="【项目成员】    【角色】    【员工状态】    【预计加入时间】    【预计离开时间】         【A级单位】                【B级单位】           【C级单位】";o+="\r\n";for(var n=0;n<e.length;n++){var i=e[n],r="";t.forEach(function(e){var t=i[e];if(""!=t&&void 0!=t||(t="无"),"user_name"==e){if((o=a.GetStringByteLength(t))<8)t+=" ".repeat(8-o+9);if(8==o)t+=" ".repeat(8-o+6)}if("role"==e){var o;if((o=a.GetStringByteLength(t))<18)t+=" ".repeat(18-o+9);if(18==o)t+=" ".repeat(18-o+6)}"status"==e&&((o=a.GetStringByteLength(t))<=4&&(t+=" ".repeat(4-o+10)));"enter_time"==e&&(t+=" ".repeat(12));"leave_time"==e&&(t+=" ".repeat("无"==t?20:6));"unit_name"==e&&((o=a.GetStringByteLength(t))<=26&&(t+=" ".repeat(26-o+6)));"level_one"==e&&((o=a.GetStringByteLength(t))<=16&&(t+=" ".repeat(16-o+6)));r+=t+=""}),o+=r+="\r\n"}}else o="";return o},getOAStrCustomer:function(e,t){var a=this;if(null!=e&&void 0!=t&&e.length>0){for(var o=this.GetStringByteLength(e[0].CustomName),n=1;n<e.length;n++){var i=e[n],r=this.GetStringByteLength(i.CustomName);r>o&&(o=r)}var s="【客户单位名称】";if(o>this.GetStringByteLength(s))s+=" ".repeat(o-this.GetStringByteLength(s)+10);var l="【姓名】      "+s+"【职务】          【电子邮箱地址】          【邮编】        【电话】          【客户成员角色】         【通讯地址】";l+="\r\n";for(n=0;n<e.length;n++){var c=e[n],u="";t.forEach(function(e){var t=c[e];if(""!=t&&void 0!=t||(t="无"),"LMName"==e){if((n=a.GetStringByteLength(t))<8)t+=" ".repeat(8-n+6);if(8==n)t+=" ".repeat(8-n+6)}if("CustomName"==e){if((n=a.GetStringByteLength(t))<o)t+=" ".repeat(o-n+8);if(n==o)t+=" ".repeat(o-n+6)}"BusRole"==e&&((n=a.GetStringByteLength(t))<=10&&(t+=" ".repeat(10-n+10)));"Email"==e&&((n=a.GetStringByteLength(t))<=20&&(t+=" ".repeat(20-n+8)));"ZipCode"==e&&((n=a.GetStringByteLength(t))<=10&&(t+=" ".repeat(10-n+2)));"MobilePhont"==e&&((n=a.GetStringByteLength(t))<=16&&(t+=" ".repeat(16-n+8)));if("PostInfo"==e){var n;if((n=a.GetStringByteLength(t))<12)t+=" ".repeat(12-n+9);if(12==n)t+=" ".repeat(12-n+6)}u+=t+=""}),l+=u+="\r\n"}}else l="";return l},getOAStrRisk:function(e,t){var a=this;if(null!=e&&void 0!=t){for(var o=this.GetStringByteLength(e[0].riskDescription),n=this.GetStringByteLength(e[0].solutions),i=1;i<e.length;i++){var r=e[i],s=this.GetStringByteLength(r.riskDescription),l=this.GetStringByteLength(r.solutions);s>o&&(o=s),l>n&&(n=l)}var c="【风险描述】";if(o>this.GetStringByteLength(c))c+=" ".repeat(o-this.GetStringByteLength(c)+6);var u="【风险类型】     "+c+"【可能性等级】    【严重性】      【紧迫性】     【应对措施】";u+="\r\n";for(i=0;i<e.length;i++){var d=e[i],p="";t.forEach(function(e){var t=d[e];if(""!=t&&void 0!=t||(t="无"),"riskType"==e){if((n=a.GetStringByteLength(t))<12)t+=" ".repeat(12-n+9);if(12==n)t+=" ".repeat(12-n+6)}if("riskDescription"==e){var n;if((n=a.GetStringByteLength(t))<o)t+=" ".repeat(o-n+16);if(n==o)t+=" ".repeat(o-n+12)}"possibilityGrade"!=e&&"severityProbability"!=e||(t+=" ".repeat(20));"urgency"==e&&(t+=" ".repeat(12));p+=t+=""}),u+=p+="\r\n"}}else u="";return u},getOAMilestone:function(e){var t=[];if(null!=e)for(var a=0;a<e.length;a++){var o=e[a];if(o.deliverableStatus){var n={};n.stageName=o.stageName,n.milestoneName=o.milestoneName,n.progressPercentage=o.progressPercentage,n.isCut=1==o.isCut?"是":"否",n.description=o.description,n.estimatedStartDate=o.expectedBeginTime,n.estimatedFinishDate=o.expectedEndTime,n.estimatedWorkingHours=o.workHours;var i="";o.deliverable.forEach(function(e){e.checkedStatus&&(i+=e.deliverableName+"、")}),n.delStr=i.substr(0,i.length-1),t.push(n)}}return t},getOAStrMilestone:function(e,t){var a=this;if(null!=e&&void 0!=t){var o="【阶段名称】   【里程碑名称】    【对应百分比】    【是否可裁剪】     【预计开始时间】     【预计完成时间】   【预计工时(人月)】    【里程碑描述】";o+="\r\n";for(var n=0;n<e.length;n++){var i=e[n];if(i.deliverableStatus){var r=i.deliverable,s="     ";t.forEach(function(e){var t,o=i[e];(void 0==o&&(o="无"),"progressPercentage"==e&&(o=o),"isCut"==e&&(o=0==o?"否":"是"),"milestoneName"==e)&&((t=a.GetStringByteLength(o))<15&&(o+=" ".repeat(15-t+12)));"stageName"==e&&((t=o.length)<3&&(o+=" ".repeat(3-t+18)));"progressPercentage"==e&&(o+="",(t=a.GetStringByteLength(o))<5&&(o+=" ".repeat(5-t+22)));"isCut"==e&&(o+=" ".repeat(18));"expectedBeginTime"!=e&&"expectedEndTime"!=e||(o+=" ".repeat(15));"workHours"==e&&((t=a.GetStringByteLength(o))<6&&(o+=" ".repeat(6-t+17)));s+=o+=""}),s+="\r\n",s+="          【交付物名称】        【是否可裁剪】        【交付物描述】   ",r.forEach(function(e){if(e.checkedStatus){s+="\r\n";var t="            ";["deliverableName","isCut","description"].forEach(function(o){var n=e[o];if("deliverableName"==o){var i=a.GetStringByteLength(n);if(i<20)n+=" ".repeat(20-i+6)}"isCut"==o&&(n=0==n?"否":"是",n+=" ".repeat(16));t+=n}),s+=t+=""}}),s+="\r\n",o+=s+="\r\n"}}}else o="";return o},checkMilestoneParams:function(e){if(e){if(0==e.length)return!1;var t=!0;return e.forEach(function(e){if(e.deliverableStatus){var a=e.expectedBeginTime,o=e.expectedEndTime,n=e.workHours;a&&o&&n||(t=!1)}}),t}return!1},checkProjectriskParams:function(e){if(e){var t=!0;return e.forEach(function(e){""==e.riskDescription&&(t=!1)}),t}return!1},GetStringByteLength:function(e){if(e){for(var t=0,a=0,o=0;o<e.length;o++)null!=e.substring(o,o+1).match(/[^\x00-\xff]/gi)?t+=1:a+=1;return 2*t+a}},getAccountData:function(e){var t=this;if(e){var a="/sgpm/rest/api/integration/data/budgets/information/"+this.userinfo.account_id+"?contractNumber="+e;Object(h.Y)(a,null).then(function(e){var a=e.data.data;t.accountTableData[0].budgetMoney=a.shishifeiyongBudget,t.accountTableData[1].budgetMoney=a.rengongfeiyongBudget,t.accountTableData[2].budgetMoney=a.yunyingfeiyongBudget,t.accountTableData[3].budgetMoney=a.xiaoshoufeiyongBudget,t.accountTableData[4].budgetMoney=a.caigouchengbenBudget,t.accountTableData[5].budgetMoney=a.totalBudget,x.a.$emit("accountTableData",t.accountTableData);var o=n()(t.accountTableData);localStorage.setItem("ProjectAccountParams",o)}).catch(function(e){})}},handleSaveProjectRisk:function(e){Object(h._29)("/sgpm/rest/api/server/pm/project/risk",e).then(function(e){200==e.data.code?x.a.$emit("ProjectriskSave",{code:200,success:!0}):alert("保存失败")}).catch(function(e){})},handleSaveProjectMilestone:function(e,t){var a={};a.projectNumber=e;var o=[];t.forEach(function(e){if(e.deliverableStatus){var t={};t.milestoneName=e.milestoneName,t.isCut=e.isCut,t.progressPercentage=e.progressPercentage,t.sortIndex=1,t.description=e.description,t.milestoneTemplateName=e.milestoneTemplateName,t.estimatedStartDate=e.expectedBeginTime,t.estimatedFinishDate=e.expectedEndTime,t.finishDate=e.actualEndTime,t.estimatedWorkingHours=e.workHours,t.delayDays=e.delayDays,t.status=0,t.stageName=e.stageName,t.id=e.projectMilestoneId;var a=[];e.deliverable.forEach(function(e){if(e.checkedStatus){var t={};t.deliverableName=e.deliverableName,t.isCut=e.isCut,t.auditDeliverable=e.auditDeliverable,void 0==e.deliverableTemplateId?t.deliverableTemplateId=e.deliverableId:t.id=e.deliverableId,t.contractDeliverable=e.contractDeliverable,t.description=e.description,t.status=1,a.push(t)}}),t.deliverable=a,o.push(t)}}),a.milestones=o,Object(h._29)("/sgpm/rest/api/server/pm/project/milestones",a).then(function(t){t.data,200==t.data.code?x.a.$emit("ProjectMilestoneSave",{projectNumber:e,success:!0}):alert("保存失败")}).catch(function(e){})},beforeDestroy:function(){x.a.$off()}}},R={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-col",{staticClass:"projectview",attrs:{span:24}},[a("generate-form",{ref:"generateForm",attrs:{data:e.jsonData,remote:e.remoteFuncs,value:e.editData,globalParams:e.globalParams}}),e._v(" "),a("div",{staticClass:"btns"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],attrs:{type:"primary",size:"mini",disabled:e.isSave},on:{click:e.saveDate}},[e._v("保存")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],attrs:{type:"primary",size:"mini",disabled:e.disabled},on:{click:e.handleSubmit}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.back}},[e._v("返回")])],1)],1)},staticRenderFns:[]};var L=a("VU/8")(A,R,!1,function(e){a("ht9v"),a("NBzD")},"data-v-07fedc7d",null).exports,B=a("K/Lq"),U=a.n(B),$={name:"project-test",components:{GenerateForm:m.a},beforeRouteEnter:function(e,t,a){a(function(e){})},beforeRouteUpdate:function(e,t,a){a()},beforeRouteLeave:function(e,t,a){a(function(e){})},data:function(){return{jsonData:{list:[],config:{labelPosition:"left",labelWidth:100,size:"small"}},editData:{},remoteFuncs:{}}},computed:M()({},Object(F.c)(["userinfo"])),mounted:function(){this.init()},methods:{init:function(){var e=this;if(this.userinfo){var t={memberId:this.userinfo.memberid,menuId:7};Object(h.N)("/template",t).then(function(t){e.jsonData=t.data.data}).catch(function(e){})}},handleSubmit:function(){this.$refs.generateForm.getData().then(function(e){}).catch(function(e){})}}},z={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-col",{staticClass:"out-main",attrs:{span:24}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}})],1)},staticRenderFns:[]};var W=a("VU/8")($,z,!1,function(e){a("oiKx")},null,null).exports,V={name:"project-test",components:{GenerateForm:m.a},data:function(){return{jsonData:{list:[{type:"contractList",name:"",icon:"icon-jilianxuanze",isShow:"true",options:{defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",pro_type:"",props:{value:"value",label:"label",children:"children"},listened:!0,listen:[],remoteFunc:"func_1572339944000_16812"},key:"1572339944000_16812",model:"contractList_1572339944000_16812",rules:[]}],config:{labelWidth:100,labelPosition:"top",size:"small"}},editData:{},remoteFuncs:{}}},computed:M()({},Object(F.c)(["userinfo"])),mounted:function(){},methods:{handleSubmit:function(){this.$refs.generateForm.getData().then(function(e){}).catch(function(e){})}}},q={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-col",{staticClass:"out-main",attrs:{span:24}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}})],1)},staticRenderFns:[]};var K=a("VU/8")(V,q,!1,function(e){a("jUS9")},null,null).exports,Y={name:"projectChange",components:{GenerateForm:m.a},data:function(){return{jsonData:{list:[{type:"projectChange",name:"",icon:"icon-jilianxuanze",isShow:"true",options:{defaultValue:[],width:"",placeholder:"",remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1570689758000_83522"},key:"1570689758000_83522",model:"projectChange_1570689758000_83522",rules:[]}],config:{labelWidth:100,labelPosition:"top",size:"small"}},editData:{},remoteFuncs:{}}},computed:M()({},Object(F.c)(["userinfo"])),mounted:function(){},methods:{init:function(){var e=this,t={memberId:this.userinfo.memberid,menuId:7};Object(h.N)("/template",t).then(function(t){e.jsonData=t.data.data}).catch(function(e){})},handleSubmit:function(){this.$refs.generateForm.getData().then(function(e){}).catch(function(e){})}}},G={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-col",{staticClass:"out-main",attrs:{span:24}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}})],1)},staticRenderFns:[]};var H=a("VU/8")(Y,G,!1,function(e){a("Lm+e")},null,null).exports,J={name:"project-test",components:{GenerateForm:m.a},data:function(){return{jsonData:{list:[],config:{labelPosition:"left",labelWidth:100,size:"small"}},editData:{},remoteFuncs:{}}},computed:M()({},Object(F.c)(["userinfo"]),{asideHeight:function(){return document.documentElement.clientHeight-90}}),mounted:function(){this.userinfo.memberid;this.jsonData={list:[{type:"tabs",name:"",icon:"icon-jilianxuanze",isShow:"true",tabs:[{name:"我提交待审核的项目"},{name:"待我审核的项目"}],options:{defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1564021082000_73055"},key:"1564021082000_73055",model:"tabs_1564021082000_73055",rules:[]}],config:{labelWidth:100,labelPosition:"top",size:"small"}}},methods:{handleSubmit:function(){this.$refs.generateForm.getData().then(function(e){}).catch(function(e){})}}},Q={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"audititem"},[t("el-col",{attrs:{span:24}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}})],1)],1)},staticRenderFns:[]};a("VU/8")(J,Q,!1,function(e){a("NaLQ")},null,null).exports;var X={name:"AuditTable",components:{GenerateForm:m.a},data:function(){return{jsonData:{list:[{type:"tabs",name:"",icon:"icon-jilianxuanze",isShow:"true",tabs:[{name:"待审流程"},{name:"已发流程"},{name:"待发流程"}],options:{defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1563958033000_83495"},key:"1563958033000_83495",model:"tabs_1563958033000_83495",rules:[]}],config:{labelWidth:100,labelPosition:"top",size:"small"}},editData:{},remoteFuncs:{}}},methods:{}},Z={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-col",{staticClass:"out-main",attrs:{span:24}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}})],1)},staticRenderFns:[]};var ee=a("VU/8")(X,Z,!1,function(e){a("WrWp"),a("bc9r")},"data-v-6c8cccd6",null).exports,te=a("4Njg"),ae={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-col",{staticClass:"projectview busniess",attrs:{span:24}},[a("p",{staticClass:"back"},[a("i",{staticClass:"el-icon-back back-size",on:{click:e.back}})]),e._v(" "),a("generate-form",{ref:"generateForm",attrs:{data:e.jsonData,remote:e.remoteFuncs,value:e.editData,globalParams:e.globalParams}}),e._v(" "),a("div",{staticClass:"btns"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],attrs:{type:"primary",size:"mini",disabled:e.isSave},on:{click:e.saveDate}},[e._v("保存")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow&&2==e.isRevoke,expression:"isShow && isRevoke == 2"}],attrs:{type:"primary",size:"mini",disabled:e.disabled},on:{click:e.handleSubmit}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.back}},[e._v("返回")])],1)],1)},staticRenderFns:[]};var oe=function(e){a("eQYL"),a("8NtG")},ne=a("VU/8")(te.a,ae,!1,oe,"data-v-3f67e926",null).exports,ie=a("gyMJ"),re={name:"CreateFrom_setname",components:{GenerateForm:m.a,GenetateFormItem:j.a},data:function(){return{isShow:1!=this.$route.query.isShow,isSave:!1,jsonData:{list:"",config:{labelPosition:"left",labelWidth:100,size:"small"}},projectData:[],pId:"",pNum:"",projectId:this.$route.query.id,contractNumber:this.$route.query.contractNumber,editData:{},remoteFuncs:{},globalParams:{},projectInfo:[],deptInfo:[],disabled:!1}},computed:M()({},Object(F.c)(["userinfo","isDetail"]),{isRevoke:function(){return sessionStorage.getItem("isRevoke")}}),created:function(){var e=this,t=localStorage.getItem("businessProjectId");this.globalParams.account_id=this.userinfo.account_id,this.globalParams.memberId=this.userinfo.memberid,this.globalParams.subdept_id=this.userinfo.subdept_id,this.globalParams.businessProjectId=t,this.initModule(),t&&this.initBusinessData(t),this.initModuleDept(),this.getDept(),this.$nextTick(function(){x.a.$on("audit",function(t){var a=t.obj,o=t.projectId;e.globalParams.businessProjectId=o,e.$set(e.globalParams,"data",a),e.$set(e.globalParams,"data1",a),e.globalParams.data=a})}),"/Contractproject?judgelogo=b"==this.$route.fullPath&&(localStorage.removeItem("keyWords"),localStorage.removeItem("keytechnologys"))},mounted:function(){var e=this;x.a.$on("contractInfo",function(t){t&&(e.itemInfo=t)}),x.a.$on("keyword",function(t){t&&(e.keywordList=t)}),x.a.$on("keytechnology",function(t){t&&(e.keytechnologyList=t)}),x.a.$on("projectlevel",function(t){t&&(e.projectlevel=t)});var t="/template/2/"+this.userinfo.account_id;Object(h.W)(t).then(function(t){e.jsonData=t.data.data}).catch(function(e){})},methods:{getDept:function(){var e=this,t=this.userinfo.subdept_id,a=ie.a.urlPort05+"/sgpm/rest/api/system/second/dept/"+t;this.axios.get(a).then(function(t){e.deptInfo=t.data.data}).catch(function(e){})},warnMessage:function(){this.$message({showClose:!0,message:"项目关键字不能为空",type:"warning"})},warnMessage2:function(){this.$message({showClose:!0,message:"拟使用的关键技术不能为空",type:"warning"})},initModule:function(){var e=this;localStorage.removeItem("globalParams"),localStorage.removeItem("keyWords"),localStorage.removeItem("keytechnologys"),this.$nextTick(function(){if(e.contractNumber){localStorage.removeItem("globalParams");var t="/sgpm/rest/api/integration/data/contract/"+e.userinfo.account_id+"?contractNumber="+e.contractNumber;Object(h.F)(t,null).then(function(t){e.$set(e.globalParams,"data",t.data.data),setTimeout(function(){localStorage.setItem("globalParams",n()(e.updateJsonData(t.data.data))),t.data.data.KEYWORD||(t.data.data.KEYWORD=""),t.data.data.KEYTECHNOLOGY||(t.data.data.KEYTECHNOLOGY=""),localStorage.setItem("keyWords",t.data.data.KEYWORD),localStorage.setItem("keytechnologys",t.data.data.KEYTECHNOLOGY)},500),e.projectInfo=t.data.data})}else x.a.$on("contactcontract",function(t){t.model;var a=t.val;if(/.*[\u4e00-\u9fa5]+.*$/.test(a)){var o=a.lastIndexOf("-");return a=a.substring(0,o)}var n="/sgpm/rest/api/integration/data/contract/"+e.userinfo.account_id+"?contractNumber="+a;Object(h.F)(n,null).then(function(t){e.$set(e.globalParams,"data",t.data.data),e.projectInfo=t.data.data})})})},initModuleDept:function(){this.$nextTick(function(){x.a.$on("implementationsecondary",function(e){e.model,e.val})})},initBusinessData:function(e){var t=this;localStorage.removeItem("keyWords"),localStorage.removeItem("keytechnologys"),Object(h._19)("/sgpm/rest/api/server/pm/project?projectId="+e,null).then(function(e){localStorage.removeItem("globalParams"),localStorage.setItem("keyWords",e.data.data.KEYWORD),localStorage.setItem("keytechnologys",e.data.data.KEYTECHNOLOGY),t.$set(t.globalParams,"data",e.data.data),localStorage.setItem("globalParams",n()(t.updateJsonData(e.data.data))),t.$set(t.globalParams,"data",e.data.data),localStorage.setItem("globalParams",n()(t.updateJsonData(e.data.data))),t.$set(t.globalParams,"CONTRACTMARKET",e.data.data.CONTRACTMARKET),t.$set(t.globalParams,"PROJECTNAME",e.data.data.PROJECTNAME),t.$set(t.globalParams,"PROJECTNUMBER",e.data.data.PROJECTNUMBER),t.$set(t.globalParams,"CONSTRUCTIONCONTENT",e.data.data.CONSTRUCTIONCONTENT),t.$set(t.globalParams,"BUSINESSSYSTEM",e.data.data.BUSINESSSYSTEM)}).catch(function(e){})},updateJsonData:function(e){var t={};for(var a in e)if("CONTRACT"==a)for(var o in e[a])t[o]=e[a][o];else t[a]=e[a];return t},handleSubmit:function(){var e=this;this.disabled=!0,this.isSave=!0;var t=this;this.$refs.generateForm.getData().then(function(a){e.userinfo.account_id;var o="",n="";if(a.implementationsecondary?e.deptInfo.forEach(function(e){e.deptId!=a.implementationsecondary&&e.deptName!=a.implementationsecondary||(o=e.deptName,n=e.deptId)}):(o="",n=""),new Date(a.projectstartdate.replace(/\-/g,"/"))>=new Date(a.projectenddate.replace(/\-/g,"/")))return alert("项目预计开始时间不能大于项目预计结束时间！"),e.disabled=!1,e.isSave=!1,!1;var i="",r="",s="";if(s=void 0==a.businesssystem?"":a.businesssystem,void 0!=t.$route.query.id&&null!=t.$route.query.id&&""==t.pId){if(""==(i=e.keywordList?e.keywordList.join(","):a.keyword))return e.warnMessage(),e.disabled=!1,void(e.isSave=!1);if(""==(r=e.keytechnologyList?e.keytechnologyList.join(","):a.keytechnology))return e.warnMessage2(),e.disabled=!1,void(e.isSave=!1);var l="";l=t.$route.query.id?t.$route.query.id:e.pId;var c="";c=a.projectnumber?a.projectnumber:e.pNum;a={id:l,project:{name:a.projectname,custom_field_values:{13:a.contractnumber,16:a.customercenter,17:a.contractmarket,18:a.contractmoney,19:a.contractsigningdate,22:a.projectlevel,23:a.operationalperiod,24:a.industry,25:a.region,28:a.projectstartdate,29:a.projectenddate,30:a.projecttype,32:i,35:a.constructioncontent,36:r,41:s,42:2,43:a.customerdepartment},parent_id:"",description:"",is_public:"1",user_id:t.userinfo.memberid,user_name:t.userinfo.emp_name,company_name:t.userinfo.account_name,company_id:t.userinfo.account_id,level_one_name:t.userinfo.subdept_name,level_one_id:t.userinfo.subdept_id,level_two_name:o,level_two_id:n,sale_name:a.contractmarket,sale_id:a.saleid,project_no:c},child:0,category:2,account_name:t.userinfo.account_name,username:t.userinfo.login_name,workflow_type:1}}else{if(e.keywordList&&(i=e.keywordList.join(",")),""==i)return e.warnMessage(),e.disabled=!1,void(e.isSave=!1);if(e.keytechnologyList&&(r=e.keytechnologyList.join(",")),""==r)return e.warnMessage2(),e.disabled=!1,void(e.isSave=!1);void 0==e.projectData.project_id&&(e.projectData.project_id="");a={id:e.projectData.project_id,project:{name:a.projectname,custom_field_values:{13:a.contractnumber,16:a.customercenter,17:a.contractmarket,18:a.contractmoney,19:a.contractsigningdate,22:a.projectlevel,23:a.operationalperiod,24:a.industry,25:a.region,28:a.projectstartdate,29:a.projectenddate,30:a.projecttype,32:i,35:a.constructioncontent,36:r,41:s,42:2,43:a.customerdepartment},parent_id:"",description:"",is_public:"1",user_id:e.userinfo.memberid,user_name:e.userinfo.emp_name,company_name:e.userinfo.account_name,company_id:e.userinfo.account_id,level_one_name:e.userinfo.subdept_name,level_one_id:e.userinfo.subdept_id,level_two_name:o,level_two_id:n,sale_name:a.contractmarket,sale_id:e.projectInfo.FIELD0022,project_no:a.projectnumber},child:0,category:2,account_name:e.userinfo.account_name,username:e.userinfo.login_name,workflow_type:1}}Object(h._33)("/sgpm/rest/api/integration/oa/flow",a).then(function(t){200==t.data.code?(e.disabled=!0,e.isSave=!1,alert("提交成功!"),e.$router.push({path:"audititem"})):501==t.data.code?(e.disabled=!1,e.isSave=!1,e.pId=t.data.data.project_id,e.pNum=t.data.data.project_no,alert("提交失败!")):(e.disabled=!1,e.isSave=!1,alert("提交失败!"))}).catch(function(t){e.disabled=!1,e.isSave=!1,alert("提交失败!")})}).catch(function(t){e.disabled=!1,e.isSave=!1})},saveDate:function(){var e=this;this.isSave=!0,this.disabled=!0;var t=this;this.$refs.generateForm.getData().then(function(a){var o="",n="";if(a.implementationsecondary?e.deptInfo.forEach(function(e){e.deptId!=a.implementationsecondary&&e.deptName!=a.implementationsecondary||(o=e.deptName,n=e.deptId)}):(o="",n=""),new Date(a.projectstartdate.replace(/\-/g,"/"))>=new Date(a.projectenddate.replace(/\-/g,"/")))return alert("项目预计开始时间不能大于项目预计结束时间！"),e.isSave=!1,e.disabled=!1,!1;var i="",r="";if(void 0!=t.$route.query.id&&null!=t.$route.query.id||e.pId){if(""==(i=e.keywordList?e.keywordList.join(","):a.keyword))return e.warnMessage(),e.isSave=!1,void(e.disabled=!1);if(""==(r=e.keytechnologyList?e.keytechnologyList.join(","):a.keytechnology))return e.warnMessage2(),e.isSave=!1,void(e.disabled=!1);var s="";s=t.$route.query.id?t.$route.query.id:e.pId;var l="";l=a.projectnumber?a.projectnumber:e.pNum;a={id:s,project:{name:a.projectname,custom_field_values:{13:a.contractnumber,16:a.customercenter,17:a.contractmarket,18:a.contractmoney,19:a.contractsigningdate,22:a.projectlevel,23:a.operationalperiod,24:a.industry,25:a.region,28:a.projectstartdate,29:a.projectenddate,30:a.projecttype,32:i,35:a.constructioncontent,36:r,41:a.businesssystem,42:2,43:a.customerdepartment},parent_id:"",description:"",is_public:"1",user_id:t.userinfo.memberid,user_name:t.userinfo.emp_name,company_name:t.userinfo.account_name,company_id:t.userinfo.account_id,level_one_name:t.userinfo.subdept_name,level_one_id:t.userinfo.subdept_id,level_two_name:o,level_two_id:n,sale_name:a.contractmarket,sale_id:a.saleid,project_no:l},child:0,category:2,account_name:t.userinfo.account_name}}else{if(void 0==e.projectData.project_id&&(e.projectData.project_id=""),e.keywordList&&(i=e.keywordList.join(",")),""==i)return e.warnMessage(),e.isSave=!1,void(e.disabled=!1);if(""==(r=(e.keytechnologyList,e.keytechnologyList.join(","))))return e.warnMessage2(),e.isSave=!1,void(e.disabled=!1);a={id:e.projectData.project_id,project:{name:a.projectname,custom_field_values:{13:a.contractnumber,16:a.customercenter,17:a.contractmarket,18:a.contractmoney,19:a.contractsigningdate,22:a.projectlevel,23:a.operationalperiod,24:a.industry,25:a.region,28:a.projectstartdate,29:a.projectenddate,30:a.projecttype,32:i,35:a.constructioncontent,36:r,41:a.businesssystem,42:2,43:a.customerdepartment},parent_id:"",description:"",is_public:"1",user_id:e.userinfo.memberid,user_name:e.userinfo.emp_name,company_name:e.userinfo.account_name,company_id:e.userinfo.account_id,level_one_name:e.userinfo.subdept_name,level_one_id:e.userinfo.subdept_id,level_two_name:o,level_two_id:n,sale_name:a.contractmarket,sale_id:e.projectInfo.FIELD0022,project_no:a.projectnumber},child:0,category:2,account_name:e.userinfo.account_name}}Object(h._25)("/sgpm/rest/api/server/pm/project",a).then(function(t){if(200==t.data.code){alert("保存成功!"),e.isSave=!1,e.disabled=!1;var a=t.data.data;e.pId=t.data.data.project_id,e.pNum=t.data.data.project_no,e.projectData=a;a.project_no;for(var o=e.jsonData.list,n=0;n<o.length;n++)for(var i=0;i<o[n].columns.length;i++)for(var r=0;r<o[n].columns[i].list.length;r++)"projectnumber"==o[n].columns[i].list[r].model&&(o[n].columns[i].list[r].options.placeholder=t.data.data.value)}else alert("保存失败!"),e.isSave=!1,e.disabled=!1}).catch(function(t){alert("保存失败!"),e.isSave=!1,e.disabled=!1})}).catch(function(t){e.isSave=!1,e.disabled=!1})},back:function(){this.$router.go(-1)}}},se={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-col",{staticClass:"projectview",attrs:{span:24}},[a("p",{staticClass:"back"},[a("i",{staticClass:"el-icon-back back-size",on:{click:e.back}})]),e._v(" "),a("generate-form",{ref:"generateForm",attrs:{data:e.jsonData,remote:e.remoteFuncs,value:e.editData,globalParams:e.globalParams}}),e._v(" "),a("div",{staticClass:"btn-item"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],attrs:{type:"primary",size:"mini",disabled:e.isSave},on:{click:e.saveDate}},[e._v("保存")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow&&2==e.isRevoke,expression:"isShow && isRevoke == 2"}],attrs:{type:"primary",size:"mini",disabled:e.disabled},on:{click:e.handleSubmit}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.back}},[e._v("返回")])],1)],1)},staticRenderFns:[]};var le=a("VU/8")(re,se,!1,function(e){a("boDl"),a("TKHo")},"data-v-03b831a6",null).exports,ce={name:"sysMenu",components:{GenerateForm:m.a},data:function(){return{jsonData:{list:[],config:{labelPosition:"left",labelWidth:100,size:"small"}},editData:{},remoteFuncs:{}}},computed:M()({},Object(F.c)(["userinfo"]),{asideHeight:function(){return document.documentElement.clientHeight-90}}),mounted:function(){this.userinfo.memberid;this.jsonData={list:[{type:"grid",name:"栅格布局",icon:"icon-grid-",columns:[{span:8,list:[{type:"tree",name:"",icon:"icon-jilianxuanze",isShow:"true",options:{defaultValue:[],width:"",placeholder:"",disabled:!1,radio:"1",isShowBtn:"1",isSpace:"1",clearable:!1,remote:!0,remoteOptions:[],url_a:"/sgpm/rest/api/system/portal/menus",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1560134603000_27742"},key:"1560134603000_27742",model:"tree_1560134603000_27742",rules:[]}]},{span:16,list:[{type:"tabs",name:"",icon:"icon-jilianxuanze",isShow:"true",tabs:[{name:"菜单信息"}],options:{defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1560134605000_62087"},key:"1560134605000_62087",model:"tabs_1560134605000_62087",rules:[]}]}],options:{gutter:20,justify:"start",align:"top",remoteFunc:"func_1560134552000_25825"},key:"1560134552000_25825",model:"grid_1560134552000_25825",rules:[]}],config:{labelWidth:100,labelPosition:"top",size:"small"}}},methods:{handleSubmit:function(){this.$refs.generateForm.getData().then(function(e){}).catch(function(e){})}}},ue={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-row",{staticClass:"sys-main",style:{height:this.asideHeight+"px"}},[t("el-col",{attrs:{span:24}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}})],1)],1)},staticRenderFns:[]};var de=a("VU/8")(ce,ue,!1,function(e){a("K7Gf")},null,null).exports,pe={name:"sysMenu",components:{GenerateForm:m.a},data:function(){return{jsonData:{list:[],config:{labelPosition:"left",labelWidth:100,size:"small"}},editData:{},remoteFuncs:{}}},computed:M()({},Object(F.c)(["userinfo"]),{asideHeight:function(){return document.documentElement.clientHeight-90}}),mounted:function(){this.userinfo.memberid;this.jsonData={list:[{type:"grid",name:"栅格布局",icon:"icon-grid-",columns:[{span:9,list:[{type:"tree",name:"树组件",icon:"icon-jilianxuanze",isShow:1,isLeaf:0,path:"",code:"",label:"",options:{defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],radio:"1",isShowBtn:"1",isSpace:"0",url_a:"/sgpm/rest/api/system/role",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1560311150000_20064"},key:"1560311150000_20064",model:"tree_1560311150000_20064",rules:[]}]},{span:15,list:[{type:"tabs",name:"",icon:"icon-jilianxuanze",isShow:"true",tabs:[{name:"角色信息"},{name:"成员信息"},{name:"监管部门"}],options:{defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1560311152000_66887"},key:"1560311152000_66887",model:"tabs_1560311152000_66887",rules:[]}]}],options:{gutter:20,justify:"start",align:"top",remoteFunc:"func_1560311141000_55905"},key:"1560311141000_55905",model:"grid_1560311141000_55905",rules:[]}],config:{labelWidth:100,labelPosition:"top",size:"small"}}},methods:{handleSubmit:function(){this.$refs.generateForm.getData().then(function(e){}).catch(function(e){})}}},me={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-row",{staticClass:"sys-main",style:{height:this.asideHeight+"px"}},[t("el-col",{attrs:{span:24}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}})],1)],1)},staticRenderFns:[]};var he=a("VU/8")(pe,me,!1,function(e){a("qr7v")},null,null).exports,_e={name:"sysAuthority",components:{GenerateForm:m.a},data:function(){return{jsonData:{list:[],config:{labelPosition:"left",labelWidth:100,size:"small"}},editData:{},remoteFuncs:{}}},computed:M()({},Object(F.c)(["userinfo"]),{asideHeight:function(){return document.documentElement.clientHeight-90}}),mounted:function(){this.userinfo.memberid;this.jsonData={list:[{type:"grid",name:"栅格布局",icon:"icon-grid-",columns:[{span:8,list:[{type:"tree",name:"树组件",icon:"icon-jilianxuanze",isShow:1,isLeaf:0,path:"",code:"",label:"",options:{defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],radio:"1",isShowBtn:"0",isSpace:"1",url_a:"/sgpm/rest/api/system/role",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1560388835000_79413"},key:"1560388835000_79413",model:"tree_1560388835000_79413",rules:[]}]},{span:16,list:[{type:"tabs",name:"",icon:"icon-jilianxuanze",isShow:"true",tabs:[{name:"菜单授权"}],options:{defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1560388840000_55484"},key:"1560388840000_55484",model:"tabs_1560388840000_55484",rules:[]}]}],options:{gutter:20,justify:"start",align:"top",remoteFunc:"func_1560388822000_9569"},key:"1560388822000_9569",model:"grid_1560388822000_9569",rules:[]}],config:{labelWidth:100,labelPosition:"top",size:"small"}}},methods:{handleSubmit:function(){this.$refs.generateForm.getData().then(function(e){}).catch(function(e){})}}},fe={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-row",{staticClass:"sys-main",style:{height:this.asideHeight+"px"}},[t("el-col",{attrs:{span:24}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}})],1)],1)},staticRenderFns:[]};var ge=a("VU/8")(_e,fe,!1,function(e){a("Wp+L")},null,null).exports,be=(a("t6md"),{name:"ProjectInfo",components:{GenerateForm:m.a},beforeRouteEnter:function(e,t,a){a(function(e){e.$parent.$children[0].getMenuList()})},beforeRouteUpdate:function(e,t,a){a()},beforeRouteLeave:function(e,t,a){a()},data:function(){return{currentProgress:0,jsonData:{list:[],config:{labelPosition:"left",labelWidth:100,size:"small"}},editData:{},remoteFuncs:{},judgeproject:localStorage.getItem("judgeproject"),isShow:1!=this.$route.query.isShow,projectId:localStorage.getItem("projectId"),boxLoading:!1,isSave:!1}},computed:M()({},Object(F.c)(["userinfo"]),{isActive:function(){return"分包项目信息"==this.judgeproject?"projectview":"out-main"},isRevoke:function(){return sessionStorage.getItem("isRevoke")}}),watch:{$route:function(e,t){this.$router.go(0)}},mounted:function(){"分包项目信息"==this.judgeproject?this.getSubPackage():"非合同项目信息"==localStorage.getItem("judgeproject")||"11"==localStorage.getItem("jump_type")?this.notProListInit():this.init(),this.getLatelyList()},created:function(){"分包项目信息"==this.judgeproject&&this.getSubData(this.projectId)},methods:{back:function(){this.$router.go(-1)},getSubPackage:function(){"7603819741782557558"==this.userinfo.memberid?this.jsonData={list:[{columns:[{list:[{name:"自定义文字",icon:"icon-row",options:{remoteFunc:"func_1566268705000_2153",defaultValue:"",width:"100%",pattern:"",disabled:!1,listened:!1,placeholder:"分包项目登记表",required:!1},model:"row_1566268705000_2153",rules:[],type:"row",key:"1566268705000_2153",isShow:"false"},{icon:"icon-divider",options:{remoteFunc:"func_1566370404000_62453",defaultValue:"",width:"100%",pattern:"",disabled:!1,listened:!1,placeholder:"",required:!1},model:"divider_1566370404000_62453",rules:[],type:"divider",key:"1566370404000_62453",isShow:"false"}],span:24}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1566268698000_72220",gutter:0,justify:"start",listened:!1,align:"top"},model:"grid_1566268698000_72220",rules:[],type:"grid",key:"1566268698000_72220"},{columns:[{list:[{type:"input",name:"采购合同编号",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098344000_20458",listened:!1},key:"1599098344000_20458",model:"purchasecontractnumber",rules:[{type:"string",message:"采购合同编号格式不正确"}]},{type:"input",name:"关联销售合同编号",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098405000_49854",listened:!1},key:"1599098405000_49854",model:"salescontractnumber",rules:[]},{type:"input",name:"关联销售合同额",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098451000_87364"},key:"1599098451000_87364",model:"salescontractamount",rules:[]},{type:"input",name:"关联项目编号",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098485000_30755"},key:"1599098485000_30755",model:"projectnumber",rules:[]}],span:12},{list:[{type:"input",name:"采购合同名称",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098383000_91367",listened:!1},key:"1599098383000_91367",model:"purchasecontractname",rules:[{type:"string",message:"采购合同名称格式不正确"}]},{type:"input",name:"关联销售合同名称",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098430000_35882"},key:"1599098430000_35882",model:"salescontractname",rules:[]},{type:"input",name:"经费类型",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098469000_12650"},key:"1599098469000_12650",model:"typeoffunding",rules:[]},{type:"input",name:"关联项目名称",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098500000_51261"},key:"1599098500000_51261",model:"projectname",rules:[]}],span:12}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1566268792000_64292",gutter:0,justify:"start",listened:!1,align:"top"},model:"grid_1566268792000_64292",rules:[],type:"grid",key:"1566268792000_64292"},{columns:[{list:[{name:"自定义文字",icon:"icon-row",options:{remoteFunc:"func_1566370428000_86732",defaultValue:"",width:"100%",pattern:"",disabled:!1,listened:!1,placeholder:"分包项目信息",required:!1},model:"row2_1566370428000_86732",rules:[],type:"row2",key:"1566370428000_86732",isShow:"false"}],span:24}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1566370415000_91126",gutter:0,justify:"start",listened:!1,align:"top"},model:"grid_1566370415000_91126",rules:[],type:"grid",key:"1566370415000_91126"},{type:"grid",name:"栅格布局",icon:"icon-grid-",columns:[{span:12,list:[{type:"input",name:"分包业务类型",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!0,dataType:"string",pattern:"",placeholder:"",disabled:!1,remoteFunc:"func_1599098615000_38474",listened:!1},key:"1599098615000_38474",model:"subcontractingbusinesstype",rules:[{type:"string",message:"分包业务类型格式不正确"},{required:!0,message:"分包业务类型必须填写"}]},{type:"input",name:"所属机构",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098669000_14780"},key:"1599098669000_14780",model:"affiliation",rules:[]},{type:"input",name:"所属部门",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098718000_7822"},key:"1599098718000_7822",model:"department",rules:[]},{type:"input",name:"乙方单位",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098746000_43613"},key:"1599098746000_43613",model:"partybunit",rules:[]},{type:"input",name:"我方项目经理",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!0,dataType:"string",pattern:"",placeholder:"",disabled:!1,remoteFunc:"func_1599098781000_49408"},key:"1599098781000_49408",model:"ourprojectmanager",rules:[{required:!0,message:"我方项目经理必须填写"}]},{type:"input",name:"关联项目经费(元)",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098826000_27156"},key:"1599098826000_27156",model:"relatedprojectfunding",rules:[{type:"string",message:"关联项目经费(元)格式不正确"}]},{type:"date",name:"项目开始时间",icon:"icon-date",isShow:"true",options:{defaultValue:"",readonly:!1,disabled:!1,editable:!0,clearable:!0,placeholder:"",startPlaceholder:"",endPlaceholder:"",type:"date",format:"yyyy-MM-dd",timestamp:!1,required:!0,width:"50%",remote:!0,filterable:!1,remoteFunc:"func_1599098913000_15610",listened:!1},key:"1599098913000_15610",model:"projectstarttime",rules:[{required:!0,message:"项目开始时间必须填写"}]},{type:"date",name:"项目结束时间",icon:"icon-date",isShow:"true",options:{defaultValue:"",readonly:!1,disabled:!1,editable:!0,clearable:!0,placeholder:"",startPlaceholder:"",endPlaceholder:"",type:"date",format:"yyyy-MM-dd",timestamp:!1,required:!0,width:"50%",remote:!0,filterable:!1,remoteFunc:"func_1599098980000_4568"},key:"1599098980000_4568",model:"projectendtime",rules:[{required:!0,message:"项目结束时间必须填写"}]}]},{span:12,list:[{type:"input",name:"分包方式",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098633000_60503"},key:"1599098633000_60503",model:"subcontractingtheway",rules:[]},{type:"input",name:"合作地区(省市区)",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098690000_41391"},key:"1599098690000_41391",model:"cooperationarea",rules:[]},{type:"input",name:"所属中心",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098731000_99217"},key:"1599098731000_99217",model:"affiliatedcenter",rules:[]},{type:"input",name:"联系人",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!0,dataType:"string",pattern:"",placeholder:"",disabled:!1,remoteFunc:"func_1599098760000_28135"},key:"1599098760000_28135",model:"contactperson",rules:[{type:"string",message:"联系人格式不正确"},{required:!0,message:"联系人必须填写"}]},{type:"input",name:"电话",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!0,dataType:"string",pattern:"",placeholder:"",disabled:!1,remoteFunc:"func_1599098808000_50134",listened:!1},key:"1599098808000_50134",model:"telephone",rules:[{type:"string",message:"电话格式不正确"},{required:!0,message:"电话必须填写"}]},{name:"试点情况",icon:"icon-select",options:{remoteFunc:"func_1575524687000_30869",filterable:!1,clearable:!1,defaultValue:"新选项",remoteOptions:[],multiple:!1,remote:!1,required:!0,showLabel:!1,props:{label:"label",value:"value"},width:"50%",options:[{value:"通过"},{value:"不通过"},{value:"无"}],disabled:!1,listened:!1,placeholder:""},model:"pilotsituation",rules:[{required:!0,message:"试点情况必须填写"}],type:"select",config:{labelPosition:""},url:"",key:"1575524687000_30869",isShow:"true"},{type:"input",name:"分包项目进度(%)",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!0,dataType:"string",pattern:"",placeholder:"",disabled:!1,remoteFunc:"func_1599098947000_56104"},key:"1599098947000_56104",model:"subcontractingprojectprogress",rules:[{type:"string",message:"分包项目进度(%)格式不正确"},{required:!0,message:"分包项目进度(%)必须填写"}]},{name:"满意度评价",icon:"icon-select",options:{remoteFunc:"func_1575524687000_30864",filterable:!1,clearable:!1,defaultValue:"新选项",remoteOptions:[],multiple:!1,remote:!1,required:!0,showLabel:!1,props:{label:"label",value:"value"},width:"50%",options:[{value:"优质"},{value:"良好"},{value:"一般"},{value:"较差"}],disabled:!1,listened:!1,placeholder:""},model:"satisfactionevaluation",rules:[{required:!0,message:"满意度评价必须填写"}],type:"select",config:{labelPosition:""},url:"",key:"1575524687000_30864",isShow:"true"}]}],options:{gutter:0,justify:"start",align:"top",remoteFunc:"func_1599098610000_78782",listened:!1},key:"1599098610000_78782",model:"grid_1599098610000_78782",rules:[]},{columns:[{list:[{name:"自定义文字",icon:"icon-row",options:{remoteFunc:"func_1566370451000_98859",defaultValue:"",width:"100%",pattern:"",disabled:!1,placeholder:"分包合同信息",required:!1},model:"row2_1566370451000_98859",rules:[],type:"row2",key:"1566370451000_98859",isShow:"false"},{type:"contractInformation",name:"分包合同信息",icon:"icon-jilianxuanze",isShow:"false",url:"",options:{defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1599197559000_60826",listened:!1},key:"1599197559000_60826",model:"contractInformation_1599197559000_60826",rules:[]},{type:"row2",name:"自定义文字",icon:"icon-row",isShow:"false",options:{width:"100%",defaultValue:"",required:!1,pattern:"",placeholder:"分包合同付款信息",disabled:!1,remoteFunc:"func_1599197555000_72586",listened:!1},key:"1599197555000_72586",model:"row2_1599197555000_72586",rules:[]}],span:24}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1566370442000_43293",gutter:0,justify:"start",align:"top",listened:!1},model:"grid_1566370442000_43293",rules:[],type:"grid",key:"1566370442000_43293"},{type:"grid",name:"栅格布局",icon:"icon-grid-",columns:[{span:24,list:[{type:"paymentInformation",name:"分包项目登记表",icon:"icon-jilianxuanze",isShow:"false",url:"",options:{defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1599114227000_70501",listened:!1},key:"1599114227000_70501",model:"paymentInformation_1599114227000_70501",rules:[]}]}],options:{gutter:0,justify:"start",align:"top",remoteFunc:"func_1599114187000_21298",listened:!1},key:"1599114187000_21298",model:"grid_1599114187000_21298",rules:[]}],config:{size:"small",labelPosition:"right",labelWidth:170}}:this.jsonData={list:[{columns:[{list:[{name:"自定义文字",icon:"icon-row",options:{remoteFunc:"func_1566268705000_2153",defaultValue:"",width:"100%",pattern:"",disabled:!1,listened:!1,placeholder:"分包项目登记表",required:!1},model:"row_1566268705000_2153",rules:[],type:"row",key:"1566268705000_2153",isShow:"false"},{icon:"icon-divider",options:{remoteFunc:"func_1566370404000_62453",defaultValue:"",width:"100%",pattern:"",disabled:!1,listened:!1,placeholder:"",required:!1},model:"divider_1566370404000_62453",rules:[],type:"divider",key:"1566370404000_62453",isShow:"false"}],span:24}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1566268698000_72220",gutter:0,justify:"start",listened:!1,align:"top"},model:"grid_1566268698000_72220",rules:[],type:"grid",key:"1566268698000_72220"},{columns:[{list:[{type:"input",name:"采购合同编号",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098344000_20458",listened:!1},key:"1599098344000_20458",model:"purchasecontractnumber",rules:[{type:"string",message:"采购合同编号格式不正确"}]},{type:"input",name:"关联销售合同编号",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098405000_49854",listened:!1},key:"1599098405000_49854",model:"salescontractnumber",rules:[]},{type:"input",name:"关联销售合同额",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098451000_87364"},key:"1599098451000_87364",model:"salescontractamount",rules:[]},{type:"input",name:"关联项目编号",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098485000_30755"},key:"1599098485000_30755",model:"projectnumber",rules:[]}],span:12},{list:[{type:"input",name:"采购合同名称",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098383000_91367",listened:!1},key:"1599098383000_91367",model:"purchasecontractname",rules:[{type:"string",message:"采购合同名称格式不正确"}]},{type:"input",name:"关联销售合同名称",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098430000_35882"},key:"1599098430000_35882",model:"salescontractname",rules:[]},{type:"input",name:"经费类型",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098469000_12650"},key:"1599098469000_12650",model:"typeoffunding",rules:[]},{type:"input",name:"关联项目名称",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098500000_51261"},key:"1599098500000_51261",model:"projectname",rules:[]}],span:12}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1566268792000_64292",gutter:0,justify:"start",listened:!1,align:"top"},model:"grid_1566268792000_64292",rules:[],type:"grid",key:"1566268792000_64292"},{columns:[{list:[{name:"自定义文字",icon:"icon-row",options:{remoteFunc:"func_1566370428000_86732",defaultValue:"",width:"100%",pattern:"",disabled:!1,listened:!1,placeholder:"分包项目信息",required:!1},model:"row2_1566370428000_86732",rules:[],type:"row2",key:"1566370428000_86732",isShow:"false"}],span:24}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1566370415000_91126",gutter:0,justify:"start",listened:!1,align:"top"},model:"grid_1566370415000_91126",rules:[],type:"grid",key:"1566370415000_91126"},{type:"grid",name:"栅格布局",icon:"icon-grid-",columns:[{span:12,list:[{type:"input",name:"分包业务类型",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098615000_38474"},key:"1599098615000_38474",model:"subcontractingbusinesstype",rules:[{type:"string",message:"分包业务类型格式不正确"}]},{type:"input",name:"所属机构",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098669000_14780"},key:"1599098669000_14780",model:"affiliation",rules:[]},{type:"input",name:"所属部门",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098718000_7822"},key:"1599098718000_7822",model:"department",rules:[]},{type:"input",name:"乙方单位",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098746000_43613"},key:"1599098746000_43613",model:"partybunit",rules:[]},{type:"input",name:"我方项目经理",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098781000_49408"},key:"1599098781000_49408",model:"ourprojectmanager",rules:[]},{type:"input",name:"关联项目经费(元)",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098826000_27156"},key:"1599098826000_27156",model:"relatedprojectfunding",rules:[{type:"string",message:"关联项目经费(元)格式不正确"}]},{type:"date",name:"项目开始时间",icon:"icon-date",isShow:"true",options:{defaultValue:"",readonly:!1,disabled:!0,editable:!0,clearable:!0,placeholder:"",startPlaceholder:"",endPlaceholder:"",type:"date",format:"yyyy-MM-dd",timestamp:!1,required:!1,width:"50%",remote:!0,filterable:!1,remoteFunc:"func_1599098913000_15610",listened:!1},key:"1599098913000_15610",model:"projectstarttime",rules:[]},{type:"date",name:"项目结束时间",icon:"icon-date",isShow:"true",options:{defaultValue:"",readonly:!1,disabled:!0,editable:!0,clearable:!0,placeholder:"",startPlaceholder:"",endPlaceholder:"",type:"date",format:"yyyy-MM-dd",timestamp:!1,required:!1,width:"50%",remote:!0,filterable:!1,remoteFunc:"func_1599098980000_4568"},key:"1599098980000_4568",model:"projectendtime",rules:[]}]},{span:12,list:[{type:"input",name:"分包方式",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098633000_60503"},key:"1599098633000_60503",model:"subcontractingtheway",rules:[]},{type:"input",name:"合作地区(省市区)",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098690000_41391"},key:"1599098690000_41391",model:"cooperationarea",rules:[]},{type:"input",name:"所属中心",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098731000_99217"},key:"1599098731000_99217",model:"affiliatedcenter",rules:[]},{type:"input",name:"联系人",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098760000_28135"},key:"1599098760000_28135",model:"contactperson",rules:[]},{type:"input",name:"电话",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098808000_50134"},key:"1599098808000_50134",model:"telephone",rules:[{type:"string",message:"电话格式不正确"}]},{name:"试点情况",icon:"icon-select",options:{remoteFunc:"func_1575524687000_30964",filterable:!1,clearable:!1,defaultValue:"新选项",remoteOptions:[],multiple:!1,remote:!1,required:!1,showLabel:!1,props:{label:"label",value:"value"},width:"50%",options:[{value:"通过"},{value:"不通过"},{value:"无"}],disabled:!0,listened:!1,placeholder:""},model:"pilotSituation",rules:[],type:"select",config:{labelPosition:""},url:"",key:"1575524687000_30964",isShow:"true"},{type:"input",name:"分包项目进度(%)",icon:"icon-input",isShow:"true",url:"",options:{width:"50%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!0,remoteFunc:"func_1599098947000_56104"},key:"1599098947000_56104",model:"subcontractingprojectprogress",rules:[{type:"string",message:"分包项目进度(%)格式不正确"}]},{name:"满意度评价",icon:"icon-select",options:{remoteFunc:"func_1575524687000_30864",filterable:!1,clearable:!1,defaultValue:"新选项",remoteOptions:[],multiple:!1,remote:!1,required:!1,showLabel:!1,props:{label:"label",value:"value"},width:"50%",options:[{value:"优质"},{value:"良好"},{value:"一般"},{value:"较差"}],disabled:!0,listened:!1,placeholder:""},model:"satisfactionevaluation",rules:[],type:"select",config:{labelPosition:""},url:"",key:"1575524687000_30864",isShow:"true"}]}],options:{gutter:0,justify:"start",align:"top",remoteFunc:"func_1599098610000_78782",listened:!1},key:"1599098610000_78782",model:"grid_1599098610000_78782",rules:[]},{columns:[{list:[{name:"自定义文字",icon:"icon-row",options:{remoteFunc:"func_1566370451000_98859",defaultValue:"",width:"100%",pattern:"",disabled:!1,placeholder:"分包合同信息",required:!1},model:"row2_1566370451000_98859",rules:[],type:"row2",key:"1566370451000_98859",isShow:"false"},{type:"contractInformation",name:"分包合同信息",icon:"icon-jilianxuanze",isShow:"false",url:"",options:{defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1599197559000_60826",listened:!1},key:"1599197559000_60826",model:"contractInformation_1599197559000_60826",rules:[]},{type:"row2",name:"自定义文字",icon:"icon-row",isShow:"false",options:{width:"100%",defaultValue:"",required:!1,pattern:"",placeholder:"分包合同付款信息",disabled:!1,remoteFunc:"func_1599197555000_72586",listened:!1},key:"1599197555000_72586",model:"row2_1599197555000_72586",rules:[]}],span:24}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1566370442000_43293",gutter:0,justify:"start",align:"top",listened:!1},model:"grid_1566370442000_43293",rules:[],type:"grid",key:"1566370442000_43293"},{type:"grid",name:"栅格布局",icon:"icon-grid-",columns:[{span:24,list:[{type:"paymentInformation",name:"分包项目登记表",icon:"icon-jilianxuanze",isShow:"false",url:"",options:{defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1599114227000_70501",listened:!1},key:"1599114227000_70501",model:"paymentInformation_1599114227000_70501",rules:[]}]}],options:{gutter:0,justify:"start",align:"top",remoteFunc:"func_1599114187000_21298",listened:!1},key:"1599114187000_21298",model:"grid_1599114187000_21298",rules:[]}],config:{size:"small",labelPosition:"right",labelWidth:170}}},init:function(){var e=this;Object(h.N)("/template/6/5326994013938795629").then(function(t){e.jsonData=t.data.data})},notProListInit:function(){var e=this;Object(h.N)("/template/6/5326994013938795629").then(function(t){e.jsonData={list:[{name:"",icon:"icon-jilianxuanze",tabs:[{name:"基本信息"},{name:"项目工时"}],options:{remoteFunc:"func_1563958033000_83495",clearable:!1,defaultValue:[],remoteOptions:[],remote:!0,props:{children:"children",label:"label",value:"value"},url_d:"",url_b:"",url_c:"",url_a:"",width:"",disabled:!1,placeholder:""},model:"tabs_1563958033000_83495",rules:[],type:"tabs",key:"1563958033000_83495",isShow:"true"}],config:{size:"small",labelPosition:"top",labelWidth:170}}})},getLatelyList:function(){var e=this,t={projectId:this.$route.params.id,userId:this.userinfo.memberid};Object(h._40)("/sgpm/rest/api/server/pm/project/lately",t).then(function(t){200==t.data.code&&Object(h.Q)("/sgpm/rest/api/server/pm/project/lately",{memberId:e.userinfo.memberid}).then(function(e){}).catch(function(e){})}).catch(function(e){})},getSubData:function(e){var t=this;this.boxLoading=!0,localStorage.removeItem("keyWords"),localStorage.removeItem("keytechnologys"),Object(h.Q)("/sgpm/rest/api/server/gt/subcontract/project/"+e).then(function(e){t.boxLoading=!1;var a=e.data.data;x.a.$emit("projectData",a),a&&(localStorage.removeItem("projectData"),localStorage.setItem("projectData",n()(a)),localStorage.setItem("keyWords",e.data.data.KEYWORD),localStorage.setItem("keytechnologys",e.data.data.KEYTECHNOLOGY))}).catch(function(e){})},saveDate:function(){this.$refs.generateForm.getData().then(function(e){e={id:e.id,subcontractingBusinessType:e.subcontractingbusinesstype,contactPerson:e.contactperson,ourProjectManager:e.ourprojectmanager,telephone:e.telephone,pilotSituation:e.pilotsituation,projectStartTime:e.projectstarttime,projectEndTime:e.projectendtime,subcontractingProjectProgress:e.subcontractingprojectprogress,satisfactionEvaluation:e.satisfactionevaluation};Object(h._25)("/sgpm/rest/api/server/gt/subcontract/project",e).then(function(e){200==e.data.code&&alert("保存成功!")}).catch(function(e){alert("保存失败!")})}).catch(function(e){})}}}),ve={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-col",{class:e.isActive,attrs:{span:24}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.boxLoading,expression:"boxLoading"}]},[a("generate-form",{ref:"generateForm",staticClass:"projectInfo",attrs:{data:e.jsonData,remote:e.remoteFuncs,value:e.editData}}),e._v(" "),a("div",{staticClass:"btns"},["7603819741782557558"==this.userinfo.memberid&&"分包项目信息"==this.judgeproject?a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],attrs:{type:"primary",size:"mini",disabled:e.isSave},on:{click:e.saveDate}},[e._v("保存")]):e._e(),e._v(" "),"分包项目信息"==this.judgeproject?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.back}},[e._v("返回")]):e._e()],1)],1)])},staticRenderFns:[]};var ye=a("VU/8")(be,ve,!1,function(e){a("VYN8")},"data-v-05df3c24",null).exports,we=(a("QmSG"),{name:"Login",components:{},data:function(){return{loginForm:{username:"",password:""}}},beforeRouteEnter:function(e,t,a){sessionStorage.setItem("loginIdentifier",1),localStorage.clear(),U.a.delete("account_id"),U.a.delete("account_name"),U.a.delete("code"),U.a.delete("dept_id"),U.a.delete("dept_name"),U.a.delete("e_mail"),U.a.delete("emp_name"),U.a.delete("login_name"),U.a.delete("memberid"),U.a.delete("post_id"),U.a.delete("post_name"),U.a.delete("subdept_id"),U.a.delete("subdept_name"),U.a.delete("telnumber"),U.a.delete("token"),a(function(e){})},beforeRouteUpdate:function(e,t,a){a()},beforeRouteLeave:function(e,t,a){a()},watch:{},mounted:function(){},created:function(){},computed:{},methods:M()({},Object(F.b)(["setCacheParams","setAudittableOneNum","setAudittableTwoYFNum","setAudittableThreeNum"]),{onSubmit:function(){var e=this;Object(h._1)("/login",this.loginForm).then(function(t){var a=t.data.data;localStorage.userinfo=n()(a),U.a.set("account_id",a.account_id),U.a.set("account_name",a.account_name),U.a.set("code",a.code),U.a.set("dept_id",a.dept_id),U.a.set("dept_name",a.dept_name),U.a.set("e_mail",a.e_mail),U.a.set("emp_name",a.emp_name),U.a.set("login_name",a.login_name),U.a.set("memberid",a.memberid),U.a.set("post_id",a.post_id),U.a.set("post_name",a.post_name),U.a.set("subdept_id",a.subdept_id),U.a.set("subdept_name",a.subdept_name),U.a.set("telnumber",a.telnumber),U.a.set("token",a.token),e.getMenu(a),e.setCacheParams({code:"All",pageNum:1,pageSize:20}),sessionStorage.setItem("loginIdentifier",0),e.setAudittableOneNum(null),e.setAudittableTwoYFNum(null),e.setAudittableThreeNum(null)}).catch(function(e){})},getMenu:function(e){var t=this;Object(h.P)("/sgpm/rest/api/system/portal/menus/"+e.memberid+"?deptId="+e.dept_id+"&subDeptId="+e.subdept_id+"&accountId="+e.account_id).then(function(e){var a=e.data.data;t.menuList=a.element,localStorage.setItem("menuList",n()(a.element)),t.$router.push({name:"projectitem"})}).catch(function(e){})}})}),je={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"wrap"},[o("div",{staticClass:"content"},[o("img",{attrs:{src:a("w5dq"),alt:""}}),e._v(" "),o("div",{staticClass:"login"},[o("div",{staticClass:"con"},[o("p",{staticClass:"con-title"},[e._v("欢迎登陆项目管理系统")]),e._v(" "),o("el-input",{staticClass:"con-input",attrs:{placeholder:"请输入用户名","prefix-icon":"el-icon-s-custom"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}}),e._v(" "),o("el-input",{staticClass:"con-input",attrs:{placeholder:"请输入密码",type:"password","prefix-icon":"el-icon-s-goods"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}}),e._v(" "),o("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("登录")])],1)])])])},staticRenderFns:[]};var Ce=a("VU/8")(we,je,!1,function(e){a("k7+n")},"data-v-12aede98",null).exports,Se={name:"Login",components:{},data:function(){return{loginForm:{username:"",password:""}}},watch:{},mounted:function(){this.getUserInfo();var e=JSON.parse(window.localStorage.getItem("userinfo"));null!=e?this.getMenu(e):this.$router.push({name:"login"})},created:function(){},computed:M()({},Object(F.c)(["userinfo"])),methods:M()({},Object(F.b)(["getUserInfo"]),{getMenu:function(e){var t=this;Object(h.P)("/sgpm/rest/api/system/portal/menus/"+e.memberid+"?deptId="+e.dept_id+"&subDeptId="+e.subdept_id+"&accountId="+e.account_id).then(function(e){var a=e.data.data;t.menuList=a.element,localStorage.setItem("menuList",n()(a.element)),t.$router.push({name:"projectitem"})}).catch(function(e){})}})},ke={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"wrap"})},staticRenderFns:[]};var De=a("VU/8")(Se,ke,!1,function(e){a("2VVA")},"data-v-46e05472",null).exports,Ne=[],Te=[],xe=[],Ie=(JSON.parse(localStorage.getItem("personInfor")),{name:"CreateFrom_setname",components:{GenerateForm:m.a,GenetateFormItem:j.a},data:function(){return{jsonData:{list:"",config:{labelPosition:"left",labelWidth:100,size:"small"}},parentList:[],projectData:[],keytechnologyList:"",editData:{},remoteFuncs:{},disabled:!1}},computed:M()({},Object(F.c)(["userinfo","isDetail"]),{isRevoke:function(){return sessionStorage.getItem("isRevoke")}}),mounted:function(){var e=this;x.a.$on("parentProject",function(t){t&&(e.parentList=t)}),x.a.$on("keytechnology",function(t){t&&(e.keytechnologyList=t)});Object(h.W)("/template/10").then(function(t){var a=t.data.data.list;localStorage.setItem("all_data",n()(a)),e.jsonData.list=t.data.data.list;for(var o=0;o<a.length;o++)for(var i=0;i<a[o].columns.length;i++)for(var r=0;r<a[o].columns[i].list.length;r++)Te.push(a[o].columns[i].list[r]),"select"==a[o].columns[i].list[r].type&&Ne.push(a[o].columns[i].list[r]);var s=function(e){var t=e;for(var a in Ne)Te[t].name==Ne[a].name&&(c=t,xe.push(c),u=Te[c].model,Object(h.G)("/"+u).then(function(e){Te[t].options.remoteOptions=e.data.data}).catch(function(e){}))};for(var l in Te){var c,u;s(l)}t.data.data.list.length>0&&(e.widgetFormSelect=t.data.data.list[0])}).catch(function(e){})},methods:{handleSubmit:function(){var e=this,t=this;this.$refs.generateForm.getData().then(function(a){if(new Date(a.projectstartdate.replace(/\-/g,"/"))>=new Date(a.projectenddate.replace(/\-/g,"/")))return alert("项目预计开始时间不能大于项目预计结束时间！"),!1;var o="";if(void 0!=t.$route.params.id&&null!=t.$route.params.id){o=e.keytechnologyList?e.keytechnologyList.join(","):a.keytechnology;a={id:t.$route.params.id,project:{name:a.projectname,custom_field_values:{28:a.projectstartdate,29:a.projectenddate,30:a.projecttype,35:a.constructioncontent,36:o,40:a.childprojectmoneh,42:3,41:a.businesssystem},parent_id:a.parentid,description:"",is_public:"1",user_id:t.userinfo.memberid,user_name:t.userinfo.emp_name,company_name:t.userinfo.account_name,company_id:t.userinfo.account_id,level_one_name:t.userinfo.subdept_name,level_one_id:t.userinfo.subdept_id,level_two_name:t.userinfo.dept_name,level_two_id:t.userinfo.dept_id,project_no:a.projectnumber},child:1,category:3,account_name:t.userinfo.account_name,username:t.userinfo.login_name,workflow_type:2,parent_number:a.parentprojectnumber,parent_name:a.parentproject}}else{o=(e.keytechnologyList,e.keytechnologyList.join(",")),void 0==e.projectData.project_id&&(e.projectData.project_id="");a={id:e.projectData.project_id,project:{name:a.projectname,custom_field_values:{28:a.projectstartdate,29:a.projectenddate,30:a.projecttype,35:a.constructioncontent,36:o,40:a.childprojectmoneh,42:3,41:a.businesssystem},parent_id:e.parentList.parent_id,description:"",is_public:"1",user_id:e.userinfo.memberid,user_name:e.userinfo.emp_name,company_name:e.userinfo.account_name,company_id:e.userinfo.account_id,level_one_name:e.userinfo.subdept_name,level_one_id:e.userinfo.subdept_id,level_two_name:e.userinfo.dept_name,level_two_id:e.userinfo.dept_id,project_no:e.projectData.project_no},child:1,category:3,account_name:e.userinfo.account_name,username:e.userinfo.login_name,workflow_type:2,parent_number:e.parentList.project_num,parent_name:e.parentList.value}}Object(h._33)("/sgpm/rest/api/integration/oa/flow",a).then(function(t){200==t.data.code?(e.disabled=!1,alert("提交成功!"),e.$router.push({path:"audititem"})):201==t.data.code&&(alert("提交失败!"),e.disabled=!0)})}).catch(function(t){e.disabled=!0})},saveDate:function(){var e=this,t=this;this.$refs.generateForm.getData().then(function(a){if(new Date(a.projectstartdate.replace(/\-/g,"/"))>=new Date(a.projectenddate.replace(/\-/g,"/")))return alert("项目预计开始时间不能大于项目预计结束时间！"),!1;var o="";if(void 0!=t.$route.params.id&&null!=t.$route.params.id){o=e.keytechnologyList?e.keytechnologyList.join(","):a.keytechnology;a={id:t.$route.params.id,project:{name:a.projectname,custom_field_values:{28:a.projectstartdate,29:a.projectenddate,30:a.projecttype,35:a.constructioncontent,36:o,40:a.childprojectmoneh,42:3,41:a.businesssystem},parent_id:a.parentid,description:"",is_public:"1",user_id:t.userinfo.memberid,user_name:t.userinfo.emp_name,company_name:t.userinfo.account_name,company_id:t.userinfo.account_id,level_one_name:t.userinfo.subdept_name,level_one_id:t.userinfo.subdept_id,level_two_name:t.userinfo.dept_name,level_two_id:t.userinfo.dept_id,project_no:a.projectnumber},child:1,category:3,account_name:e.userinfo.account_name}}else{void 0==e.projectData.project_id&&(e.projectData.project_id=""),o=(e.keytechnologyList,e.keytechnologyList.join(","));a={id:"",project:{name:a.projectname,custom_field_values:{28:a.projectstartdate,29:a.projectenddate,30:a.projecttype,35:a.constructioncontent,36:o,40:a.childprojectmoneh,42:3,41:a.businesssystem},parent_id:e.parentList.parent_id,description:"",is_public:"1",user_id:e.userinfo.memberid,user_name:e.userinfo.emp_name,company_name:e.userinfo.account_name,company_id:e.userinfo.account_id,level_one_name:e.userinfo.subdept_name,level_one_id:e.userinfo.subdept_id,level_two_name:e.userinfo.dept_name,level_two_id:e.userinfo.dept_id,project_no:e.projectData.project_no},child:1,category:3,account_name:e.userinfo.account_name}}Object(h._25)("/sgpm/rest/api/server/pm/project",a).then(function(t){if(200==t.data.code){alert("保存成功!");var a=t.data.data;e.projectData=a;a.project_no;for(var o=e.jsonData.list,n=0;n<o.length;n++)for(var i=0;i<o[n].columns.length;i++)for(var r=0;r<o[n].columns[i].list.length;r++)"projectnumber"==o[n].columns[i].list[r].model&&(o[n].columns[i].list[r].options.placeholder=t.data.data.value)}else 201==t.data.code&&alert("保存失败!")}).catch(function(e){})})},back:function(){this.$router.go(-1)}}}),Pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-col",{staticClass:"projectview",attrs:{span:24}},[a("p",{staticClass:"back"},[a("i",{staticClass:"el-icon-back back-size",on:{click:e.back}})]),e._v(" "),a("generate-form",{ref:"generateForm",attrs:{data:e.jsonData,remote:e.remoteFuncs,value:e.editData}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isDetail,expression:"!isDetail"}],attrs:{type:"primary"},on:{click:e.saveDate}},[e._v("保存")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isDetail&&2==e.isRevoke,expression:"!isDetail&&isRevoke==2"}],attrs:{type:"primary",disabled:e.disabled},on:{click:e.handleSubmit}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.back}},[e._v("返回")])],1)},staticRenderFns:[]};var Oe=a("VU/8")(Ie,Pe,!1,function(e){a("3hvd")},null,null).exports,Ee=a("djY+"),Me={name:"ProjectHome",components:{GenerateForm:m.a},beforeRouteEnter:function(e,t,a){a(function(e){e.$parent.$parent.$parent.getMenu()})},beforeRouteUpdate:function(e,t,a){a()},beforeRouteLeave:function(e,t,a){a()},data:function(){return{jsonData:{list:[],config:{labelPosition:"left",labelWidth:100,size:"small"}},editData:{},remoteFuncs:{}}},computed:M()({},Object(F.c)(["userinfo"])),mounted:function(){this.jsonData={list:[{type:"row3",icon:"icon-row",isShow:"false",options:{width:"100%",defaultValue:"",required:!1,pattern:"",placeholder:"项目基本信息",disabled:!1,remoteFunc:"func_1562832199000_74262"},key:"1562832199000_74262",model:"row3_1562832199000_74262",rules:[]},{type:"divider",icon:"icon-divider",isShow:"false",options:{width:"100%",defaultValue:"",required:!1,pattern:"",placeholder:"",disabled:!1,remoteFunc:"func_1562832240000_45820"},key:"1562832240000_45820",model:"divider_1562832240000_45820",rules:[]},{type:"homeBaseMsg",name:"",icon:"icon-jilianxuanze",isShow:"true",options:{defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1562832245000_42200"},key:"1562832245000_42200",model:"homeBaseMsg_1562832245000_42200",rules:[]},{type:"row3",icon:"icon-row",isShow:"false",options:{width:"100%",defaultValue:"",required:!1,pattern:"",placeholder:"项目预警信息",disabled:!1,remoteFunc:"func_1562832286000_69311"},key:"1562832286000_69311",model:"row3_1562832286000_69311",rules:[]},{type:"divider",icon:"icon-divider",isShow:"false",options:{width:"100%",defaultValue:"",required:!1,pattern:"",placeholder:"",disabled:!1,remoteFunc:"func_1562832291000_54508"},key:"1562832291000_54508",model:"divider_1562832291000_54508",rules:[]},{type:"grid",name:"栅格布局",icon:"icon-grid-",columns:[{span:6,list:[{type:"warningCard",name:"",icon:"icon-jilianxuanze",isShow:"true",options:{warningName:"进度预警",defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"http://192.168.102.101:11104/sgpm/rest/api/server/pm/project/early/warning/progress",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1562834203000_60230"},key:"1562834203000_60230",model:"progress",rules:[{type:"string",message:"单行文本格式不正确"}]}]},{span:6,list:[{type:"warningCard",name:"",icon:"icon-jilianxuanze",isShow:"true",options:{warningName:"回款预警",defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"http://192.168.102.101:11104/sgpm/rest/api/server/pm/project/early/warning/repayment",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1562834552000_11909"},key:"1562834552000_11909",model:"returnMoney",rules:[]}]},{span:6,list:[{type:"warningCard",name:"",icon:"icon-jilianxuanze",isShow:"true",options:{warningName:"超支预警",defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1562834589000_43508"},key:"1562834589000_43508",model:"warningCard_1562834589000_43508",rules:[]}]},{span:6,list:[{type:"warningCard",name:"",icon:"icon-jilianxuanze",isShow:"true",options:{warningName:"应支未支提示",defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1562834604000_44426"},key:"1562834604000_44426",model:"warningCard_1562834604000_44426",rules:[]}]}],options:{gutter:20,justify:"start",align:"top",remoteFunc:"func_1562834106000_13477"},key:"1562834106000_13477",model:"grid_1562834106000_13477",rules:[]},{type:"row",icon:"icon-row",isShow:"false",options:{width:"100%",defaultValue:"",required:!1,pattern:"",placeholder:"",disabled:!1,remoteFunc:"func_1562834650000_74753"},key:"1562834650000_74753",model:"row_1562834650000_74753",rules:[]},{type:"row3",icon:"icon-row",isShow:"false",options:{width:"100%",defaultValue:"",required:!1,pattern:"",placeholder:"项目财务数据",disabled:!1,remoteFunc:"func_1562835114000_86477"},key:"1562835114000_86477",model:"row3_1562835114000_86477",rules:[]},{type:"divider",icon:"icon-divider",isShow:"false",options:{width:"100%",defaultValue:"",required:!1,pattern:"",placeholder:"",disabled:!1,remoteFunc:"func_1562835155000_22562"},key:"1562835155000_22562",model:"divider_1562835155000_22562",rules:[]},{type:"grid",name:"栅格布局",icon:"icon-grid-",columns:[{span:4,list:[{type:"financialCard",name:"",icon:"icon-jilianxuanze",isShow:"true",options:{financialIconClass:"el-icon-setting",financialLeftColor:"#3C93EF",financialText:"合同额",defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"http://192.168.102.101:11103/sgpm/rest/api/integration/oa/contract",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1562835175000_40362"},key:"1562835175000_40362",model:"contractAmount",rules:[]}]},{span:5,list:[{type:"financialCard",name:"",icon:"icon-jilianxuanze",isShow:"true",options:{financialIconClass:"el-icon-goods",financialLeftColor:"#E15C1A",financialText:"回款金额",defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"http://192.168.102.101:11104/sgpm/rest/api/server/pm/project/return/money",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1562835225000_57213"},key:"1562835225000_57213",model:"amountCashed",rules:[]}]},{span:5,list:[{type:"financialCard",name:"",icon:"icon-jilianxuanze",isShow:"true",options:{financialIconClass:"el-icon-setting",financialLeftColor:"#00B403",financialText:"项目总预算",defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"http://192.168.102.101:11104/sgpm/rest/api/server/pm/project/total/project/budget",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1562835252000_16616"},key:"1562835252000_16616",model:"allBudget",rules:[]}]},{span:5,list:[{type:"financialCard",name:"",icon:"icon-jilianxuanze",isShow:"true",options:{financialIconClass:"el-icon-menu",financialLeftColor:"#E54EED",financialText:"项目总支出",defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"http://192.168.102.101:11104/sgpm/rest/api/server/pm/project/total/cost/money",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1562835342000_31733"},key:"1562835342000_31733",model:"allExpense",rules:[]}]},{span:4,list:[{type:"financialCard",name:"",icon:"icon-jilianxuanze",isShow:"true",options:{financialIconClass:"el-icon-goods",financialLeftColor:"#3C93EF",financialText:"实际净利润",defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"http://192.168.102.101:11104/sgpm/rest/api/server/pm/project/real/net/profit",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1562835349000_42052"},key:"1562835349000_42052",model:"profits",rules:[]}]}],options:{gutter:20,justify:"center",align:"top",remoteFunc:"func_1562835158000_85004"},key:"1562835158000_85004",model:"grid_1562835158000_85004",rules:[]}],config:{labelWidth:0,labelPosition:"left",size:"small"}}},methods:{handleSubmit:function(){this.$refs.generateForm.getData().then(function(e){}).catch(function(e){})},back:function(){this.$router.go(-1)}}},Fe={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-col",{staticClass:"generate-content",attrs:{span:23}},[t("p",{staticClass:"back"},[t("i",{staticClass:"el-icon-back back-size",on:{click:this.back}})]),this._v(" "),t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}})],1)},staticRenderFns:[]};var Ae=a("VU/8")(Me,Fe,!1,function(e){a("v445")},null,null).exports,Re={name:"project-test",components:{GenerateForm:m.a},data:function(){return{jsonData:{list:[],config:{labelPosition:"left",labelWidth:100,size:"small"}},editData:{},remoteFuncs:{}}},computed:M()({},Object(F.c)(["userinfo"])),mounted:function(){this.jsonData={list:[{type:"application",name:"",icon:"icon-jilianxuanze",isShow:"true",options:{defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1563239998000_790"},key:"1563239998000_790",model:"application_1563239998000_790",rules:[]}],config:{labelWidth:100,labelPosition:"top",size:"small"}}},methods:{handleSubmit:function(){this.$refs.generateForm.getData().then(function(e){}).catch(function(e){})}}},Le={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-col",{attrs:{span:24}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}})],1)},staticRenderFns:[]};var Be=a("VU/8")(Re,Le,!1,function(e){a("THAo")},null,null).exports,Ue={name:"project-test",components:{GenerateForm:m.a},data:function(){return{jsonData:{list:[],config:{labelPosition:"left",labelWidth:100,size:"small"}},editData:{},remoteFuncs:{}}},computed:M()({},Object(F.c)(["userinfo"])),mounted:function(){this.jsonData={list:[{type:"adjust",icon:"icon-jilianxuanze",isShow:"true",options:{warningName:"",defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1563263027000_4820"},key:"1563263027000_4820",model:"adjust_1563263027000_4820",rules:[]}],config:{labelWidth:100,labelPosition:"top",size:"small"}}},methods:{handleSubmit:function(){this.$refs.generateForm.getData().then(function(e){}).catch(function(e){})}}},$e={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-col",{attrs:{span:24}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}})],1)},staticRenderFns:[]};var ze=a("VU/8")(Ue,$e,!1,function(e){a("SINa")},null,null).exports,We={name:"project-test",components:{GenerateForm:m.a},data:function(){return{jsonData:{list:[],config:{labelPosition:"left",labelWidth:100,size:"small"}},editData:{},remoteFuncs:{}}},computed:M()({},Object(F.c)(["userinfo"])),mounted:function(){this.jsonData={list:[{type:"taskobjectory",name:"",icon:"icon-jilianxuanze",isShow:"true",options:{warningName:"",defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1564040058000_15634"},key:"1564040058000_15634",model:"taskobjectory_1564040058000_15634",rules:[]}],config:{labelWidth:100,labelPosition:"top",size:"small"}}},methods:{handleSubmit:function(){this.$refs.generateForm.getData().then(function(e){}).catch(function(e){})}}},Ve={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-col",{attrs:{span:23}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}})],1)},staticRenderFns:[]};var qe=a("VU/8")(We,Ve,!1,function(e){a("dlbO")},null,null).exports,Ke={name:"ManagerBoard",components:{GenerateForm:m.a},data:function(){return{jsonData:{list:[],config:{labelPosition:"left",labelWidth:100,size:"small"}},editData:{},remoteFuncs:{}}},computed:M()({},Object(F.c)(["userinfo"])),mounted:function(){this.jsonData={list:[{type:"tabs",name:"",icon:"icon-jilianxuanze",isShow:"true",tabs:[{name:"核算"},{name:"预警"},{name:"进度"}],options:{defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1565254406000_25220"},key:"1565254406000_25220",model:"tabs_1565254406000_25220",rules:[]}],config:{labelWidth:100,labelPosition:"top",size:"small"}}},methods:{handleSubmit:function(){this.$refs.generateForm.getData().then(function(e){}).catch(function(e){})}}},Ye={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-col",{staticClass:"generate-content",attrs:{span:24}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}})],1)},staticRenderFns:[]};var Ge=a("VU/8")(Ke,Ye,!1,function(e){a("Wdj3")},null,null).exports,He={name:"ManagerBoardGT",components:{GenerateForm:m.a},data:function(){return{jsonData:{list:[],config:{labelPosition:"left",labelWidth:100,size:"small"}},editData:{},remoteFuncs:{}}},computed:M()({},Object(F.c)(["userinfo"])),mounted:function(){this.jsonData={list:[{type:"tabs",name:"",icon:"icon-jilianxuanze",isShow:"true",tabs:[{name:"核算"},{name:"预警"},{name:"进度"}],options:{defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1565254406000_25220"},key:"1565254406000_25220",model:"tabs_1565254406000_25220",rules:[]}],config:{labelWidth:100,labelPosition:"top",size:"small"}}},methods:{handleSubmit:function(){this.$refs.generateForm.getData().then(function(e){}).catch(function(e){})}}},Je={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-col",{staticClass:"generate-content",attrs:{span:24}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}})],1)},staticRenderFns:[]};var Qe=a("VU/8")(He,Je,!1,function(e){a("QAFk")},null,null).exports,Xe={name:"ManagerBoardNK",components:{GenerateForm:m.a},data:function(){return{jsonData:{list:[],config:{labelPosition:"left",labelWidth:100,size:"small"}},editData:{},remoteFuncs:{}}},computed:M()({},Object(F.c)(["userinfo"])),mounted:function(){this.jsonData={list:[{type:"tabs",name:"",icon:"icon-jilianxuanze",isShow:"true",tabs:[{name:"核算"},{name:"预警"},{name:"进度"}],options:{defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1565254406000_25220"},key:"1565254406000_25220",model:"tabs_1565254406000_25220",rules:[]}],config:{labelWidth:100,labelPosition:"top",size:"small"}}},methods:{handleSubmit:function(){this.$refs.generateForm.getData().then(function(e){}).catch(function(e){})}}},Ze={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-col",{staticClass:"generate-content",attrs:{span:24}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}})],1)},staticRenderFns:[]};var et=a("VU/8")(Xe,Ze,!1,function(e){a("YaQv")},null,null).exports,tt={name:"ManagerBoardAT",components:{GenerateForm:m.a},data:function(){return{jsonData:{list:[],config:{labelPosition:"left",labelWidth:100,size:"small"}},editData:{},remoteFuncs:{}}},computed:M()({},Object(F.c)(["userinfo"])),mounted:function(){this.jsonData={list:[{type:"tabs",name:"",icon:"icon-jilianxuanze",isShow:"true",tabs:[{name:"核算"},{name:"预警"},{name:"进度"}],options:{defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1565254406000_25220"},key:"1565254406000_25220",model:"tabs_1565254406000_25220",rules:[]}],config:{labelWidth:100,labelPosition:"top",size:"small"}}},methods:{handleSubmit:function(){this.$refs.generateForm.getData().then(function(e){}).catch(function(e){})}}},at={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-col",{staticClass:"generate-content",attrs:{span:24}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}})],1)},staticRenderFns:[]};var ot=a("VU/8")(tt,at,!1,function(e){a("KZTV")},null,null).exports,nt={name:"ManagerBoardGroup",components:{GenerateForm:m.a},data:function(){return{jsonData:{list:[],config:{labelPosition:"left",labelWidth:100,size:"small"}},editData:{},remoteFuncs:{}}},computed:M()({},Object(F.c)(["userinfo"])),mounted:function(){this.jsonData={list:[{type:"tabs",name:"",icon:"icon-jilianxuanze",isShow:"true",tabs:[{name:"核算"},{name:"预警"},{name:"进度"}],options:{defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1565254406000_25220"},key:"1565254406000_25220",model:"tabs_1565254406000_25220",rules:[]}],config:{labelWidth:100,labelPosition:"top",size:"small"}}},methods:{handleSubmit:function(){this.$refs.generateForm.getData().then(function(e){}).catch(function(e){})}}},it={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-col",{staticClass:"generate-content",attrs:{span:24}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}})],1)},staticRenderFns:[]};var rt=a("VU/8")(nt,it,!1,function(e){a("6FIh")},null,null).exports,st={name:"ManagerBoardPlatform",components:{GenerateForm:m.a},data:function(){return{jsonData:{list:[],config:{labelPosition:"left",labelWidth:100,size:"small"}},editData:{},remoteFuncs:{}}},computed:M()({},Object(F.c)(["userinfo"])),mounted:function(){this.jsonData={list:[{type:"tabs",name:"",icon:"icon-jilianxuanze",isShow:"true",tabs:[{name:"核算"},{name:"预警"},{name:"进度"}],options:{defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1565254406000_25220"},key:"1565254406000_25220",model:"tabs_1565254406000_25220",rules:[]}],config:{labelWidth:100,labelPosition:"top",size:"small"}}},methods:{handleSubmit:function(){this.$refs.generateForm.getData().then(function(e){}).catch(function(e){})}}},lt={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-col",{staticClass:"generate-content",attrs:{span:24}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}})],1)},staticRenderFns:[]};var ct=a("VU/8")(st,lt,!1,function(e){a("vw/X")},null,null).exports,ut={name:"ManagerBoardCloud",components:{GenerateForm:m.a},data:function(){return{jsonData:{list:[],config:{labelPosition:"left",labelWidth:100,size:"small"}},editData:{},remoteFuncs:{}}},computed:M()({},Object(F.c)(["userinfo"])),mounted:function(){this.jsonData={list:[{type:"tabs",name:"",icon:"icon-jilianxuanze",isShow:"true",tabs:[{name:"核算"},{name:"预警"},{name:"进度"}],options:{defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1565254406000_25220"},key:"1565254406000_25220",model:"tabs_1565254406000_25220",rules:[]}],config:{labelWidth:100,labelPosition:"top",size:"small"}}},methods:{handleSubmit:function(){this.$refs.generateForm.getData().then(function(e){}).catch(function(e){})}}},dt={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-col",{staticClass:"generate-content",attrs:{span:24}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}})],1)},staticRenderFns:[]};var pt=a("VU/8")(ut,dt,!1,function(e){a("UOkd")},null,null).exports,mt={name:"ManagerBoardInternational",components:{GenerateForm:m.a},data:function(){return{jsonData:{list:[],config:{labelPosition:"left",labelWidth:100,size:"small"}},editData:{},remoteFuncs:{}}},computed:M()({},Object(F.c)(["userinfo"])),mounted:function(){this.jsonData={list:[{type:"tabs",name:"",icon:"icon-jilianxuanze",isShow:"true",tabs:[{name:"核算"},{name:"预警"},{name:"进度"}],options:{defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1565254406000_25220"},key:"1565254406000_25220",model:"tabs_1565254406000_25220",rules:[]}],config:{labelWidth:100,labelPosition:"top",size:"small"}}},methods:{handleSubmit:function(){this.$refs.generateForm.getData().then(function(e){}).catch(function(e){})}}},ht={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-col",{staticClass:"generate-content",attrs:{span:24}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}})],1)},staticRenderFns:[]};var _t=a("VU/8")(mt,ht,!1,function(e){a("vqSS")},null,null).exports,ft={name:"ManagerBoardResearch",components:{GenerateForm:m.a},data:function(){return{jsonData:{list:[],config:{labelPosition:"left",labelWidth:100,size:"small"}},editData:{},remoteFuncs:{}}},computed:M()({},Object(F.c)(["userinfo"])),mounted:function(){this.jsonData={list:[{type:"tabs",name:"",icon:"icon-jilianxuanze",isShow:"true",tabs:[{name:"核算"},{name:"预警"},{name:"进度"}],options:{defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1565254406000_25220"},key:"1565254406000_25220",model:"tabs_1565254406000_25220",rules:[]}],config:{labelWidth:100,labelPosition:"top",size:"small"}}},methods:{handleSubmit:function(){this.$refs.generateForm.getData().then(function(e){}).catch(function(e){})}}},gt={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-col",{staticClass:"generate-content",attrs:{span:24}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}})],1)},staticRenderFns:[]};var bt=a("VU/8")(ft,gt,!1,function(e){a("7DdP")},null,null).exports,vt={name:"ExternalPage",props:["widget","models","datas"],components:{},data:function(){return{}},computed:{},watch:{$route:{handler:function(e,t){},deep:!0}},mounted:function(){},methods:{}},yt={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("dfgdfg")])},staticRenderFns:[]};var wt=a("VU/8")(vt,yt,!1,function(e){a("DFFm")},"data-v-6966bfcc",null).exports,jt=a("woOf"),Ct=a.n(jt),St={name:"CreateFrom_setname",components:{GenerateForm:m.a,GenetateFormItem:j.a},data:function(){return{isSave:!1,isShow:1!=this.$route.query.isShow,jsonData:{list:"",config:{labelPosition:"right",labelWidth:170,size:"small"}},editData:{},projectId:this.$route.query.id,globalParams:{},disabled:!1,isSub:!1,remoteFuncs:{}}},computed:M()({},Object(F.c)(["userinfo"])),created:function(){var e=this,t="/template/4/"+this.userinfo.account_id;Object(h.W)(t).then(function(t){e.jsonData.list=t.data.data.list}).catch(function(e){}),localStorage.removeItem("jyjxConclusion"),this.globalParams.memberId=this.userinfo.memberid,this.globalParams.projectId=this.projectId,this.initPostProject()},methods:{initPostProject:function(){var e=this;localStorage.removeItem("globalParams");var t={projectId:this.projectId};Object(h._6)("/sgpm/rest/api/server/pm/project",t).then(function(t){e.$set(e.globalParams,"data",t.data.data),t.data.data.BUSINESS&&(t.data.data.customercenter=t.data.data.BUSINESS.CUSTOMERCENTER,t.data.data.customerdepartment=t.data.data.BUSINESS.CUSTOMERDEPARTMENT),e.$set(e.globalParams,"data1",e.updateJsonData(t.data.data)),localStorage.setItem("globalParams",n()(e.updateJsonData(t.data.data)))}).catch(function(e){})},updateJsonData:function(e){var t={};for(var a in e)if("CONTRACT"==a)for(var o in e[a])t[o]=e[a][o];else t[a]=e[a];return t},yanzheng:function(e){for(var t="",a=0;a<e.length;a++){if(""==e[0].jYCategory&&""==e[0].jYJiaoXunCategory&&""==e[0].jYDescription&&""==e[0].jYContributor)return this.$message.error("请填写经验教训总结!"),this.isSave=!1,!1;if(""==e[a].jYCategory||""==e[a].jYJiaoXunCategory||""==e[a].jYDescription||""==e[a].jYContributor){t=a;var o=a;for(var n in e[t]){if(""!=e[t].jYCategory&&""!=e[t].jYJiaoXunCategory&&""!=e[t].jYDescription&&""!=e[t].jYContributor)return void!0;if(""==e[o].jYCategory&&""==e[o].jYJiaoXunCategory&&""==e[o].jYDescription&&""==e[o].jYContributor)return void!0;!1}var i=parseInt(t)+1;return this.$message.error("请将经验教训总结第"+i+"行的数据填写完整!"),this.isSave=!1,!1}}},jyjxSave:function(e){var t=JSON.parse(localStorage.getItem("jyjxConclusion"));if(0==this.yanzheng(t))return this.isSave=!1,void(this.disabled=!1);var a=t=t.map(function(t){return Ct()(t,{projectNumber:e})});Object(h._0)("/sgpm/rest/api/server/pm/project/experience",a).then(function(e){}).catch(function(e){})},saveDate:function(){var e=this;this.isSave=!0,this.$refs.generateForm.getData().then(function(t){var a=JSON.parse(localStorage.getItem("jyjxConclusion"));if(0!=e.yanzheng(a)){e.jyjxSave(t.projectnumber);t={id:t.id,project:{custom_field_values:{23:t.operationalperiod,33:t.repositoryaddress},name:t.projectname,user_name:t.projectmanager,project_no:t.projectnumber,returnedRate:t.returnmoneypercentage,actualAcceptTime:t.actualaccepttime,projectCompeleteShedule:t.percentagecomplete,closeReason:t.closereason,archivingSituation:t.archivingsituation,outsourcePaymentRate:t.outsourcepaymentrate,sale_name:t.contractmarket,level_one_name:t.implementationdepartment,level_two_name:t.implementationsecondary,customercenter:t.customercenter,customerdepartment:t.customerdepartment,audit_status:30},username:e.userinfo.login_name};Object(h._0)("/sgpm/rest/api/server/pm/project",t).then(function(t){200==t.data.code?(alert("保存成功!"),e.isSave=!0):(alert("保存失败!"),e.isSave=!1)}).catch(function(t){alert("保存失败!"),e.isSave=!1})}else e.isSave=!1}).catch(function(t){e.isSave=!1})},handleSubmit:function(){var e=this;this.$refs.generateForm.getData().then(function(t){e.disabled=!0;var a=JSON.parse(localStorage.getItem("jyjxConclusion"));if(0!=e.yanzheng(a)){e.jyjxSave(t.projectnumber);t={id:t.id,project:{custom_field_values:{23:t.operationalperiod,33:t.repositoryaddress},name:t.projectname,user_name:t.projectmanager,project_no:t.projectnumber,returnedRate:t.returnmoneypercentage,actualAcceptTime:t.actualaccepttime,projectCompeleteShedule:t.percentagecomplete,closeReason:t.closereason,archivingSituation:t.archivingsituation,outsourcePaymentRate:t.outsourcepaymentrate,sale_name:t.contractmarket,level_one_name:t.implementationdepartment,level_two_name:t.implementationsecondary,customercenter:t.customercenter,customerdepartment:t.customerdepartment},username:e.userinfo.login_name,jY:a};Object(h._8)("/sgpm/rest/api/integration/oa/close",t).then(function(t){200==t.data.code?(alert("提交成功!"),e.disabled=!0,e.$router.push({path:"audititem"})):(e.disabled=!1,alert("提交失败!"))}).catch(function(t){e.disabled=!1,alert("提交失败!")})}else e.disabled=!1}).catch(function(t){e.disabled=!1})}}},kt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-col",{staticClass:"projectview",attrs:{span:24}},[a("generate-form",{ref:"generateForm",attrs:{data:e.jsonData,remote:e.remoteFuncs,value:e.editData}}),e._v(" "),a("div",{staticClass:"btns"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],attrs:{type:"primary",size:"mini",disabled:e.isSave},on:{click:e.saveDate}},[e._v("保存")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],attrs:{type:"primary",size:"mini",disabled:e.disabled},on:{click:e.handleSubmit}},[e._v("提交")])],1)],1)},staticRenderFns:[]};var Dt=a("VU/8")(St,kt,!1,function(e){a("M56A"),a("ahaP")},"data-v-1ef62989",null).exports,Nt={name:"CreateFrom_setname",components:{GenerateForm:m.a,GenetateFormItem:j.a},data:function(){return{jsonData:{list:[{type:"contractassociated",name:"合同关联",icon:"icon-jilianxuanze",options:{defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1572579659000_46801"},key:"1572579659000_46801",model:"contractassociated_1572579659000_46801",rules:[]}],config:{labelWidth:100,labelPosition:"top",size:"small"}},editData:{},remoteFuncs:{}}},mounted:function(){},methods:{handleSubmit:function(){this.$refs.generateForm.getData().then(function(e){}).catch(function(e){})}}},Tt={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-col",{staticClass:"projectview",attrs:{span:24}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}})],1)},staticRenderFns:[]};var xt=a("VU/8")(Nt,Tt,!1,function(e){a("h6d1"),a("B7rB")},"data-v-02a93d9b",null).exports,It={name:"project-test",components:{GenerateForm:m.a},data:function(){return{jsonData:{list:[{type:"notContractList",name:"",icon:"icon-jilianxuanze",isShow:"true",options:{defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",pro_type:"",props:{value:"value",label:"label",children:"children"},listened:!0,listen:[],remoteFunc:"func_1574928564000_90135"},key:"1574928564000_90135",model:"notContractList_1574928564000_90135",rules:[]}],config:{labelWidth:100,labelPosition:"top",size:"small"}},editData:{},remoteFuncs:{}}},computed:M()({},Object(F.c)(["userinfo"])),mounted:function(){},methods:{handleSubmit:function(){this.$refs.generateForm.getData().then(function(e){}).catch(function(e){})}}},Pt={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-col",{staticClass:"out-main",attrs:{span:24}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}})],1)},staticRenderFns:[]};var Ot=a("VU/8")(It,Pt,!1,function(e){a("mqlp")},null,null).exports,Et={name:"CreateFrom_setname",components:{GenerateForm:m.a,GenetateFormItem:j.a},data:function(){return{isShow:1!=this.$route.query.isShow,isSave:!1,jsonData:{list:"",config:{labelPosition:"left",labelWidth:100,size:"small"}},projectData:[],projectId:this.$route.query.id,editData:{},remoteFuncs:{},globalParams:{},projectInfo:[],deptInfo:[],disabled:!1,projectNumber:this.$route.query.projectNum,keywordList:[],projectCodeList:[]}},computed:M()({},Object(F.c)(["userinfo","isDetail"]),{isRevoke:function(){return sessionStorage.getItem("isRevoke")}}),created:function(){"/notContractProject?judgelogo=a"==this.$route.fullPath&&(localStorage.removeItem("keyWords"),localStorage.removeItem("keytechnologys"),localStorage.removeItem("projectCode")),this.globalParams.memberId=this.userinfo.memberid,this.globalParams.account_id=this.userinfo.account_id,"a"==this.$route.query.judgelogo&&(localStorage.removeItem("teamData"),localStorage.removeItem("teamworkTable")),(this.projectNumber&&("-1814768306395265967"==this.userinfo.account_id||"5326994013938795629"==this.userinfo.account_id||"-1360422574114386809"==this.userinfo.account_id||"8416498716893399290"==this.userinfo.account_id||"7034660345998100768"==this.userinfo.account_id||"-7975978055853456035"==this.userinfo.account_id)||"7638091599462351621"==this.userinfo.account_id)&&this.initNonContractData()},mounted:function(){var e=this,t="/template/5/"+this.userinfo.account_id;Object(h.W)(t).then(function(t){e.jsonData=t.data.data}).catch(function(e){}),x.a.$on("keyword",function(t){t&&(e.keywordList=t)}),x.a.$on("projectCode",function(t){t&&(e.projectCodeList=t)})},methods:{initNonContractData:function(e,t){var a=this,o="/sgpm/rest/api/server/non/pm/gt/project/"+this.projectId+"/"+this.projectNumber;Object(h._28)(o).then(function(e){null==e.data.data.project.keyword?"8416498716893399290"==a.userinfo.account_id?localStorage.setItem("projectCode",""):localStorage.setItem("keyWords",""):"8416498716893399290"==a.userinfo.account_id?localStorage.setItem("projectCode",e.data.data.project.keyword):localStorage.setItem("keyWords",e.data.data.project.keyword),localStorage.removeItem("globalParams"),localStorage.removeItem("teamData"),e.data.data.project.projectBudget=parseFloat(e.data.data.project.projectBudget),a.$set(a.globalParams,"data",e.data.data.project),localStorage.setItem("globalParams",n()(e.data.data.project)),localStorage.setItem("teamData",n()(e.data.data.teamwork))}).catch(function(e){})},getTeamWork:function(){return[{teamworkUserName:"",teamworkUserId:"",teamworkTwoUnitName:"",teamworkTwoUnitId:"",teamworkThreeUnitName:"",teamworkThreeUnitId:"",jobContent:"",projectNumber:""},{teamworkUserName:"",teamworkUserId:"",teamworkTwoUnitName:"",teamworkTwoUnitId:"",teamworkThreeUnitName:"",teamworkThreeUnitId:"",jobContent:"",projectNumber:""},{teamworkUserName:"",teamworkUserId:"",teamworkTwoUnitName:"",teamworkTwoUnitId:"",teamworkThreeUnitName:"",teamworkThreeUnitId:"",jobContent:"",projectNumber:""},{teamworkUserName:"",teamworkUserId:"",teamworkTwoUnitName:"",teamworkTwoUnitId:"",teamworkThreeUnitName:"",teamworkThreeUnitId:"",jobContent:"",projectNumber:""},{teamworkUserName:"",teamworkUserId:"",teamworkTwoUnitName:"",teamworkTwoUnitId:"",teamworkThreeUnitName:"",teamworkThreeUnitId:"",jobContent:"",projectNumber:""}]},saveOrUpdateParams:function(e,t){var a=JSON.parse(localStorage.getItem("teamworkTable")),o="";a||(a=this.getTeamWork());var n=null,i=null;if("8416498716893399290"==this.userinfo.account_id){if(""==(o=""!=this.projectCodeList?this.projectCodeList.join(","):null))return this.warnMessage2(),this.isSave=!1,void(this.disabled=!1)}else if(""==(o=""!=this.keywordList?this.keywordList.join(","):null))return this.warnMessage(),this.isSave=!1,void(this.disabled=!1);return"update"==t?(i={projectNumber:this.projectData.projectNumber?this.projectData.projectNumber:this.projectNumber},n={teamwork:a=a.map(function(e){return Ct()(e,i)}),child:0,category:3,account_name:this.userinfo.account_name,project:{id:this.projectData.id?this.projectData.id:this.projectId,companyId:this.userinfo.account_id,companyName:this.userinfo.account_name,projectName:e.projectname,projectNumber:this.projectData.projectNumber?this.projectData.projectNumber:this.projectNumber,classUnitBId:this.userinfo.subdept_id,classUnitBName:this.userinfo.subdept_name,classUnitCId:this.userinfo.dept_id,classUnitCName:this.userinfo.dept_name,projectManagerId:this.userinfo.memberid,projectManagerName:this.userinfo.emp_name,projectType:e.projecttype,projectCategory:"非合同类项目",repositoryAddress:e.repositoryaddress,projectContent:e.projectcontent,expectProjectStartDate:e.expectprojectstartdate,expectProjectEndDate:e.expectprojectenddate,projectBudget:e.projectbudget,keyword:o}}):(i={projectNumber:""},n={teamwork:a=a.map(function(e){return Ct()(e,i)}),child:0,category:3,account_name:this.userinfo.account_name,project:{companyId:this.userinfo.account_id,companyName:this.userinfo.account_name,projectName:e.projectname,projectNumber:e.projectnumber,classUnitBId:this.userinfo.subdept_id,classUnitBName:this.userinfo.subdept_name,classUnitCId:this.userinfo.dept_id,classUnitCName:this.userinfo.dept_name,projectManagerId:this.userinfo.memberid,projectManagerName:this.userinfo.emp_name,projectType:e.projecttype,projectCategory:"非合同类项目",repositoryAddress:e.repositoryaddress,projectContent:e.projectcontent,expectProjectStartDate:e.expectprojectstartdate,expectProjectEndDate:e.expectprojectenddate,projectBudget:e.projectbudget,keyword:o}}),n},saveDate:function(){var e=this;this.isSave=!0,this.disabled=!0,this.$refs.generateForm.getData().then(function(t){if(new Date(t.expectprojectstartdate.replace(/\-/g,"/"))>=new Date(t.expectprojectenddate.replace(/\-/g,"/")))return alert("项目预计开始时间不能大于项目预计结束时间！"),e.isSave=!1,e.disabled=!1,!1;var a=JSON.parse(localStorage.getItem("MilestoneParams"));if("重点项目"==t.projecttype&&!e.checkMilestoneParams(a))return e.$message.warning("请选里程碑模板并填写全部数据！"),e.isSave=!1,e.disabled=!1,!1;if("-1814768306395265967"==e.userinfo.account_id||"5326994013938795629"==e.userinfo.account_id||"-1360422574114386809"==e.userinfo.account_id||"8416498716893399290"==e.userinfo.account_id||"7034660345998100768"==e.userinfo.account_id||"-7975978055853456035"==e.userinfo.account_id||"7638091599462351621"==e.userinfo.account_id){var o=JSON.parse(localStorage.getItem("teamworkTable"));o||(o=e.getTeamWork()),e.projectId,e.projectData.id;var n=null;n=void 0!=e.projectId&&null!=e.projectId||e.projectData.id?e.saveOrUpdateParams(t,"update"):e.saveOrUpdateParams(t);Object(h._29)("/sgpm/rest/api/server/non/pm/gt/project",n).then(function(t){if(200==t.data.code){alert("保存成功!"),e.isSave=!1,e.disabled=!1;for(var o=e.jsonData.list,n=0;n<o.length;n++)for(var i=0;i<o[n].columns.length;i++)for(var r=0;r<o[n].columns[i].list.length;r++)"projectnumber"==o[n].columns[i].list[r].model&&(o[n].columns[i].list[r].options.placeholder=t.data.data.return_project.projectNumber);e.projectData=t.data.data.return_project,a&&a.length>0&&e.handleSaveProjectMilestone(t.data.data.return_project.projectNumber,a)}else alert("保存失败!"),e.isSave=!1,e.disabled=!1}).catch(function(t){alert("保存失败!"),e.isSave=!1,e.disabled=!1})}}).catch(function(t){e.isSave=!1,e.disabled=!1})},handleSubmit:function(){var e=this;this.isSave=!0,this.disabled=!0,this.$refs.generateForm.getData().then(function(t){if(new Date(t.expectprojectstartdate.replace(/\-/g,"/"))>=new Date(t.expectprojectenddate.replace(/\-/g,"/")))return alert("项目预计开始时间不能大于项目预计结束时间！"),e.disabled=!1,e.isSave=!1,!1;var a=JSON.parse(localStorage.getItem("MilestoneParams"));if(a);if("重点项目"==t.projecttype&&!e.checkMilestoneParams(a))return e.$message.warning("请选里程碑模板并填写全部数据！"),e.disabled=!1,e.isSave=!1,!1;if("重点项目"!==t.projecttype&&a&&!e.checkMilestoneParams(a))return e.$message.warning("请填写全部里程碑数据"),e.disabled=!1,e.isSave=!1,!1;if("-1814768306395265967"==e.userinfo.account_id||"5326994013938795629"==e.userinfo.account_id||"-1360422574114386809"==e.userinfo.account_id||"8416498716893399290"==e.userinfo.account_id||"7034660345998100768"==e.userinfo.account_id||"-7975978055853456035"==e.userinfo.account_id||"7638091599462351621"==e.userinfo.account_id){var o="",n=JSON.parse(localStorage.getItem("teamworkTable"));if("8416498716893399290"==e.userinfo.account_id)var i=localStorage.getItem("projectCode")||null;else i=localStorage.getItem("keyWords")||null;if(n||(n=e.getTeamWork()),"8416498716893399290"==e.userinfo.account_id){if(""==(o=""!=e.projectCodeList?e.projectCodeList.join(","):i))return e.warnMessage2(),e.isSave=!1,void(e.disabled=!1)}else if(""==(o=""!=e.keywordList?e.keywordList.join(","):i))return e.warnMessage(),e.isSave=!1,void(e.disabled=!1);if(void 0!=e.projectId&&null!=e.projectId||e.projectData.id){var r={projectNumber:e.projectNumber};n=n.map(function(e){return Ct()(e,r)});var s="";s=e.projectData.id?e.projectData.id:e.projectId;var l="";l=e.projectData.projectNumber?e.projectData.projectNumber:e.projectNumber;t={teamwork:n,milestone:e.getOAMilestone(a),child:0,category:3,username:e.userinfo.login_name,account_name:e.userinfo.account_name,project:{id:s,projectName:t.projectname,projectNumber:l,companyId:e.userinfo.account_id,companyName:e.userinfo.account_name,classUnitBId:e.userinfo.subdept_id,classUnitBName:e.userinfo.subdept_name,classUnitCId:e.userinfo.dept_id,classUnitCName:e.userinfo.dept_name,projectManagerId:e.userinfo.memberid,projectManagerName:e.userinfo.emp_name,projectType:t.projecttype,projectCategory:"非合同类项目",repositoryAddress:t.repositoryaddress,projectContent:t.projectcontent,expectProjectStartDate:t.expectprojectstartdate,expectProjectEndDate:t.expectprojectenddate,projectBudget:t.projectbudget,keyword:o}}}else r={projectNumber:""},t={teamwork:n=n.map(function(e){return Ct()(e,r)}),milestone:e.getOAMilestone(a),child:0,category:3,username:e.userinfo.login_name,account_name:e.userinfo.account_name,project:{projectName:t.projectname,projectNumber:t.projectnumber,companyId:e.userinfo.account_id,companyName:e.userinfo.account_name,classUnitBId:e.userinfo.subdept_id,classUnitBName:e.userinfo.subdept_name,classUnitCId:e.userinfo.dept_id,classUnitCName:e.userinfo.dept_name,projectManagerId:e.userinfo.memberid,projectManagerName:e.userinfo.emp_name,projectType:t.projecttype,projectCategory:"非合同类项目",repositoryAddress:t.repositoryaddress,projectContent:t.projectcontent,expectProjectStartDate:t.expectprojectstartdate,expectProjectEndDate:t.expectprojectenddate,projectBudget:t.projectbudget,keyword:o}};Object(h._29)("/sgpm/rest/api/server/non/pm/gt/project/submit",t).then(function(t){200==t.data.code?(alert("提交成功!"),e.disabled=!0,e.$router.push({path:"audititem"}),a&&a.length>0&&e.handleSaveProjectMilestone(t.data.data.return_project.projectNumber,a)):(alert("提交失败!"),e.disabled=!1,e.isSave=!1)}).catch(function(t){alert("提交失败"),e.disabled=!1,e.isSave=!1})}}).catch(function(t){e.disabled=!1,e.isSave=!1})},back:function(){this.$router.go(-1)},warnMessage:function(){this.$message({showClose:!0,message:"项目关键字不能为空",type:"warning"})},warnMessage2:function(){this.$message({showClose:!0,message:"工程代码不能为空",type:"warning"})},getOAMilestone:function(e){var t=[];if(null!=e)for(var a=0;a<e.length;a++){var o=e[a];if(o.deliverableStatus){var n={};n.stageName=o.stageName,n.milestoneName=o.milestoneName,n.progressPercentage=o.progressPercentage,n.isCut=1==o.isCut?"是":"否",n.description=o.description,n.estimatedStartDate=o.expectedBeginTime,n.estimatedFinishDate=o.expectedEndTime,n.estimatedWorkingHours=o.workHours;var i="";o.deliverable.forEach(function(e){e.checkedStatus&&(i+=e.deliverableName+"、")}),n.delStr=i.substr(0,i.length-1),t.push(n)}}return t},handleSaveProjectMilestone:function(e,t){var a={};a.projectNumber=e;var o=[];t.forEach(function(e){if(e.deliverableStatus){var t={};t.milestoneName=e.milestoneName,t.isCut=e.isCut,t.progressPercentage=e.progressPercentage,t.sortIndex=1,t.description=e.description,t.milestoneTemplateName=e.milestoneTemplateName,t.estimatedStartDate=e.expectedBeginTime,t.estimatedFinishDate=e.expectedEndTime,t.finishDate=e.actualEndTime,t.estimatedWorkingHours=e.workHours,t.delayDays=e.delayDays,t.status=0,t.stageName=e.stageName,t.id=e.projectMilestoneId;var a=[];e.deliverable.forEach(function(e){if(e.checkedStatus){var t={};t.deliverableName=e.deliverableName,t.isCut=e.isCut,t.auditDeliverable=e.auditDeliverable,void 0==e.deliverableTemplateId?t.deliverableTemplateId=e.deliverableId:t.id=e.deliverableId,t.contractDeliverable=e.contractDeliverable,t.description=e.description,t.status=1,a.push(t)}}),t.deliverable=a,o.push(t)}}),a.milestones=o,Object(h._29)("/sgpm/rest/api/server/pm/project/milestones",a).then(function(t){t.data,200==t.data.code?x.a.$emit("ProjectMilestoneSave",{projectNumber:e,success:!0}):alert("保存失败")}).catch(function(e){})},checkMilestoneParams:function(e){if(e){var t=!0;return e.forEach(function(e){if(e.deliverableStatus){var a=e.expectedBeginTime,o=e.expectedEndTime,n=e.workHours;a&&o&&n||(t=!1)}}),t}return!1}}},Mt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-col",{staticClass:"projectview notContract",attrs:{span:24}},[a("p",{staticClass:"back"},[a("i",{staticClass:"el-icon-back back-size",on:{click:e.back}})]),e._v(" "),a("generate-form",{ref:"generateForm",attrs:{data:e.jsonData,remote:e.remoteFuncs,value:e.editData,globalParams:e.globalParams}}),e._v(" "),a("div",{staticClass:"btns"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],attrs:{type:"primary",size:"mini",disabled:e.isSave},on:{click:e.saveDate}},[e._v("保存")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],attrs:{type:"primary",size:"mini",disabled:e.disabled},on:{click:e.handleSubmit}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.back}},[e._v("返回")])],1)],1)},staticRenderFns:[]};var Ft=a("VU/8")(Et,Mt,!1,function(e){a("vwaH")},null,null).exports,At={name:"nonPostProject",components:{GenerateForm:m.a,GenetateFormItem:j.a},data:function(){return{jsonData:{list:"",config:{labelPosition:"left",labelWidth:100,size:"small"}},projectId:this.$route.query.id,globalParams:{},editData:{},remoteFuncs:{},isSave:!1,disabled:!1,isShow:1!=this.$route.query.isShow}},computed:M()({},Object(F.c)(["userinfo","isDetail"])),created:function(){this.initPostProject()},mounted:function(){var e=this,t="/template/9/"+this.userinfo.account_id;Object(h.W)(t).then(function(t){e.jsonData=t.data.data}).catch(function(e){})},methods:{initPostProject:function(){var e=this;this.projectId,localStorage.removeItem("globalParams");var t="/sgpm/rest/api/server/non/pm/gt/project/close?projectId="+this.projectId;Object(h._6)(t).then(function(t){localStorage.setItem("globalParams",n()(e.updateJsonData(t.data.data)))}).catch(function(e){})},updateJsonData:function(e){var t={};for(var a in e)if("CONTRACT"==a)for(var o in e[a])t[o]=e[a][o];else t[a]=e[a];return t},yanzheng:function(e){for(var t="",a=0;a<e.length;a++){if(""==e[0].jYCategory&&""==e[0].jYJiaoXunCategory&&""==e[0].jYDescription&&""==e[0].jYContributor)return this.$message.error("请填写经验教训总结!"),this.isSave=!1,!1;if(""==e[a].jYCategory||""==e[a].jYJiaoXunCategory||""==e[a].jYDescription||""==e[a].jYContributor){t=a;var o=a;for(var n in e[t]){if(""!=e[t].jYCategory&&""!=e[t].jYJiaoXunCategory&&""!=e[t].jYDescription&&""!=e[t].jYContributor)return void!0;if(""==e[o].jYCategory&&""==e[o].jYJiaoXunCategory&&""==e[o].jYDescription&&""==e[o].jYContributor)return void!0;!1}var i=parseInt(t)+1;return this.$message.error("请将经验教训总结第"+i+"行的数据填写完整!"),this.isSave=!1,!1}}},jyjxSave:function(e){var t=JSON.parse(localStorage.getItem("jyjxConclusion"));if(0==this.yanzheng(t))return this.isSave=!1,void(this.disabled=!1);var a=t=t.map(function(t){return Ct()(t,{projectNumber:e})});Object(h._0)("/sgpm/rest/api/server/pm/project/experience",a).then(function(e){}).catch(function(e){})},saveDate:function(){var e=this;this.isSave=!0,this.disabled=!0,this.$refs.generateForm.getData().then(function(t){var a=JSON.parse(localStorage.getItem("jyjxConclusion"));if(!a)return e.$message.error("请填写经验教训总结!"),e.isSave=!1,e.disabled=!1,!1;if(0==e.yanzheng(a))return e.isSave=!1,void(e.disabled=!1);e.jyjxSave(t.projectnumber);t={id:t.id,closeReason:t.closereason,auditStatus:30};Object(h._25)("/sgpm/rest/api/server/non/pm/gt/project/close",t).then(function(t){200==t.data.code?(alert("保存成功!"),e.isSave=!1,e.disabled=!1):(alert("保存失败!"),e.isSave=!1,e.disabled=!1)}).catch(function(t){alert("保存失败!"),e.isSave=!1,e.disabled=!1})}).catch(function(e){})},handleSubmit:function(){var e=this;this.$refs.generateForm.getData().then(function(t){var a=JSON.parse(localStorage.getItem("jyjxConclusion"));if(!a)return e.$message.error("请填写经验教训总结!"),e.isSave=!1,e.disabled=!1,!1;if(0==e.yanzheng(a))return e.isSave=!1,void(e.disabled=!1);t={jumpType:t.jumptype,acceptanceDate:t.acceptancedate,totalWorkingHours:t.totalworkinghours,projectContent:t.projectcontent,projectManagerName:t.projectmanagername,classUnitBName:t.classunitbname,projectNumber:t.projectnumber,projectType:t.projecttype,expectProjectEndDate:t.expectprojectenddate,classUnitCId:t.classunitcid,repositoryAddress:t.repositoryaddress,classUnitBId:t.classunitbid,paymentAmount:t.paymentamount,expectProjectStartDate:t.expectprojectstartdate,percentageComplete:t.percentagecomplete,projectCategory:t.projectcategory,classUnitCName:t.classunitcname,auditStatus:31,projectManagerId:t.projectmanagerid,projectBudget:t.projectbudget,id:t.id,projectName:t.projectname,closeReason:t.closereason,workflowId:t.workflowid,username:e.userinfo.login_name,companyId:e.userinfo.account_id,experience:a};Object(h._8)("/sgpm/rest/api/integration/oa/non/close",t).then(function(t){200==t.data.code?(alert("提交成功!"),e.disabled=!1,e.isSave=!1,e.$router.push({path:"audititem"})):(alert("提交失败!"),e.disabled=!1,e.isSave=!1)}).catch(function(t){e.disabled=!1,e.isSave=!1,alert("提交失败!")})}).catch(function(e){})},back:function(){this.$router.go(-1)}}},Rt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-col",{staticClass:"projectview",attrs:{span:24}},[a("p",{staticClass:"back"},[a("i",{staticClass:"el-icon-back back-size",on:{click:e.back}})]),e._v(" "),a("generate-form",{ref:"generateForm",attrs:{data:e.jsonData,remote:e.remoteFuncs,value:e.editData,globalParams:e.globalParams}}),e._v(" "),a("div",{staticClass:"btns"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],attrs:{type:"primary",size:"mini",disabled:e.isSave},on:{click:e.saveDate}},[e._v("保存")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],attrs:{type:"primary",size:"mini",disabled:e.disabled},on:{click:e.handleSubmit}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.back}},[e._v("返回")])],1)],1)},staticRenderFns:[]};var Lt=a("VU/8")(At,Rt,!1,function(e){a("Xe7t")},null,null).exports,Bt={name:"mounthOutputItem",components:{GenerateForm:m.a},data:function(){return{jsonData:{list:[{type:"mounthOutputNew",name:"",icon:"icon-jilianxuanze",isShow:"true",url:"",options:{defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1575192618000_1535"},key:"1575192618000_1535",model:"mounthOutputNew_1575192618000_1535",rules:[]}],config:{labelWidth:100,labelPosition:"top",size:"small"}},remoteFuncs:{},editData:{}}},computed:M()({},Object(F.c)(["userinfo"])),mounted:function(){},methods:{init:function(){}}},Ut={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-col",{staticClass:"out-main",attrs:{span:24}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}})],1)},staticRenderFns:[]};var $t=a("VU/8")(Bt,Ut,!1,function(e){a("QfHk")},null,null).exports,zt={name:"residueOutputItem",components:{GenerateForm:m.a},data:function(){return{jsonData:{list:[{type:"residueOutput",name:"",icon:"icon-jilianxuanze",isShow:"true",url:"",options:{defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1575617200000_55112"},key:"1575617200000_55112",model:"residueOutput_1575617200000_55112",rules:[]}],config:{labelWidth:100,labelPosition:"top",size:"small"}},remoteFuncs:{},editData:{}}},computed:M()({},Object(F.c)(["userinfo"])),mounted:function(){},methods:{init:function(){}}},Wt={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-col",{staticClass:"out-main",attrs:{span:24}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}})],1)},staticRenderFns:[]};var Vt=a("VU/8")(zt,Wt,!1,function(e){a("uzC2")},null,null).exports,qt={name:"associatedOutputItem",components:{GenerateForm:m.a},data:function(){return{jsonData:{list:[{type:"associatedOutput",name:"",icon:"icon-jilianxuanze",isShow:"true",url:"",options:{defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1575706020000_63636"},key:"1575706020000_63636",model:"associatedOutput_1575706020000_63636",rules:[]}],config:{labelWidth:100,labelPosition:"top",size:"small"}},remoteFuncs:{},editData:{}}},computed:M()({},Object(F.c)(["userinfo"])),mounted:function(){},methods:{init:function(){}}},Kt={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-col",{staticClass:"out-main",attrs:{span:24}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}})],1)},staticRenderFns:[]};var Yt=a("VU/8")(qt,Kt,!1,function(e){a("BOEd")},null,null).exports,Gt={name:"notAssociatedOutputItem",components:{GenerateForm:m.a},data:function(){return{jsonData:{list:[{type:"notAssociatedOutput",name:"",icon:"icon-jilianxuanze",isShow:"true",url:"",options:{defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1575732524000_31829"},key:"1575732524000_31829",model:"notAssociatedOutput_1575732524000_31829",rules:[]}],config:{labelWidth:100,labelPosition:"top",size:"small"}},remoteFuncs:{},editData:{}}},computed:M()({},Object(F.c)(["userinfo"])),mounted:function(){},methods:{init:function(){}}},Ht={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-col",{staticClass:"out-main",attrs:{span:24}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}})],1)},staticRenderFns:[]};var Jt=a("VU/8")(Gt,Ht,!1,function(e){a("BN/y")},null,null).exports,Qt={name:"budgetItem",components:{GenerateForm:m.a},data:function(){return{jsonData:{list:[{type:"budgetAllocation",name:"",icon:"icon-jilianxuanze",isShow:"true",url:"",options:{defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1573126935000_32754"},key:"1573126935000_32754",model:"budgetAllocation_1573126935000_32754",rules:[]}],config:{labelWidth:100,labelPosition:"top",size:"small"}},editData:{},remoteFuncs:{}}},computed:M()({},Object(F.c)(["userinfo"])),mounted:function(){},methods:{init:function(){var e=this;if(this.userinfo){var t={memberId:this.userinfo.memberid,menuId:7};Object(h.N)("/template",t).then(function(t){e.jsonData=t.data.data}).catch(function(e){})}},handleSubmit:function(){this.$refs.generateForm.getData().then(function(e){}).catch(function(e){})}}},Xt={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-col",{staticClass:"out-main",attrs:{span:24}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}})],1)},staticRenderFns:[]};var Zt=a("VU/8")(Qt,Xt,!1,function(e){a("EsdD")},"data-v-033bd158",null).exports,ea={name:"CreateFrom_setname",components:{GenerateForm:m.a,GenetateFormItem:j.a},data:function(){return{isSave:!1,isShow:1!=this.$route.query.isShow,jsonData:{list:"",config:{labelPosition:"right",labelWidth:120,size:"small"}},editData:{},projectId:this.$route.query.id,projectNumber:this.$route.query.projectNum,globalParams:{},disabled:!1,isSub:!1,remoteFuncs:{}}},computed:M()({},Object(F.c)(["userinfo"])),created:function(){var e=this,t="/template/4/"+this.userinfo.account_id;Object(h.W)(t).then(function(t){e.jsonData.list=t.data.data.list}).catch(function(e){}),localStorage.removeItem("jyjxConclusion"),this.globalParams.memberId=this.userinfo.memberid,this.globalParams.projectId=this.projectId,this.initPostProject()},methods:{initPostProject:function(){var e=this;localStorage.removeItem("globalParams");var t="/sgpm/rest/api/server/pm/gt/project/"+this.projectId+"/"+this.projectNumber;Object(h._6)(t).then(function(t){t.data.data.outsourcePaymentRate=parseFloat(t.data.data.outsourcePaymentRate),localStorage.setItem("globalParams",n()(e.updateJsonData(t.data.data)))}).catch(function(e){})},updateJsonData:function(e){var t={};for(var a in e)if("CONTRACT"==a)for(var o in e[a])t[o]=e[a][o];else t[a]=e[a];return t},yanzheng:function(e){for(var t="",a=0;a<e.length;a++){if(""==e[0].jYCategory&&""==e[0].jYJiaoXunCategory&&""==e[0].jYDescription&&""==e[0].jYContributor)return this.$message.error("请填写经验教训总结!"),this.isSave=!1,!1;if(""==e[a].jYCategory||""==e[a].jYJiaoXunCategory||""==e[a].jYDescription||""==e[a].jYContributor){t=a;var o=a;for(var n in e[t]){if(""!=e[t].jYCategory&&""!=e[t].jYJiaoXunCategory&&""!=e[t].jYDescription&&""!=e[t].jYContributor)return void!0;if(""==e[o].jYCategory&&""==e[o].jYJiaoXunCategory&&""==e[o].jYDescription&&""==e[o].jYContributor)return void!0;!1}var i=parseInt(t)+1;return this.$message.error("请将经验教训总结第"+i+"行的数据填写完整!"),this.isSave=!1,!1}}},jyjxSave:function(e){var t=JSON.parse(localStorage.getItem("jyjxConclusion"));if(0==this.yanzheng(t))return this.isSave=!1,void(this.disabled=!1);var a=t=t.map(function(t){return Ct()(t,{projectNumber:e})});Object(h._0)("/sgpm/rest/api/server/pm/project/experience",a).then(function(e){}).catch(function(e){})},saveDate:function(){var e=this;this.isSave=!0,this.$refs.generateForm.getData().then(function(t){var a=JSON.parse(localStorage.getItem("jyjxConclusion"));if(0!=e.yanzheng(a)){if("-1814768306395265967"==e.userinfo.account_id||"7638091599462351621"==e.userinfo.account_id)t={id:t.id,project:{custom_field_values:{23:t.operationalperiod,33:t.repositoryaddress},project_no:t.projectnumber,name:t.projectname,user_name:t.projectmanager,user_id:t.user_id,sale_name:t.contractmarket,sale_id:t.saleid,returnedRate:t.returnmoneypercentage,outsourcePaymentRate:t.outsourcepaymentrate,level_one_name:t.implementationdepartment,level_one_id:t.level_one_id,level_two_name:t.implementationsecondary,level_two_id:t.level_two_id,company_name:t.company_name,company_id:t.company_id,projectCompeleteShedule:t.percentagecomplete,actualAcceptTime:t.reviewtime,closeReason:t.closereason,archivingSituation:t.archivingsituation,customercenter:t.customercenter,customercenternumber:t.customercenternumber,customerdepartment:t.customerdepartment,customerdepartmentnumber:t.customerdepartmentnumber,audit_status:30},username:e.userinfo.login_name,jY:a};else if("8416498716893399290"==e.userinfo.account_id)t={id:t.id,project:{custom_field_values:{23:t.operationalperiod,33:t.repositoryaddress},project_no:t.projectnumber,name:t.projectname,user_name:t.projectmanager,user_id:t.user_id,sale_name:t.contractmarket,sale_id:t.saleid,returnedRate:t.returnmoneypercentage,outsourcePaymentRate:t.outsourcepaymentrate,level_one_name:t.implementationdepartment,level_one_id:t.level_one_id,company_name:t.company_name,company_id:t.company_id,projectCompeleteShedule:t.percentagecomplete,actualAcceptTime:t.reviewtime,closeReason:t.closereason,archivingSituation:t.archivingsituation,customercenter:t.customercenter,customercenternumber:t.customercenternumber,audit_status:30},username:e.userinfo.login_name,jY:a};Object(h._0)("/sgpm/rest/api/server/pm/gt/project/closing/save",t).then(function(t){200==t.data.code?(alert("保存成功!"),e.isSave=!0):(alert("保存失败!"),e.isSave=!1)}).catch(function(t){alert("保存失败!"),e.isSave=!1})}else e.isSave=!1}).catch(function(t){e.isSave=!1})},handleSubmit:function(){var e=this;this.$refs.generateForm.getData().then(function(t){e.disabled=!0;var a=JSON.parse(localStorage.getItem("jyjxConclusion"));if(0!=e.yanzheng(a)){if("-1814768306395265967"==e.userinfo.account_id||"7638091599462351621"==e.userinfo.account_id)t={id:t.id,project:{custom_field_values:{23:t.operationalperiod,33:t.repositoryaddress},project_no:t.projectnumber,name:t.projectname,user_name:t.projectmanager,user_id:t.user_id,sale_name:t.contractmarket,sale_id:t.saleid,returnedRate:t.returnmoneypercentage,outsourcePaymentRate:t.outsourcepaymentrate,level_one_name:t.implementationdepartment,level_one_id:t.level_one_id,level_two_name:t.implementationsecondary,level_two_id:t.level_two_id,company_name:t.company_name,company_id:t.company_id,projectCompeleteShedule:t.percentagecomplete,actualAcceptTime:t.reviewtime,closeReason:t.closereason,archivingSituation:t.archivingsituation,customercenter:t.customercenter,customercenternumber:t.customercenternumber,customerdepartment:t.customerdepartment,customerdepartmentnumber:t.customerdepartmentnumber,audit_status:30},username:e.userinfo.login_name,jY:a};else if("8416498716893399290"==e.userinfo.account_id)t={id:t.id,project:{custom_field_values:{23:t.operationalperiod,33:t.repositoryaddress},project_no:t.projectnumber,name:t.projectname,user_name:t.projectmanager,user_id:t.user_id,sale_name:t.contractmarket,sale_id:t.saleid,returnedRate:t.returnmoneypercentage,outsourcePaymentRate:t.outsourcepaymentrate,level_one_name:t.implementationdepartment,level_one_id:t.level_one_id,company_name:t.company_name,company_id:t.company_id,projectCompeleteShedule:t.percentagecomplete,actualAcceptTime:t.reviewtime,closeReason:t.closereason,archivingSituation:t.archivingsituation,customercenter:t.customercenter,customercenternumber:t.customercenternumber,audit_status:30},username:e.userinfo.login_name,jY:a};if("-1814768306395265967"==e.userinfo.account_id||"7638091599462351621"==e.userinfo.account_id)var o="/sgpm/rest/api/integration/oa/gt/workflow/finish";else if("8416498716893399290"==e.userinfo.account_id)o="/sgpm/rest/api/integration/oa/nk/workflow/finish";Object(h._8)(o,t).then(function(t){200==t.data.code?(alert("提交成功!"),e.disabled=!0,e.$router.push({path:"audititem"})):(e.disabled=!1,alert("提交失败!"))}).catch(function(t){e.disabled=!1,alert("提交失败!")})}else e.disabled=!1}).catch(function(t){e.disabled=!1})}}},ta={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-col",{staticClass:"projectview gtNon",attrs:{span:24}},[a("generate-form",{ref:"generateForm",attrs:{data:e.jsonData,remote:e.remoteFuncs,value:e.editData}}),e._v(" "),a("div",{staticClass:"btns"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],attrs:{type:"primary",size:"mini",disabled:e.isSave},on:{click:e.saveDate}},[e._v("保存")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],attrs:{type:"primary",size:"mini",disabled:e.disabled},on:{click:e.handleSubmit}},[e._v("提交")])],1)],1)},staticRenderFns:[]};var aa=a("VU/8")(ea,ta,!1,function(e){a("g0ig"),a("wPOX")},"data-v-8aa401ea",null).exports,oa={name:"CreateFrom_setname",components:{GenerateForm:m.a,GenetateFormItem:j.a},data:function(){return{isSave:!1,isShowSave:!1,isShow:1!=this.$route.query.isShow,jsonData:{list:"",config:{labelPosition:"right",labelWidth:170,size:"small"}},editData:{},projectId:this.$route.query.id,projectNumber:this.$route.query.projectNum,globalParams:{},disabled:!1,isSub:!1,remoteFuncs:{}}},computed:M()({},Object(F.c)(["userinfo"])),created:function(){var e=this,t="/template/7/"+this.userinfo.account_id;Object(h.W)(t).then(function(t){e.jsonData.list=t.data.data.list}).catch(function(e){}),this.globalParams.memberId=this.userinfo.memberid,this.globalParams.projectId=this.projectId,this.initPostProject()},methods:{initPostProject:function(){var e=this;this.projectId,localStorage.removeItem("globalParams");var t="/sgpm/rest/api/server/pm/ct/project/close/contract/"+this.projectId;Object(h._6)(t).then(function(t){localStorage.setItem("globalParams",n()(e.updateJsonData(t.data.data)))}).catch(function(e){})},updateJsonData:function(e){var t={};for(var a in e)if("CONTRACT"==a)for(var o in e[a])t[o]=e[a][o];else t[a]=e[a];return t},handleSubmit:function(){var e=this;this.$refs.generateForm.getData().then(function(t){e.disabled=!0;t={projectId:t.projectid,projectNum:t.projectnum,projectName:t.projectname,userId:t.userid,userName:t.username,saleId:t.saleid,saleName:t.salename,outsourcingRate:t.outsourcingrate,returnMoneyPercentage:t.returnmoneypercentage,projectCloseFinishSituation:t.projectclosefinishsituation,classUnitBId:t.classunitbid,classUnitBName:t.classunitbname,classUnitCId:t.classunitcid,classUnitCName:t.classunitcname,saleClassUnitBId:t.saleclassunitbid,saleClassUnitBName:t.saleclassunitbname,saleClassUnitCId:t.saleclassunitcid,saleClassUnitCName:t.saleclassunitcname,username:e.userinfo.login_name,projectStatus:2,companyId:e.userinfo.account_id,companyName:e.userinfo.account_name};Object(h._8)("/sgpm/rest/api/integration/oa/contract/close",t).then(function(t){200==t.data.code?(alert("提交成功!"),e.disabled=!0,e.$router.push({path:"audititem"})):(e.disabled=!1,alert("提交失败!"))}).catch(function(t){e.disabled=!1,alert("提交失败!")})}).catch(function(e){})}}},na={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-col",{staticClass:"projectview",attrs:{span:24}},[a("generate-form",{ref:"generateForm",attrs:{data:e.jsonData,remote:e.remoteFuncs,value:e.editData}}),e._v(" "),a("div",{staticClass:"btns"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],attrs:{type:"primary",size:"mini",disabled:e.disabled},on:{click:e.handleSubmit}},[e._v("提交")])],1)],1)},staticRenderFns:[]};var ia=a("VU/8")(oa,na,!1,function(e){a("eW+B"),a("GKkA")},"data-v-390ac2b0",null).exports,ra={name:"project-test",components:{GenerateForm:m.a},data:function(){return{jsonData:{list:[{type:"pendingDocument",name:"",icon:"icon-jilianxuanze",isShow:"true",options:{defaultValue:[],width:"",placeholder:"",remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1576720635000_34731"},key:"1576720635000_34731",model:"pendingDocument_1576720635000_34731",rules:[]}],config:{labelWidth:100,labelPosition:"top",size:"small"}},editData:{},remoteFuncs:{}}},computed:M()({},Object(F.c)(["userinfo"])),mounted:function(){},methods:{init:function(){var e=this;if(this.userinfo){var t={memberId:this.userinfo.memberid,menuId:7};Object(h.N)("/template",t).then(function(t){e.jsonData=t.data.data}).catch(function(e){})}},handleSubmit:function(){this.$refs.generateForm.getData().then(function(e){}).catch(function(e){})}}},sa={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-col",{staticClass:"out-main",attrs:{span:24}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}})],1)},staticRenderFns:[]};var la=a("VU/8")(ra,sa,!1,function(e){a("Zu/3")},null,null).exports,ca={name:"project-test",components:{GenerateForm:m.a},data:function(){return{jsonData:{list:[{type:"cashDeposit",name:"",icon:"icon-jilianxuanze",isShow:"true",options:{defaultValue:[],width:"",placeholder:"",remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1577347024000_7924"},key:"1577347024000_7924",model:"cashDeposit_1577347024000_7924",rules:[]}],config:{labelWidth:100,labelPosition:"top",size:"small"}},editData:{},remoteFuncs:{}}},computed:M()({},Object(F.c)(["userinfo"])),mounted:function(){},methods:{handleSubmit:function(){this.$refs.generateForm.getData().then(function(e){}).catch(function(e){})}}},ua={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-col",{staticClass:"out-main",attrs:{span:24}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}})],1)},staticRenderFns:[]};var da=a("VU/8")(ca,ua,!1,function(e){a("hT1l")},null,null).exports,pa={name:"CreateFrom_setname",components:{GenerateForm:m.a,GenetateFormItem:j.a},data:function(){return{isSave:!1,isShow:1!=this.$route.query.isShow,jsonData:{list:"",config:{labelPosition:"right",labelWidth:170,size:"small"}},editData:{},projectId:this.$route.query.id,globalParams:{},disabled:!1,isSub:!1,remoteFuncs:{},receivableChange:"",returnNote:"",payNote:"",exCloseReason:"",fileSituation:"",returnNoteFile:"",payNoteFile:"",ycclosereason:"",fileCase:"",payinstructions:"",returninstructions:"",payinstructionsFile:"",returninstructionsFile:"",returnNoteFileName:"",payNoteFileName:""}},computed:M()({},Object(F.c)(["userinfo"])),created:function(){this.globalParams.account_id=this.userinfo.account_id,localStorage.removeItem("jyjxConclusion"),this.globalParams.memberId=this.userinfo.memberid,this.globalParams.projectId=this.projectId,this.initPostProject()},mounted:function(){var e=this,t="/template/8/"+this.userinfo.account_id;Object(h.W)(t).then(function(t){e.jsonData.list=t.data.data.list}).catch(function(e){})},methods:{initPostProject:function(){var e=this;localStorage.removeItem("globalParams");this.projectId;var t="/sgpm/rest/api/server/pm/ct/project/close/ex/"+this.projectId;Object(h._6)(t).then(function(t){e.$set(e.globalParams,"data",t.data.data),localStorage.setItem("abnormalFrom",n()(t.data.data)),e.$set(e.globalParams,"data1",e.updateJsonData(t.data.data)),localStorage.setItem("globalParams",n()(e.updateJsonData(t.data.data)))}).catch(function(e){})},updateJsonData:function(e){var t={};for(var a in e)if("CONTRACT"==a)for(var o in e[a])t[o]=e[a][o];else t[a]=e[a];return t},yanzheng:function(e){for(var t="",a=0;a<e.length;a++){if(""==e[0].jYCategory&&""==e[0].jYJiaoXunCategory&&""==e[0].jYDescription&&""==e[0].jYContributor)return this.$message.error("请填写经验教训总结!"),this.isSave=!1,!1;if(""==e[a].jYCategory||""==e[a].jYJiaoXunCategory||""==e[a].jYDescription||""==e[a].jYContributor){t=a;var o=a;for(var n in e[t]){if(""!=e[t].jYCategory&&""!=e[t].jYJiaoXunCategory&&""!=e[t].jYDescription&&""!=e[t].jYContributor)return void!0;if(""==e[o].jYCategory&&""==e[o].jYJiaoXunCategory&&""==e[o].jYDescription&&""==e[o].jYContributor)return void!0;!1}var i=parseInt(t)+1;return this.$message.error("请将经验教训总结第"+i+"行的数据填写完整!"),this.isSave=!1,!1}}},jyjxSave:function(e,t){var a=JSON.parse(localStorage.getItem("jyjxConclusion"));if("submit"==t){if(0==this.yanzheng(a))return this.isSave=!1,void(this.disabled=!1);this.saveJyjxDate(a,e)}else this.saveJyjxDate(a,e)},saveJyjxDate:function(e,t){var a=e=e.map(function(e){return Ct()(e,{projectNumber:t})});Object(h._0)("/sgpm/rest/api/server/pm/project/experience",a).then(function(e){}).catch(function(e){})},checkFile:function(){localStorage.getItem("returnNote"),localStorage.getItem("payNote");var e=localStorage.getItem("exCloseReason"),t=localStorage.getItem("fileSituation");localStorage.getItem("returnNoteFile"),localStorage.getItem("payNoteFile");return e?t?void 0:(this.$message.error("请填写归档情况!"),!1):(this.$message.error("请填写异常结项原因!"),!1)},saveDate:function(){var e=this;this.isSave=!0,this.disabled=!1,this.$refs.generateForm.getData().then(function(t){var a=JSON.parse(localStorage.getItem("jyjxConclusion"));e.returnNote;var o="null"!=localStorage.getItem("returnNote")?localStorage.getItem("returnNote"):"",n="null"!=localStorage.getItem("payNote")?localStorage.getItem("payNote"):"",i=localStorage.getItem("exCloseReason"),r=localStorage.getItem("fileSituation"),s="null"!=localStorage.getItem("returnNoteFile")?localStorage.getItem("returnNoteFile"):"",l="null"!=localStorage.getItem("payNoteFile")?localStorage.getItem("payNoteFile"):"",c=t.classunitcid,u=t.classunitcname;if(0==e.checkFile())return e.isSave=!1,void(e.disabled=!1);e.jyjxSave(t.projectnum,"save");t={projectId:t.projectid,projectNum:t.projectnum,projectName:t.projectname,userId:t.userid,userName:t.username,saleId:t.saleid,saleName:t.salename,projectPeriod:t.projectperiod,projectRepository:t.projectrepository,outsourcingRate:t.outsourcingrate,finishSchedule:t.finishschedule,returnMoneyPercentage:t.returnmoneypercentage,exCloseType:t.exclosetype,fileSituation:r,returnNote:o,returnNoteEnclosure:s,payNote:n,payNoteEnclosure:l,exCloseReason:i,projectStatus:t.projectstatus,auditStatus:50,processId:t.processid,experience:a};"-1814768306395265967"==e.userinfo.account_id&&(t.classUnitCId=c,t.classUnitCName=u);Object(h._0)("/sgpm/rest/api/server/pm/ct/project/close/ex",t).then(function(t){200==t.data.code?(alert("保存成功!"),e.isSave=!1,e.disabled=!1):(alert("保存失败!"),e.isSave=!1,e.disabled=!1)}).catch(function(t){alert("保存失败!"),e.isSave=!1,e.disabled=!1})}).catch(function(t){e.isSave=!1,e.disabled=!1})},handleSubmit:function(){var e=this;this.$refs.generateForm.getData().then(function(t){e.disabled=!0;var a=JSON.parse(localStorage.getItem("jyjxConclusion")),o="null"!=localStorage.getItem("returnNote")?localStorage.getItem("returnNote"):"",n="null"!=localStorage.getItem("payNote")?localStorage.getItem("payNote"):"",i=localStorage.getItem("exCloseReason"),r=localStorage.getItem("fileSituation"),s="null"!=localStorage.getItem("returnNoteFile")?localStorage.getItem("returnNoteFile"):"",l="null"!=localStorage.getItem("payNoteFile")?localStorage.getItem("payNoteFile"):"",c=t.classunitcid,u=t.classunitcname;if(0!=e.checkFile())if(0!=e.yanzheng(a)){e.jyjxSave(t.projectnum,"submit");t={projectId:t.projectid,projectNum:t.projectnum,projectName:t.projectname,userId:t.userid,userName:t.username,saleId:t.saleid,saleName:t.salename,projectPeriod:t.projectperiod,projectRepository:t.projectrepository,outsourcingRate:t.outsourcingrate,finishSchedule:t.finishschedule,returnMoneyPercentage:t.returnmoneypercentage,exCloseType:t.exclosetype,fileSituation:r,returnNote:o,returnNoteEnclosure:s,payNote:n,payNoteEnclosure:l,exCloseReason:i,projectStatus:t.projectstatus,auditStatus:51,processId:t.processid,username:e.userinfo.login_name,classUnitBId:t.classunitbid,classUnitBName:t.classunitbname,saleClassUnitBId:t.saleclassunitbid,saleClassUnitBName:t.saleclassunitbname,experience:a,companyId:e.userinfo.account_id,companyName:e.userinfo.account_name};"-1814768306395265967"==e.userinfo.account_id&&(t.classUnitCId=c,t.classUnitCName=u);Object(h._8)("/sgpm/rest/api/integration/oa/close/ex",t).then(function(t){200==t.data.code?(alert("提交成功!"),e.disabled=!0,e.$router.push({path:"audititem"})):(e.disabled=!1,alert("提交失败!"))}).catch(function(t){e.disabled=!1,alert("提交失败!")})}else e.disabled=!1;else e.disabled=!1}).catch(function(t){e.disabled=!1})}}},ma={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-col",{staticClass:"projectview",attrs:{span:24}},[a("generate-form",{ref:"generateForm",attrs:{data:e.jsonData,remote:e.remoteFuncs,value:e.editData,globalParams:e.globalParams}}),e._v(" "),a("div",{staticClass:"btns"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],attrs:{type:"primary",size:"mini",disabled:e.isSave},on:{click:e.saveDate}},[e._v("保存")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],attrs:{type:"primary",size:"mini",disabled:e.disabled},on:{click:e.handleSubmit}},[e._v("提交")])],1)],1)},staticRenderFns:[]};var ha=a("VU/8")(pa,ma,!1,function(e){a("BTi5"),a("wvrH")},"data-v-6a8ac192",null).exports,_a={name:"project-test",components:{GenerateForm:m.a},data:function(){return{jsonData:{list:[{type:"subPackageList",icon:"icon-jilianxuanze",isShow:"true",options:{defaultValue:[],width:"",placeholder:"",remote:!0,remoteOptions:[],url_a:"",url_b:"",url_c:"",url_d:"",props:{value:"value",label:"label",children:"children"},remoteFunc:"func_1599199631000_87738"},key:"1599199631000_87738",model:"subPackageList_1599199631000_87738",rules:[]}],config:{labelWidth:100,labelPosition:"top",size:"small"}},editData:{},remoteFuncs:{}}},computed:M()({},Object(F.c)(["userinfo"])),mounted:function(){},methods:{handleSubmit:function(){this.$refs.generateForm.getData().then(function(e){}).catch(function(e){})}}},fa={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-col",{staticClass:"out-main",attrs:{span:24}},[t("generate-form",{ref:"generateForm",attrs:{data:this.jsonData,remote:this.remoteFuncs,value:this.editData}})],1)},staticRenderFns:[]};var ga=a("VU/8")(_a,fa,!1,function(e){a("xQRJ")},null,null).exports,ba={},va=function(e,t){var a="7.432756475.689573874";null!==document.getElementById(a)&&document.body.removeChild(document.getElementById(a));var o=document.createElement("canvas");o.width=150,o.height=120;var n=o.getContext("2d");n.rotate(-20*Math.PI/180),n.font="12px Vedana",n.fillStyle="#bfbfbf",n.textAlign="left",n.textBaseline="Middle",n.fillText(e,15,40),n.fillText(t,15,65);var i=document.createElement("div");return i.id=a,i.style.pointerEvents="none",i.style.top="70px",i.style.left="0px",i.style.opacity=.5,i.style.position="absolute",i.style.zIndex="100000",i.style.width=document.documentElement.clientWidth-50+"px",i.style.height=document.documentElement.clientHeight-150+"px",i.style.marginLeft="220px",i.style.background="url("+o.toDataURL("image/png")+") left top repeat",document.body.appendChild(i),a};ba.set=function(e,t){var a=va(e,t);setInterval(function(){null===document.getElementById(a)&&(a=va(e,t))},500),window.onresize=function(){va(e,t)}},ba.out=function(){var e;e="7.432756475.689573874",null!==document.getElementById(e)&&(document.getElementById(e).style.display="none")};var ya=ba,wa=a("BO1k"),ja=a.n(wa),Ca={name:"leftNav",inject:["routerRefresh"],data:function(){return{latelyMore:!1,menuList:[],loading:!1,collapsed:this.$store.state.collapsed,examineCount:0,examineCountYF:0,examineCountDF:0,projectArray:[]}},directives:{clickoutside:{bind:function(e,t,a){function o(a){if(e.contains(a.target))return!1;t.expression&&t.value(a)}e.__vueClickOutside__=o,document.addEventListener("click",o)},update:function(){},unbind:function(e,t){document.removeEventListener("click",e.__vueClickOutside__),delete e.__vueClickOutside__}}},computed:M()({},Object(F.c)(["userinfo","audittableOne","audittableThreeDF","audittableTwoYF"]),{isExamineNum:function(){return 0!=this.examineCount||0!=this.examineCountYF||0!=this.examineCountDF}}),methods:M()({},Object(F.b)(["getUserInfo"]),{handleClose:function(){this.latelyMore=!1},openLately:function(){var e=this;this.latelyMore=!this.latelyMore,Object(h.Q)("/sgpm/rest/api/server/pm/project/lately",{memberId:this.userinfo.memberid}).then(function(t){var a=t.data.data;e.projectArray=a}).catch(function(e){})},collapse:function(){this.collapsed=!this.collapsed,this.$store.state.collapsed=this.collapsed},defaultLeftNavOpened:function(){for(var e=this.$route.path,t=this.menuList,a="",o=!1,n=0;n<t.length;n++){var i=t[n].children;if(i)for(var r=0;r<i.length&&i[r].path!==e;r++)if(i[r].children&&!i[r].leaf)for(var s=i[r].children,l=0;l<s.length;l++)if(s[l].path===e){a=r,o=!0;break}}this.$refs.leftNavigation&&o&&this.$refs.leftNavigation.open(a)},getMenuList:function(){var e=JSON.parse(localStorage.getItem("menuList"));this.menuList=e},searchProjectName:function(e,t){var a=!0,o=!1,n=void 0;try{for(var i,r=ja()(t);!(a=(i=r.next()).done);a=!0){var s=i.value;if("YIZHANGTUGONGXIANGPINGTAI"==s.code){s.name=null==e?"未指定项目":e;break}s.children.length>0&&this.searchProjectName(e,s.children)}}catch(e){o=!0,n=e}finally{try{!a&&r.return&&r.return()}finally{if(o)throw n}}},recentProList:function(e,t){var a=this;this.searchProjectName(e.projectName,this.menuList);var o={projectId:e.id,userId:this.userinfo.memberid},i=window.localStorage;null!=e.id&&(i.projectNumber=e.projectNumber,i.projectName=e.projectName,i.projectId=e.id,i.parent_id=e.parent_id),"11"==e.jump_type?localStorage.setItem("judgeproject","非合同项目信息"):localStorage.setItem("judgeproject","项目信息"),x.a.$emit("projectContent",e),t&&(this.$router.push({name:"/projectInformation"}),localStorage.setItem("jump_type",e.jump_type),this.routerRefresh()),Object(h._40)("/sgpm/rest/api/server/pm/project/lately",o).then(function(e){200==e.data.code&&Object(h.Q)("/sgpm/rest/api/server/pm/project/lately",{memberId:a.userinfo.memberid}).then(function(e){var t=e.data.data;a.projectArray=t;var o=JSON.parse(localStorage.getItem("menuList")),i=[];o.forEach(function(e){"项目视图"==e.name&&i.push(e)}),i[0].children.forEach(function(e){"YIZHANGTUGONGXIANGPINGTAI"==e.code&&(e.name=localStorage.getItem("projectName"))}),localStorage.setItem("menuList",n()(o)),a.latelyMore=!1}).catch(function(e){})}).catch(function(e){})},moreHandle:function(){},getTableDatas:function(){var e=this,t={memberId:this.userinfo.memberid,pageNum:1,pageSize:10};Object(h.Y)("/sgpm/rest/api/integration/oa/pending/process/information",t).then(function(t){t.data.data;var a=e;200==t.data.code&&(null==a.audittableOne?a.examineCount=t.data.meta.totalCount:a.examineCount=a.audittableOne)}).catch(function(e){})},getTableDatasYF:function(){var e=this,t={memberId:this.userinfo.memberid,pageNum:1,pageSize:10};Object(h.Y)("/sgpm/rest/api/integration/oa/existing/process/information",t).then(function(t){t.data.data;var a=e;200==t.data.code&&(null==a.audittableTwoYF?a.examineCountYF=t.data.meta.totalCount:a.examineCountYF=a.audittableTwoYF)}).catch(function(e){})},getTableDatasDF:function(){var e=this,t={memberId:this.userinfo.memberid,pageNum:1,pageSize:10};Object(h.Y)("/sgpm/rest/api/integration/oa/wait/sending/process/information",t).then(function(t){t.data.data;var a=e;200==t.data.code&&(null==a.audittableThreeDF?a.examineCountDF=t.data.meta.totalCount:a.examineCountDF=a.audittableThreeDF)}).catch(function(e){})}}),watch:{$route:function(e,t){}},mounted:function(){var e=window.localStorage;this.defaultLeftNavOpened(),this.getMenuList(),this.getTableDatas(),this.getTableDatasYF(),this.getTableDatasDF(),this.recentProList({id:e.projectId||null,projectName:e.projectName||null,projectNumber:e.projectNumber||null,parent_id:e.parent_id||null,judgeproject:e.judgeproject||null})},created:function(){}},Sa={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("aside",[a("div",{staticClass:"menu-toggle",on:{click:function(t){return t.preventDefault(),e.collapse(t)}}},[a("i",{directives:[{name:"show",rawName:"v-show",value:!e.collapsed,expression:"!collapsed"}],staticClass:"el-icon-s-fold",attrs:{title:"收起"}}),e._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:e.collapsed,expression:"collapsed"}],staticClass:"el-icon-s-unfold",attrs:{title:"展开"}})]),e._v(" "),a("el-menu",{ref:"leftNavigation",attrs:{"default-active":e.$route.path,router:"",collapse:e.collapsed}},[e._l(e.menuList,function(t,o){return[t.path===e.$store.state.leftNavState?[e._l(t.children,function(t,o){return[t.leaf?t.leaf?a("el-menu-item",{key:t.path,class:e.$route.path===t.path?"is-active":"",attrs:{index:t.path}},["审批列表"==t.name?[a("i",{staticClass:"iconfont",class:t.icon}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.isExamineNum,expression:"isExamineNum"}],staticClass:"badge",attrs:{slot:"title"},slot:"title"})]:[a("i",{staticClass:"iconfont",class:t.icon}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))])]],2):e._e():a("el-submenu",{key:o,staticClass:"sub-menu wrap-more",attrs:{index:o+""}},[a("template",{slot:"title"},[a("i",{staticClass:"iconfont",class:t.icon}),e._v(" "),a("span",{staticClass:"change-name",attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))]),e._v(" "),"YIZHANGTUGONGXIANGPINGTAI"==t.code||"HT_ROOT"==t.code?a("i",{directives:[{name:"show",rawName:"v-show",value:!e.collapsed,expression:"!collapsed"}],staticClass:"el-icon-more nav-more",on:{click:function(t){return t.stopPropagation(),e.openLately(t)}}}):e._e(),e._v(" "),"YIZHANGTUGONGXIANGPINGTAI"==t.code?a("transition",{attrs:{name:"slide-fade"}},[e.latelyMore?a("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],staticClass:"div-more",on:{click:function(e){e.stopPropagation()}}},[a("p",{staticClass:"title"},[e._v("最近查看项目")]),e._v(" "),e._l(e.projectArray,function(t,o){return a("ul",{key:o},[a("li",{on:{click:function(a){return e.recentProList(t,!0)}}},[a("span",[e._v(e._s(o+1))]),e._v("\n                      ，"+e._s(t.projectName)+"\n                    ")])])})],2):e._e()]):e._e()],1),e._v(" "),e._l(t.children,function(t){return a("el-menu-item",{key:t.path,class:e.$route.path===t.path?"is-active":"",attrs:{index:t.path}},[a("i",{staticClass:"iconfont",class:t.icon}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))])])})],2)]})]:e._e()]})],2)],1)},staticRenderFns:[]};var ka=a("VU/8")(Ca,Sa,!1,function(e){a("WASS")},"data-v-122eb3e7",null).exports,Da={name:"leftNav",data:function(){return{loading:!1,companyName:"",defaultActiveIndex:"/sysMenu",homeMenu:!1,messageCount:5}},computed:M()({},Object(F.c)(["userinfo"]),{menuList:function(){return JSON.parse(localStorage.getItem("menuList"))}}),methods:{handleSelect:function(e){this.defaultActiveIndex=e},fetchNavData:function(){for(var e=this.$route.path,t=this.menuList,a="",o="",n=0;n<t.length;n++){var i=t[n].children;if(i)for(var r=0;r<i.length;r++){if(i[r].path===e){a=t[n].type,o=t[n].path;break}if(i[r].children)for(var s=i[r].children,l=0;l<s.length;l++)if(s[l].path===e){a=t[n].type,o=t[n].path;break}}}this.$store.state.topNavState=a,this.$store.state.leftNavState=o,this.defaultActiveIndex=o}},watch:{$route:function(e,t){this.fetchNavData()}},mounted:function(){},created:function(){this.fetchNavData()}},Na={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{staticClass:"container"},[o("el-col",{staticClass:"topbar-wrap",attrs:{span:24}},[o("div",{staticClass:"topbar-logo topbar-btn"},[o("a",{attrs:{href:"/"}},[o("img",{staticStyle:{"padding-left":"8px"},attrs:{src:a("7Otq")}})])]),e._v(" "),o("div",{staticClass:"topbar-logos"},[o("a",{staticStyle:{color:"#fff"},attrs:{href:"/"}},[o("span",[e._v("项目管理系统")])])]),e._v(" "),o("div",{staticClass:"topbar-title"},[o("el-row",[o("el-col",{attrs:{span:24}},[o("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.defaultActiveIndex,mode:"horizontal",router:!0},on:{select:e.handleSelect}},e._l(e.menuList,function(t,a){return o("el-menu-item",{key:a,attrs:{index:t.path}},[e._v(e._s(t.name)+"\n            ")])}),1)],1)],1)],1),e._v(" "),o("div",{staticClass:"topbar-account topbar-btn"},[o("i",{staticClass:"el-icon-user-solid"}),e._v(" "+e._s(this.userinfo.emp_name)+"\n\n      "),o("el-dropdown",{attrs:{trigger:"click"}},[o("span",{staticClass:"el-dropdown-link userinfo-inner"},[o("i",{staticClass:"el-icon-question"})]),e._v(" "),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",[o("p",{staticClass:"pop-time"},[e._v("2020-4-28项目管理系统-功能发布、更新如下：")]),e._v(" "),o("ul",{staticClass:"pop-ul"},[o("li",[o("span",{staticClass:"cirle"}),e._v("1、财务报表导出。\n              ")]),e._v(" "),o("li",[o("span",{staticClass:"cirle"}),e._v("2、软硬件review。")]),e._v(" "),o("li",[o("span",{staticClass:"cirle"}),e._v("3、文档批量下载。")]),e._v(" "),o("li",[o("span",{staticClass:"cirle"}),e._v("4、项目里程碑文档变更。")]),e._v(" "),o("li",[o("span",{staticClass:"cirle"}),e._v("5、项目团队模块查找范围优化。")]),e._v(" "),o("li",[o("span",{staticClass:"cirle"}),e._v("6、项目里程碑“完成百分比”优化")]),e._v(" "),o("li",[o("span",{staticClass:"cirle"}),e._v("7、通过数据中台获取OA、SERP的回款数据。")]),e._v(" "),o("li",[o("span",{staticClass:"cirle"}),e._v("8、合同列表（含待登记、高级筛选、查询）。")]),e._v(" "),o("li",[o("span",{staticClass:"cirle"}),e._v("9、国图经费产值模块增加日期筛选区间范围。")])])])],1)],1)],1)])],1)},staticRenderFns:[]};var Ta=a("VU/8")(Da,Na,!1,function(e){a("PiAx")},"data-v-74df5e85",null).exports,xa={name:"home",data:function(){return{loading:!1}},computed:M()({},Object(F.c)(["userinfo"])),methods:M()({},Object(F.b)(["getUserInfo"])),created:function(){this.getUserInfo()},components:{leftNav:ka,topNav:Ta}},Ia={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-row",{staticClass:"container"},[t("el-col",{attrs:{span:24}},[t("top-nav")],1),this._v(" "),t("el-col",{staticClass:"main",attrs:{span:24}},[t("left-nav"),this._v(" "),t("section",{staticClass:"content-container"},[t("div",{staticClass:"grid-content bg-purple-light"},[t("transition",{attrs:{name:"fade",mode:"out-in"}},[t("router-view")],1)],1)])],1)],1)},staticRenderFns:[]};var Pa=a("VU/8")(xa,Ia,!1,function(e){a("xTk1")},null,null).exports,Oa=this;i.default.use(r.a);var Ea=new r.a({routes:[{path:"/",component:Pa,redirect:"/loginLine",children:[{path:"/individualtable",name:"individualtable",component:p},{path:"/projectview",name:"projectview",component:g},{path:"/worksheet",name:"worksheet",component:b.default},{path:"/projectChange",name:"projectChange",component:H},{path:"/manageview",name:"manageview",component:v.default},{path:"/projectregistration",name:"/projectregistration",component:T},{path:"/xiangmutuandui",name:"/xiangmutuandui",component:O},{path:"/projectstart",name:"/projectstart",component:L},{path:"/projectitem",name:"projectitem",component:W,beforeEnter:function(e,t,a){var o=window.localStorage,i=JSON.parse(o.menuList),r=[];i.forEach(function(e){"项目视图"==e.name&&r.push(e)});var s=r[0].children,l=localStorage.getItem("projectName");"{}"==n()(e.params)&&(s.forEach(function(e){"YIZHANGTUGONGXIANGPINGTAI"==e.code&&(e.name=l||"未指定项目")}),a()),localStorage.setItem("menuList",n()(i)),a()}},{path:"/contractitem",name:"contractitem",component:K},{path:"/notContractitem",name:"notContractitem",component:Ot},{path:"/audititem",name:"audititem",component:ee},{path:"/MilepostChangeShow",component:function(){return a.e(5).then(a.bind(null,"ZCiL"))}},{path:"/MilepostChangeEdit",component:function(){return a.e(3).then(a.bind(null,"kbo/"))}},{path:"/application",name:"Application",component:Be},{path:"/taskObject",name:"TaskObject",component:qe},{path:"/projectAdjust",name:"ProjectAdjust",component:ze},{path:"/sysMenu",name:"sysMenu",component:de},{path:"/sysAuthority",name:"sysAuthority",component:ge},{path:"/projectInformation",name:"/projectInformation",component:ye,beforeEnter:function(e,t,a){var o=window.localStorage,i=JSON.parse(o.menuList),r=[];i.forEach(function(e){"项目视图"==e.name&&r.push(e)});var s=r[0].children,l=localStorage.getItem("projectName");"{}"==n()(e.params)&&"{}"==n()(e.query)?(s.forEach(function(e){"YIZHANGTUGONGXIANGPINGTAI"==e.code&&(e.name=l||"未指定项目")}),a()):(o.projectNumber=e.params.projectNumber||e.query.projectNumber,o.projectName=e.params.projectName||e.query.projectName,o.companyId=e.params.company_id||e.query.company_id,o.projectId=e.params.id||e.query.id,o.parent_id=e.params.parent_id,"项目信息"==e.params.judgeproject?o.jump_type="1":o.jump_type="11",o.judgeproject=e.params.judgeproject||e.query.judgeproject,s.forEach(function(t){"YIZHANGTUGONGXIANGPINGTAI"==t.code&&(t.name=e.params.projectName||e.query.projectName)})),localStorage.setItem("menuList",n()(i)),a()}},{path:"/projectrisk",name:"/projectrisk",component:function(){return a.e(4).then(a.bind(null,"Fig6"))}},{path:"/sysRole",name:"sysRole",component:he},{path:"/Businessproject",name:"/Businessproject",component:ne},{path:"/ProjectInfo",name:"/ProjectInfo",component:ye},{path:"/contractproject",name:"/contractproject",component:le},{path:"/childproject",name:"/childproject",component:Oe},{path:"/subPackageItem",name:"/subPackageItem",component:ga},{path:"/errorPage",name:"/errorPage",component:Ee.default},{path:"/projectHome",name:"/projectHome",component:Ae,beforeEnter:function(e,t,a){var o=window.localStorage;if("{}"==n()(e.params))a();else{o.projectNumber=e.params.projectNumber,o.projectName=e.params.projectName,o.projectId=e.params.id,o.parent_id=e.params.parent_id,o.judgeproject=e.params.judgeproject;var i=JSON.parse(o.menuList),r=i.filter(function(e){return"项目视图"==e.name});Oa.projectName,r[0].children[3].name=e.params.projectName,localStorage.setItem("menuList",n()(i))}a()}},{path:"/projectmilestone",name:"/milepost",component:function(){return a.e(2).then(a.bind(null,"zayR"))}},{path:"/ContractMilestone",name:"/ContractMilestone",component:function(){return a.e(6).then(a.bind(null,"6pXx"))}},{path:"/ContractInformation",name:"/ContractInformation",component:function(){return a.e(7).then(a.bind(null,"+OO7"))},beforeEnter:function(e,t,a){var o=window.localStorage;if("{}"==n()(e.params))a();else{o.contractName=e.params.contractName,o.contractNumber=e.params.contractNumber,o.contractMoney=e.params.contractMoney,o.businessNumber=e.params.businessNumber;var i=JSON.parse(o.menuList);i.filter(function(e){return"HETONG_VIEW"==e.code})[0].children.filter(function(e){return"HT_ROOT"==e.code})[0].name=e.params.contractName,localStorage.setItem("menuList",n()(i))}a()}},{path:"/table",name:"/table",component:function(){return a.e(1).then(a.bind(null,"x5tg"))}},{path:"/milestoneTemplate",name:"/milestoneTemplate",component:function(){return a.e(0).then(a.bind(null,"JCWY"))}},{path:"/managerBoard",name:"/managerBoard",component:Ge},{path:"/managerBoardGroup",name:"/ManagerBoardGroup",component:rt},{path:"/ManagerBoardGT",name:"/ManagerBoardGT",component:Qe},{path:"/ManagerBoardAT",name:"/ManagerBoardAT",component:ot},{path:"/ManagerBoardNK",name:"/ManagerBoardNK",component:et},{path:"/managerBoardPlatform",name:"/managerBoardPlatform",component:ct},{path:"/managerBoardCloud",name:"/managerBoardCloud",component:pt},{path:"/managerBoardInternational",name:"/managerBoardInternational",component:_t},{path:"/managerBoardResearch",name:"/managerBoardResearch",component:bt},{path:"/externalPage",name:"/externalPage",component:wt},{path:"/NonContractual",name:"/NonContractual",component:Dt},{path:"/ContractAssociated",name:"/ContractAssociated",component:xt},{path:"/notContractProject",name:"/notContractProject",component:Ft},{path:"/nonPostProject",name:"/nonPostProject",component:Lt},{path:"/mounthOutputItem",name:"/mounthOutputItem",component:$t},{path:"/residueOutputItem",name:"/residueOutputItem",component:Vt},{path:"/associatedOutputItem",name:"/associatedOutputItem",component:Yt},{path:"/notAssociatedOutputItem",name:"/notAssociatedOutputItem",component:Jt},{path:"/budgetItem",name:"/budgetItem",component:Zt},{path:"/contractFinish",name:"/contractFinish",component:ia},{path:"/gtNonContractual",name:"/gtNonContractual",component:aa},{path:"/pendingDocument",name:"/pendingDocument",component:la},{path:"/cashDepositItem",name:"/cashDepositItem",component:da},{path:"/abnormalProject",name:"/abnormalProject",component:ha}]},{path:"/login",name:"login",component:Ce},{path:"/loginLine",name:"LoginLine",component:De}]});Ea.beforeEach(function(e,t,a){if(e.path,"/loginLine"==e.path)a();else{var o=JSON.parse(window.localStorage.getItem("userinfo")),n=Object(s.b)();o||"login"==e.name||n?a():a({path:"/"})}}),Ea.afterEach(function(e){if("/ManagerBoardGroup"==e.name||"/managerBoard"==e.name||"/managerBoardPlatform"==e.name||"/managerBoardCloud"==e.name||"/managerBoardInternational"==e.name||"/managerBoardResearch"==e.name||"/ManagerBoardGT"==e.name||"/ManagerBoardNK"==e.name||"/ManagerBoardAT"==e.name){var t=JSON.parse(window.localStorage.getItem("userinfo"));ya.set("",t.emp_name)}else ya.out()});t.a=Ea},YaQv:function(e,t){},YnkI:function(e,t,a){"use strict";var o=a("mvHQ"),n=a.n(o),i=a("Dd8w"),r=a.n(i),s=(a("14gb"),a("NYxO")),l=a("P9l9"),c=a("bqq5"),u=a("iBEn"),d={name:"contractassociated",props:["widget","models","rules","remote","datas"],components:{GenerateForm:c.a,GenetateFormItem:u.a},data:function(){return{loading:!1,htLoading:!1,currentPageContract:1,currentPage:1,checked:null,tableData:[],keyWords:"",checkedChoose:!0,checkedChooseContract:!1,page:{pageNum:1,pageSize:5,total:0},pageContract:{pageNum:1,pageSize:20,total:0},tableDataContract:[],associatedListData:[],listContractNumber:"",projectId:"",spanArr:[],pos:0,arr:[],contractNumber:"",projectNumber:""}},computed:r()({},Object(s.c)(["userinfo","isDetail"]),{isRevoke:function(){return sessionStorage.getItem("isRevoke")},asideHeight:function(){return document.documentElement.clientHeight-546},asideHeightA:function(){return document.documentElement.clientHeight-530}}),mounted:function(){},created:function(){var e=this.checkedChoose;e=1==e?0:1,this.getTable(1,e),"8416498716893399290"==this.userinfo.account_id?this.checkedChooseContract=!0:this.checkedChooseContract=!1;var t=this.checkedChooseContract;t=1==t?0:1,this.getCotractTable(1,t)},methods:{search:function(e){var t=this.checkedChoose;t=1==t?0:1,this.getTable(1,t)},checkedChooseProject:function(e){this.checked=null,this.associatedListData=[];var t=e;t=1==t?0:1,this.getTable(1,t)},checkedChooseWay:function(e){var t=e;t=1==t?0:1,this.getCotractTable(1,t)},handleSubmit:function(){var e=this;if(this.projectId){var t=this.associatedListData,a=0===t.length?0:1;t=JSON.parse(n()(t).replace(/contractName/g,"contract_name")),t=JSON.parse(n()(t).replace(/contractNumber/g,"contract_num"));var o={id:this.projectId,child_id:this.checked,projectNumber:this.projectNumber,contractNumber:this.contractNumber,relation:a,company_id:"-1814768306395265967"==this.userinfo.account_id?this.userinfo.account_id:void 0,contract_datas:t};Object(l._25)("/sgpm/rest/api/server/pm/gt/project/contracts",o).then(function(t){if(200==t.data.code){alert("合同关联成功!");var a=e.checkedChooseContract;a=1==a?0:1,e.getCotractTable(1,a);var o=e.checkedChoose;o=1==o?0:1,e.getTable(1,o)}else alert("合同关联失败，关联合同重复,请选择未关联合同")}).catch(function(e){alert("合同关联失败!")})}else alert("请选择项目!")},back:function(){this.$router.go(-1)},deleteRow:function(e,t){t.splice(e,1)},handleCurrentChangeAssociated:function(e){e&&(this.listContractNumber=e.contractNumber)},handleCurrentChangeRow:function(e){if(this.contractNumber=e.contractNumber,e){var t=this.arr;if(0==t.length)t.push(e);else{if("8416498716893399290"!=this.userinfo.account_id)return void alert("只能关联一个合同");t.push(e)}this.associatedListData=t}},handleCurrentChangeProject:function(e){var t=this;if(e){this.projectNumber=e.projectNumber,this.checked=e.id,this.projectId=e.conId;var a="/sgpm/rest/api/integration/project/contracts/"+e.conId;Object(l.Y)(a).then(function(e){var a=e.data.data;t.arr=a,t.arr,t.associatedListData=a,a.length>0&&(t.contractNumber=a[0].contractNumber)}).catch(function(e){})}},getCotractTable:function(e,t){var a=this;this.htLoading=!0;var o="";o=t||(1==this.checkedChooseContract?0:1);var n="/sgpm/rest/api/integration/contracts/relation?memberId="+this.userinfo.memberid+"&relation="+o+"&companyId="+this.userinfo.account_id+"&pageNum="+e+"&pageSize=20";Object(l.Y)(n).then(function(e){a.htLoading=!1,a.pageContract.total=e.data.meta.totalCount,a.tableDataContract=e.data.data,a.currentPageContract=e.data.meta.pageNo}).catch(function(e){a.htLoading=!1})},formatxuhao:function(e){return e.index=0==e.show?e.index="":e.index=e.index},getTable:function(e,t){var a=this;this.loading=!0;var o="";o=t||(1==this.checkedChoose?0:1);var n="/sgpm/rest/api/server/pm/gt/project?memberId="+this.userinfo.memberid+"&pageNum="+e+"&pageSize=5&relation="+o+"&keyword="+this.keyWords+"&companyId="+this.userinfo.account_id;Object(l.Q)(n).then(function(e){a.loading=!1;var t=e.data.data;if(t)for(var o=0;o<t.length;o++)0==t[o].relationStatus?t[o].relationStatus="已关联":2==t[o].relationStatus&&(t[o].relationStatus="未关联");a.tableData=e.data.data,a.page.total=e.data.meta.totalCount,a.currentPage=e.data.meta.pageNo;for(o=0;o<a.tableData.length;o++)a.tableData[o].show=!0}).catch(function(e){a.loading=!1})},getSpanArr:function(e){if(this.spanArr=[],e){for(var t=0;t<e.length;t++)0===t?(this.spanArr.push(1),this.pos=0):e[t].conId===e[t-1].conId?(this.spanArr[this.pos]+=1,this.spanArr.push(0)):(this.spanArr.push(1),this.pos=t);this.spanArr}},objectSpanMethod:function(e){e.row,e.column;var t=e.rowIndex,a=e.columnIndex;if(0===a||1===a){var o=this.spanArr[t];return{rowspan:o,colspan:o>0?1:0}}},cellClass:function(e){if(0==e.columnIndex)return"disabledSelect"},handleCurrentChange1:function(e){this.getCotractTable(e)},handleCurrentChange:function(e){this.getTable(e)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrap"},[a("div",{staticClass:"projectList"},[a("div",{staticClass:"project"},[a("el-row",{staticStyle:{height:"35px","line-height":"35px"},attrs:{gutter:10}},[a("el-col",{staticStyle:{"font-weight":"bold"},attrs:{span:12}},[e._v("项目列表")]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"header-search"},[a("el-input",{staticStyle:{"vertical-align":"baseline"},attrs:{size:"mini",placeholder:"项目名称/项目"},model:{value:e.keyWords,callback:function(t){e.keyWords=t},expression:"keyWords"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1),e._v(" "),a("el-checkbox",{on:{change:e.checkedChooseProject},model:{value:e.checkedChoose,callback:function(t){e.checkedChoose=t},expression:"checkedChoose"}},[e._v("仅显示未关联项目")])],1)])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-key":"id","max-height":"200",border:"","header-cell-style":{fontSize:"14px",color:"#303133",height:"34px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"34px"},"cell-style":{padding:0},"highlight-current-row":""},on:{"current-change":e.handleCurrentChangeProject}},[a("el-table-column",{attrs:{label:"",width:"35",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.show?a("el-radio",{staticStyle:{color:"#fff"},attrs:{label:t.row.id},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("\n                 ")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"projectName",label:"项目名称",width:"200","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"projectNumber",label:"项目编号",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"classUnitBName",label:"实施B级单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"classUnitCName",label:"实施C级单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"projectManagerName",label:"项目经理"}}),e._v(" "),a("el-table-column",{attrs:{prop:"relationStatus",label:"关联状态"}})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("div",{staticClass:"page right"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":1,"page-sizes":[5],layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)])],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:15}},[a("div",{staticClass:"list-container"},[a("el-row",{staticStyle:{height:"40px","line-height":"35px"},attrs:{gutter:10}},[a("el-col",{staticStyle:{"font-weight":"bold"},attrs:{span:12}},[e._v("合同列表")]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"header-search"},[a("el-input",{staticStyle:{display:"none"},attrs:{placeholder:"合同编号/合同名称",size:"small"}},[a("el-button",{attrs:{slot:"append"},slot:"append"},[a("i",{staticClass:"icon-search"})])],1),e._v(" "),a("el-checkbox",{on:{change:e.checkedChooseWay},model:{value:e.checkedChooseContract,callback:function(t){e.checkedChooseContract=t},expression:"checkedChooseContract"}},[e._v("仅显示未关联合同")])],1)])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.htLoading,expression:"htLoading"}],ref:"contractSelect",staticStyle:{width:"100%"},attrs:{data:e.tableDataContract,height:e.asideHeightA,border:"","header-cell-style":{fontSize:"14px",color:"#303133",height:"34px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"34px"},"cell-style":{padding:0}},on:{"row-click":e.handleCurrentChangeRow}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"contractName",label:"合同名称",width:"170","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"contractNumber",label:"合同编号(简)",width:"170"}}),e._v(" "),a("el-table-column",{attrs:{prop:"contractProgress",label:"审核进度",width:"110"}}),e._v(" "),a("el-table-column",{attrs:{prop:"implementLevelTwoName",label:"实施B级单位",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"projectManagerName",label:"项目经理"}})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("div",{staticClass:"page right"},[a("el-pagination",{attrs:{"current-page":e.currentPageContract,"page-size":1,"page-sizes":[20],layout:"total, sizes, prev, pager, next, jumper",total:e.pageContract.total},on:{"current-change":e.handleCurrentChange1,"update:currentPage":function(t){e.currentPageContract=t},"update:current-page":function(t){e.currentPageContract=t}}})],1)])],1)]),e._v(" "),a("el-col",{attrs:{span:9}},[a("div",{},[a("el-row",{staticStyle:{height:"40px","line-height":"35px",margin:"3px 0 0 0"},attrs:{gutter:10}},[a("el-col",{staticStyle:{"font-weight":"bold"},attrs:{md:12,xl:9,sm:12,lg:12}},[e._v("关联合同列表")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.associatedListData,height:e.asideHeightA,border:"","header-cell-style":{fontSize:"14px",color:"#303133",height:"34px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"34px"},"cell-style":{padding:0}},on:{"current-change":e.handleCurrentChangeAssociated}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"contractName",label:"合同名称",width:"160","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"contractNumber",label:"合同编号(简)",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{on:{click:function(a){return e.deleteRow(t.$index,e.associatedListData)}}},[a("i",{staticClass:"el-icon-delete-solid",staticStyle:{"font-size":"20px",color:"#409eff"}})])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"})],1)])],1)],1),e._v(" "),a("div",{staticClass:"btn-item"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleSubmit}},[e._v("确定")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.back}},[e._v("返回")])],1)])},staticRenderFns:[]};var m=a("VU/8")(d,p,!1,function(e){a("pzWX")},"data-v-090c95ba",null);t.a=m.exports},Yvl6:function(e,t){},ZJmJ:function(e,t){},Zjz6:function(e,t,a){"use strict";var o=a("Dd8w"),n=a.n(o),i=a("P9l9"),r=(a("mtWM"),a("bqq5")),s=a("pdpF"),l=a("ApmE"),c=a("NYxO"),u=a("gyMJ"),d={name:"ManagementHome",props:["widget","models","rules","remote","datas"],components:{GenerateForm:r.a,chart:s.a,BoardWarning:l.a},data:function(){return{tableData:[],leftChartOption:{title:{text:"近五年逐年新增项目分析",left:"center"},toolbox:{show:!0,feature:{saveAsImage:{show:!0}}},tooltip:{trigger:"axis",axisPointer:{type:"cross",axis:"x",crossStyle:{color:"#999"}}},grid:{left:"12%",top:"25%"},legend:{data:["合同额","项目个数"],top:"bottom",left:"43%"},xAxis:[{type:"category",data:[]}],yAxis:[{type:"value",name:"金额(万元)",splitLine:{show:!1},axisLabel:{formatter:"{value}"}},{type:"value",name:"个数",splitLine:{show:!1},axisLabel:{formatter:"{value} "}}],series:[]},rightChartOption:{title:{text:"项目各阶段尾款分析",left:"center"},toolbox:{show:!0,feature:{saveAsImage:{show:!0}}},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},legend:{data:["尾款金额","项目个数"],top:"bottom",left:"43%"},grid:{left:"12%",top:"25%"},xAxis:[{type:"category",data:["启动","规划","实施","收尾"],axisPointer:{type:"shadow"}}],yAxis:[{type:"value",name:"金额(万元)",splitLine:{show:!1},axisLabel:{formatter:"{value}"}},{type:"value",name:"个数",splitLine:{show:!1},axisLabel:{formatter:"{value}"}}],series:[]},path:{managerBoard:"应用业务群",managerBoardGroup:"集团",managerBoardPlatform:"平台业务群",managerBoardCloud:"云业务群",managerBoardInternational:"国际业务群",managerBoardResearch:"研究院",ManagerBoardGT:"国图信息",ManagerBoardNK:"南康科技",ManagerBoardAT:"北京世纪安图"},pathReversal:{"应用业务群":"managerBoard","平台业务群":"managerBoardPlatform","云业务群":"managerBoardCloud","国际业务群":"managerBoardInternational","研究院":"managerBoardResearch","国图信息":"ManagerBoardGT","南康科技":"ManagerBoardNK","北京世纪安图":"ManagerBoardAT"},headlineTitle:"",countCard:{},todoCard:{},unCloseCard:{},enCloseCard:{},otherCard:{}}},filters:{isNull:function(e){return e||"--"}},computed:n()({},Object(c.c)(["userinfo"]),{asideHeight:function(){return document.documentElement.clientHeight-150}}),mounted:function(){this.getReturnedChart(),this.getProjectChart(),this.getMgBordTable()},methods:{downLoad:function(){var e=document.createElement("a"),t=document.querySelector("body"),a=this.userinfo.account_id;e.href=u.a.urlPort04+"/sgpm/rest/api/server/pm/project/excel/export?companyId="+a,e.style.display="none",t.appendChild(e),e.click(),t.removeChild(e)},getMgBordTable:function(){var e=this;this.$route.path.slice(1);var t=this.$route.path.slice(1);this.headlineTitle=this.path[t],this.userinfo,Object(i.D)("/board/data/table?group="+this.path[t]+"&memberId="+this.userinfo.memberid,null).then(function(t){200==t.data.code&&(e.tableData=t.data.data.table,e.countCard=t.data.data.countCard,e.todoCard=t.data.data.todoCard,e.unCloseCard=t.data.data.unCloseCard,e.enCloseCard=t.data.data.enCloseCard,e.otherCard=t.data.data.otherCard)}).catch(function(e){})},getReturnedChart:function(){var e=this,t=this.$route.path.slice(1);Object(i._23)("/board/returned/amount?group="+this.path[t],null).then(function(t){if(200==t.data.code){var a={},o=[];t.data.data.forEach(function(e){if("项目个数"==e.name)e.type="line",e.yAxisIndex=1,e.lineStyle={color:"#fecb42",shadowOffsetY:3,shadowColor:"#af8003",shadowBlur:6},e.itemStyle={color:"#ffb900"},a=e,o.push(a);else{e.type="bar",e.color="#65cee8",e.label={normal:{show:!0,position:"top",color:"#000"}},e.itemStyle={opacity:.7,color:"#ade1fb"};var t=e.data.map(function(e){return e.toFixed(2)});a=e,e.data=t,o.push(a)}}),e.rightChartOption.series=o.reverse()}}).catch(function(e){})},getProjectChart:function(){var e=this,t=this.$route.path.slice(1);Object(i._14)("/board/project/account?group="+this.path[t],null).then(function(t){if(200==t.data.code){var a=t.data.data,o={},n=[];a.forEach(function(e){if("合同金额"==e.name){e.type="bar",e.color="#65cee8",e.label={normal:{show:!0,position:"top",color:"#000"}},e.itemStyle={opacity:.7,color:"#ade1fb"};var t=e.data.map(function(e){return e.toFixed(2)});o=e,e.data=t,e.name="合同额",n.push(o)}else"项目个数"==e.name&&(e.type="line",e.yAxisIndex=1,e.lineStyle={color:"#fecb42",shadowOffsetY:3,shadowColor:"#af8003",shadowBlur:6},e.itemStyle={color:"#ffb900"},o=e,n.push(o))}),e.leftChartOption.series=n,e.leftChartOption.xAxis[0].data=a[2].data}}).catch(function(e){})},objectSpanMethod:function(e){e.row,e.column;var t=e.rowIndex;if(0===e.columnIndex)return t%4==0?{rowspan:4,colspan:1}:{rowspan:0,colspan:0}}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"management-home",style:{height:e.asideHeight+"px"}},[a("div",{staticClass:"headline"},[a("div",{staticClass:"warp"},[a("div",[a("span",[e._v(e._s("上海南康"==e.headlineTitle?"南康科技":e.headlineTitle))])]),e._v(" "),a("div",[a("el-button",{staticClass:"downLoading",attrs:{type:"text"},on:{click:e.downLoad}},[e._v("导出")]),e._v(" "),a("span",[e._v("单位：万元")])],1)]),e._v(" "),"上海南康"==e.headlineTitle?a("p",{staticClass:"titlebz"},[e._v("项目数据起始于2015年")]):a("p",{staticClass:"titlebz"},[e._v("项目数据起始于2010年")])]),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("div",{staticClass:"card"},[a("p",{staticClass:"title"},[e._v("总项目")]),e._v(" "),a("ul",[a("li",[a("span",[e._v("个数")]),e._v(" "),a("span",{staticClass:"num"},[e._v(e._s(e.countCard.count))])]),e._v(" "),a("li",[a("span",[e._v("合同额")]),e._v(" "),a("span",{staticClass:"num"},[e._v(e._s(e.countCard.contractAmount))])]),e._v(" "),a("li",[a("span",[e._v("已回款")]),e._v(" "),a("span",{staticClass:"num"},[e._v(e._s(e._f("isNull")(e.countCard.moneyBack)))])]),e._v(" "),a("li",[a("span",[e._v("待回款")]),e._v(" "),a("span",{staticClass:"num"},[e._v(e._s(e._f("isNull")(e.countCard.waitMoneyBack)))])])])])]),e._v(" "),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"card"},[a("p",{staticClass:"title"},[e._v("在实施")]),e._v(" "),a("ul",[a("li",[a("span",[e._v("个数")]),e._v(" "),a("span",{staticClass:"num"},[e._v(e._s(e.todoCard.count))])]),e._v(" "),a("li",[a("span",[e._v("合同额")]),e._v(" "),a("span",{staticClass:"num"},[e._v(e._s(e.todoCard.contractAmount))])]),e._v(" "),a("li",[a("span",[e._v("已回款")]),e._v(" "),a("span",{staticClass:"num"},[e._v(e._s(e.todoCard.moneyBack))])]),e._v(" "),a("li",[a("span",[e._v("待回款")]),e._v(" "),a("span",{staticClass:"num"},[e._v(e._s(e.todoCard.waitMoneyBack))])])])])]),e._v(" "),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"card"},[a("p",{staticClass:"title"},[e._v("已验收")]),e._v(" "),a("ul",[a("li",[a("span",[e._v("个数")]),e._v(" "),a("span",{staticClass:"num"},[e._v(e._s(e.unCloseCard.count))])]),e._v(" "),a("li",[a("span",[e._v("合同额")]),e._v(" "),a("span",{staticClass:"num"},[e._v(e._s(e.unCloseCard.contractAmount))])]),e._v(" "),a("li",[a("span",[e._v("已回款")]),e._v(" "),a("span",{staticClass:"num"},[e._v(e._s(e.unCloseCard.moneyBack))])]),e._v(" "),a("li",[a("span",[e._v("待回款")]),e._v(" "),a("span",{staticClass:"num"},[e._v(e._s(e.unCloseCard.waitMoneyBack))])])])])]),e._v(" "),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"card"},[a("p",{staticClass:"title"},[e._v("已关闭")]),e._v(" "),a("ul",[a("li",[a("span",[e._v("个数")]),e._v(" "),a("span",{staticClass:"num"},[e._v(e._s(e.enCloseCard.count))])]),e._v(" "),a("li",[a("span",[e._v("合同额")]),e._v(" "),a("span",{staticClass:"num"},[e._v(e._s(e.enCloseCard.contractAmount))])]),e._v(" "),a("li",[a("span",[e._v("已回款")]),e._v(" "),a("span",{staticClass:"num"},[e._v(e._s(e._f("isNull")(e.enCloseCard.moneyBack)))])]),e._v(" "),a("li",[a("span",[e._v("待回款")]),e._v(" "),a("span",{staticClass:"num"},[e._v(e._s(e._f("isNull")(e.enCloseCard.waitMoneyBack)))])])])])]),e._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"card"},[a("p",{staticClass:"title"},[e._v("其他")]),e._v(" "),a("ul",[a("li",[a("span",[e._v("个数")]),e._v(" "),a("span",{staticClass:"num"},[e._v(e._s(e.otherCard.count))])]),e._v(" "),a("li",[a("span",[e._v("合同额")]),e._v(" "),a("span",{staticClass:"num"},[e._v(e._s(e.otherCard.contractAmount))])]),e._v(" "),a("li",[a("span",[e._v("已回款")]),e._v(" "),a("span",{staticClass:"num"},[e._v(e._s(e._f("isNull")(e.otherCard.moneyBack)))])]),e._v(" "),a("li",[a("span",[e._v("待回款")]),e._v(" "),a("span",{staticClass:"num"},[e._v(e._s(e._f("isNull")(e.otherCard.waitMoneyBack)))])])])])])],1),e._v(" "),a("div",{staticClass:"middle"},[a("el-row",{attrs:{gutter:50}},[a("el-col",{staticClass:"chart-border",attrs:{span:12}},[a("chart",{ref:"leftChart",attrs:{options:e.leftChartOption}}),e._v(" "),a("div",{staticClass:"smark"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"近五年每年新增应用项目的个数和累计合同额",placement:"bottom"}},[a("el-button",{attrs:{type:"text"}},[a("i",{staticClass:"el-icon-warning-outline smark-icon"})])],1)],1)],1),e._v(" "),a("el-col",{staticClass:"chart-border",attrs:{span:12}},[a("chart",{attrs:{options:e.rightChartOption}}),e._v(" "),a("div",{staticClass:"smark"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"未回款完毕且可以回款的项目，按照项目阶段分别统计项目个数和尾款金额",placement:"bottom"}},[a("el-button",{attrs:{type:"text"}},[a("i",{staticClass:"el-icon-warning-outline smark-icon"})])],1)],1)],1)],1)],1),e._v(" "),a("el-table",{staticClass:"table",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData,"span-method":e.objectSpanMethod,border:"","header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0}}},[a("el-table-column",{attrs:{width:"180",label:"经营单位"},scopedSlots:e._u([{key:"default",fn:function(t){return["集团"!=e.headlineTitle&&t.row.show?a("router-link",{attrs:{to:{path:"/projectAdjust?payment="+t.row.group}}},[a("span",{staticClass:"num"},[e._v(e._s(t.row.group))])]):t.row.show?a("router-link",{attrs:{to:{path:e.pathReversal[t.row.group]}}},[a("span",{staticClass:"num"},[e._v(e._s(t.row.group))])]):a("span",[e._v(e._s(t.row.group))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"项目状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"count",label:"个数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"contractAmount",label:"合同额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"prueContractAmount",label:"纯合同额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"moneyBack",label:"已回款"}}),e._v(" "),a("el-table-column",{attrs:{prop:"waitMoneyBack",label:"待回款"}})],1)],1)},staticRenderFns:[]};var m=a("VU/8")(d,p,!1,function(e){a("9HKf")},"data-v-5e4fa67b",null);t.a=m.exports},ZtmM:function(e,t){},"Zu/3":function(e,t){},ahaP:function(e,t){},anc4:function(e,t,a){"use strict";var o=a("mvHQ"),n=a.n(o),i=a("Dd8w"),r=a.n(i),s=a("P9l9"),l=a("QmSG"),c=a("NYxO"),u=(a("14gb"),{name:"ProjectList",props:["widget","models","rules","remote","datas"],data:function(){return{isShowBtn:!0,projectStatusConfig:{0:"已登记",1:"运行中",2:"完成",3:"暂停",4:"关闭",5:"异常关闭",6:"验收"},isPname:!0,btnMaxWidth:130,dynamiCheckList:[],form:{dicName:"All",keyWord:""},advancedDialog:!1,advancedForm:{fieldName:"",fieldValue:""},dynamicValidateForm:{domains:[{value:"",value1:"",isDisabled:!1}],type:[]},isTest:!1,checkFixed:!0,currentPage:1,advancedList:[],tableData:[],selectAry:[],page:{pageNum:1,pageSize:20,total:0},listConfig:[{key:"auditStatus",label:"审核进度",isShow:!0},{key:"projectNumber",label:"项目编号",isShow:!0},{key:"classUnitBName",label:"实施B级单位",isShow:!0},{key:"classUnitCName",label:"实施C级单位",isShow:!0},{key:"projectManagerName",label:"项目经理",isShow:!0},{key:"projectStatus",label:"项目状态",isShow:!0},{key:"projectType",label:"项目类型",isShow:!0},{key:"keyword",label:"项目关键字",isShow:!0},{key:"expectProjectStartDate",label:"项目预计开始时间",isShow:!0},{key:"expectProjectEndDate",label:"项目预计结束时间",isShow:!0},{key:"note",label:"备注",isShow:!0}],isAlready:!1,isStart:!1,isFinish:!0,isRecall:!0,isEditor:!0,multipleSelection:[],advancedOptions:l.a.advancedOptions,advancedMultiples:{},editorBtnMark:"",dialogVisible:!1,dialogShowField:!1,checkedField:[],aLLField:[],tableLoading:!0,examineDialog:!1,passForm:{attitude:"1",comment:""},isWaitMeBtn:!0,proParams:{},fieldName:"",fieldContent:[],sortFieldName:"",sort:null,isCared:null,tookenId:"",auditConfig:{10:"登记待提交",11:"登记审核中",12:"登记已审核",20:"启动待提交",21:"启动审核中",22:"启动已审核",30:"工作结项待提交",31:"工作结项审核中",32:"工作结项已审核"}}},filters:{formatThousands:function(e){if("--"==e)return"--";e=(e/=1e4).toFixed(2);if(0==/^[0-9]*[1-9][0-9]*$/.test(e))return e&&e.toString().replace(/(\d)(?=(\d{3})+\.)/g,function(e,t){return t+","});return(e+"").replace(/\d{1,3}(?=(\d{3})+$)/g,"$&,")},formatTip:function(e){var t=void 0!=e?parseFloat((100*e).toFixed(10)):"--";return t<10?"进度正常("+t+"%)":t>=10&&t<30?"一般延期("+t+"%)":t>=30?"严重延期("+t+"%)":"--"}},watch:{datas:{deep:!0,handler:function(e){this.datas,this.datas.options.url_a}}},computed:r()({},Object(c.c)(["userinfo","gjFromModel","gjFromCheckList"]),{placeholder:function(){return"8416498716893399290"==this.userinfo.account_id?"项目名称/项目编号/工程代码":"项目名称/项目编号"},projectType:function(){return this.datas.options.pro_type},copyListConfig:function(){return JSON.parse(n()(this.listConfig))},listCode:function(){return this.form.dicName},asideHeight:function(){return document.documentElement.clientHeight-205}}),mounted:function(){this.init(),"-1814768306395265967"==this.userinfo.account_id||"5326994013938795629"==this.userinfo.account_id||"-1360422574114386809"==this.userinfo.account_id||"7034660345998100768"==this.userinfo.account_id||"8416498716893399290"==this.userinfo.account_id||"-7975978055853456035"==this.userinfo.account_id||"7638091599462351621"==this.userinfo.account_id?this.isShowBtn=!1:this.isShowBtn=!0,"8416498716893399290"==this.userinfo.account_id&&(this.listConfig=l.a.contractTableConfigNk)},methods:r()({},Object(c.b)(["setDetailPage","setCacheParams","setGJFromModel","setGJFromCheck"]),{headerDragend:function(e,t,a,o){this.btnMaxWidth=e,e>200?this.isPname=!1:(this.isPname=!0,this.btnMaxWidth=200)},init:function(){"-1814768306395265967"==this.userinfo.account_id?this.isAlready=!0:this.isAlready=!1,this.getNotContractTable({pageNum:1,pageSize:20,keyWord:"",type:"all",memberId:this.userinfo.memberid}),this.getSelectList()},advancedChange:function(e,t){var a=this;this.dynamicValidateForm.domains[t].value1="",Object(s.e)("/sgpm/rest/api/server/pm/project/condition?projectKey="+e,null).then(function(e){a.advancedList=e.data.data}).catch(function(e){})},popoverShow:function(){this.checkFixed=!1},popoverHide:function(){this.checkFixed=!0},advancedDialogOpen:function(){this.advancedDialog=!0,this.dynamicValidateForm=this.gjFromModel,this.dynamiCheckList=this.gjFromCheckList.isStart||[]},getNotContractTable:function(e){var t=this;this.tableLoading=!0;var a=e;Object(s._3)("/sgpm/rest/api/server/non/pm/gt/projects",a).then(function(e){t.tableLoading=!1;e.data.data;t.tableData=e.data.data||[],t.page.total=e.data.meta.totalCount}).catch(function(e){})},keyWordSearch:function(){var e={pageNum:this.page.pageNum,pageSize:this.page.pageSize,keyWord:this.form.fieldName.trim(),type:"all",memberId:this.userinfo.memberid};this.getNotContractTable(e)},getSelectList:function(){var e=this;Object(s._17)("/sgpm/rest/api/server/pm/project/item?param=1",null).then(function(t){var a=t.data.data;e.selectAry=a}).catch(function(e){})},handleCurrentChange:function(e){var t={pageNum:e,pageSize:this.page.pageSize,keyWord:this.form.fieldName&&this.form.fieldName.trim(),type:"all",memberId:this.userinfo.memberid};this.getNotContractTable(t)},handleSelectionChange:function(e){if(localStorage.setItem("projectInfo",n()(e)),e){var t=12==e.audit_status&&this.userinfo.emp_name==e.projectManagerName||30==e.audit_status&&this.userinfo.emp_name==e.projectManagerName;this.isFinish=!t,this.isPass=!1,this.isReject=!1;var a=e.auditStatus||"";this.editorBtnMark=a,this.isStart=12==e.audit_status&&this.userinfo.emp_name==e.projectManager,this.isRecall="审核中"!==a,this.isWaitMeBtn=!1}this.isEditor="登记待提交"!=a,this.multipleSelection=e},notProjectStart:function(e){localStorage.removeItem("projectMsg"),this.setDetailPage(!1),sessionStorage.setItem("isRevoke",2),localStorage.removeItem("keyWords"),localStorage.removeItem("keytechnologys"),localStorage.removeItem("businessProjectId"),localStorage.removeItem("globalParams"),this.$router.push({path:"notContractProject",query:{judgelogo:e}})},postProjectHandle:function(){this.$router.push({path:"nonPostProject",query:{id:this.multipleSelection.id,projectNum:this.multipleSelection.projectNumber}})}})}),d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"list-container"},[a("div",{staticClass:"header"},[a("el-form",{ref:"form",attrs:{model:e.form,inline:!0,size:"mini"}},[a("el-row",{attrs:{gutter:5,type:"flex",justify:"space-between"}},[a("el-col",{attrs:{md:14,xl:9,sm:14,lg:2}}),e._v(" "),a("el-col",{attrs:{md:18,xl:9,sm:14,lg:11}},[a("div",{staticClass:"header-search"},[a("el-form-item",[a("el-input",{attrs:{placeholder:e.placeholder,size:"mini"},model:{value:e.form.fieldName,callback:function(t){e.$set(e.form,"fieldName",t)},expression:"form.fieldName"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.keyWordSearch},slot:"append"})],1)],1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.isShowBtn},on:{click:function(t){return e.notProjectStart("a")}}},[e._v("非合同项目登记\n            ")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.isFinish},on:{click:function(t){return e.postProjectHandle()}}},[e._v("非合同项目结项\n            ")])],1)])],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"refTable",staticClass:"father-pro-table",staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{data:e.tableData,"highlight-current-row":"",border:"","max-height":e.asideHeight,"header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0},"row-key":"id","default-expand-all":"","tree-props":{children:"son_project",hasChildren:"hasChildren"}},on:{"current-change":e.handleSelectionChange,"header-dragend":e.headerDragend}},[a("el-table-column",{attrs:{type:"index",width:"38",align:"center",label:"序号",fixed:e.checkFixed}}),e._v(" "),a("el-table-column",{attrs:{label:"项目名称",width:"140",align:"center",fixed:e.checkFixed,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"/projectInformation",params:{id:t.row.id,category:t.row.jumpType,projectName:t.row.projectName,projectNumber:t.row.projectNumber,company_id:t.row.company_id,judgeproject:"非合同项目信息"}}}},[a("span",{staticClass:"num"},[e._v(e._s(t.row.projectName))])])]}}])}),e._v(" "),e._l(e.listConfig,function(t,o){return t.isShow?a("el-table-column",{key:o,attrs:{prop:t.key,width:"140",label:t.label,align:"center"},scopedSlots:e._u([{key:"default",fn:function(o){return["projectStatus"==t.key?a("span",[e._v(e._s(null==o.row[t.key]?"--":e.projectStatusConfig[o.row[t.key]]))]):a("span",[e._v(e._s(null==o.row[t.key]?"--":o.row[t.key]))])]}}],null,!0)}):e._e()})],2),e._v(" "),a("div",{staticClass:"page right"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":1,"page-sizes":[20],layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)},staticRenderFns:[]};var p=a("VU/8")(u,d,!1,function(e){a("Kiaf")},"data-v-388e2204",null);t.a=p.exports},aqfx:function(e,t,a){"use strict";var o=a("/Cvn"),n=a.n(o),i=a("QmSG"),r=a("14gb"),s=a("P9l9"),l={name:"MyTree",props:["widget","models","rules","remote","datas"],data:function(){return{treeData:[],treeDataUrl:"",filterText:"",spaceVal:"5326994013938795629",defaultProps:{children:"children",label:"label"},curTreeNode:{},spaceOptions:i.a.spaceOptions}},watch:{datas:{deep:!0,handler:function(e){this.datas,this.datas.options.url_a}},filterText:function(e){this.$refs.treeSingle.filter(e)}},computed:{asideHeight:function(){return document.documentElement.clientHeight-260}},mounted:function(){this.getTreeData(this.spaceVal),r.a.$emit("spaceId",this.spaceVal)},created:function(){var e=this;r.a.$on("reloadTree",function(t){t&&e.getTreeData(e.spaceVal)})},destroyed:function(){r.a.$off("addTree")},methods:{handleDrop:function(e,t,a,o){this.treeData,Object(s.p)("/sgpm/rest/api/system/portal/menus/sort",this.treeData).then(function(e){e.status}).catch(function(e){})},getTreeData:function(e){var t=this;this.treeDataUrl=this.datas.options.url_a,Object(s._37)(this.treeDataUrl+"?companyId="+e,null).then(function(e){t.treeData=e.data.data.element,t.changeAttribute(t.treeData)}).catch(function(e){})},changeAttribute:function(e){var t=this;e.forEach(function(e){e.label=e.name,delete e.name,e.children&&0!==e.children.length&&t.changeAttribute(e.children)})},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},handleNodeClick:function(e,t,a){this.$refs.treeSingle.setCheckedKeys(n()(e.id));var o=e;o.parentNodeLabel=t.parent.label,r.a.$emit("checkNode",o),this.curTreeNode=e},addTree:function(){r.a.$emit("addTree",!0)},delTree:function(){this.curTreeNode},handleSingleCheck:function(e,t){if(t.checkedKeys.length>0){this.$refs.treeSingle.setCheckedKeys([e.id]);var a=e;r.a.$emit("checkNode",a),this.curTreeNode=e}},handleMultipleCheck:function(e,t){},spaceChange:function(e){this.getTreeData(e),r.a.$emit("spaceId",e),this.$refs.treeSingle.setCheckedKeys([])}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[1==e.datas.options.isSpace?a("el-row",{staticClass:"space"},[a("el-select",{attrs:{placeholder:"请选择空间"},on:{change:e.spaceChange},model:{value:e.spaceVal,callback:function(t){e.spaceVal=t},expression:"spaceVal"}},e._l(e.spaceOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1):e._e(),e._v(" "),a("el-row",{staticClass:"search",attrs:{justify:"space-between\t"}},[a("el-col",{attrs:{span:13}},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}})],1),e._v(" "),1==e.datas.options.isShowBtn?a("el-col",{staticClass:"btn-item",attrs:{span:11}},[a("el-button",{attrs:{size:"mini",plain:"",type:"primary",icon:"el-icon-plus"},on:{click:e.addTree}}),e._v(" "),a("el-button",{attrs:{size:"mini",plain:"",type:"danger",icon:"el-icon-delete"},on:{click:e.delTree}})],1):e._e()],1),e._v(" "),1==e.datas.options.radio?a("el-tree",{ref:"treeSingle",staticClass:"filter-tree",style:{height:e.asideHeight+"px"},attrs:{data:e.treeData,props:e.defaultProps,"node-key":"id","show-checkbox":"","check-strictly":"","filter-node-method":e.filterNode,draggable:""},on:{"node-click":e.handleNodeClick,"node-drop":e.handleDrop,check:e.handleSingleCheck}}):e._e(),e._v(" "),2==e.datas.options.radio?a("el-tree",{ref:"treeMultiple",staticClass:"filter-tree",style:{height:e.asideHeight+"px"},attrs:{data:e.treeData,props:e.defaultProps,"node-key":"id","show-checkbox":"","filter-node-method":e.filterNode,draggable:""},on:{"node-click":e.handleNodeClick,check:e.handleMultipleCheck}}):e._e()],1)},staticRenderFns:[]};var u=a("VU/8")(l,c,!1,function(e){a("MlP1")},"data-v-1fc8d740",null);t.a=u.exports},aqyY:function(e,t){},b5sD:function(e,t){},bc9r:function(e,t){},boDl:function(e,t){},bqq5:function(e,t,a){"use strict";var o=a("//Fk"),n=a.n(o),i=a("Gu7T"),r=a.n(i),s=a("fZjL"),l=a.n(s),c=a("mvHQ"),u=a.n(c),d=a("Dd8w"),p=a.n(d),m=a("14gb"),h=a("iBEn"),_=a("P9l9"),f=a("NYxO"),g={name:"FmGenerateForm",components:{GenetateFormItem:h.a},beforeRouteEnter:function(e,t,a){a(function(e){e.$parent.$parent.$parent.getMenu()})},props:{data:{default:function(){return{list:"",config:{labelPosition:"left",labelWidth:100}}}},remote:{default:[]},value:{default:[]},globalParams:{type:Object,default:function(){}}},data:function(){return{models:{},rules:{},list:[],projectId:this.$route.params.id,judgelogo:this.$route.query.judgelogo,judgestart:this.$route.params.judgestart,tagArr:""}},watch:{data:function(e){},value:{deep:!0,handler:function(e){this.models=p()({},this.models,e)}}},mounted:function(){var e=this;setTimeout(function(){var t=e.$route.params;e.parent_id=t.parent_id,e.judgeproject=t.judgeproject,m.a.$on("contractList",function(t){t&&(e.item=t,e.getprojectData())}),"99"==e.judgestart||("项目信息"==e.judgeproject||"/projectInformation"==e.$route.name?(m.a.$on("projectContent",function(t){t&&(void 0==t.parent_id||null==t.parent_id||"null"==t.parent_id||"undefined"==t.parent_id?e.getParentData(t.id):e.getChildData(t.id))}),e.getprojectData()):"a"==e.judgelogo||"b"==e.judgelogo||"/Businessproject"==e.$route.name||"/Contractproject"==e.$route.name||e.$route.name)},200)},computed:p()({},Object(f.c)(["userinfo"])),beforeDestroy:function(){m.a.$off()},created:function(){"/NonContractual"==this.$route.name||"-1814768306395265967"==this.userinfo.account_id||"/gtNonContractual"==this.$route.name||"/nkNonContractual"==this.$route.name||"/contractFinish"==this.$route.name||"/abnormalProject"==this.$route.name||"/nonPostProject"==this.$route.name?this.setBusinessProUpdate():"/projectstart"==this.$route.name&&"-1814768306395265967"==this.userinfo.account_id&&this.setBusinessProUpdate()},methods:{getBusinesstype:function(e){var t="/sgpm/rest/api/server/pm/project/enum/group?param=BusinessType&group_id="+e;Object(_._28)(t).then(function(e){m.a.$emit("businesstype",u()(e.data.data))}).catch(function(e){})},setBusinessProUpdate:function(e){var t=this;setTimeout(function(){var e=JSON.parse(localStorage.getItem("globalParams")),a={};for(var o in e){a[o.toLowerCase()]=e[o]}t.models=a},1500)},updateJsonData:function(e){var t={};for(var a in e)if("CONTRACT"==a)for(var o in e[a])t[o]=e[a][o];else t[a]=e[a];return t},keepTwoDecimalFull:function(e){var t=parseFloat(e);if(isNaN(t))return alert("传递参数错误，请检查！"),!1;var a=(t=Math.round(100*e)/100).toString(),o=a.indexOf(".");for(o<0&&(o=a.length,a+=".");a.length<=o+2;)a+="0";return a},getParentData:function(e){var t=this,a={projectId:Number(e)};Object(_.Q)("/sgpm/rest/api/server/pm/project/parent",a).then(function(e){var a=e.data.data;localStorage.setItem("projectData",u()(a)),t.getprojectData()}).catch(function(e){})},getChildData:function(e){var t=this,a={projectId:Number(e)};Object(_.Q)("/sgpm/rest/api/server/pm/project/child",a).then(function(e){var a=e.data.data;localStorage.setItem("projectData",u()(a)),t.getprojectData()}).catch(function(e){})},formatThousands:function(e){if(0==/^[0-9]*[1-9][0-9]*$/.test(e))return e&&e.toString().replace(/(\d)(?=(\d{3})+\.)/g,function(e,t){return t+","});return(e+"").replace(/\d{1,3}(?=(\d{3})+$)/g,"$&,")},getprojectData:function(e){var t=this;setTimeout(function(){localStorage.removeItem("projectMsg");var e=JSON.parse(localStorage.getItem("projectData")),a={};for(var o in e){a[o.toLowerCase()]=e[o],"KEYWORD"==o?m.a.$emit("keyWords",e[o]):"KEYTECHNOLOGY"==o&&m.a.$emit("keytechnologys",e[o])}t.models=a,t.item&&(t.models.contractnumber=t.item.CONTRACTNUMBER,t.models.contractsigningdate=t.item.CONTRACTSIGNINGDATE,t.models.contractmarket=t.item.CONTRACTMARKET,t.models.customercenter=t.item.CUSTOMERCENTER,t.models.customerdepartment=t.item.CUSTOMERDEPARTMENT,t.models.contractprostartdate=t.item.CONTRACTPROSTARTDATE,t.models.contractproenddate=t.item.CONTRACTPROENDDATE,t.models.contractstate=t.item.CONTRACTSTATE,t.models.filestatus=t.item.FILESTATUS,t.models.customername=t.item.CUSTOMERNAME,t.models.industry=t.item.INDUSTRY,t.models.region=t.item.REGION)},1500)},generateModle:function(e){e=JSON.parse(localStorage.getItem("all_data"));for(var t=0;t<e.length;t++)l()(this.value).indexOf(e[t].model)>=0?this.models[e[t].model]=this.value[e[t].model]:"blank"===e[t].type?this.models[e[t].model]="String"===e[t].options.defaultType?"":"Object"===e[t].options.defaultType?{}:[]:this.models[e[t].model]=e[t].options.defaultValue,this.rules[e[t].model]?this.rules[e[t].model]=[].concat(r()(this.rules[e[t].model]),r()(e[t].rules)):this.rules[e[t].model]=[].concat(r()(e[t].rules))},getData:function(){var e=this;return new n.a(function(t,a){e.$refs.generateForm.validate(function(o){localStorage.setItem("valid",o),o?t(e.models):a(new Error("表单数据校验失败").message)})})},refresh:function(){}}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"generateForm",attrs:{model:e.models,rules:e.rules,"label-position":e.data.config.labelPosition||"left","label-width":e.data.config.labelWidth+"px"}},[e._l(e.data.list,function(t,o){return["grid"==t.type?[a("el-row",{key:t.key,attrs:{gutter:t.options.gutter?t.options.gutter:0,justify:t.options.justify,align:t.options.align,type:"flex"}},e._l(t.columns,function(t,o){return a("el-col",{key:o,attrs:{span:t.span}},[e._l(t.list,function(t){return["blank"==t.type?a("el-form-item",{key:t.key,attrs:{label:t.name,prop:t.model}},[e._t(t.model,null,{model:e.models})],2):a("genetate-form-item",{key:t.key,attrs:{models:e.models,remote:e.remote,rules:e.rules,widget:t,globalParams:e.globalParams},on:{"update:models":function(t){e.models=t}}})]})],2)}),1)]:"blank"==t.type?[a("el-form-item",{key:t.key,attrs:{label:t.name,prop:t.model}},[e._t(t.model,null,{model:e.models})],2)]:[a("genetate-form-item",{key:t.key,attrs:{models:e.models,rules:e.rules,widget:t,remote:e.remote,globalParams:e.globalParams},on:{"update:models":function(t){e.models=t}}})]]})],2)],1)},staticRenderFns:[]},v=a("VU/8")(g,b,!1,null,null,null);t.a=v.exports},c1bE:function(e,t){},cOXn:function(e,t){},chaU:function(e,t){},dUbd:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__=__webpack_require__("woOf"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify__=__webpack_require__("mvHQ"),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify__),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_keys__=__webpack_require__("fZjL"),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_keys___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_keys__),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float__=__webpack_require__("5dBV"),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float__),__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_extends__=__webpack_require__("Dd8w"),__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_extends___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_extends__),__WEBPACK_IMPORTED_MODULE_5_vue__=__webpack_require__("7+uW"),__WEBPACK_IMPORTED_MODULE_6__api_api_js__=__webpack_require__("P9l9"),__WEBPACK_IMPORTED_MODULE_7_vuex__=__webpack_require__("NYxO");__webpack_exports__.a={name:"BudgetAllocation",props:["widget","models","rules","remote","datas"],data:function(){return{correConfig:{0:"已关联",2:"未关联"},currentPageContract:1,currentPage:1,checked:null,contractChecked:null,tableDataPro:[],conTableData:[],checkedChoose:!0,checkedChooseContract:!0,page:{pageNum:1,pageSize:5,total:0},pageContract:{pageNum:1,pageSize:20,total:0},contractProjectNum:"",tableDataContract:[],associatedListData:[],listContractNumber:"",projectId:"",spanArr:[],pos:0,contractNum:"",tableData:[],budgeConfig:[{key:"projectCenter",label:""}],tableData1:[{id:1,splitType:"合同额（经费）",budgetTotal:"--",isDisable:!0,project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null,children:[{id:2,splitType:"自有基础软件",budgetTotal:"--",project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null},{id:3,splitType:"自有应用软件",budgetTotal:"--",project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null},{id:4,splitType:"自有数据产品",budgetTotal:"--",project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null},{id:5,splitType:"第三方产品",budgetTotal:"--",project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null},{id:6,splitType:"技术开发",budgetTotal:"--",project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null},{id:7,splitType:"技术服务",budgetTotal:"--",project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null},{id:8,splitType:"其他",budgetTotal:"--",project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null}]},{id:9,splitType:"采购支出",budgetTotal:"--",isDisable:!0,project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null,children:[{id:10,splitType:"正常采购",budgetTotal:"--",isDisable:!0,project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null,children:[{id:11,splitType:"软件产品（研究院）",budgetTotal:"--",project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null},{id:12,splitType:"软件产品（其他）",budgetTotal:"--",project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null},{id:13,splitType:"硬件产品",budgetTotal:"--",project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null},{id:14,splitType:"数据产品",budgetTotal:"--",project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null},{id:15,splitType:"技术服务1",budgetTotal:"--",project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null},{id:16,splitType:"其他",budgetTotal:"--",project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null}]},{id:17,splitType:"客户指定采购或合作协议采购",isDisable:!0,budgetTotal:"--",project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null,children:[{id:18,splitType:"软件产品",budgetTotal:"--",project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null},{id:19,splitType:"硬件产品",budgetTotal:"--",project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null},{id:20,splitType:"数据产品",budgetTotal:"--",project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null},{id:21,splitType:"技术服务1",budgetTotal:"--",project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null},{id:22,splitType:"技术服务2",budgetTotal:"--",project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null},{id:23,splitType:"其他",budgetTotal:"--",project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null}]}]},{id:24,splitType:"纯合同额（经费）",isDisable:!0,budgetTotal:"--",project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null},{id:25,splitType:"保证金",budgetTotal:"--",project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null},{id:26,splitType:"实施费用",budgetTotal:"--",isDisable:!0,project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null,children:[{id:27,splitType:"人工费用",budgetTotal:"--",project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null},{id:28,splitType:"运营费用",budgetTotal:"--",project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null}]},{id:29,splitType:"毛利润",budgetTotal:"--",project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null},{id:30,splitType:"毛利率",budgetTotal:"--",project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null},{id:31,splitType:"销售费用",budgetTotal:"--",isDisable:!0,project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null,children:[{id:32,splitType:"人工费用",budgetTotal:"--",project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null},{id:33,splitType:"运营费用",budgetTotal:"--",project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null}]},{id:34,splitType:"中标服务费",budgetTotal:"--",project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null},{id:35,splitType:"项目损益",budgetTotal:"--",project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null},{id:36,splitType:"项目收益率",budgetTotal:"--",project1:null,project2:null,project3:null,project4:null,project5:null,project6:null,projectCenter:null}]}},computed:__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_extends___default()({},Object(__WEBPACK_IMPORTED_MODULE_7_vuex__.c)(["userinfo","isDetail"]),{bzjPro1:function(){if(this.tableData1.length>0)return this.tableData1[2].project1},bzjPro2:function(){if(this.tableData1.length>0)return this.tableData1[2].project2},bzjPro3:function(){if(this.tableData1.length>0)return this.tableData1[2].project3},bzjPro4:function(){if(this.tableData1.length>0)return this.tableData1[2].project4},bzjPro5:function(){if(this.tableData1.length>0)return this.tableData1[2].project5},bzjPro6:function(){if(this.tableData1.length>0)return this.tableData1[2].project6},bzjProCenter:function(){if(this.tableData1.length>0)return this.tableData1[2].projectCenter}}),watch:{datas:{deep:!0,handler:function(e){}},bzjPro1:function(e,t){if(this.tableData1.length>0){var a=(this.tableData1[2].project1/this.tableData1[2].budgetTotal*this.tableData1[3].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[3].project1","bzjPro1Num");a=(this.tableData1[2].project1/this.tableData1[2].budgetTotal*this.tableData1[4].children[0].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[4].children[0].project1","rgfyPro1Num");a=(this.tableData1[2].project1/this.tableData1[2].budgetTotal*this.tableData1[4].children[1].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[4].children[1].project1","yyfyPro1Num");a=(this.tableData1[2].project1/this.tableData1[2].budgetTotal*this.tableData1[7].children[0].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[7].children[0].project1","rgfyXSPro1Num");a=(this.tableData1[2].project1/this.tableData1[2].budgetTotal*this.tableData1[7].children[1].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[7].children[1].project1","yyfyXSPro1Num");a=(this.tableData1[2].project1/this.tableData1[2].budgetTotal*this.tableData1[8].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[8].project1","zbfwfPro1Num")}},bzjPro2:function(e,t){if(this.tableData1.length>0){var a=(this.tableData1[2].project2/this.tableData1[2].budgetTotal*this.tableData1[3].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[3].project2","bzjPro2Num");a=(this.tableData1[2].project2/this.tableData1[2].budgetTotal*this.tableData1[4].children[0].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[4].children[0].project2","rgfyPro2Num");a=(this.tableData1[2].project2/this.tableData1[2].budgetTotal*this.tableData1[4].children[1].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[4].children[1].project2","yyfyPro2Num");a=(this.tableData1[2].project2/this.tableData1[2].budgetTotal*this.tableData1[7].children[0].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[7].children[0].project2","rgfyXSPro2Num");a=(this.tableData1[2].project2/this.tableData1[2].budgetTotal*this.tableData1[7].children[1].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[7].children[1].project2","yyfyXSPro2Num");a=(this.tableData1[2].project2/this.tableData1[2].budgetTotal*this.tableData1[8].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[8].project2","zbfwfPro2Num")}},bzjPro3:function(e,t){if(this.tableData1.length>0&&this.tableData1[2].project3){var a=(this.tableData1[2].project3/this.tableData1[2].budgetTotal*this.tableData1[3].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[3].project3","bzjPro3Num");a=(this.tableData1[2].project3/this.tableData1[2].budgetTotal*this.tableData1[4].children[0].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[4].children[0].project3","rgfyPro3Num");a=(this.tableData1[2].project3/this.tableData1[2].budgetTotal*this.tableData1[4].children[1].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[4].children[1].project3","yyfyPro3Num");a=(this.tableData1[2].project3/this.tableData1[2].budgetTotal*this.tableData1[7].children[0].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[7].children[0].project3","rgfyXSPro3Num");a=(this.tableData1[2].project3/this.tableData1[2].budgetTotal*this.tableData1[7].children[1].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[7].children[1].project3","yyfyXSPro3Num");a=(this.tableData1[2].project3/this.tableData1[2].budgetTotal*this.tableData1[8].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[8].project3","zbfwfPro3Num")}},bzjPro4:function(e,t){if(this.tableData1.length>0&&this.tableData1[2].project4){var a=(this.tableData1[2].project4/this.tableData1[2].budgetTotal*this.tableData1[3].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[3].project4","bzjPro4Num");a=(this.tableData1[2].project4/this.tableData1[2].budgetTotal*this.tableData1[4].children[0].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[4].children[0].project4","rgfyPro4Num");a=(this.tableData1[2].project4/this.tableData1[2].budgetTotal*this.tableData1[4].children[1].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[4].children[1].project4","yyfyPro4Num");a=(this.tableData1[2].project4/this.tableData1[2].budgetTotal*this.tableData1[7].children[0].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[7].children[0].project4","rgfyXSPro4Num");a=(this.tableData1[2].project4/this.tableData1[2].budgetTotal*this.tableData1[7].children[1].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[7].children[1].project4","yyfyXSPro4Num");a=(this.tableData1[2].project4/this.tableData1[2].budgetTotal*this.tableData1[8].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[8].project4","zbfwfPro4Num")}},bzjPro5:function(e,t){if(this.tableData1.length>0&&this.tableData1[2].project5){var a=(this.tableData1[2].project5/this.tableData1[2].budgetTotal*this.tableData1[3].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[3].project5","bzjPro5Num");a=(this.tableData1[2].project5/this.tableData1[2].budgetTotal*this.tableData1[4].children[0].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[4].children[0].project5","rgfyPro5Num");a=(this.tableData1[2].project5/this.tableData1[2].budgetTotal*this.tableData1[4].children[1].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[4].children[1].project5","yyfyPro5Num");a=(this.tableData1[2].project5/this.tableData1[2].budgetTotal*this.tableData1[7].children[0].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[7].children[0].project5","rgfyXSPro5Num");a=(this.tableData1[2].project5/this.tableData1[2].budgetTotal*this.tableData1[7].children[1].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[7].children[1].project5","yyfyXSPro5Num");a=(this.tableData1[2].project5/this.tableData1[2].budgetTotal*this.tableData1[8].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[8].project5","zbfwfPro5Num")}},bzjPro6:function(e,t){if(this.tableData1.length>0&&this.tableData1[2].project6){var a=(this.tableData1[2].project6/this.tableData1[2].budgetTotal*this.tableData1[3].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[3].project6","bzjPro6Num");a=(this.tableData1[2].project6/this.tableData1[2].budgetTotal*this.tableData1[4].children[0].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[4].children[0].project6","rgfyPro6Num");a=(this.tableData1[2].project6/this.tableData1[2].budgetTotal*this.tableData1[4].children[1].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[4].children[1].project6","yyfyPro6Num");a=(this.tableData1[2].project6/this.tableData1[2].budgetTotal*this.tableData1[7].children[0].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[7].children[0].project6","rgfyXSPro6Num");a=(this.tableData1[2].project6/this.tableData1[2].budgetTotal*this.tableData1[7].children[1].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[7].children[1].project6","yyfyXSPro6Num");a=(this.tableData1[2].project6/this.tableData1[2].budgetTotal*this.tableData1[8].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[8].project6","zbfwfPro6Num")}},bzjProCenter:function(e,t){if(this.tableData1.length>0&&this.tableData1[2].projectCenter){var a=(this.tableData1[2].projectCenter/this.tableData1[2].budgetTotal*this.tableData1[3].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[3].projectCenter","bzjProCenterNum");a=(this.tableData1[2].projectCenter/this.tableData1[2].budgetTotal*this.tableData1[4].children[0].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[4].children[0].projectCenter","rgfyProCenterNum");a=(this.tableData1[2].projectCenter/this.tableData1[2].budgetTotal*this.tableData1[4].children[1].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[4].children[1].projectCenter","yyfyProCenterNum");a=(this.tableData1[2].projectCenter/this.tableData1[2].budgetTotal*this.tableData1[7].children[0].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[7].children[0].projectCenter","rgfyXSProCenterNum");a=(this.tableData1[2].projectCenter/this.tableData1[2].budgetTotal*this.tableData1[7].children[1].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[7].children[1].projectCenter","yyfyXSProCenterNum");a=(this.tableData1[2].projectCenter/this.tableData1[2].budgetTotal*this.tableData1[8].budgetTotal).toFixed(2);this.computedValue(e,t,a,"tableData1[8].projectCenter","zbfwfProCenterNum")}},tableData1:{deep:!0,handler:function(e,t,a){var o=0,n=0,i=0,r=0,s=0,l=0,c=0;if(this.tableData1.length>0){this.tableData1[1].children[0].children.forEach(function(e,t){o+=e.project1&&""!=e.project1?e.project1:0,n+=e.project2&&""!=e.project2?e.project2:0,i+=e.project3&&""!=e.project3?e.project3:0,r+=e.project4&&""!=e.project4?e.project4:0,s+=e.project5&&""!=e.project5?e.project5:0,l+=e.project6&&""!=e.project6?e.project6:0,c+=e.projectCenter&&""!=e.projectCenter?e.projectCenter:0}),this.tableData1[1].children[0].project1=o,this.tableData1[1].children[0].project2=n,this.tableData1[1].children[0].project3=i,this.tableData1[1].children[0].project4=r,this.tableData1[1].children[0].project5=s,this.tableData1[1].children[0].project6=l,this.tableData1[1].children[0].projectCenter=c;var u=0,d=0,p=0,m=0,h=0,_=0,f=0;this.tableData1[1].children[1].children.forEach(function(e,t){u+=e.project1&&""!=e.project1?e.project1:0,d+=e.project2&&""!=e.project2?e.project2:0,p+=e.project3&&""!=e.project3?e.project3:0,m+=e.project4&&""!=e.project4?e.project4:0,h+=e.project5&&""!=e.project5?e.project5:0,_+=e.project6&&""!=e.project6?e.project6:0,f+=e.projectCenter&&""!=e.projectCenter?e.projectCenter:0}),this.tableData1[1].children[1].project1=u,this.tableData1[1].children[1].project2=d,this.tableData1[1].children[1].project3=p,this.tableData1[1].children[1].project4=m,this.tableData1[1].children[1].project5=h,this.tableData1[1].children[1].project6=_,this.tableData1[1].children[1].projectCenter=f;var g=0,b=0,v=0,y=0,w=0,j=0,C=0;this.tableData1[1].children.forEach(function(e,t){g+=e.project1&&""!=e.project1?e.project1:0,b+=e.project2&&""!=e.project2?e.project2:0,v+=e.project3&&""!=e.project3?e.project3:0,y+=e.project4&&""!=e.project4?e.project4:0,w+=e.project5&&""!=e.project5?e.project5:0,j+=e.project6&&""!=e.project6?e.project6:0,C+=e.projectCenter&&""!=e.projectCenter?e.projectCenter:0}),this.tableData1[1].project1=g,this.tableData1[1].project2=b,this.tableData1[1].project3=v,this.tableData1[1].project4=y,this.tableData1[1].project5=w,this.tableData1[1].project6=j,this.tableData1[1].projectCenter=C;var S=0,k=0,D=0,N=0,T=0,x=0,I=0;this.tableData1[0].children.forEach(function(e,t){S+=e.project1&&""!=e.project1?e.project1:0,k+=e.project2&&""!=e.project2?e.project2:0,D+=e.project3&&""!=e.project3?e.project3:0,N+=e.project4&&""!=e.project4?e.project4:0,T+=e.project5&&""!=e.project5?e.project5:0,x+=e.project6&&""!=e.project6?e.project6:0,I+=e.projectCenter&&""!=e.projectCenter?e.projectCenter:0}),this.tableData1[0].project1=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()(S.toFixed(2)),this.tableData1[0].project2=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()(k.toFixed(2)),this.tableData1[0].project3=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()(D.toFixed(2)),this.tableData1[0].project4=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()(N.toFixed(2)),this.tableData1[0].project5=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()(T.toFixed(2)),this.tableData1[0].project6=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()(x.toFixed(2)),this.tableData1[0].projectCenter=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()(I.toFixed(2));var P=0,O=0,E=0,M=0,F=0,A=0,R=0;this.tableData1[4].children.forEach(function(e,t){P+=e.project1&&""!=e.project1?e.project1:0,O+=e.project2&&""!=e.project2?e.project2:0,E+=e.project3&&""!=e.project3?e.project3:0,M+=e.project4&&""!=e.project4?e.project4:0,F+=e.project4&&""!=e.project5?e.project5:0,A+=e.project6&&""!=e.project6?e.project6:0,R+=e.projectCenter&&""!=e.projectCenter?e.projectCenter:0}),this.tableData1[4].project1=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()(P.toFixed(2)),this.tableData1[4].project2=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()(O.toFixed(2)),this.tableData1[4].project3=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()(E.toFixed(2)),this.tableData1[4].project4=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()(M.toFixed(2)),this.tableData1[4].project5=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()(F.toFixed(2)),this.tableData1[4].project6=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()(A.toFixed(2)),this.tableData1[4].projectCenter=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()(R.toFixed(2));var L=0,B=0,U=0,$=0,z=0,W=0,V=0;this.tableData1[7].children.forEach(function(e,t){L+=e.project&&""!=e.project1?e.project1:0,B+=e.project2&&""!=e.project2?e.project2:0,U+=e.project3&&""!=e.project3?e.project3:0,$+=e.project4&&""!=e.project4?e.project4:0,z+=e.project5&&""!=e.project5?e.project5:0,W+=e.project6&&""!=e.project6?e.project6:0,V+=e.projectCenter&&""!=e.projectCenter?e.projectCenter:0}),this.tableData1[7].project1=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()(L.toFixed(2)),this.tableData1[7].project2=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()(B.toFixed(2)),this.tableData1[7].project3=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()(U.toFixed(2)),this.tableData1[7].project4=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()($.toFixed(2)),this.tableData1[7].project5=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()(z.toFixed(2)),this.tableData1[7].project6=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()(W.toFixed(2)),this.tableData1[7].projectCenter=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()(V.toFixed(2)),this.tableData1[2].project1=this.tableData1[0].project1-this.tableData1[1].project1,this.tableData1[2].project2=this.tableData1[0].project2-this.tableData1[1].project2,this.tableData1[2].project3=this.tableData1[0].project3-this.tableData1[1].project3,this.tableData1[2].project4=this.tableData1[0].project4-this.tableData1[1].project4,this.tableData1[2].project5=this.tableData1[0].project5-this.tableData1[1].project5,this.tableData1[2].project6=this.tableData1[0].project6-this.tableData1[1].project6,this.tableData1[2].projectCenter=this.tableData1[0].projectCenter-this.tableData1[1].projectCenter,this.tableData1[5].project1=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()((this.tableData1[0].project1-this.tableData1[1].project1-this.tableData1[4].project1).toFixed(2)),this.tableData1[5].project2=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()((this.tableData1[0].project2-this.tableData1[1].project2-this.tableData1[4].project2).toFixed(2)),this.tableData1[5].project3=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()((this.tableData1[0].project3-this.tableData1[1].project3-this.tableData1[4].project3).toFixed(2)),this.tableData1[5].project4=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()((this.tableData1[0].project4-this.tableData1[1].project4-this.tableData1[4].project4).toFixed(2)),this.tableData1[5].project5=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()((this.tableData1[0].project5-this.tableData1[1].project5-this.tableData1[4].project5).toFixed(2)),this.tableData1[5].project6=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()((this.tableData1[0].project6-this.tableData1[1].project6-this.tableData1[4].project6).toFixed(2)),this.tableData1[5].projectCenter=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()((this.tableData1[0].projectCenter-this.tableData1[1].projectCenter-this.tableData1[4].projectCenter).toFixed(2)),this.tableData1[6].project1=Math.round(this.tableData1[5].project1/this.tableData1[0].project1*100),this.tableData1[6].project2=Math.round(this.tableData1[5].project2/this.tableData1[0].project2*100),this.tableData1[6].project3=Math.round(this.tableData1[5].project3/this.tableData1[0].project3*100),this.tableData1[6].project4=Math.round(this.tableData1[5].project4/this.tableData1[0].project4*100),this.tableData1[6].project5=Math.round(this.tableData1[5].project5/this.tableData1[0].project5*100),this.tableData1[6].project6=Math.round(this.tableData1[5].project6/this.tableData1[0].project6*100),this.tableData1[6].projectCenter=Math.round(this.tableData1[5].projectCenter/this.tableData1[0].projectCenter*100),this.tableData1[9].project1=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()((this.tableData1[5].project1-this.tableData1[7].project1).toFixed(2)),this.tableData1[9].project2=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()((this.tableData1[5].project2-this.tableData1[7].project2).toFixed(2)),this.tableData1[9].project3=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()((this.tableData1[5].project3-this.tableData1[7].project3).toFixed(2)),this.tableData1[9].project4=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()((this.tableData1[5].project4-this.tableData1[7].project4).toFixed(2)),this.tableData1[9].project5=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()((this.tableData1[5].project5-this.tableData1[7].project5).toFixed(2)),this.tableData1[9].project6=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()((this.tableData1[5].project6-this.tableData1[7].project6).toFixed(2)),this.tableData1[9].projectCenter=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()((this.tableData1[5].projectCenter-this.tableData1[7].projectCenter).toFixed(2)),this.tableData1[10].project1=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()((this.tableData1[9].project1/this.tableData1[0].project1).toFixed(2)),this.tableData1[10].project2=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()((this.tableData1[9].project2/this.tableData1[0].project2).toFixed(2)),this.tableData1[10].project3=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()((this.tableData1[9].project3/this.tableData1[0].project3).toFixed(2)),this.tableData1[10].project4=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()((this.tableData1[9].project4/this.tableData1[0].project4).toFixed(2)),this.tableData1[10].project5=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()((this.tableData1[9].project5/this.tableData1[0].project5).toFixed(2)),this.tableData1[10].project6=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()((this.tableData1[9].project6/this.tableData1[0].project6).toFixed(2)),this.tableData1[10].projectCenter=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()((this.tableData1[9].projectCenter/this.tableData1[0].projectCenter).toFixed(2))}}}},methods:{computedValue:function computedValue(newval,oldVal,tempVal,curInputCon,tempComptuedVal){tempVal=parseFloat(tempVal),""==oldVal||null==oldVal?(eval("this."+curInputCon+"="+tempVal),this[tempComptuedVal]=tempVal):newval!=oldVal&&(null!=eval("this."+curInputCon)||""!=eval("this."+curInputCon)?(eval("this."+curInputCon+"="+tempVal),this[tempComptuedVal]=tempVal):eval("this."+curInputCon)==this[tempComptuedVal]&&(eval("this."+curInputCon+"="+tempVal),this[tempComptuedVal]=tempVal))},formatxuhao:function(e){return e.index=0==e.show?e.index="":e.index=e.index},cellLeave:function(e){},cellClick:function(e){},changeInput:function(e,t,a){if(a==this.budgeConfig.length-2)for(var o=e.budgetTotal,n=0;n<a+1;n++)e[this.budgeConfig[a+1].key]=o-e[this.budgeConfig[n].key],o-=e[this.budgeConfig[n].key]},blueInput:function(e,t){this.computedRowSum(e)},init:function(){},computedRowSum:function(e){var t=0;this.budgeConfig.forEach(function(a,o){for(var n in e)a.key==n&&(null==e[n]||""==e[n]?t+=0:t+=e[n])});var a=null;a="number"==typeof e.budgetTotal?e.budgetTotal-t:"--",e.budgetTotal-t==0||this.$message({showClose:!0,message:"分配金额不等于总金额，请继续分配(还差"+a+")",type:"warning"})},rowClick:function(e,t,a){},getSpanArr:function(e){if(this.spanArr=[],e){for(var t=0;t<e.length;t++)0===t?(this.spanArr.push(1),this.pos=0):e[t].conId===e[t-1].conId?(this.spanArr[this.pos]+=1,this.spanArr.push(0)):(this.spanArr.push(1),this.pos=t);this.spanArr}},objectSpanMethod:function(e){e.row,e.column;var t=e.rowIndex,a=e.columnIndex;if(1===a||0===a){var o=this.spanArr[t];return{rowspan:o,colspan:o>0?1:0}}},handleCurrentChangeProject:function(e){e&&(this.checked=e.index,this.contractChecked="",this.projectId=e.conId,this.contractProjectNum=e.contractProjectNum,this.getConTableList(e.contractProjectNum))},changeHanle:function(e){this.contractChecked=e.CONTRACTNUMBER},handleCurrentChange:function(e){this.getTable(e)},checkedChooseProject:function(e){var t=e;t=1==t?0:1,this.getTable(1,t)},getTable:function(e,t){var a=this,o="/sgpm/rest/api/server/pm/gt/project?relation="+(t||(1==this.checkedChoose?0:1))+"&memberId="+this.userinfo.memberid+"&pageNum="+e+"&pageSize=5";Object(__WEBPACK_IMPORTED_MODULE_6__api_api_js__.Q)(o).then(function(e){var t=e.data.data;if(a.getSpanArr(t),t)for(var o=0;o<t.length;o++)0==t[o].relationStatus?t[o].relationStatus="已关联":2==t[o].relationStatus&&(t[o].relationStatus="未关联");a.tableDataPro=e.data.data,a.page.total=e.data.meta.totalCount,a.currentPage=e.data.meta.pageNo;for(o=0;o<a.tableDataPro.length;o++){a.tableDataPro[o].show=!0;var n=[];for(o=0;o<a.tableDataPro.length;o++)0===o?n.push(1):a.tableDataPro[o].index===a.tableDataPro[o-1].index?a.tableDataPro[o].show=!1:a.tableDataPro[o].show=!0}}).catch(function(e){})},getConTableList:function(e){var t=this;Object(__WEBPACK_IMPORTED_MODULE_6__api_api_js__.M)("/sgpm/rest/api/integration/contracts/"+e+"?companyId="+this.userinfo.account_id,null).then(function(e){if(200==e.status){var a=e.data.data;t.tableData=a;var o=null;t.tableData.forEach(function(e,t){e.number=t+1,o+=e.CONTRACTMONEY});var n={number:"合计",CONTRACTMONEY:o,relationStatus:null,CONTRACTNUMBER:null};t.tableData.push(n),t.tableData}}).catch(function(e){})},contractRowClick:function(e){var t=this;this.contractNum=e.CONTRACTNUMBER,this.contractChecked=e.CONTRACTNUMBER,this.tableData;var a=this.tableData[1].CONTRACTNUMBER,o=0;"合计"==e.number?(o=1,a=a):(o=0,a=e.CONTRACTNUMBER),Object(__WEBPACK_IMPORTED_MODULE_6__api_api_js__.L)("/sgpm/rest/api/server/project/distribution/budget?contractNumber="+a+"&type="+o+"&companyId="+this.userinfo.account_id,null).then(function(e){if(200==e.status){var a=e.data.data;if(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_keys___default()(a).length,0==__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_keys___default()(a).length)return t.tableData1=[],void(t.budgeConfig=[{key:"project1",label:""}]);t.budgeConfig=a.projects,t.tableData1=a.totalTable}}).catch(function(e){})},arraySpanMethod:function(e){e.row,e.column;var t=e.rowIndex,a=e.columnIndex;if(0===t){if(0===a)return[1,2];if(1===a)return[1,0]}},save:function(){var e=this;this.tableData1;var t=[],a=JSON.parse(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default()(this.tableData1));this.budgeConfig.forEach(function(o,n){var i={};__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{projectName:o.label,projectNumber:o.projectNumber,contractNumber:e.contractNum,userName:e.userinfo.emp_name,userId:e.userinfo.memberid}),a.forEach(function(e,t){"合同额（经费）"==e.splitType?(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{contractMoney:e[o.key]||0}),e.children.forEach(function(e,t){"自有基础软件"==e.splitType&&__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{ownBasicSoftware:e[o.key]||0}),"自有应用软件"==e.splitType&&__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{ownApplicationSoftware:e[o.key]||0}),"自有数据产品"==e.splitType&&__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{ownDataProduct:e[o.key]||0}),"第三方产品"==e.splitType&&__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{thirdPartyProducts:e[o.key]||0}),"技术开发"==e.splitType&&__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{technologyDevelopment:e[o.key]||0}),"技术服务"==e.splitType&&__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{technicalService:e[o.key]||0}),"其他"==e.splitType&&__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{other:e[o.key]||0})})):"采购支出"==e.splitType?(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{procurementCosts:e[o.key]||0}),e.children.forEach(function(e,t){"正常采购"==e.splitType?(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{procurementCostsNormal:e[o.key]||0}),e.children.forEach(function(e,t){"软件产品（研究院）"==e.splitType&&__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{normalSoftwareProductInstitute:e[o.key]||0}),"软件产品（其他）"==e.splitType&&__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{normalSoftwareProductOther:e[o.key]||0}),"硬件产品"==e.splitType&&__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{normalHardwareProduct:e[o.key]||0}),"数据产品"==e.splitType&&__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{normalDataProduct:e[o.key]||0}),"技术服务1"==e.splitType&&__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{normalTechnicalServices1:e[o.key]||0}),"其他"==e.splitType&&__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{normalOfOther:e[o.key]||0})})):"客户指定采购或合作协议采购"==e.splitType&&(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{procurementCostsDesignated:e[o.key]||0}),e.children.forEach(function(e,t){"软件产品"==e.splitType&&__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{designatedSoftwareProduct:e[o.key]||0}),"硬件产品"==e.splitType&&__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{designatedHardwareProduct:e[o.key]||0}),"数据产品"==e.splitType&&__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{designatedDataProduct:e[o.key]||0}),"技术服务1"==e.splitType&&__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{designatedTechnicalServices1:e[o.key]||0}),"技术服务2"==e.splitType&&__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{designatedTechnicalServices2:e[o.key]||0}),"其他"==e.splitType&&__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{designatedPurchaseOfOther:e[o.key]||0})}))})):"纯合同额（经费）"==e.splitType?__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{pureContractsCanBe:e[o.key]||0}):"保证金"==e.splitType?__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{margin:e[o.key]||0}):"实施费用"==e.splitType?(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{implementationOfCost:e[o.key]||0}),e.children.forEach(function(e,t){"人工费用"==e.splitType&&__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{implementationLaborCost:e[o.key]||0}),"运营费用"==e.splitType&&__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{implementationOperatingExpense:e[o.key]||0})})):"毛利润"==e.splitType?__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{grossProfitMargin:__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_number_parse_float___default()(e[o.key])||0}):"毛利率"==e.splitType?__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{grossRateMargin:e[o.key]||0}):"销售费用"==e.splitType?(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{costOfSales:e[o.key]||0}),e.children.forEach(function(e,t){"人工费用"==e.splitType&&__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{salesLaborCost:e[o.key]||0}),"运营费用"==e.splitType&&__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{salesOperatingExpenses:e[o.key]||0})})):"中标服务费"==e.splitType?__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{biddingServiceFee:e[o.key]||0}):"项目损益"==e.splitType?__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{projectProfitAndLoss:e[o.key]||0}):"项目收益率"==e.splitType&&__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(i,{projectReturn:e[o.key]||0})}),t.push(i)}),Object(__WEBPACK_IMPORTED_MODULE_6__api_api_js__._26)("/sgpm/rest/api/server/project/distribution/budget",t).then(function(t){200==t.status&&200==t.data.code&&e.$message({showClose:!0,message:"保存成功",type:"success"})}).catch(function(e){})}},created:function(){var e=this.checkedChoose;e=1==e?0:1,this.getTable(1,e);var t=this.checkedChooseContract;t=1==t?0:1},filters:{formatThousandYuan:function(e){return null!=e?e/1e4:"--"}}}},"djY+":function(e,t,a){"use strict";var o=a("+ONG"),n=a.n(o),i=a("5WU3");var r=function(e){a("UHqU")},s=a("VU/8")(n.a,i.a,!1,r,null,null);t.default=s.exports},dlbO:function(e,t){},eQYL:function(e,t){},"eW+B":function(e,t){},fBxC:function(e,t,a){"use strict";var o=a("Dd8w"),n=a.n(o),i=a("14gb"),r=(a("162o"),a("NYxO")),s=a("7t+N"),l=a.n(s),c={name:"key-tag",props:["datas"],components:{},data:function(){return{dynamicTags:[],dynamicTagsKey:[],inputVisible:!1,inputValue:"",keyLabel:"",keyWords:[],keytechnology:[],projectCode:[]}},computed:n()({},Object(r.c)(["userinfo"])),created:function(){var e=this;setTimeout(function(){if("8416498716893399290"==e.userinfo.account_id)var t=localStorage.getItem("projectCode");else t=localStorage.getItem("keyWords");t&&(t=t.split(","),e.dynamicTags=t);var a=localStorage.getItem("keytechnologys");a&&(a=a.split(","),e.dynamicTagsKey=a)},2e3),"8416498716893399290"==this.userinfo.account_id?i.a.$on("projectCodes",function(t){if(t){t=t.split(",");e.dynamicTags=t}}):i.a.$on("keyWords",function(t){if(t){t=t.split(",");e.dynamicTags=t}}),i.a.$on("keytechnologys",function(t){if(t){t=t.split(",");e.dynamicTagsKey=t}}),setTimeout(function(){e.getKey()},500)},methods:{handleClose:function(e){this.dynamicTags.splice(this.dynamicTags.indexOf(e),1),this.dynamicTags,"8416498716893399290"==this.userinfo.account_id?(i.a.$emit("projectCode",this.dynamicTags),localStorage.setItem("projectCode",this.dynamicTags)):(i.a.$emit("keyword",this.dynamicTags),localStorage.setItem("keyword",this.dynamicTags))},handleCloseKey:function(e){this.dynamicTagsKey.splice(this.dynamicTagsKey.indexOf(e),1),i.a.$emit("keytechnology",this.dynamicTagsKey),localStorage.setItem("keytechnology",this.dynamicTagsKey),this.dynamicTagsKey},showInput:function(e){var t=this;this.keyLabel=e,this.inputVisible=!0,this.$nextTick(function(e){t.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm:function(){var e=this.inputValue;if("项目关键字"==this.keyLabel||"工程代码"==this.keyLabel){if(e.length<=0||/^\s+$/.test(e))return this.inputVisible=!1,!1;","+e,this.dynamicTags.push(e),"项目关键字"==this.keyLabel?(i.a.$emit("keyword",this.dynamicTags),localStorage.setItem("keyWords",this.dynamicTags)):(i.a.$emit("projectCode",this.dynamicTags),localStorage.setItem("projectCode",this.dynamicTags))}else if("拟使用的关键技术"==this.keyLabel){if(e.length<=0||/^\s+$/.test(e))return this.inputVisible=!1,!1;if(""==e.length)return this.inputVisible=!1,!1;","+e,this.dynamicTagsKey.push(e),i.a.$emit("keytechnology",this.dynamicTagsKey),localStorage.setItem("keytechnologys",this.dynamicTagsKey)}this.inputVisible=!1,this.inputValue=""},getKey:function(){l()(".key").parent().parent().addClass("is-required")}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"key"},["项目关键字"==e.datas.name||"工程代码"==e.datas.name?a("div",e._l(e.dynamicTags,function(t){return a("el-tag",{key:t.index,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return e.handleClose(t)}}},[e._v(e._s(t))])}),1):a("div",e._l(e.dynamicTagsKey,function(t){return a("el-tag",{key:t.index,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return e.handleCloseKey(t)}}},[e._v(e._s(t))])}),1),e._v(" "),e.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(t){return e.showInput(e.datas.name)}}},[e._v("+")])],1)},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(e){a("D3cj")},"data-v-21e6308e",null);t.a=d.exports},fbFU:function(e,t,a){"use strict";var o=a("Dd8w"),n=a.n(o),i=a("P9l9"),r=a("gyMJ"),s=a("NYxO"),l={name:"subPackageList",props:[],data:function(){return{page:{pageNum:1,pageSize:20,total:0},currentPage:1,form:{keyWord:""},tableData:[],listConfig:[{key:"outsourcingName",label:"外包项目名称",width:"120"},{key:"purchaseContractNumber",label:"采购合同编号",width:"120"},{key:"purchaseContractName",label:"采购合同名称",width:"120"},{key:"affiliation",label:"所属机构",width:"100"},{key:"affiliatedCenter",label:"所属中心",width:"100"},{key:"department",label:"所属部门",width:"100"},{key:"subcontractingBusinessType",label:"分包业务类型",width:"120"},{key:"subcontractingTheWay",label:"分包方式",width:"100"},{key:"subcontractAmount",label:"分包合同额",width:"100"},{key:"partyBUnit",label:"乙方单位",width:"100"},{key:"salesContractNumber",label:"关联销售合同编号",width:"150"},{key:"salesContractName",label:"关联销售合同名称",width:"150"},{key:"salesContractAmount",label:"关联销售合同额",width:"140"},{key:"projectNumber",label:"关联项目编号",width:"120"},{key:"projectName",label:"关联项目名称",width:"120"},{key:"projectStartTime",label:"项目开始时间",width:"120"},{key:"projectEndTime",label:"项目结束时间",width:"120"},{key:"relatedProjectFunding",label:"关联项目经费",width:"120"},{key:"subcontractingProjectProgress",label:"分包项目进度",width:"120"},{key:"satisfactionEvaluation",label:"满意度评价",width:"120"},{key:"cumulativeReimbursementAmount",label:"累计报销金额",width:"120"},{key:"updateTime",label:"更新时间",width:"120"}]}},computed:n()({},Object(s.c)(["userinfo","cacheParams","gjFromModel","gjFromCheckList"]),{exportBtn:function(){var e=this.userinfo.memberid;return"2361372308666271490"==e||"-2214906182493845302"==e||"1762700266460431602"==e||"-8308384141194738542"==e||"7603819741782557558"==e}}),watch:{},methods:{searchHandle:function(){this.getProjectTable({pageNum:this.page.pageNum,pageSize:20,keyword:this.form.keyWord,memberId:this.userinfo.memberid,author:this.userinfo.subdept_id})},init:function(){this.getProjectTable({pageNum:1,pageSize:20,keyword:this.form.keyWord,memberId:this.userinfo.memberid,author:this.userinfo.subdept_id})},handleCurrentChange:function(e){this.page.pageNum=e,this.getProjectTable({pageNum:e,pageSize:20,keyword:this.form.keyWord,memberId:this.userinfo.memberid,author:this.userinfo.subdept_id})},getProjectTable:function(e){var t=this;Object(i._18)("/sgpm/rest/api/server/gt/subcontract/project/item",e).then(function(e){200==e.data.code&&(t.tableData=e.data.data,t.page.total=e.data.meta.totalCount)}).catch(function(e){})},exportHandle:function(){var e=r.a.urlPort04+"/sgpm/rest/api/server/pm/project/excel/export/outsourcing/project?memberId="+this.userinfo.memberid+"&author="+this.userinfo.subdept_id+"&keyword="+this.form.keyWord,t=document.createElement("a");t.setAttribute("download",""),t.setAttribute("href",e),t.click()}},created:function(){this.init()}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sub-list"},[a("div",{staticClass:"header"},[a("el-form",{ref:"form",staticClass:"search-form",attrs:{model:e.form,size:"mini",inline:!0}},[a("div",{staticClass:"search-right"},[a("el-form-item",[a("el-input",{attrs:{placeholder:"外包项目编号/项目名称",size:"mini"},model:{value:e.form.keyWord,callback:function(t){e.$set(e.form,"keyWord",t)},expression:"form.keyWord"}})],1),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.searchHandle()}}},[e._v("查询")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.exportBtn,expression:"exportBtn"}],attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.exportHandle()}}},[e._v("导出")])],1)])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"highlight-current-row":"",border:"","header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0}}},[a("el-table-column",{attrs:{type:"index",width:"38",align:"center",label:"序号",fixed:!0}}),e._v(" "),a("el-table-column",{attrs:{label:"外包项目编号",width:"140",align:"center",fixed:!0,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"/projectInformation",query:{judgeproject:"分包项目信息",id:t.row.id,category:t.row.jumpType,projectName:t.row.projectName,projectNumber:t.row.projectNumber,company_id:t.row.company_id}}}},[a("span",{staticClass:"num"},[e._v(e._s(t.row.outsourcingNumber))])])]}}])}),e._v(" "),e._l(e.listConfig,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.key,label:e.label,width:e.width}})})],2),e._v(" "),a("div",{staticClass:" right"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":1,"page-sizes":[20],layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)},staticRenderFns:[]};var u=a("VU/8")(l,c,!1,function(e){a("lFMG")},null,null);t.a=u.exports},ftVX:function(e,t,a){"use strict";var o=a("Dd8w"),n=a.n(o),i=a("NYxO"),r=(a("14gb"),a("P9l9")),s={name:"abnormal",props:["widget","models","remote","datas"],computed:n()({},Object(i.c)(["userinfo"])),data:function(){return{accessoryName:"",show:"c"!=this.$route.query.judgelogo,returnshow:!1,payshow:!1,payIsShow:!1,returnIsShow:!1,isShow:1!=this.$route.query.isShow,httpHeaders:{"Content-Type":"multipart/form-data"},projectId:this.$route.query.id,loading:!0,fileList:[],fileList1:[],file:{},closeReason:"①项目登记后，最终承揽失败。\n②合同因甲方机构调整，不再履约，合同终止。已走合同解除流程。\n③因甲方不组织验收，项目实施工作已完成，与甲方协商一致，不再投入实施并且不再回款和支付。",fileCase:"合同解除审批表，已归档档案管理部；\n系统开发代码，已归档至配置库；\n关键文档成果，已归档项目管理系统。",form:{fileSituation:"",exCloseReason:"",payNote:"",returnNote:""},returnNoteFile:"",payNoteFile:"",returnNoteFileName:"",payNoteFileName:"",rules:{exCloseReason:[{required:!0,message:"异常结项原因不能为空",trigger:"blur"}],fileSituation:[{required:!0,message:"归档情况不能为空",trigger:"blur"}]}}},watch:{datas:{deep:!0,handler:function(e){this.datas,this.datas.options.url_a}}},mounted:function(){var e=this;setTimeout(function(){var t=JSON.parse(localStorage.getItem("abnormalFrom"));t&&(e.form.returnNote=t.returnNote,e.form.payNote=t.payNote,e.form.exCloseReason=t.exCloseReason,e.form.fileSituation=t.fileSituation,e.returnNoteFile=t.returnNoteEnclosure,e.payNoteFile=t.payNoteEnclosure,e.returnNoteFileName=t.returnNoteFileName,e.payNoteFileName=t.payNoteFileName,localStorage.setItem("returnNote",e.form.returnNote),localStorage.setItem("payNote",e.form.payNote),localStorage.setItem("exCloseReason",e.form.exCloseReason),localStorage.setItem("fileSituation",e.form.fileSituation),localStorage.setItem("returnNoteFile",e.returnNoteFile),localStorage.setItem("payNoteFile",e.payNoteFile),t.returnNoteFileName&&"c"==e.$route.query.judgelogo&&(e.returnshow=!0,e.returnIsShow=!0,e.disabled=!0),t.payNoteFileName&&"c"==e.$route.query.judgelogo&&(e.payIsShow=!0,e.payshow=!0,e.disabled=!0),t.returnNoteFileName&&"d"==e.$route.query.judgelogo&&(e.returnshow=!0,e.returnIsShow=!1,e.disabled=!0),t.payNoteFileName&&"d"==e.$route.query.judgelogo&&(e.payshow=!0,e.payIsShow=!1,e.disabled=!0))},500)},methods:{getConfrim:function(e){var t=this;this.$confirm("上传新文件将会覆盖旧文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.disabled=!1,t.checkfile(e)}).catch(function(){t.disabled=!0,t.$message({type:"info",message:"已取消删除"})})},submitFile:function(e){if(this.accessoryName=e,"回款说明"==e){if(this.returnNoteFile)return void this.getConfrim(e);this.disabled=!1}else if("支付说明"==e){if(this.payNoteFile)return void this.getConfrim(e);this.disabled=!1}},open:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.disabled=!1,t.checkfile(e),t.$message({type:"success",message:"删除成功!"})}).catch(function(){t.disabled=!0,t.$message({type:"info",message:"已取消删除"})})},handleChange:function(e,t){this.file=e.raw},receivableChange:function(){this.form.returnNote,localStorage.setItem("returnNote",this.form.returnNote),localStorage.setItem("payNote",this.form.payNote),localStorage.setItem("exCloseReason",this.form.exCloseReason),localStorage.setItem("fileSituation",this.form.fileSituation)},customUpload:function(e){var t=this,a="回款说明"==e.filename?1:2;this.filename=a;var o=new FormData;o.append("file",this.file),o.append("projectId",this.projectId),o.append("username",this.userinfo.login_name),o.append("type",this.filename),Object(r._8)("/sgpm/rest/api/integration/oa/file/upload",o).then(function(a){200==a.data.code?(t.$message({message:"上传成功!",type:"success"}),1==t.filename?localStorage.setItem("returnNoteFile",a.data.data):localStorage.setItem("payNoteFile",a.data.data)):204==a.data.code?(t.$message.warning("您上传的是空文件，请重新上传"),"支付说明"==e.filename?t.fileList=[]:t.fileList1=[]):t.$message.error("上传失败!")}).catch(function(e){})},handleRemove:function(e,t,a){this.disabled=!1,this.checkfile(a)},checkfile:function(e){"回款说明"==e?(this.returnNoteFile="",localStorage.setItem("returnNoteFile",""),this.returnshow=!1,this.returnIsShow=!1):"支付说明"==e&&(this.payNoteFile="",localStorage.setItem("payNoteFile",""),this.payshow=!1,this.payIsShow=!1)},handlePreview:function(e){},handleExceed:function(e,t){this.$message.warning("当前限制只能选择 1 个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")},beforeRemove:function(e,t){return this.$confirm("确定移除 "+e.name+"？")}},created:function(){}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"abnormal"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"170px"}},[a("el-form-item",{attrs:{label:this.datas.options.inputOne,prop:"returnNote"}},[a("el-input",{staticStyle:{width:"50%",float:"left"},on:{change:e.receivableChange},model:{value:e.form.returnNote,callback:function(t){e.$set(e.form,"returnNote",t)},expression:"form.returnNote"}}),e._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{id:"scfj",action:"",name:"回款说明",headers:e.httpHeaders,"http-request":e.customUpload,"on-change":e.handleChange,"on-remove":function(t,a){return e.handleRemove(t,a,e.datas.options.inputOne)},"before-remove":e.beforeRemove,"on-exceed":e.handleExceed,multiple:"",limit:1,"file-list":e.fileList1}},[a("el-link",{attrs:{type:"primary",disabled:e.show},on:{click:function(t){return e.submitFile(e.datas.options.inputOne)}}},[e._v("上传附件")])],1),e._v(" "),a("a",{directives:[{name:"show",rawName:"v-show",value:e.returnshow,expression:"returnshow"}],staticClass:"attachment"},[a("i",{staticClass:"el-icon-document"}),e._v(e._s(e.returnNoteFileName))]),e._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:e.returnIsShow,expression:"returnIsShow"}],staticClass:"el-icon-close",attrs:{type:"text"},on:{click:function(t){return e.open(e.datas.options.inputOne)}}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:this.datas.options.inputTwo,prop:"payNote"}},[a("el-input",{staticStyle:{width:"50%",float:"left"},on:{change:e.receivableChange},model:{value:e.form.payNote,callback:function(t){e.$set(e.form,"payNote",t)},expression:"form.payNote"}}),e._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{action:"",name:"支付说明",multiple:"",limit:1,headers:e.httpHeaders,"http-request":e.customUpload,"on-change":e.handleChange,"on-remove":function(t,a){return e.handleRemove(t,a,e.datas.options.inputTwo)},"before-remove":e.beforeRemove,"on-exceed":e.handleExceed,"file-list":e.fileList}},[a("el-link",{attrs:{type:"primary",disabled:e.show},on:{click:function(t){return e.submitFile(e.datas.options.inputTwo)}}},[e._v("上传附件")])],1),e._v(" "),a("a",{directives:[{name:"show",rawName:"v-show",value:e.payshow,expression:"payshow"}],staticClass:"attachment"},[a("i",{staticClass:"el-icon-document"}),e._v(e._s(e.payNoteFileName))]),e._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:e.payIsShow,expression:"payIsShow"}],staticClass:"el-icon-close",attrs:{type:"text"},on:{click:function(t){return e.open(e.datas.options.inputTwo)}}})],1),e._v(" "),a("el-form-item",{staticClass:"is-required",staticStyle:{"margin-top":"20px"},attrs:{label:"异常结项原因",prop:"exCloseReason"}},[a("el-input",{staticStyle:{width:"75%",height:"100px","font-size":"12px"},attrs:{type:"textarea",placeholder:e.closeReason},on:{change:e.receivableChange},model:{value:e.form.exCloseReason,callback:function(t){e.$set(e.form,"exCloseReason",t)},expression:"form.exCloseReason"}})],1),e._v(" "),a("el-form-item",{staticClass:"is-required",staticStyle:{"margin-top":"20px"},attrs:{label:"归档情况",prop:"fileSituation"}},[a("el-input",{staticStyle:{width:"75%",height:"100px","font-size":"12px"},attrs:{type:"textarea",placeholder:e.fileCase},on:{change:e.receivableChange},model:{value:e.form.fileSituation,callback:function(t){e.$set(e.form,"fileSituation",t)},expression:"form.fileSituation"}})],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(s,l,!1,function(e){a("o2l+"),a("ZJmJ")},"data-v-10570eb4",null);t.a=c.exports},"g+AR":function(e,t,a){"use strict";var o=a("mvHQ"),n=a.n(o),i=a("Dd8w"),r=a.n(i),s=(a("14gb"),a("NYxO")),l=a("P9l9"),c=a("bqq5"),u=a("iBEn"),d={name:"conclusion",props:["widget","models","rules","remote","datas"],components:{GenerateForm:c.a,GenetateFormItem:u.a},data:function(){return{show:!1,projectId:this.$route.query.id,projectNum:this.$route.query.projectNum,jYContributor:"",globalParams:{},options:[{value:"选项1",label:"项目监控"},{value:"选项2",label:"项目策划"},{value:"选项3",label:"需求"},{value:"选项4",label:"设计与开发"},{value:"选项6",label:"评审和测试"},{value:"选项7",label:"度量"},{value:"选项8",label:"质量保证"},{value:"选项9",label:"集成"},{value:"选项10",label:"风险"},{value:"选项11",label:"配置"},{value:"选项5",label:"培训"},{value:"选项5",label:"其他"}],jyjxOptions:[{value:"选项1",label:"经验"},{value:"选项2",label:"教训"},{value:"选项3",label:"改进建议"}],contribution:[],tableData:[{jYCategory:"",jYJiaoXunCategory:"",jYDescription:"",jYContributor:"",projectNumber:""},{jYCategory:"",jYJiaoXunCategory:"",jYDescription:"",jYContributor:"",projectNumber:""},{jYCategory:"",jYJiaoXunCategory:"",jYDescription:"",jYContributor:"",projectNumber:""},{jYCategory:"",jYJiaoXunCategory:"",jYDescription:"",jYContributor:"",projectNumber:""},{jYCategory:"",jYJiaoXunCategory:"",jYDescription:"",jYContributor:"",projectNumber:""}],projectNumber:""}},created:function(){var e=this;this.postProjectPeople(),setTimeout(function(){"-1360422574114386809"==e.userinfo.account_id||"5326994013938795629"==e.userinfo.account_id?e.getTable():"-1814768306395265967"!=e.userinfo.account_id&&"8416498716893399290"!=e.userinfo.account_id&&"7638091599462351621"!=e.userinfo.account_id||e.getGtTable()},500)},computed:r()({},Object(s.c)(["userinfo"])),methods:{postProjectPeople:function(){var e=this,t="/sgpm/rest/api/server/pm/project/members/experience/"+this.projectId,a={manager:this.userinfo.emp_name};Object(l._7)(t,a).then(function(t){e.contribution=t.data.data}).catch(function(e){})},getTable:function(){var e=this;this.$route.query.projectNum,localStorage.removeItem("jyjxConclusion");var t={projectNumber:this.$route.query.projectNum};Object(l._6)("/sgpm/rest/api/server/pm/project/experience",t).then(function(t){e.tableData=t.data.data,localStorage.setItem("jyjxConclusion",n()(e.tableData))}).catch(function(e){})},getGtTable:function(){var e=this;localStorage.removeItem("jyjxConclusion");var t="/sgpm/rest/api/server/pm/gt/project/"+this.projectId+"/"+this.projectNum;Object(l._6)(t).then(function(t){e.tableData=t.data.data.jY,t.data.data.jY,localStorage.setItem("jyjxConclusion",n()(e.tableData))}).catch(function(e){})},handleEdit:function(e,t){var a=this.tableData;localStorage.removeItem("jyjxConclusion"),localStorage.setItem("jyjxConclusion",n()(a))},handleCurrentChange:function(e,t,a){var o=this;t.currentTarget;var n={projectId:this.$route.query.id};Object(l._6)("/sgpm/rest/api/server/pm/project",n).then(function(t){for(var a=0;a<o.tableData.length;a++)e.jYContributor=t.data.data.PROJECTMANAGER}).catch(function(e){})}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",[a("el-table",{staticClass:"tb-edit",staticStyle:{width:"100%"},attrs:{data:e.tableData,"highlight-current-row":""},on:{"row-click":e.handleCurrentChange}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"jYCategory",label:"分类",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:""},on:{change:function(a){return e.handleEdit(t.$index,t.row)}},model:{value:t.row.jYCategory,callback:function(a){e.$set(t.row,"jYCategory",a)},expression:"scope.row.jYCategory"}},e._l(e.options,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.label}})}),1),e._v(" "),a("span",[e._v(e._s(t.row.jYCategory))])]}}])},[a("template",{slot:"header"},[a("span",{staticClass:"start"},[e._v("*")]),e._v(" "),a("span",[e._v("分类")])])],2),e._v(" "),a("el-table-column",{attrs:{prop:"jYJiaoXunCategory",label:"经验教训分类",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:""},on:{change:function(a){return e.handleEdit(t.$index,t.row)}},model:{value:t.row.jYJiaoXunCategory,callback:function(a){e.$set(t.row,"jYJiaoXunCategory",a)},expression:"scope.row.jYJiaoXunCategory"}},e._l(e.jyjxOptions,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.label}})}),1),e._v(" "),a("span",[e._v(e._s(t.row.jYJiaoXunCategory))])]}}])},[a("template",{slot:"header"},[a("span",{staticClass:"start"},[e._v("*")]),e._v(" "),a("span",[e._v("经验教训分类")])])],2),e._v(" "),a("el-table-column",{attrs:{prop:"jYDescription",label:"描述",width:"550"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{on:{change:function(a){return e.handleEdit(t.$index,t.row)}},model:{value:t.row.jYDescription,callback:function(a){e.$set(t.row,"jYDescription",a)},expression:"scope.row.jYDescription"}}),e._v(" "),a("span",[e._v(e._s(t.row.jYDescription))])]}}])},[a("template",{slot:"header"},[a("span",{staticClass:"start"},[e._v("*")]),e._v(" "),a("span",[e._v("描述")])])],2),e._v(" "),a("el-table-column",{attrs:{prop:"jYContributor",label:"贡献人"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{filterable:"",placeholder:"请选择",id:"contributor",clearable:""},on:{change:function(a){return e.handleEdit(t.$index,t.row)}},model:{value:t.row.jYContributor,callback:function(a){e.$set(t.row,"jYContributor",a)},expression:"scope.row.jYContributor"}},e._l(e.contribution,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})}),1),e._v(" "),a("span",[e._v(e._s(t.row.jYContributor))])]}}])},[a("template",{slot:"header"},[a("span",{staticClass:"start"},[e._v("*")]),e._v(" "),a("span",[e._v("贡献人")])])],2),e._v(" "),e.show?a("el-table-column",{attrs:{prop:"projectNumber",label:"projectNumber",width:"0"}}):e._e()],1)],1)},staticRenderFns:[]};var m=a("VU/8")(d,p,!1,function(e){a("HtpU")},"data-v-79470ea2",null);t.a=m.exports},g0ig:function(e,t){},gkbc:function(e,t,a){"use strict";var o=a("mvHQ"),n=a.n(o),i=a("Dd8w"),r=a.n(i),s=(a("14gb"),a("NYxO")),l=a("P9l9"),c=(a("162o"),{name:"synergyInformation",components:{},data:function(){return{form:{emp_name:""},show:!1,loading:!0,teamworkUserId:"",teamworkTwoUnitId:"",teamworkThreeUnitId:"",teamworkUserName:"",teamworkTwoUnitName:"",teamworkThreeUnitName:"",jobContent:"",projectNumber:this.$route.query.projectNum,tableData:[{teamworkUserName:"",teamworkUserId:"",teamworkTwoUnitName:"",teamworkTwoUnitId:"",teamworkThreeUnitName:"",teamworkThreeUnitId:"",jobContent:""},{teamworkUserName:"",teamworkUserId:"",teamworkTwoUnitName:"",teamworkTwoUnitId:"",teamworkThreeUnitName:"",teamworkThreeUnitId:"",jobContent:""},{teamworkUserName:"",teamworkUserId:"",teamworkTwoUnitName:"",teamworkTwoUnitId:"",teamworkThreeUnitName:"",teamworkThreeUnitId:"",jobContent:""},{teamworkUserName:"",teamworkUserId:"",teamworkTwoUnitName:"",teamworkTwoUnitId:"",teamworkThreeUnitName:"",teamworkThreeUnitId:"",jobContent:""},{teamworkUserName:"",teamworkUserId:"",teamworkTwoUnitName:"",teamworkTwoUnitId:"",teamworkThreeUnitName:"",teamworkThreeUnitId:"",jobContent:""}]}},computed:r()({},Object(s.c)(["userinfo"])),created:function(){var e=this;this.projectNumber,!this.projectNumber||"-1814768306395265967"!=this.userinfo.account_id&&"5326994013938795629"!=this.userinfo.account_id&&"-1360422574114386809"!=this.userinfo.account_id&&"8416498716893399290"!=this.userinfo.account_id&&"7034660345998100768"!=this.userinfo.account_id&&"-7975978055853456035"!=this.userinfo.account_id&&"7638091599462351621"!=this.userinfo.account_id||setTimeout(function(){"undefined"!=localStorage.getItem("teamData")&&(e.tableData=JSON.parse(localStorage.getItem("teamData")))},800)},methods:{remoteMethod:function(e){var t=this,a=e,o="/sgpm/rest/api/system/user/info/fuzzy/search?accountId="+this.userinfo.account_id+"&search="+a+"&pageSize=10&pageNum=1";Object(l.R)(o).then(function(e){200==e.status&&(e.data.data,t.loading=!1,t.teamworkUserName=e.data.data)}).catch(function(e){})},handleEdit:function(e,t){var a=this,o="/sgpm/rest/api/system/user/"+t.teamworkUserName;Object(l._36)(o).then(function(t){if(200==t.status){for(var o=t.data.data,i=0;i<a.tableData.length;i++)i==e&&(a.tableData[i].teamworkUserName=o.emp_name,a.tableData[i].teamworkUserId=o.memberid,a.tableData[i].teamworkTwoUnitId=o.subdept_id,a.tableData[i].teamworkThreeUnitId=o.dept_id,"管理团队"==o.teamworkThreeUnitName?a.tableData[i].teamworkThreeUnitName="":a.tableData[i].teamworkThreeUnitName=o.dept_name,a.tableData[i].teamworkTwoUnitName=o.subdept_name);localStorage.removeItem("teamworkTable"),localStorage.setItem("teamworkTable",n()(a.tableData)),a.tableData;var r="/sgpm/rest/api/system/user/department/part?memberId="+o.memberid;Object(l._36)(r).then(function(e){a.teamworkThreeUnitName=e.data.data.departments}).catch(function(e){})}}).catch(function(e){})},handleCurrentChange:function(e,t,a){t.currentTarget},handleEditTeam:function(e,t){this.tableData,localStorage.removeItem("teamworkTable"),localStorage.setItem("teamworkTable",n()(this.tableData))}}}),u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{staticClass:"tb-edit",staticStyle:{width:"100%"},attrs:{data:e.tableData,"highlight-current-row":""},on:{"row-click":e.handleCurrentChange}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),e.show?a("el-table-column",{attrs:{prop:"teamworkUserId",label:"teamworkUserId",width:"0"}}):e._e(),e._v(" "),e.show?a("el-table-column",{attrs:{prop:"teamworkTwoUnitId",label:"teamworkTwoUnitId",width:"0"}}):e._e(),e._v(" "),e.show?a("el-table-column",{attrs:{prop:"teamworkThreeUnitId",label:"teamworkThreeUnitId",width:"0"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"teamworkUserName",label:"*负责人",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词","remote-method":e.remoteMethod,loading:e.loading},on:{change:function(a){return e.handleEdit(t.$index,t.row)}},model:{value:t.row.teamworkUserName,callback:function(a){e.$set(t.row,"teamworkUserName",a)},expression:"scope.row.teamworkUserName"}},e._l(e.teamworkUserName,function(e,t){return a("el-option",{key:t,attrs:{label:e.empInfo,value:e.value}})}),1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"teamworkTwoUnitName",label:"*协同B级单位",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{on:{change:function(a){return e.handleEditTeam(t.$index,t.row)}},model:{value:t.row.teamworkTwoUnitName,callback:function(a){e.$set(t.row,"teamworkTwoUnitName",a)},expression:"scope.row.teamworkTwoUnitName"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"teamworkThreeUnitName",label:"协同C级单位",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{change:function(a){return e.handleEditTeam(t.$index,t.row)}},model:{value:t.row.teamworkThreeUnitName,callback:function(a){e.$set(t.row,"teamworkThreeUnitName",a)},expression:"scope.row.teamworkThreeUnitName"}},e._l(e.teamworkThreeUnitName,function(e,t){return a("el-option",{key:t,attrs:{label:e.deptName,value:e.deptName}})}),1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"jobContent",label:"*工作内容"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{on:{change:function(a){return e.handleEditTeam(t.$index,t.row)}},model:{value:t.row.jobContent,callback:function(a){e.$set(t.row,"jobContent",a)},expression:"scope.row.jobContent"}})]}}])})],1)},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(e){a("jCTx")},"data-v-68db87ee",null);t.a=d.exports},gyMJ:function(e,t,a){"use strict";t.a={Hallowmas:"/api",urlPort03:"http://192.168.102.101:11103",urlPort04:"http://192.168.102.101:11104",urlPort05:"http://192.168.102.101:11105",urlPort18085:"http://1.202.165.51:8085",urlPortplan51:"http://plan51.supermap.cn:8085",urlPort8686:"http://1.202.165.59:8686"}},h58x:function(e,t){},h6d1:function(e,t){},hApG:function(e,t,a){"use strict";var o={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("4")])},staticRenderFns:[]};t.a=o},hGg9:function(e,t){},hS7N:function(e,t){},hT1l:function(e,t){},"ha+e":function(e,t,a){"use strict";var o=a("Dd8w"),n=a.n(o),i=a("tZ2h"),r=a("P9l9"),s=a("NYxO"),l={name:"taskobject",props:["widget","models","datas"],components:{Time:i.a},data:function(){return{targetnum:[],loading:!0,taskname:"taskobject"}},computed:n()({},Object(s.c)(["userinfo"])),created:function(){this.taskTab()},mounted:function(){},methods:{taskTab:function(){var e=this,t={staffCode:this.userinfo.code};Object(r.m)("/accounting/tc/info",t).then(function(t){e.targetnum=t.data.data,e.loading=!1}).catch(function(e){})}},filters:{formatThousands:function(e){if(0==/^[0-9]*[1-9][0-9]*$/.test(e))return e&&e.toString().replace(/(\d)(?=(\d{3})+\.)/g,function(e,t){return t+","});return(e+"").replace(/\d{1,3}(?=(\d{3})+$)/g,"$&,")}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"complete"},[a("div",{staticClass:"tablist"},[a("el-row",{staticClass:"latabtask",attrs:{gutter:24}},[a("Time",{attrs:{name:e.taskname}})],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{slot:"empty","max-height":"650","current-row-key":"",append:"",type:"index",data:e.targetnum,border:"","header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"}},slot:"empty"},[a("el-table-column",{attrs:{prop:"deptName",fixed:"",label:"部门名称",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"lenNum",label:"1-11月完成"}},[a("el-table-column",{attrs:{prop:"totalPayments",label:"总回款(万元)",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("formatThousands")(t.row.totalPayments)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"purePayments",label:"纯回款(万元)",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("formatThousands")(t.row.purePayments)))])]}}])})],1),e._v(" "),a("el-table-column",{attrs:{prop:"contract",label:"2018年"}},[a("el-table-column",{attrs:{prop:"purePaymentsTarget",label:"纯回款目标(万元)",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("formatThousands")(t.row.purePaymentsTarget)))])]}}])})],1),e._v(" "),a("el-table-column",{attrs:{prop:"purePaymentsGap",label:"纯回款任务缺口(万元)",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("formatThousands")(t.row.purePaymentsGap)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"contract",label:"1-11月完成",width:"170"}},[a("div",[a("el-table-column",{attrs:{prop:"pureContractAmount",label:"纯合同额(万元)",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("formatThousands")(t.row.pureContractAmount)))])]}}])})],1)]),e._v(" "),a("el-table-column",{attrs:{prop:"contract",label:"2018年"}},[a("div",[a("el-table-column",{attrs:{prop:"pureContractAmountTarget",label:"纯合同额目标(万元)",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("formatThousands")(t.row.pureContractAmountTarget)))])]}}])})],1)]),e._v(" "),a("el-table-column",{attrs:{prop:"contractTaskGap",label:"合同任务缺口(万元)",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{class:Number(t.row.contractTaskGap)>0?"active":"actives",attrs:{type:"index"}},[e._v(e._s(e._f("formatThousands")(t.row.contractTaskGap)))])]}}])})],1)],1)])},staticRenderFns:[]};var u=a("VU/8")(l,c,!1,function(e){a("Divz")},"data-v-40800ae4",null);t.a=u.exports},hh6j:function(e,t,a){"use strict";var o=a("mvHQ"),n=a.n(o),i=a("Dd8w"),r=a.n(i),s=a("bOdI"),l=a.n(s),c=a("P9l9"),u=a("14gb"),d=a("NYxO"),p=a("mtWM"),m=a.n(p),h=a("FOZ6"),_=a("xrTZ").Base64,f={name:"milepost",props:["widget","models","datas"],data:function(){var e;return{dialog1:!1,dialog2:!1,isContractProject:!1,milepostChangedialogVisible:!1,milepostAddialogVisible:!1,changeBtnloading:!1,changeReason:"",projectBudget:"",isChange:!1,configDatas:{options:{switch:(e={head:!0,sonSelect:!0,isContractDeliverable:!0},l()(e,"sonSelect",!0),l()(e,"time3",!1),l()(e,"workHours",!0),e)}},fileUploadFiles:[],fileUploadStatus:!1,gtItemStatus:!1,remarksStatus:!1,reviewtime:"--",submitStatus:!1,memberStatus:!1,manageStatus:!1,rowExpands:[],getRowKeys:function(e){return e.projectMilestoneId},span1:[],file:{},spanArr:[],browerHeight:window.innerHeight-300,dialogVisible:!1,projectNumber:"",contractNum:"--",projectName:"",currentProgress:0,value1:"--",value2:"--",value3:"--",resolution:"--",checkAll:!1,row1:!0,row2:!0,row3:!0,row4:!0,row41:!0,row5:!0,row6:!0,row7:!0,row8:!0,row9:!0,row10:!0,row11:!0,row12:!0,isIndeterminate:!0,statusSelectData:{value:"",options:[{value:0,label:"未完成"},{value:1,label:"进行中"},{value:2,label:"已完成"}]},rules:{milestoneName:[{required:!0,message:"请填写里程碑名称",trigger:"change"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],progressPercentage:[{required:!0,message:"请填写百分比",trigger:"blur"}],desc:[{required:!0,message:"请填写里程碑描述",trigger:"blur"}]},multipleSelection:[],tableData:[],loading:!0,expands:[]}},components:{ProjectMilestone:h.a},computed:r()({},Object(d.c)(["userinfo"]),{changeBtnShow:function(){return"-1360422574114386809"==this.userinfo.account_id||"5326994013938795629"==this.userinfo.account_id},addBtnShow:function(){return"8416498716893399290"==this.userinfo.account_id?!/NK-[HN]-*-*-*/.test(this.projectNumber):"7638091599462351621"==this.userinfo.account_id&&!/AT-[HN]-*-*-*/.test(this.projectNumber)},addBtnStatus:function(){if(this.tableData.length>0)return!1;return"8416498716893399290"==this.userinfo.account_id?!/NK-[HN]-*-*-*/.test(this.projectNumber):"7638091599462351621"==this.userinfo.account_id&&!/AT-[HN]-*-*-*/.test(this.projectNumber)},changeBtnStatus:function(){return"非合同项目信息"==localStorage.getItem("judgeproject")||"11"==localStorage.getItem("jump_type")||(!this.tableData[0]||!(!this.tableData[0]||100!=this.tableData[0].accumulatedProgress||2!=this.tableData[0].status))},projectValueStatus:function(){return"-1814768306395265967"==this.userinfo.account_id}}),created:function(){var e=window.localStorage;this.projectNumber=e.projectNumber,this.projectName=e.projectName,this.projectId=e.projectId,"非合同项目信息"==localStorage.getItem("judgeproject")||"11"==localStorage.getItem("jump_type")?this.isContractProject=!1:(this.isContractProject=!0,this.getMoneyValues()),this.getMemberData(this.projectId),this.getMileStoneDatas(),this.getMemberRole(),this.getProjectMsg(this.projectId),"-1814768306395265967"==this.userinfo.account_id?(this.gtItemStatus=!0,this.configDatas.options.switch.isContractDeliverable=!0):(this.gtItemStatus=!1,this.configDatas.options.switch.isContractDeliverable=!1),JSON.parse(localStorage.getItem("MilepostParams"))&&localStorage.removeItem("MilepostParams")},mounted:function(){var e=this;u.a.$on("projectContent",function(t){t&&(e.projectNumber=t.projectNumber,e.projectName=t.projectName,e.projectId=t.id,"非合同项目信息"==localStorage.getItem("judgeproject")?e.isContractProject=!1:(e.isContractProject=!0,e.getMoneyValues()),e.getMemberData(e.projectId),e.getMileStoneDatas(),e.getMemberRole(),e.getProjectMsg(e.projectId))})},methods:{outValueFormat:function(e){var t=0;return"--"!==this.resolution&&(t=(this.resolution*e.weight*e.accumulatedProgress/1e4).toFixed(2)),t},milepostAddSubmit:function(){var e=this,t=JSON.parse(localStorage.getItem("MilestoneParams"));if(!t)return this.$message.warning("请选一个里程碑模板");if(!this.$refs.projectMilestone.checkMilestoneParams(t))return this.$message.warning("请填写全部里程碑数据");this.changeBtnloading=!0;var a={};a.projectNumber=this.projectNumber;var o=[];t.forEach(function(e){if(e.deliverableStatus){var t={};t.milestoneName=e.milestoneName,t.isCut=e.isCut,t.progressPercentage=e.progressPercentage,t.sortIndex=1,t.description=e.description,t.milestoneTemplateName=e.milestoneTemplateName,t.estimatedStartDate=e.expectedBeginTime,t.estimatedFinishDate=e.expectedEndTime,t.finishDate=e.actualEndTime,t.estimatedWorkingHours=e.workHours,t.delayDays=e.delayDays,t.status=0,t.stageName=e.stageName,t.id=e.projectMilestoneId;var a=[];e.deliverable.forEach(function(e){if(e.checkedStatus){var t={};t.deliverableName=e.deliverableName,t.isCut=e.isCut,t.auditDeliverable=e.auditDeliverable,void 0==e.deliverableTemplateId?t.deliverableTemplateId=e.deliverableId:t.id=e.deliverableId,t.contractDeliverable=e.contractDeliverable,t.description=e.description,t.status=1,a.push(t)}}),t.deliverable=a,o.push(t)}}),a.milestones=o;Object(c._29)("/sgpm/rest/api/server/pm/project/milestones",a).then(function(t){t.data,200==t.data.code?(e.$message.success("添加成功"),e.getMileStoneDatas()):e.$message.error("添加失败"),e.changeBtnloading=!1,e.milepostAddialogVisible=!1}).catch(function(e){})},milepostChangeSubmit:function(){var e=this,t=JSON.parse(localStorage.getItem("MilestoneParams"));if(!t)return this.$message.warning("请选一个里程碑模板");if(!this.$refs.projectMilestone.checkMilestoneParams(t))return this.$message.warning("请填写全部里程碑数据");if(!this.changeReason)return this.$message.warning("请填写变更原因");this.changeReason,this.changeBtnloading=!0;var a={},o=JSON.parse(localStorage.getItem("projectData"));a.projectNumber=this.projectNumber,a.projectName=this.projectName,a.classUnitBId=o.level_one_id,a.classUnitCId=o.level_two_id,a.username=this.userinfo.login_name,a.companyId=this.userinfo.account_id,a.changeDescription=this.changeReason,a.contractAmount=this.value1;var n=[];t.forEach(function(e){if(e.deliverableStatus){var t={};t.stageName=e.stageName,t.milestoneName=e.milestoneName,t.estimatedStartDate=e.expectedBeginTime,t.estimatedFinishDate=e.expectedEndTime,t.estimatedWorkingHours=e.workHours,t.progressPercentage=e.progressPercentage,t.sortIndex=1,t.isCut=e.isCut,t.status=0,t.description=e.description,t.milestoneTemplateName=e.milestoneTemplateName,t.milestoneTemplateId=e.milestoneTemplateId;var a=[];e.deliverable.forEach(function(e){if(e.checkedStatus){var t={};t.deliverableName=e.deliverableName,t.isCut=e.isCut,t.auditDeliverable=e.auditDeliverable,t.deliverableTemplateId=e.deliverableId,t.contractDeliverable=e.contractDeliverable,t.description=e.description,t.status=1,t.fileName=e.fileName,t.filePath=e.filePath,t.file_url=e.file_url,a.push(t)}}),t.deliverable=a,n.push(t)}});var i=[];this.tableData.forEach(function(e){var t={};t.stageName=e.stageName,t.milestoneName=e.milestoneName,t.estimatedStartDate=e.expectedBeginTime,t.estimatedFinishDate=e.expectedEndTime,t.estimatedWorkingHours=e.workHours,t.currentProblems=e.currentProblems,t.progressPercentage=e.progressPercentage,t.accumulatedProgress=e.accumulatedProgress,t.isCut=e.isCut,t.status=e.status,t.description=e.description,t.finishDate="--"==e.finishDate?"":e.finishDate,t.milestoneTemplateName=e.milestoneTemplateName,t.deliverable=e.deliverable,i.push(t)}),a.milestoneArray=n,a.milestoneUsed=i;Object(c._29)("/sgpm/rest/api/server/milestone/change",a).then(function(t){200==t.data.code?(e.$message.success("提交成功"),e.isChange=!0):e.$message.error("提交失败"),e.changeBtnloading=!1,e.milepostChangedialogVisible=!1}).catch(function(t){e.$message.error("接口报错"),e.changeBtnloading=!1,e.milepostChangedialogVisible=!1})},warnMessage:function(e){this.$message({showClose:!0,message:e,type:"success"})},getProjectMsg:function(e){var t=this;Object(c._19)("/sgpm/rest/api/server/pm/project?projectId="+e,null).then(function(e){var a=e.data.data;localStorage.setItem("projectData",n()(a)),a.reviewtime?t.reviewtime=a.reviewtime:t.reviewtime="--",a.projectBudget?t.projectBudget=a.projectBudget:t.projectBudget="--",a.CONTRACTNUMBER?t.contractNum=a.CONTRACTNUMBER:t.contractNum="--",0==a.isChange?t.isChange=!0:t.isChange=!1}).catch(function(e){})},handleSubmit:function(){this.updateData(this.tableData)},getNowDate:function(){var e=new Date,t=e.getFullYear(),a=(e.getMonth()+1).toString(),o=e.getDate().toString();return 1==a.length&&(a="0"+a),1==o.length&&(o="0"+o),t+"-"+a+"-"+o},updateData:function(e){var t=this;if(0==e.length)return this.$message.warning("没数据暂不能提交");var a=!0,o={},n=[];if(e.forEach(function(e){var o={};if(o.id=e.projectMilestoneId,o.estimatedStartDate=e.expectedBeginTime,o.estimatedFinishDate=e.expectedEndTime,o.estimatedWorkingHours=e.workHours,o.currentProblems=e.currentProblems,o.accumulatedProgress=e.accumulatedProgress,o.status=e.status,"--"!=e.finishDate&&(o.finishDate=e.finishDate),2==e.status&&!e.statusSelectData.selectStatus){var i=t.getNowDate();o.finishDate=i;var r=new Date(Date.parse(e.expectedEndTime)),s=(new Date(Date.parse(i))-r)/864e5;o.delayDays=s>0?s:0}if(2==e.status&&!e.statusSelectData.selectStatus&&"验收"==e.milestoneName){o.finishDate=e.finish_date,e.finish_date,void 0===e.finish_date&&(a=!1);r=new Date(Date.parse(e.expectedEndTime)),s=(new Date(Date.parse(e.finish_date))-r)/864e5;o.delayDays=s>0?s:0}var l=[];e.deliverable.forEach(function(e){var t={};t.id=e.deliverableId,t.deliverableName=e.deliverableName,t.fileName=e.fileName,t.filePath=e.filePath,t.description=e.description,t.status=e.status,l.push(t)}),o.deliverable=l,n.push(o)}),o.milestones=n,!a)return this.$message.warning("请选择实际完成时间");Object(c._29)("/sgpm/rest/api/server/pm/project/milestones",o).then(function(a){200==a.data.code?(t.$message.success("保存成功"),t.remarksStatus=!1,t.saveReviewlog(e),t.getMileStoneDatas()):t.$message.error("保存失败")}).catch(function(e){})},saveReviewlog:function(e){var t=this,a=localStorage.getItem("projectId");this.getCurrentProgress(e);for(var o=[],n=0;n<e.length;n++){var i=e[n];i.changeStatus&&o.push(i)}if(o.length>0){var r=[];o.forEach(function(e){var o={};o.percentageComplete=t.currentProgress/100,o.currentStatus=e.status,o.progressProblems=e.currentProblems,o.projectMilestoneId=e.projectMilestoneId,o.projectId=a,r.push(o)});Object(c._29)("/sgpm/rest/api/server/pm/project/reviewlog",r).then(function(e){200==e.data.code?t.reviewtime=t.getNowDate():alert("保存失败")}).catch(function(e){})}},formatThousands:function(e){e=(e/=1e4).toFixed(2);if(0==/^[0-9]*[1-9][0-9]*$/.test(e))return e&&e.toString().replace(/(\d)(?=(\d{3})+\.)/g,function(e,t){return t+","});return(e+"").replace(/\d{1,3}(?=(\d{3})+$)/g,"$&,")},handleSelectionChange:function(e){},expandChange:function(e,t){var a=!1;if(t.length>1?(this.expands=[],e&&this.expands.push(e),this.$refs.rowData.toggleRowExpansion(t[0])):this.expands=[],0!=t.length&&(a=!0),2==this.span1.length){var o=this.span1[0],n=this.span1[1],i=this.tableData[o.index].stageName,r=this.tableData[n.index].stageName;"实施"==i&&"收尾"==r&&(this.spanArr[o.index]!=o.value&&(this.spanArr[o.index]=o.value),a&&"实施"==e.stageName&&"实施"==i?this.spanArr[o.index]=o.value+1:a||"实施"!=e.stageName||"实施"!=i||(this.spanArr[o.index]=o.value),a&&"收尾"==e.stageName&&"收尾"==r?this.spanArr[n.index]=n.value+1:a||"收尾"!=e.stageName||"收尾"!=r||(this.spanArr[n.index]=n.value))}if(1==this.span1.length){o=this.span1[0];this.spanArr[o.index]!=o.value&&(this.spanArr[o.index]=o.value),"实施"==(i=this.tableData[o.index].stageName)&&(a&&"实施"==e.stageName&&"实施"==i?this.spanArr[o.index]=o.value+1:a||"实施"!=e.stageName||"实施"!=i||(this.spanArr[o.index]=o.value)),"启动"==i&&(a&&"启动"==e.stageName&&"启动"==i?this.spanArr[o.index]=o.value+1:a||"启动"!=e.stageName||"启动"!=i||(this.spanArr[o.index]=o.value)),"规划"==i&&(a&&"规划"==e.stageName&&"规划"==i?this.spanArr[o.index]=o.value+1:a||"规划"!=e.stageName||"规划"!=i||(this.spanArr[o.index]=o.value))}},getSpanArr:function(e){this.spanArr=[],this.span1=[];for(var t=0;t<e.length;t++)0===t?(this.spanArr.push(1),this.pos=0):e[t].stageName===e[t-1].stageName?(this.spanArr[this.pos]+=1,this.spanArr.push(0)):(this.spanArr.push(1),this.pos=t);for(t=0;t<this.spanArr.length;t++){var a=this.spanArr[t];if(a>1){var o={index:t,value:a};this.span1.push(o)}}},objectSpanMethod:function(e){e.row,e.column;var t=e.rowIndex;if(0===e.columnIndex){var a=this.spanArr[t];return{rowspan:a,colspan:a>0?1:0}}},sendData:function(){var e=n()(this.tableData);localStorage.setItem("MilepostParams",e)},textareaChange:function(e){e.changeStatus=!0,this.sendData()},selectChange:function(e){(e.changeStatus=!0,2==e.status)&&(this.getFileStatus(e)?e.accumulatedProgress=100:(this.$message.warning("待交付物文档全部审核通过才能完成"),e.status=1),this.getCurrentProgress(this.tableData));2==e.status&&"验收"==e.milestoneName?this.remarksStatus=!0:this.remarksStatus=!1,1!=e.status&&0!=e.status||100!=e.accumulatedProgress||(this.$message.warning("选择 未完成/进行中时，完成百分比不能为100，请先修改完成百分比"),e.status=2),this.sendData()},handleAccumulatedProgress:function(e){e.changeStatus=!0,100==e.accumulatedProgress?e.status=2:e.accumulatedProgress>=10&&e.accumulatedProgress<100&&(e.status=1),100==e.accumulatedProgress&&"验收"==e.milestoneName?this.remarksStatus=!0:this.remarksStatus=!1,this.getCurrentProgress(this.tableData),this.sendData()},getCurrentProgress:function(e){var t=0;e.forEach(function(e){t+=e.weight*e.accumulatedProgress}),this.currentProgress=t/100},handleChange:function(e,t){this.fileUploadFiles.push(e),u.a.$emit("fileUploadFiles",this.fileUploadFiles)},handleRemove:function(e,t){var a=this.fileUploadFiles.indexOf(e);this.fileUploadFiles.splice(a,1),u.a.$emit("fileUploadFiles",this.fileUploadFiles)},handleSelectFile:function(e){e.upload_status=!1},handleAvatarSuccess:function(e,t){},submitUpload:function(e){if(this.$refs[e.deliverableId].uploadFiles,0==this.$refs[e.deliverableId].uploadFiles.length)return this.warnMessage("请选择文件"),!1;this.uploadFile(e)},uploadFile:function(e){var t=this,a=this.$refs[e.deliverableId].uploadFiles[0].raw;if(a.size/1024/1024>100)alert("文件太大，请选择100M以下的文件");else{this.$refs[e.deliverableId].clearFiles(),e.upload_status=!0,e.file_status=!0,e.progress_status=!0,e.file_name="上传中....";var o=new FormData;o.append("file",a),o.append("projectName",localStorage.getItem("projectName")),o.append("id",e.deliverableId);var n=JSON.parse(localStorage.getItem("projectData")).company_name;o.append("company",n),o.append("uploadPeople",this.userinfo.memberid),o.append("projectNumber",this.projectNumber);var i={onUploadProgress:function(t){var a=t.loaded/t.total*100|0;a<100&&(e.progress=a)}},r=Object(c.H)("/sgpm/rest/api/server/pm/project/deliverable/upload");m.a.post(r,o,i).then(function(o){200==o.data.code?(e.progress=100,e.file_name=a.name,e.fileName=a.name,e.file_url=t.get_download_file_url(e),t.updateStatus(),t.sendData(),t.fileUploadFiles.forEach(function(e){if(e.uid==a.uid){var o=t.fileUploadFiles.indexOf(e);t.fileUploadFiles.splice(o,1)}}),u.a.$emit("fileUploadFiles",t.fileUploadFiles),t.submitFileAudit(e)):alert("上传失败"),e.upload_status=!0,e.progress=0,e.progress_status=!1})}},submitFileAudit:function(e){var t={deliverableId:e.deliverableId,username:_.encode(this.userinfo.login_name),projectNumber:this.projectNumber};"-1360422574114386809"==this.userinfo.account_id||"5326994013938795629"==this.userinfo.account_id?this.examineCTSubmit(t,e):"-1814768306395265967"==this.userinfo.account_id||"7638091599462351621"==this.userinfo.account_id?this.examineGTSubmit(t,e):"8416498716893399290"==this.userinfo.account_id?this.examineNKSubmit(t,e):(e.file_status=!1,e.status=0,this.warnMessage("该公司还在开发中，暂不能提交审批文档"))},examineNKSubmit:function(e,t){var a=this;Object(c.w)("/sgpm/rest/api/integration/oa/nk/deliverable/flow",e).then(function(e){200==e.data.code?(a.warnMessage("提交审批流程成功"),t.status=2,t.file_status=!0):(a.$message.error("提交审批流程失败"),t.file_status=!1,t.status=0)}).catch(function(e){})},examineGTSubmit:function(e,t){var a=this;Object(c.w)("/sgpm/rest/api/integration/oa/gt/deliverable/flow",e).then(function(e){200==e.data.code?(a.warnMessage("提交审批流程成功"),t.status=2,t.file_status=!0):(a.$message.error("提交审批流程失败"),t.file_status=!1,t.status=0)}).catch(function(e){})},examineCTSubmit:function(e,t){var a=this;Object(c.v)("/sgpm/rest/api/integration/oa/deliverable/flow",e).then(function(e){200==e.data.code?(a.warnMessage("提交审批流程成功"),t.status=2,t.file_status=!0):(a.$message.error("提交审批流程失败"),t.file_status=!1,t.status=0)}).catch(function(e){})},updateStatus:function(){var e=this;this.tableData.forEach(function(t){var a=e.getFileStatus(t);if(t.maxValue=a?100:90,1==t.status)if(a)var o={value:"",selectStatus:!0,options:[{value:0,label:"未完成",disabled:!0},{value:1,label:"进行中",disabled:!1},{value:2,label:"已完成",disabled:!1}]};else o={value:"",selectStatus:!0,options:[{value:0,label:"未完成",disabled:!0},{value:1,label:"进行中",disabled:!1},{value:2,label:"已完成",disabled:!1}]};if(2==t.status)if(a)o={value:"",selectStatus:!0,options:[{value:0,label:"未完成",disabled:!0},{value:1,label:"进行中",disabled:!0},{value:2,label:"已完成",disabled:!1}]};else o={value:"",selectStatus:!0,options:[{value:0,label:"未完成",disabled:!0},{value:1,label:"进行中",disabled:!0},{value:2,label:"已完成",disabled:!0}]};if(0==t.status)if(a)o={value:"",selectStatus:!0,options:[{value:0,label:"未完成",disabled:!1},{value:1,label:"进行中",disabled:!1},{value:2,label:"已完成",disabled:!1}]};else o={value:"",selectStatus:!0,options:[{value:0,label:"未完成",disabled:!1},{value:1,label:"进行中",disabled:!1},{value:2,label:"已完成",disabled:!1}]};t.statusSelectData=o}),this.setReviewRow(this.tableData)},formatisCut:function(e,t){switch(e.isCut){case 1:return"是";case 0:return"否";default:return"未知"}},formatauditDeliverable:function(e){switch(e.auditDeliverable){case"0":return"否";case"1":return"是";default:return"否"}},formatcontractDeliverable:function(e){switch(e.contractDeliverable){case 0:return"否";case 1:return"是";default:return"否"}},formatstatus:function(e){switch(e.status){case 1:return"未上传";case 0:return"已上传";case 2:return"待审核";case 3:return"审核通过";case 4:return"驳回";default:return"未知"}},get_download_file_url:function(e){var t=JSON.parse(localStorage.getItem("projectData")).company_name;return Object(c.H)("/sgpm/rest/api/server/pm/project/deliverable/download?id=")+e.deliverableId+"&company="+t},getMemberRole:function(){var e=this,t=JSON.parse(localStorage.getItem("userinfo")),a={projectNo:this.projectNumber,memberId:t.memberid};Object(c._28)("/sgpm/rest/api/server/pm/project/member/role",a).then(function(t){var a=t.data.data.memberRole;u.a.$emit("memberRole",a),e.manageStatus=0!=a&&2!=a}).catch(function(e){})},getMemberData:function(e){var t=this;this.memberStatus=!1;var a="/sgpm/rest/api/server/pm/project/members/"+e;Object(c._28)(a).then(function(e){var a=e.data.data;a.length>0&&a.forEach(function(e){e.user_id==t.userinfo.memberid&&(t.submitStatus=!1,t.memberStatus=!0)})}).catch(function(e){})},getMoneyValues:function(){var e=this,t={projectId:this.projectId};Object(c._28)("/sgpm/rest/api/server/pm/project/return/money/percentage",t).then(function(t){var a=t.data.data;null!=a?(e.value1=a.contractAmount,e.value2=a.returnMoney,e.value3=Math.round(100*a.returnMoneyPercentage)+"%",e.resolution=a.resolution):(e.value1="--",e.value2="--",e.value3="--",e.resolution="--")}).catch(function(e){})},getMileStoneDatas:function(){var e=this;this.tableData=[];var t={projectNumber:this.projectNumber};Object(c._28)("/sgpm/rest/api/server/pm/project/milestones",t).then(function(t){var a=t.data.data;e.loading=!1;for(var o=0;o<a.length;o++){var n=a[o];n.workHours=n.estimatedWorkingHours,n.expectedBeginTime=n.estimatedStartDate,n.expectedEndTime=n.estimatedFinishDate,n.currentProblems=n.currentProblems,n.accumulatedProgress=n.accumulatedProgress,n.projectMilestoneId=n.projectMilestoneId,n.finishDate=null==n.finishDate?"--":n.finishDate,n.changeStatus=!1,e.createDelayDays(n);var i=0;if(i=0==o?n.progressPercentage:a[o].progressPercentage-a[o-1].progressPercentage,n.weight=i,n.actualHours="--",n.deviationHours="--",n.deliverable.forEach(function(t){if(t.file_status=!1,t.progress_status=!1,t.upload_status=!0,t.fileList=[],t.progress=0,t.fileName&&1!=t.status?(t.file_name=t.fileName,t.file_url=e.get_download_file_url(t)):null!=t.filePath&&null==t.deliverableTemplateId&&(t.file_name="下载文件",t.file_url=t.filePath),1==t.isDownload){if(n=JSON.parse(localStorage.getItem("userinfo")))var a=n.account_name;var o=Object(c.H)("/sgpm/rest/api/server/pm/project/deliverable/download/template?id="+t.deliverableTemplateId+"&company="+a);t.template_file_url=o}if(1==t.isDownload){var n;if(n=JSON.parse(localStorage.getItem("userinfo")))a=n.account_name;o=Object(c.H)("/sgpm/rest/api/server/pm/project/deliverable/download/template?id="+t.deliverableTemplateId+"&company="+a);t.template_file_url=o}}),100==n.accumulatedProgress)n.maxValue=100;else{var r=e.getFileStatus(n);n.maxValue=r?100:90}if(n.minValue=null!=n.accumulatedProgress?n.accumulatedProgress:0,1==n.status)if(r)var s={value:"",selectStatus:!0,options:[{value:0,label:"未完成",disabled:!0},{value:1,label:"进行中",disabled:!1},{value:2,label:"已完成",disabled:!1}]};else s={value:"",selectStatus:!0,options:[{value:0,label:"未完成",disabled:!0},{value:1,label:"进行中",disabled:!1},{value:2,label:"已完成",disabled:!1}]};if(2==n.status)if(r)s={value:"",selectStatus:!0,options:[{value:0,label:"未完成",disabled:!0},{value:1,label:"进行中",disabled:!0},{value:2,label:"已完成",disabled:!1}]};else s={value:"",selectStatus:!0,options:[{value:0,label:"未完成",disabled:!0},{value:1,label:"进行中",disabled:!0},{value:2,label:"已完成",disabled:!1}]};if(0==n.status)if(r)s={value:"",selectStatus:!0,options:[{value:0,label:"未完成",disabled:!1},{value:1,label:"进行中",disabled:!1},{value:2,label:"已完成",disabled:!1}]};else s={value:"",selectStatus:!0,options:[{value:0,label:"未完成",disabled:!1},{value:1,label:"进行中",disabled:!1},{value:2,label:"已完成",disabled:!1}]};n.statusSelectData=s,e.tableData.push(n)}e.getSpanArr(e.tableData),e.getCurrentProgress(e.tableData),e.setReviewRow(e.tableData),e.setRowFile(e.tableData)}).catch(function(e){})},getFileStatus:function(e){var t=!0;return e.deliverable.forEach(function(e){3!=e.status&&(t=!1)}),t},createstageName:function(e){e.stageName},setRowFile:function(e){e.forEach(function(e){e.deliverable.forEach(function(e){2!=e.status&&3!=e.status||(e.file_status=!0)})})},setReviewRow:function(e){for(var t=!0,a=!0,o=!0,n=0;n<e.length;n++){var i=e[n];"启动"==i.stageName&&2!=i.status&&(i.statusSelectData.selectStatus=!1,t=!1,a=!1,o=!1),"规划"==i.stageName&&2!=i.status&&t&&(i.statusSelectData.selectStatus=!1,a=!1,o=!1),"实施"==i.stageName&&2!=i.status&&a&&(i.statusSelectData.selectStatus=!1,o=!1),"收尾"==i.stageName&&2!=i.status&&o&&(i.statusSelectData.selectStatus=!1)}},createDelayDays:function(e){var t=0,a=new Date(Date.parse(e.expectedEndTime)),o=new Date,n=o.getFullYear(),i=(o.getMonth()+1).toString(),r=o.getDate().toString();1==i.length&&(i="0"+i),1==r.length&&(r="0"+r);var s=n+"-"+i+"-"+r,l=new Date(Date.parse(s));"--"!=e.finishDate?(l=new Date(Date.parse(e.finishDate)))>a&&(t=(l-a)/864e5):"--"==e.finishDate&&l>a&&(t=(l-a)/864e5);e.delayDays=t}}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Layout"},[a("div",{staticClass:"titleStyle"},[a("span",{staticClass:"Title"},[e._v("项目名称：")]),e._v(" "),a("span",{staticClass:"Value"},[e._v(e._s(e.projectName))]),e._v(" "),a("span",{staticClass:"Title"},[e._v("项目编号：")]),e._v(" "),a("span",{staticClass:"Value"},[e._v(e._s(e.projectNumber))]),e._v(" "),e.isContractProject?a("span",{staticClass:"Title"},[e._v("合同编号：")]):e._e(),e._v(" "),e.isContractProject?a("span",{staticClass:"Value"},[e._v(e._s(e.contractNum))]):e._e()]),e._v(" "),"8416498716893399290"!=this.userinfo.account_id?a("div",{staticClass:"titleStyle"},[e.isContractProject?a("span",{staticClass:"Title"},[e._v("合同额：")]):e._e(),e._v(" "),e.isContractProject?a("span",{staticClass:"Value"},[e._v(e._s(e.value1)+" 万元")]):e._e()]):a("div",{staticClass:"titleStyle"},[e.isContractProject?a("span",{staticClass:"Title"},[e._v("累计合同额：")]):e._e(),e._v(" "),e.isContractProject?a("span",{staticClass:"Value"},[e._v(e._s(e.value1)+" 万元")]):e._e()]),e._v(" "),"8416498716893399290"!=this.userinfo.account_id?a("div",{staticClass:"titleStyle"},[e.isContractProject?a("span",{staticClass:"Title"},[e._v("回款额：")]):e._e(),e._v(" "),e.isContractProject?a("span",{staticClass:"Value"},[e._v(e._s(e.value2)+" 万元")]):e._e()]):a("div",{staticClass:"titleStyle"},[e.isContractProject?a("span",{staticClass:"Title"},[e._v("累计回款额：")]):e._e(),e._v(" "),e.isContractProject?a("span",{staticClass:"Value"},[e._v(e._s(e.value2)+" 万元")]):e._e()]),e._v(" "),a("div",{staticClass:"titleStyle"},[e.isContractProject?a("span",{staticClass:"Title"},[e._v("回款率：")]):e._e(),e._v(" "),e.isContractProject?a("span",{staticClass:"Value"},[e._v(e._s(e.value3))]):e._e()]),e._v(" "),a("div",{staticClass:"titleStyle"},[e.isContractProject?e._e():a("span",{staticClass:"Title"},[e._v("项目预算：")]),e._v(" "),e.isContractProject?e._e():a("span",{staticClass:"Value"},[e._v(e._s(e.projectBudget)+" 万元")])]),e._v(" "),a("div",{staticClass:"titleStyle"},[a("span",{staticClass:"Title"},[e._v("完成进度：")]),e._v(" "),a("span",{staticClass:"Value"},[e._v(e._s(e.currentProgress)+"%")])]),e._v(" "),a("div",{staticClass:"titleStyle"},[a("span",{staticClass:"Title"},[e._v("最近review时间：")]),e._v(" "),a("span",{staticClass:"Value"},[e._v(e._s(e.reviewtime))])]),e._v(" "),a("div",{staticClass:"titleStyle"},[e.projectValueStatus?a("span",{staticClass:"Title"},[e._v("项目经费：")]):e._e(),e._v(" "),e.projectValueStatus?a("span",{staticClass:"Value"},[e._v(e._s(e.resolution)+" 万元")]):e._e()]),e._v(" "),a("div",{staticStyle:{float:"right","margin-right":"10px","margin-bottom":"5px"}},[e.changeBtnShow?a("el-button",{attrs:{disabled:!(!e.changeBtnStatus&&e.manageStatus&&!e.isChange),type:"primary",size:"mini"},on:{click:function(t){e.milepostChangedialogVisible=!0}}},[e._v("里程碑变更")]):e._e(),e._v(" "),e.addBtnShow?a("el-button",{attrs:{disabled:!e.addBtnStatus,type:"primary",size:"mini"},on:{click:function(t){e.milepostAddialogVisible=!0}}},[e._v("里程碑添加")]):e._e(),e._v(" "),a("el-popover",{staticClass:"popover",attrs:{placement:"bottom",width:"200",trigger:"click"}},[e.projectValueStatus?a("el-checkbox",{staticClass:"popover-checkbox",model:{value:e.gtItemStatus,callback:function(t){e.gtItemStatus=t},expression:"gtItemStatus"}},[e._v("里程碑产值")]):e._e(),e._v(" "),a("el-checkbox",{staticClass:"popover-checkbox",model:{value:e.row2,callback:function(t){e.row2=t},expression:"row2"}},[e._v("累计进度")]),e._v(" "),a("el-checkbox",{staticClass:"popover-checkbox",model:{value:e.row3,callback:function(t){e.row3=t},expression:"row3"}},[e._v("完成百分比")]),e._v(" "),a("el-checkbox",{staticClass:"popover-checkbox",model:{value:e.row4,callback:function(t){e.row4=t},expression:"row4"}},[e._v("当前状态")]),e._v(" "),a("el-checkbox",{staticClass:"popover-checkbox",model:{value:e.row41,callback:function(t){e.row41=t},expression:"row41"}},[e._v("当前进展/问题")]),e._v(" "),a("el-checkbox",{staticClass:"popover-checkbox",model:{value:e.row5,callback:function(t){e.row5=t},expression:"row5"}},[e._v("预计开始时间")]),e._v(" "),a("el-checkbox",{staticClass:"popover-checkbox",model:{value:e.row6,callback:function(t){e.row6=t},expression:"row6"}},[e._v("预计结束时间")]),e._v(" "),a("el-checkbox",{staticClass:"popover-checkbox",model:{value:e.row7,callback:function(t){e.row7=t},expression:"row7"}},[e._v("实际完成时间")]),e._v(" "),a("el-checkbox",{staticClass:"popover-checkbox",model:{value:e.row8,callback:function(t){e.row8=t},expression:"row8"}},[e._v("延期天数")]),e._v(" "),a("el-checkbox",{staticClass:"popover-checkbox",model:{value:e.row9,callback:function(t){e.row9=t},expression:"row9"}},[e._v("预计工时")]),e._v(" "),a("el-checkbox",{staticClass:"popover-checkbox",model:{value:e.row10,callback:function(t){e.row10=t},expression:"row10"}},[e._v("实际工时")]),e._v(" "),a("el-checkbox",{staticClass:"popover-checkbox",model:{value:e.row11,callback:function(t){e.row11=t},expression:"row11"}},[e._v("工时偏差")]),e._v(" "),a("el-checkbox",{staticClass:"popover-checkbox",model:{value:e.row12,callback:function(t){e.row12=t},expression:"row12"}},[e._v("里程碑描述")]),e._v(" "),a("el-button",{staticClass:"circle-menu btn-left",attrs:{slot:"reference",type:"primary",icon:"el-icon-menu",circle:"",size:"mini"},slot:"reference"})],1)],1),e._v(" "),a("div",{staticStyle:{clear:"right"}}),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"里程碑变更",visible:e.milepostChangedialogVisible,width:"90%"},on:{"update:visible":function(t){e.milepostChangedialogVisible=t}}},[a("div",{staticStyle:{"margin-top":"-40px"}},[a("project-milestone",{ref:"projectMilestone",attrs:{datas:e.configDatas}})],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("div",{staticStyle:{float:"left","margin-top":"8px"}},[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("变更说明\n      ")]),e._v(" "),a("div",{staticStyle:{float:"left",width:"90%","margin-left":"10px"}},[a("el-input",{attrs:{placeholder:"请输入变更说明"},model:{value:e.changeReason,callback:function(t){e.changeReason=t},expression:"changeReason"}})],1),e._v(" "),a("div",{staticStyle:{clear:"left"}})]),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.milepostChangedialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{loading:e.changeBtnloading,type:"primary",size:"mini"},on:{click:e.milepostChangeSubmit}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"里程碑添加",visible:e.milepostAddialogVisible,width:"90%"},on:{"update:visible":function(t){e.milepostAddialogVisible=t}}},[a("div",{staticStyle:{"margin-top":"-40px"}},[a("project-milestone",{ref:"projectMilestone",attrs:{datas:e.configDatas}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.milepostAddialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{loading:e.changeBtnloading,type:"primary",size:"mini"},on:{click:e.milepostAddSubmit}},[e._v("确 定")])],1)]),e._v(" "),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"rowData",staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-key":e.getRowKeys,"expand-row-keys":e.rowExpands,border:"","header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0},"span-method":e.objectSpanMethod,"default-expand-all":!1,height:e.browerHeight},on:{"expand-change":e.expandChange,"current-change":e.handleSelectionChange}},[e.row1?a("el-table-column",{attrs:{label:"阶段名称",width:"100",align:"center",prop:"stageName"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{border:"1px solid #ecf0f5","margin-left":"-50px","margin-top":"-20px",background:"#ecf0f5"}},[a("el-table",{ref:"sonData",staticStyle:{width:"50%","margin-left":"-2px","margin-top":"20px","margin-bottom":"20px"},attrs:{data:t.row.deliverable,border:"","header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0}}},[a("el-table-column",{attrs:{label:"交付物名称","show-overflow-tooltip":!0,align:"center",width:"150",prop:"deliverableName"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[1==o.isDownload?a("span",[a("u",[a("a",{staticStyle:{color:"dodgerblue"},attrs:{href:o.template_file_url,target:"_blank"}},[e._v(e._s(o.deliverableName))])])]):a("span",[e._v(e._s(o.deliverableName))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{label:"上传附件",width:"160",align:"center","fixed-width":""},scopedSlots:e._u([{key:"default",fn:function(o){var n=o.row;return[t.row.statusSelectData.selectStatus||!e.memberStatus&&!e.manageStatus||n.file_status?a("div",[a("el-button",{attrs:{size:"mini",type:"text",disabled:!0}},[e._v("选文件")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",icon:"el-icon-upload2",type:"primary",disabled:!0}},[e._v("上传")])],1):a("div",[a("el-upload",{ref:n.deliverableId,staticClass:"upload-demo",attrs:{"file-list":n.fileList,action:"#",limit:1,"on-change":e.handleChange,"on-remove":e.handleRemove,"on-success":e.handleAvatarSuccess,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"mini",type:"text",disabled:n.file_status},on:{click:function(t){return e.handleSelectFile(n)}},slot:"trigger"},[e._v("选文件")]),e._v(" "),3===n.status?a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-refresh-left",disabled:n.upload_status},on:{click:function(t){return e.submitUpload(n)}}},[e._v("更新")]):a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-upload2",disabled:n.upload_status},on:{click:function(t){return e.submitUpload(n)}}},[e._v("上传")])],1)],1)]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{width:"70",label:"状态",align:"center",formatter:e.formatstatus,prop:"status"}}),e._v(" "),e.gtItemStatus?a("el-table-column",{attrs:{label:"是否合同交付物",width:"80",align:"center",formatter:e.formatcontractDeliverable,prop:"contractDeliverable"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"是否审计文档",align:"center",width:"70",formatter:e.formatauditDeliverable,prop:"auditDeliverable"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"文件名",align:"center",width:"150",prop:"file_name"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("div",{directives:[{name:"show",rawName:"v-show",value:o.progress_status,expression:"row.progress_status"}]},[a("el-progress",{attrs:{"text-inside":!0,"stroke-width":15,percentage:o.progress,status:"success"}})],1),e._v(" "),1!=o.status?a("span",[a("u",[a("a",{staticStyle:{color:"dodgerblue"},attrs:{href:o.file_url,target:"_blank"}},[e._v(e._s(o.file_name))])])]):a("span",[e._v(e._s(o.file_name))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"交付物描述",prop:"description"}})],1)],1)]}}])}),e._v(" "),e._e(),e._v(" "),e.row1?a("el-table-column",{attrs:{label:"里程碑名称",width:"150",align:"center",prop:"milestoneName"}}):e._e(),e._v(" "),e.gtItemStatus?a("el-table-column",{attrs:{label:"里程碑产值(万元)",width:"110",align:"center",formatter:e.outValueFormat}}):e._e(),e._v(" "),e._e(),e._v(" "),e.row2?a("el-table-column",{attrs:{label:"累计进度(%)",align:"center",width:"110",prop:"progressPercentage"}}):e._e(),e._v(" "),e.row3?a("el-table-column",{attrs:{label:"完成百分比(%)",align:"center",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input-number",{staticStyle:{width:"100px"},attrs:{"controls-position":"right",disabled:t.row.statusSelectData.selectStatus||!e.manageStatus&&e.memberStatus,min:t.row.minValue,max:t.row.maxValue,step:10},on:{change:function(a){return e.handleAccumulatedProgress(t.row)}},model:{value:t.row.accumulatedProgress,callback:function(a){e.$set(t.row,"accumulatedProgress",a)},expression:"scope.row.accumulatedProgress"}})]}}],null,!1,2320154196)}):e._e(),e._v(" "),e.row4?a("el-table-column",{attrs:{label:"当前状态",align:"center",width:"120",prop:"status"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticStyle:{width:"90px"},attrs:{placeholder:"请选择",disabled:t.row.statusSelectData.selectStatus||!e.manageStatus&&e.memberStatus},on:{change:function(a){return e.selectChange(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}},e._l(t.row.statusSelectData.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,disabled:e.disabled,value:e.value}})}),1)]}}],null,!1,2249173127)}):e._e(),e._v(" "),e.row7?a("el-table-column",{attrs:{label:"实际完成时间",align:"center",width:"160",prop:"finishDate"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.remarksStatus&&"验收"==t.row.milestoneName&&2==t.row.status?a("div",[a("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date",clearable:!1,"value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.row.finish_date,callback:function(a){e.$set(t.row,"finish_date",a)},expression:"scope.row.finish_date"}})],1):a("div",[e._v(e._s(t.row.finishDate))])]}}],null,!1,2043888111)}):e._e(),e._v(" "),e.row41?a("el-table-column",{attrs:{label:"当前进展/问题",align:"center",width:"200",prop:"currentProblems"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"textarea",rows:1},on:{change:function(a){return e.textareaChange(t.row)}},model:{value:t.row.currentProblems,callback:function(a){e.$set(t.row,"currentProblems",a)},expression:"scope.row.currentProblems"}})]}}],null,!1,3370776823)}):e._e(),e._v(" "),e.row5?a("el-table-column",{attrs:{label:"预计开始时间",align:"center",width:"120",prop:"estimatedStartDate"}}):e._e(),e._v(" "),e.row6?a("el-table-column",{attrs:{label:"预计完成时间",align:"center",width:"120",prop:"estimatedFinishDate"}}):e._e(),e._v(" "),e.row8?a("el-table-column",{attrs:{label:"延期天数",align:"center",prop:"delayDays"}}):e._e(),e._v(" "),e.row9?a("el-table-column",{attrs:{label:"预计工时(人月)",align:"center",prop:"estimatedWorkingHours"}}):e._e(),e._v(" "),e.row10?a("el-table-column",{attrs:{label:"实际工时(人月)",align:"center",prop:"actualHours"}}):e._e(),e._v(" "),e.row11?a("el-table-column",{attrs:{label:"工时偏差(人月)",align:"center",prop:"deviationHours"}}):e._e(),e._v(" "),e.row12?a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"里程碑描述",width:"300",prop:"description"}}):e._e()],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"30px"}},[e.memberStatus||e.manageStatus?a("div",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleSubmit}},[e._v("提交")])],1):a("div",[a("el-button",{attrs:{type:"primary",size:"mini",disabled:!0},on:{click:e.handleSubmit}},[e._v("提交")])],1)]),e._v(" "),e.remarksStatus?a("div",{staticClass:"remarks"},[e._v("注：请根据验收文档实际完成时间填写")]):e._e()],1)},staticRenderFns:[]};var b=a("VU/8")(f,g,!1,function(e){a("zYQa"),a("31z3")},"data-v-12bf0eec",null);t.a=b.exports},ht9v:function(e,t){},hve7:function(e,t){},iBEn:function(e,t,a){"use strict";var o=a("AsOx"),n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form-item",{attrs:{label:"true"==e.widget_copy.isShow?e.widget_copy.name:"",prop:e.widget_copy.model,rules:e.widget_copy.rules}},["input"==e.widget_copy.type?["number"==e.widget_copy.options.dataType||"integer"==e.widget_copy.options.dataType||"float"==e.widget_copy.options.dataType?a("el-input",{style:{width:e.widget_copy.options.width},attrs:{type:e.widget_copy.options.dataType,placeholder:e.widget_copy.options.placeholder,value:e.widget_copy.options.defaultValue,readonly:e.widget_copy.options.readonly,disabled:e.widget_copy.options.disabled,clearable:e.widget_copy.options.clearable},model:{value:e.dataModel,callback:function(t){e.dataModel=e._n(t)},expression:"dataModel"}}):a("el-input",{style:{width:e.widget_copy.options.width},attrs:{type:e.widget_copy.options.dataType,placeholder:e.widget_copy.options.placeholder,readonly:e.widget_copy.options.readonly,disabled:e.widget_copy.options.disabled,clearable:e.widget_copy.options.clearable,value:e.widget_copy.options.defaultValue},model:{value:e.dataModel,callback:function(t){e.dataModel=t},expression:"dataModel"}})]:e._e(),e._v(" "),"input2"==e.widget_copy.type?[a("el-input",{style:{width:e.widget_copy.options.width},attrs:{type:e.widget_copy.options.dataType,placeholder:e.widget_copy.options.placeholder,url:e.widget_copy.options.url,disabled:e.widget_copy.options.disabled},model:{value:e.widget_copy.options.defaultValue,callback:function(t){e.$set(e.widget_copy.options,"defaultValue",t)},expression:"widget_copy.options.defaultValue"}})]:e._e(),e._v(" "),"inputguotu"==e.widget_copy.type?[a("el-input",{style:{width:e.widget_copy.options.width},attrs:{type:"number",placeholder:e.widget_copy.options.placeholder,url:e.widget_copy.options.url,disabled:e.widget_copy.options.disabled},on:{blur:function(t){return e.UpdateTaskName(t)}},model:{value:e.dataModel,callback:function(t){e.dataModel=t},expression:"dataModel"}})]:e._e(),e._v(" "),"inputguotulevel"==e.widget_copy.type?[a("el-input",{style:{width:e.widget_copy.options.width},attrs:{type:e.widget_copy.options.dataType,placeholder:e.widget_copy.options.placeholder,url:e.widget_copy.options.url,disabled:e.widget_copy.options.disabled},model:{value:e.dataModel,callback:function(t){e.dataModel=t},expression:"dataModel"}})]:e._e(),e._v(" "),"divider"==e.widget_copy.type?[a("el-collapse")]:e._e(),e._v(" "),"row"==e.widget_copy.type?[a("el-row",[a("el-col",[a("div",{staticClass:"grid-content bg-purple wordTitle"},[e._v(e._s(e.widget_copy.options.placeholder))])])],1)]:e._e(),e._v(" "),"row2"==e.widget_copy.type?[a("el-row",[a("el-col",[a("div",{staticClass:"grid-content bg-purple word"},[e._v(e._s(e.widget_copy.options.placeholder))])])],1)]:e._e(),e._v(" "),"row3"==e.widget.type?[a("el-row",[a("el-col",[a("div",{staticClass:"grid-content bg-purple wordLeft"},[e._v(e._s(e.widget.options.placeholder))])])],1)]:e._e(),e._v(" "),"button"==e.widget_copy.type?[a("el-button",{style:{width:e.widget_copy.options.width},attrs:{type:"primary",placeholder:e.widget_copy.options.placeholder,url:e.widget_copy.options.url},model:{value:e.dataModel,callback:function(t){e.dataModel=t},expression:"dataModel"}},[e._v("\n\t\t\t\t"+e._s(e.widget_copy.options.placeholder))])]:e._e(),e._v(" "),"table"==e.widget_copy.type?[a("el-table",{style:{width:e.widget_copy.options.width},model:{value:e.dataModel,callback:function(t){e.dataModel=t},expression:"dataModel"}},[a("el-table-column",{attrs:{prop:"date",label:"日期",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址"}})],1)]:e._e(),e._v(" "),"textarea"==e.widget_copy.type?[a("el-input",{style:{width:e.widget_copy.options.width},attrs:{rows:5,type:e.widget_copy.options.dataType,placeholder:e.widget_copy.options.placeholder,type:"textarea"},model:{value:e.dataModel,callback:function(t){e.dataModel=t},expression:"dataModel"}})]:e._e(),e._v(" "),"textarea2"==e.widget_copy.type?[a("el-input",{style:{width:e.widget_copy.options.width},attrs:{rows:5,placeholder:e.widget_copy.options.placeholder,type:"textarea"},model:{value:e.widget_copy.options.defaultValue,callback:function(t){e.$set(e.widget_copy.options,"defaultValue",t)},expression:"widget_copy.options.defaultValue"}})]:e._e(),e._v(" "),"number"==e.widget_copy.type?[a("el-input-number",{style:{width:e.widget_copy.options.width},attrs:{step:e.widget_copy.options.step,"controls-position":"right"},model:{value:e.widget_copy.options.defaultValue,callback:function(t){e.$set(e.widget_copy.options,"defaultValue",t)},expression:"widget_copy.options.defaultValue"}})]:e._e(),e._v(" "),"radio"==e.widget_copy.type?[a("el-radio-group",{style:{width:e.widget_copy.options.width},model:{value:e.dataModel,callback:function(t){e.dataModel=t},expression:"dataModel"}},e._l(e.widget_copy.options.remote?e.widget_copy.options.remoteOptions:e.widget_copy.options.options,function(t,o){return a("el-radio",{key:o,style:{display:e.widget_copy.options.inline?"inline-block":"block"},attrs:{label:t.value},on:{change:function(a){return e.changehandleradio(t)}}},[e.widget_copy.options.remote?[e._v("\n\t\t\t\t\t\t"+e._s(t.label)+"\n\t\t\t\t\t")]:[e._v("\n\t\t\t\t\t\t"+e._s(e.widget_copy.options.showLabel?t.label:t.value)+"\n\t\t\t\t\t")]],2)}),1)]:e._e(),e._v(" "),"checkbox"==e.widget_copy.type?[a("el-checkbox-group",{style:{width:e.widget_copy.options.width},model:{value:e.dataModel,callback:function(t){e.dataModel=t},expression:"dataModel"}},e._l(e.widget_copy.options.remote?e.widget_copy.options.remoteOptions:e.widget_copy.options.options,function(t,o){return a("el-checkbox",{key:o,style:{display:e.widget_copy.options.inline?"inline-block":"block"},attrs:{label:t.value}},[e.widget_copy.options.remote?[e._v("\n\t\t\t\t\t\t"+e._s(t.label)+"\n\t\t\t\t\t")]:[e._v("\n\t\t\t\t\t\t"+e._s(e.widget_copy.options.showLabel?t.label:t.value)+"\n\t\t\t\t\t")]],2)}),1)]:e._e(),e._v(" "),"checkboxSingle"==e.widget_copy.type?[a("el-checkbox",{on:{change:e.childProject},model:{value:e.ckeckVal,callback:function(t){e.ckeckVal=t},expression:"ckeckVal"}},[e._v("是否是子项目")])]:e._e(),e._v(" "),"time"==e.widget_copy.type?[a("el-time-picker",{style:{width:e.widget_copy.options.width},attrs:{"is-range":e.widget_copy.options.isRange,placeholder:e.widget_copy.options.placeholder,"start-placeholder":e.widget_copy.options.startPlaceholder,"end-placeholder":e.widget_copy.options.endPlaceholder,readonly:e.widget_copy.options.readonly,disabled:e.widget_copy.options.disabled,editable:e.widget_copy.options.editable,clearable:e.widget_copy.options.clearable,"arrow-control":e.widget_copy.options.arrowControl,"value-format":e.widget_copy.options.timestamp?"timestamp":e.widget_copy.options.format},model:{value:e.dataModel,callback:function(t){e.dataModel=t},expression:"dataModel"}})]:e._e(),e._v(" "),"date"==e.widget_copy.type?[a("el-date-picker",{style:{width:e.widget_copy.options.width},attrs:{type:e.widget_copy.options.type,placeholder:e.widget_copy.options.placeholder,"start-placeholder":e.widget_copy.options.startPlaceholder,"end-placeholder":e.widget_copy.options.endPlaceholder,readonly:e.widget_copy.options.readonly,disabled:e.widget_copy.options.disabled,editable:e.widget_copy.options.editable,clearable:e.widget_copy.options.clearable,"value-format":e.widget_copy.options.timestamp?"timestamp":e.widget_copy.options.format,format:e.widget_copy.options.format},model:{value:e.dataModel,callback:function(t){e.dataModel=t},expression:"dataModel"}})]:e._e(),e._v(" "),"rate"==e.widget_copy.type?[a("el-rate",{attrs:{max:e.widget_copy.options.max,disabled:e.widget_copy.options.disabled,"allow-half":e.widget_copy.options.allowHalf},model:{value:e.dataModel,callback:function(t){e.dataModel=t},expression:"dataModel"}})]:e._e(),e._v(" "),"color"==e.widget_copy.type?[a("el-color-picker",{attrs:{disabled:e.widget_copy.options.disabled,"show-alpha":e.widget_copy.options.showAlpha},model:{value:e.dataModel,callback:function(t){e.dataModel=t},expression:"dataModel"}})]:e._e(),e._v(" "),"team"==e.widget_copy.type?[a("Myteam",{attrs:{datas:e.widget_copy}})]:e._e(),e._v(" "),"conclusion"==e.widget_copy.type?[a("conclusion",{attrs:{datas:e.widget_copy}})]:e._e(),e._v(" "),"projectsplit"==e.widget_copy.type?[a("projectsplit",{attrs:{datas:e.widget_copy}})]:e._e(),e._v(" "),"contractassociated"==e.widget_copy.type?[a("contractassociated",{attrs:{datas:e.widget_copy}})]:e._e(),e._v(" "),"synergyInformation"==e.widget_copy.type?[a("synergyInformation",{attrs:{datas:e.widget_copy}})]:e._e(),e._v(" "),"customer"==e.widget_copy.type?[a("customercontact",{attrs:{datas:e.widget_copy}})]:e._e(),e._v(" "),"tag"==e.widget_copy.type?[a("key-tag",{attrs:{datas:e.widget_copy}})]:e._e(),e._v(" "),"abnormal"==e.widget_copy.type?[a("abnormal",{attrs:{datas:e.widget_copy}})]:e._e(),e._v(" "),"myTable"==e.widget_copy.type?[a("myTable",{attrs:{datas:e.widget_copy}})]:e._e(),e._v(" "),"projectList"==e.widget_copy.type?[a("project-list",{attrs:{datas:e.widget_copy}})]:e._e(),e._v(" "),"contractList"==e.widget_copy.type?[a("contract-list",{attrs:{datas:e.widget_copy}})]:e._e(),e._v(" "),"notContractList"==e.widget_copy.type?[a("not-contract-list",{attrs:{datas:e.widget_copy}})]:e._e(),e._v(" "),"marketSelect"==e.widget_copy.type?[a("market-select",{attrs:{datas:e.widget_copy}})]:e._e(),e._v(" "),"ProjectCode"==e.widget_copy.type?[a("ProjectCode",{attrs:{datas:e.widget_copy}})]:e._e(),e._v(" "),"projectChange"==e.widget_copy.type?[a("project-change-list",{attrs:{datas:e.widget_copy}})]:e._e(),e._v(" "),"application"==e.widget_copy.type?[a("application",{attrs:{datas:e.widget_copy}})]:e._e(),e._v(" "),"managementHome"==e.widget_copy.type?[a("management-home",{attrs:{datas:e.widget_copy}})]:e._e(),e._v(" "),"adjust"==e.widget_copy.type?[a("adjust",{attrs:{datas:e.widget_copy}})]:e._e(),e._v(" "),"taskobjectory"==e.widget_copy.type?[a("task-object",{attrs:{datas:e.widget_copy}})]:e._e(),e._v(" "),"tree"==e.widget_copy.type?[a("my-tree",{attrs:{datas:e.widget_copy}})]:e._e(),e._v(" "),"subPackageList"==e.widget_copy.type?[a("sub-package-list",{attrs:{datas:e.widget_copy}})]:e._e(),e._v(" "),"tabs"==e.widget_copy.type?[a("my-tabs",{attrs:{datas:e.widget_copy}})]:e._e(),e._v(" "),"milestone"==e.widget_copy.type?[a("project-milestone",{attrs:{datas:e.widget_copy}})]:e._e(),e._v(" "),"milepost"==e.widget_copy.type?[a("milepost",{attrs:{datas:e.widget_copy}})]:e._e(),e._v(" "),"projectrisk"==e.widget_copy.type?[a("project-risk",{attrs:{datas:e.widget_copy}})]:e._e(),e._v(" "),"cashDeposit"==e.widget_copy.type?[a("cash-deposit",{attrs:{datas:e.widget_copy}})]:e._e(),e._v(" "),"projectaccount"==e.widget_copy.type?[a("project-account",{attrs:{datas:e.widget_copy}})]:e._e(),e._v(" "),"milestonetemplate"==e.widget_copy.type?[a("milestone-template",{attrs:{datas:e.widget_copy}})]:e._e(),e._v(" "),"warningCard"==e.widget.type?[a("warning-card",{attrs:{datas:e.widget}})]:e._e(),e._v(" "),"budgetAllocation"==e.widget.type?[a("budget-allocation",{attrs:{datas:e.widget}})]:e._e(),e._v(" "),"mounthOutput"==e.widget.type?[a("mounth-output",{attrs:{datas:e.widget}})]:e._e(),e._v(" "),"mounthOutputNew"==e.widget.type?[a("mounth-outputNew",{attrs:{datas:e.widget}})]:e._e(),e._v(" "),"residueOutput"==e.widget.type?[a("residue-output",{attrs:{datas:e.widget}})]:e._e(),e._v(" "),"associatedOutput"==e.widget.type?[a("associated-output",{attrs:{datas:e.widget}})]:e._e(),e._v(" "),"notAssociatedOutput"==e.widget.type?[a("not-associated-output",{attrs:{datas:e.widget}})]:e._e(),e._v(" "),"financialCard"==e.widget.type?[a("financial-card",{attrs:{datas:e.widget}})]:e._e(),e._v(" "),"homeBaseMsg"==e.widget.type?[a("home-base-msg",{attrs:{datas:e.widget}})]:e._e(),e._v(" "),"pendingDocument"==e.widget.type?[a("pending-document",{attrs:{datas:e.widget}})]:e._e(),e._v(" "),"paymentInformation"==e.widget.type?[a("payment-Information",{attrs:{datas:e.widget}})]:e._e(),e._v(" "),"contractInformation"==e.widget.type?[a("contract-Information",{attrs:{datas:e.widget}})]:e._e(),e._v(" "),"select"==e.widget_copy.type?[a("div",{staticStyle:{display:"none"}},[e._v(e._s(e.widget_copy.options))]),e._v(" "),a("el-select",{style:{width:e.widget_copy.options.width},attrs:{disabled:e.widget_copy.options.disabled,multiple:e.widget_copy.options.multiple,clearable:e.widget_copy.options.clearable,filterable:"",placeholder:e.widget_copy.options.placeholder,url:e.widget_copy.options.url,listen:e.widget_copy.listen},model:{value:e.dataModel,callback:function(t){e.dataModel=t},expression:"dataModel"}},e._l(e.widget_copy.options.remote?e.widget_copy.options.remoteOptions:e.widget_copy.options.options,function(t){return a("el-option",{key:t.parent_id,attrs:{id:t.id,label:Object.keys(e.widget_copy.options).indexOf("listen")>=0?t.label:t.value,value:t.parent_id||"yes"==t.items?t:t.value}})}),1)]:e._e(),e._v(" "),"selectguotu"==e.widget_copy.type?[a("div",{staticStyle:{display:"none"}},[e._v(e._s(e.widget_copy.options))]),e._v(" "),a("el-select",{style:{width:e.widget_copy.options.width},attrs:{disabled:e.widget_copy.options.disabled,multiple:e.widget_copy.options.multiple,clearable:e.widget_copy.options.clearable,filterable:"",placeholder:e.widget_copy.options.placeholder,url:e.widget_copy.options.url,listen:e.widget_copy.listen},model:{value:e.dataModel,callback:function(t){e.dataModel=t},expression:"dataModel"}},e._l(e.professionalWorkTypes,function(e,t){return a("el-option",{key:t,attrs:{label:e.value,value:e.value}})}),1)]:e._e(),e._v(" "),"cascader"==e.widget_copy.type?[a("el-cascader",{style:{width:e.widget_copy.options.width},attrs:{options:e.widget_copy.options.remote?e.widget_copy.options.remoteOptions:e.widget_copy.options.options,disabled:e.widget_copy.options.disabled,clearable:e.widget_copy.options.clearable,placeholder:e.widget_copy.options.placeholder},model:{value:e.dataModel,callback:function(t){e.dataModel=t},expression:"dataModel"}})]:e._e(),e._v(" "),"switch"==e.widget_copy.type?[a("el-switch",{attrs:{disabled:e.widget_copy.options.disabled},model:{value:e.dataModel,callback:function(t){e.dataModel=t},expression:"dataModel"}})]:e._e(),e._v(" "),"slider"==e.widget_copy.type?[a("el-slider",{style:{width:e.widget_copy.options.width},attrs:{min:e.widget_copy.options.min,max:e.widget_copy.options.max,disabled:e.widget_copy.options.disabled,step:e.widget_copy.options.step,"show-input":e.widget_copy.options.showInput,range:e.widget_copy.options.range},model:{value:e.dataModel,callback:function(t){e.dataModel=t},expression:"dataModel"}})]:e._e(),e._v(" "),"upload"==e.widget_copy.type?[a("el-upload",{staticClass:"upload-demo",style:{width:e.widget_copy.options.width},attrs:{"file-list":e.dataModel,disabled:e.widget_copy.options.disabled,action:e.widget_copy.options.action,limit:e.widget_copy.options.limit,multiple:e.widget_copy.options.multiple,"on-change":e.handleChange,drag:e.widget_copy.options.drag}},[e.widget_copy.options.drag?a("i",{staticClass:"el-icon-upload"}):e._e(),e._v(" "),e.widget_copy.options.drag?a("div",{staticClass:"el-upload__text"},[e._v("\n\t\t\t\t\t将文件拖到此处，或\n\t\t\t\t\t"),a("em",[e._v("点击上传")])]):e._e(),e._v(" "),e.widget_copy.options.drag?e._e():a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)]:e._e(),e._v(" "),"imgupload"==e.widget_copy.type?[a("fm-upload",{style:{width:e.widget_copy.options.width},attrs:{disabled:e.widget_copy.options.disabled,width:e.widget_copy.options.size.width,height:e.widget_copy.options.size.height,token:e.widget_copy.options.token,domain:e.widget_copy.options.domain},model:{value:e.dataModel,callback:function(t){e.dataModel=t},expression:"dataModel"}})]:e._e(),e._v(" "),"button2"==e.widget_copy.type?[a("el-button",{staticClass:"button2",attrs:{type:"primary",disabled:e.disabled},on:{click:function(t){return e.hetong(e.widget.options.placeholder)}}},[e._v("关联合同\n\t\t\t")])]:e._e(),e._v(" "),[e.show?e._e():a("div",{staticClass:"bg"}),e._v(" "),e.show?e._e():a("el-row",{staticClass:"el-message-box"},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"el-message-box__header"},[a("div",{staticClass:"el-message-box__title"},[a("span",[e._v("关联合同")])]),e._v(" "),a("button",{staticClass:"el-message-box__headerbtn",attrs:{type:"button","aria-label":"Close"},on:{click:function(t){return e.close()}}},[a("i",{staticClass:"el-message-box__close el-icon-close"})])])]),e._v(" "),a("el-col",{staticStyle:{padding:"15px 15px 15px 15px"},attrs:{span:24}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},on:{change:e.indexSelect},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return a("el-option",{key:e.contractNumber,attrs:{label:e.contractName,value:e.contractNumber}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-button",{staticClass:"contractMain",attrs:{type:"primary"},on:{click:function(t){return e.contractMain()}}},[e._v("确定")])],1)],1)]],2)},staticRenderFns:[]};var i=function(e){a("5R7a"),a("l3yy")},r=a("VU/8")(o.a,n,!1,i,"data-v-4cb350ca",null);t.a=r.exports},iBsO:function(e,t,a){"use strict";var o=a("Dd8w"),n=a.n(o),i=a("P9l9"),r=a("NYxO"),s={name:"Adjust",data:function(){return{isExpand:!1,showCardList:!1,names:{names:"edit",radio:0,value:"",Projectaccountingcheck:""},pmStatus:[{value:"0",label:"总项目"},{value:"1",label:"在实施"},{value:"2",label:"已验收-未关闭"},{value:"3",label:"已关闭"},{value:"4",label:"其他"}],pmStatusVal:"",dialogFormVisible:!1,popout:[],loading:!0,getIndex:-1,content:[],tabulardatas:[],tabulardata:[],actualGross:[],designation:[],currentRow:null,accountingindices:"基本指标",options:[{value:"1",label:"我作为项目经理的项目"},{value:"2",label:"我销售的项目"},{value:"3",label:"我作为项目成员的项目"},{value:"4",label:"我监管的项目"},{value:"0",label:"所有项目"}],row:10,num:1,currentPage:1,pager:{totalCount:10,currentPage:1,pagesize:1},cardList:[{id:"1",projectName:"合同额",filed76:"12321.2",filed77:"3232.34",filed78:"2298"},{id:"3",projectName:"纯合同额",filed76:"4323.32",filed77:"3917.22",filed78:"7831.23"},{id:"4",projectName:"回款",filed76:"1211.23",filed77:"782.49",filed78:"3204.3",children:[{id:"42",projectName:"主营业务回款",filed76:"3842.33",filed77:"8321.29",filed78:"9321.22",isExpand:!0,children:[{id:"421",projectName:"自有基础软件",filed76:"3842.33",filed77:"8321.29",filed78:"9321.22"},{id:"422",projectName:"自有应用软件",filed76:"3842.33",filed77:"8321.29",filed78:"9321.22"},{id:"423",projectName:"自有数据产品",filed76:"3842.33",filed77:"8321.29",filed78:"9321.22"}]},{id:"43",projectName:"其他业务回款",filed76:"4392.29",filed77:"3221.11",filed78:"3921.78"}]},{id:"5",projectName:"采购支出",filed76:"23321.22",filed77:"19876.52",filed78:"9845.65",children:[{id:"52",projectName:"主营业务采购支出",filed76:"3459.44",filed77:"8594.54",filed78:"2349.3"},{id:"53",projectName:"其他业务采购支出",filed76:"4323.33",filed77:"3223.98",filed78:"9844.65"}]},{id:"6",projectName:"纯回款",filed76:"9221.34",filed77:"8223.55",filed78:"2382.54"},{id:"7",projectName:"预扣成本",filed76:"4358.39",filed77:"9442.33",filed78:"4892.44"},{id:"8",projectName:"纯收入",filed76:"4328.39",filed77:"9842.33",filed78:"4832.44"},{id:"9",projectName:"税金及附加",filed76:"4328.39",filed77:"9842.33",filed78:"4832.44"},{id:"10",projectName:"实施费用",filed76:"23321.22",filed77:"19876.52",filed78:"9845.65",children:[{id:"11",projectName:"人工费用",filed76:"32459.44",filed77:"85934.54",filed78:"23249.3"},{id:"12",projectName:"运营费用",filed76:"43293.33",filed77:"38223.98",filed78:"98144.65"}]}],pmStatusValNum:"0"}},computed:n()({},Object(r.c)(["userinfo"]),{asideHeight:function(){return document.documentElement.clientHeight-100}}),components:{},mounted:function(){this.init(),this.designation=this.$route.query.payment},filters:{formatThousands:function(e){if(0==/^[0-9]*[1-9][0-9]*$/.test(e))return e&&e.toString().replace(/(\d)(?=(\d{3})+\.)/g,function(e,t){return t+","});return(e+"").replace(/\d{1,3}(?=(\d{3})+$)/g,"$&,")}},methods:{handleCurrentChange:function(e){var t=this;this.pager.currentPage=e,this.loading=!0,this.getIndex=-1,this.tabulardata=[];var a=e,o={status:this.names.radio,range:this.names.value,select:this.names.Projectaccountingcheck,centerName:this.$route.query.payment,num:a,row:this.row,staffCode:this.userinfo.code};Object(i.n)("/accounting/bg/center/data",o).then(function(e){if(200==e.data.code){var o=e.data.data;t.content=o,t.sumDataTwo(a),t.pager.totalCount=10*Number(e.data.msg),t.loading=!1}}).catch(function(e){})},init:function(){var e=this;null==this.$route.query.status?this.names.radio=0:this.names.radio=this.$route.query.status,this.options.value=0,this.num=1,this.names.value="",this.names.Projectaccountingcheck="";var t={centerName:this.$route.query.payment,num:1,row:this.row,staffCode:this.userinfo.code,status:this.names.radio};Object(i.n)("/accounting/bg/center/data",t).then(function(t){if(200==t.data.code){var a=t.data.data;e.pager.totalCount=10*Number(t.data.msg),e.content=a,e.sumData(),e.loading=!1}}).catch(function(e){})},sortChange1:function(e,t){return e.account-t.account},getSummaries:function(e){var t=this,a=e.columns,o=this.content,n=[];a.forEach(function(e,t){if(0!==t){var a=o.map(function(t){return Number(t[e.property])});"filed3"===e.property||"filed4"===e.property||"filed5"===e.property||"filed6"===e.property||"filed7"===e.property||"filed8"===e.property||"filed9"===e.property||"filed10"===e.property||"filed11"===e.property||"filed12"===e.property||"filed14"===e.property||"filed13"===e.property||"filed15"===e.property||"filed16"===e.property?(n[t]=a.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),n[t]):n[t]="--"}else n[t]="合计"});for(var i=5;i<a.length;i++)n[i]=15==i||18==i?parseFloat(n[i]/o.length).toFixed(0)+"%":this.thousall(parseFloat(n[i]).toFixed(2));return n.map(function(e){if(e.indexOf("¥")>-1){var a=e.substring(1);return a=t.fomatQfw(a)}return e})},fomatQfw:function(e){if(0==/^[0-9]*[1-9][0-9]*$/.test(e))return e&&e.toString().replace(/(\d)(?=(\d{3})+\.)/g,function(e,t){return t+","});return(e+"").replace(/\d{1,3}(?=(\d{3})+$)/g,"$&,")},sumData:function(){var e=this,t={centerName:this.$route.query.payment,num:1,row:this.row,staffCode:this.userinfo.code,count:1,status:this.names.radio};Object(i.n)("/accounting/bg/center/data",t).then(function(t){200==t.data.code&&(e.tabulardatas=t.data.data)}).catch(function(e){})},poname:function(){},sumDataTwo:function(e){var t=this,a={status:this.names.radio,range:this.names.value,select:this.names.Projectaccountingcheck,centerName:this.$route.query.payment,num:e,row:this.row,staffCode:this.userinfo.code,count:1};Object(i.n)("/accounting/bg/center/data",a).then(function(e){200==e.data.code&&(t.tabulardatas=e.data.data)}).catch(function(e){})},implementation:function(e){var t=this;this.pmStatusValNum=this.pmStatusVal,this.pager.currentPage=1,this.loading=!0,this.getIndex=-1,this.tabulardata=[];var a={staffCode:this.userinfo.code,status:this.pmStatusValNum,centerName:e[1],range:e[2],select:e[3],num:1,row:this.row};Object(i.n)("/accounting/bg/center/data",a).then(function(a){if(200==a.data.code){a.data.data;t.content=a.data.data,t.sumDataimplementation(e),t.loading=!1,t.currentPage=1}}).catch(function(e){})},sumDataimplementation:function(e){var t=this,a={staffCode:this.userinfo.code,status:this.pmStatusValNum,centerName:e[1],range:e[2],select:e[3],count:1,num:1,row:this.row};Object(i.n)("/accounting/bg/center/data",a).then(function(e){200==e.data.code&&(t.tabulardatas=e.data.data,t.pager.totalCount=10*Number(e.data.msg))}).catch(function(e){})},searchscope:function(e){var t=this;this.getIndex=-1,this.tabulardata=[];var a={staffCode:this.userinfo.code,range:e[0],centerName:e[1],select:e[2],status:this.pmStatusValNum};Object(i.n)("/accounting/bg/center/data",a).then(function(a){if(200==a.data.code){t.loading=!1;a.data.data;t.content=a.data.data,t.sumDatasearchscope(e),t.pager.totalCount=10*Number(a.data.msg),t.loading=!1}}).catch(function(e){})},sumDatasearchscope:function(e){var t=this,a={staffCode:this.userinfo.code,range:e[0],centerName:e[1],select:e[2],count:1,status:this.pmStatusValNum};Object(i.n)("/accounting/bg/center/data",a).then(function(e){200==e.data.code&&(t.tabulardatas=e.data.data,t.pager.totalCount=10*Number(e.data.msg))}).catch(function(e){})},Projectaccountingchecks:function(e){var t=this;this.loading=!0,this.getIndex=-1,this.tabulardata=[];var a={staffCode:this.userinfo.code,select:e[0],centerName:e[1],range:e[2],status:this.pmStatusValNum};Object(i.n)("/accounting/bg/center/data",a).then(function(a){if(200==a.data.code){a.data.data;t.content=a.data.data,t.sumDataProjectaccountingchecks(e),t.pager.totalCount=10*Number(a.data.msg),t.loading=!1}}).catch(function(e){})},back:function(){this.$router.go(-1)},sumDataProjectaccountingchecks:function(e){var t=this,a={staffCode:this.userinfo.code,select:e[0],centerName:e[1],range:e[2],status:this.pmStatusValNum,count:1};Object(i.n)("/accounting/bg/center/data",a).then(function(e){200==e.data.code&&(t.tabulardatas=e.data.data)}).catch(function(e){})},searchEnterFun:function(e){window.event?e.keyCode:e.which;this.Projectaccountingchecks(e)},projectNames:function(e){var t=this,a={projectNumber:e};Object(i.a)("/sgpm/rest/api/server/pm/project/part/information",a).then(function(a){200==a.data.code&&(localStorage.setItem("projectNumber",e),t.$router.push({name:"/projectInformation",params:{id:a.data.data.ID,category:a.data.data.JUMPTYPE,projectName:a.data.data.PROJECTNAME,projectNumber:a.data.data.PROJECTNUMBER,parent_id:a.data.data.parent_id,judgeproject:"项目信息"}}))}).catch(function(e){})},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.index=a},selectedHighlight:function(e){e.row;var t=e.rowIndex;if(this.getIndex===t)return{"background-color":"#ECF5FF"}},thousall:function(e){return null==e?0:e&&e.toString().replace(/(\d)(?=(\d{3})+\.)/g,function(e,t){return t+","})},closeBtn:function(){this.showCardList=!1},handleRowChange:function(e,t){},particulars:function(e){var t=this;this.showCardList=!0;var a={projectId:e};Object(i.b)("/accounting/bg/center/department/data/tree",a).then(function(e){t.cardList=e.data.data}).catch(function(e){})}},watch:{isExpand:function(e){}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"edit",style:{minHeight:e.asideHeight+"px"}},[a("transition",{attrs:{name:"mytable"}},[a("div",{class:[e.showCardList?"tablistActive":"tablist"]},[a("el-row",{staticClass:"row-tittle",attrs:{gutter:20}},[a("el-col",{staticClass:"tittle title-position",attrs:{md:14,lg:7}},[a("i",{staticClass:"el-icon-back back-size",on:{click:e.back}}),e._v("\n             "+e._s(e.designation)+"\n        ")]),e._v(" "),a("el-col",{staticClass:"unit",attrs:{md:14,lg:3}},[e._v("单位：万元")])],1),e._v(" "),a("el-row",{staticStyle:{background:"#ffffff","padding-bottom":"14px"}},[a("el-col",{attrs:{md:6,xl:5,sm:12,lg:6}},[a("div",{staticStyle:{"white-space":"nowrap",float:"left","padding-top":"4px","margin-right":"10px"}},[e._v("\n            项目状态\n          ")]),e._v(" "),a("el-select",{class:[e.showCardList?"please":""],attrs:{clearable:"",placeholder:"请选择",size:"small"},on:{change:function(t){return e.implementation([e.pmStatusVal,e.designation,e.names.value,e.names.Projectaccountingcheck])}},model:{value:e.pmStatusVal,callback:function(t){e.pmStatusVal=t},expression:"pmStatusVal"}},e._l(e.pmStatus,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-col",{attrs:{md:6,xl:5,sm:12,lg:6}},[a("div",{staticStyle:{"white-space":"nowrap",float:"left","padding-top":"4px","margin-right":"10px"}},[e._v("\n            查找范围\n          ")]),e._v(" "),a("el-select",{class:[e.showCardList?"please":""],attrs:{clearable:"",placeholder:"请选择",size:"small"},on:{change:function(t){return e.searchscope([e.names.value,e.designation,e.names.Projectaccountingcheck,e.names.radio])}},model:{value:e.names.value,callback:function(t){e.$set(e.names,"value",t)},expression:"names.value"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-col",{attrs:{md:7,sm:10}},[a("div",{staticStyle:{"white-space":"nowrap",float:"left","padding-top":"4px","margin-right":"10px"}},[e._v("\n            查询条件\n          ")]),e._v(" "),a("el-input",{staticStyle:{float:"left",width:"65%"},attrs:{placeholder:"项目名称/合同编号",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEnterFun([e.names.Projectaccountingcheck,e.designation,e.names.value,e.names.radio])}},model:{value:e.names.Projectaccountingcheck,callback:function(t){e.$set(e.names,"Projectaccountingcheck",t)},expression:"names.Projectaccountingcheck"}})],1),e._v(" "),a("el-col",{staticClass:"search",attrs:{span:1,xs:6}},[a("el-button",{staticStyle:{"margin-left":"6px",float:"right","margin-right":"10px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.Projectaccountingchecks([e.names.Projectaccountingcheck,e.designation,e.names.value,e.names.radio])}}},[e._v("查询\n          ")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"max-height":"605",data:e.content,border:"","summary-method":e.getSummaries,"show-summary":"","cell-style":{padding:0},"header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"default-sort":{prop:"date",order:"descending"},"tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{label:"序号",fixed:"",type:"index",width:"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"4px",cursor:"pointer",color:"#409EFF"},on:{click:function(a){return a.stopPropagation(),e.particulars(t.row.filed19)}}},[e._v(e._s(t.$index+1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"filed1",fixed:"",label:"项目名称",width:"230"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.row.filed1,placement:"right"}},[a("el-button",{staticClass:"pname",attrs:{type:"text"},on:{click:function(a){return e.projectNames(t.row.filed19)}}},[e._v(e._s(t.row.filed1)+"\n              ")])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"filed2",label:"合同编号（简）",width:"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"filed17",label:"项目经理",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(null==t.row.filed17?"--":t.row.filed17))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"filed18",label:"销售负责人",width:"92"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(null==t.row.filed18?"--":t.row.filed18))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"filed3",label:"合同额",width:"75"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("\n              "+e._s(e._f("formatThousands")(null==t.row.filed3?"0":t.row.filed3))+"\n            ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"filed4",label:"纯合同额",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("\n              "+e._s(e._f("formatThousands")(null==t.row.filed4?"0":t.row.filed4))+"\n            ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"filed5",label:"回款",width:"75"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("\n              "+e._s(e._f("formatThousands")(null==t.row.filed5?"0":t.row.filed5))+"\n            ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"filed6",label:"采购支出",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("\n              "+e._s(e._f("formatThousands")(null==t.row.filed6?"0":t.row.filed6))+"\n            ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"filed7",label:"纯回款",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("\n              "+e._s(e._f("formatThousands")(null==t.row.filed7?"0":t.row.filed7))+"\n            ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"filed8",label:"预扣成本",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("\n              "+e._s(e._f("formatThousands")(null==t.row.filed8?"0":t.row.filed8))+"\n            ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"filed9",label:"纯收入",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("\n              "+e._s(e._f("formatThousands")(null==t.row.filed9?"0":t.row.filed9))+"\n            ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"filed10",label:"税金及附加",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("\n              "+e._s(e._f("formatThousands")(null==t.row.filed10?"0":t.row.filed10))+"\n            ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"filed11",label:"实施费用",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("\n              "+e._s(e._f("formatThousands")(null==t.row.filed11?"0":t.row.filed11))+"\n            ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"filed12",label:"毛利润",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(null==t.row.filed12?"0":t.row.filed12))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"filed13",label:"毛利率",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("\n              "+e._s(e._f("formatThousands")(null==t.row.filed13?"0":t.row.filed13+"%"))+"\n            ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"filed14",label:"销售费用",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("\n              "+e._s(e._f("formatThousands")(null==t.row.filed14?"0":t.row.filed14))+"\n            ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"filed15",label:"项目损益",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("\n              "+e._s(e._f("formatThousands")(null==t.row.filed15?"0":t.row.filed15))+"\n            ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"filed16",label:"项目收益率",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("\n              "+e._s(null==t.row.filed16?"0":t.row.filed16+"%")+"\n            ")])]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"}),e._v(" "),a("el-pagination",{attrs:{"current-page":e.pager.currentPage,"page-sizes":[10,20,30],"page-size":1,layout:"total, sizes, prev, pager, next, jumper",total:e.pager.totalCount},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",{staticClass:"over",staticStyle:{overflow:"auto",display:"inline-block",height:"495px"},attrs:{id:"tables"}},[a("table",[a("el-row",[a("el-col",{attrs:{span:24,xs:24}},[a("div",{staticStyle:{"font-size":"16px","margin-left":"8px","font-weight":"600",color:"#606266","text-align":"center","line-height":"40px"}},[e._v("\n                  "+e._s(e.accountingindices)+"\n                ")])])],1),e._v(" "),a("div",{staticStyle:{width:"100%",display:"inline-block"}},[a("table",{staticStyle:{cursor:"pointer"}},[a("tr",[a("td",{staticClass:"TitleColor"},[e._v("合同编号（简）")]),e._v(" "),a("td",{staticClass:"Tablestyle"},[e._v("\n                    "+e._s(null==e.tabulardata.filed1?"--":e.tabulardata.filed1)+"\n                  ")]),e._v(" "),a("td",{staticClass:"TitleColor"},[e._v("合同签订日期")]),e._v(" "),a("td",{staticClass:"Tablestyle"},[e._v("\n                    "+e._s(null==e.tabulardata.filed2?"--":e.tabulardata.filed2)+"\n                  ")]),e._v(" "),a("td",{staticClass:"TitleColor"},[e._v("合同我方签约主体")]),e._v(" "),a("td",{staticClass:"Tablestyle"},[e._v("\n                    "+e._s(null==e.tabulardata.filed3?"--":e.tabulardata.filed3)+"\n                  ")])]),e._v(" "),a("tr",[a("td",{staticClass:"TitleColor"},[e._v("合同对方签约主体")]),e._v(" "),a("td",{staticClass:"Tablestyle"},[e._v("\n                    "+e._s(null==e.tabulardata.filed4?"--":e.tabulardata.filed4)+"\n                  ")]),e._v(" "),a("td",{staticClass:"TitleColor"},[e._v("最终用户")]),e._v(" "),a("td",{staticClass:"Tablestyle"},[e._v("\n                    "+e._s(null==e.tabulardata.Filed6?"--":e.tabulardata.Filed6)+"\n                  ")]),e._v(" "),a("td",{staticClass:"TitleColor"},[e._v("区域")]),e._v(" "),a("td",{staticClass:"Tablestyle"},[e._v("\n                    "+e._s(null==e.tabulardata.filed7?"--":e.tabulardata.filed7)+"\n                  ")])]),e._v(" "),a("tr",[a("td",{staticClass:"TitleColor"},[e._v("行业")]),e._v(" "),a("td",{staticClass:"Tablestyle"},[e._v("\n                    "+e._s(null==e.tabulardata.Filed8?"--":e.tabulardata.Filed8)+"\n                  ")]),e._v(" "),a("td",{staticClass:"TitleColor"},[e._v("币种")]),e._v(" "),a("td",{staticClass:"Tablestyle"},[e._v("\n                    "+e._s(null==e.tabulardata.Filed9?"--":e.tabulardata.Filed9)+"\n                  ")]),e._v(" "),a("td",{staticClass:"TitleColor"},[e._v("合同额")]),e._v(" "),a("td",{staticClass:"Tablestyle"},[e._v("\n                    ￥"+e._s(null==e.tabulardata.filed10?"--":e.tabulardata.filed10)+"\n                  ")])]),e._v(" "),a("tr",[a("td",{staticClass:"TitleColor"},[e._v("项目编号")]),e._v(" "),a("td",{staticClass:"Tablestyle"},[e._v("\n                    "+e._s(null==e.tabulardata.filed11?"--":e.tabulardata.filed11)+"\n                  ")]),e._v(" "),a("td",{staticClass:"TitleColor"},[e._v("项目里程碑")]),e._v(" "),a("td",{staticClass:"Tablestyle"},[e._v("\n                    "+e._s(null==e.tabulardata.filed23?"--":e.tabulardata.filed23)+"\n                  ")]),e._v(" "),a("td",{staticClass:"TitleColor"},[e._v("项目经理")]),e._v(" "),a("td",{staticClass:"Tablestyle"},[e._v("\n                    "+e._s(null==e.tabulardata.filed14?"--":e.tabulardata.filed14)+"\n                  ")])]),e._v(" "),a("tr",[a("td",{staticClass:"TitleColor"},[e._v("实施B级单位")]),e._v(" "),a("td",{staticClass:"Tablestyle"},[e._v("\n                    "+e._s(null==e.tabulardata.filed16?"--":e.tabulardata.filed16)+"\n                  ")]),e._v(" "),a("td",{staticClass:"TitleColor"},[e._v("销售负责人")]),e._v(" "),a("td",{staticClass:"Tablestyle"},[e._v("\n                    "+e._s(null==e.tabulardata.filed20?"--":e.tabulardata.filed20)+"\n                  ")]),e._v(" "),a("td",{staticClass:"TitleColor"},[e._v("销售B级单位")]),e._v(" "),a("td",{staticClass:"Tablestyle"},[e._v("\n                    "+e._s(null==e.tabulardata.filed22?"--":e.tabulardata.filed22)+"\n                  ")])]),e._v(" "),a("tr",[a("td",{staticClass:"TitleColor"},[e._v("项目进度百分比")]),e._v(" "),a("td",{staticClass:"Tablestyle"},[e._v("\n                    "+e._s(null==e.tabulardata.filed24?"--":e.tabulardata.filed24)+"\n                  ")]),e._v(" "),a("td",{staticClass:"TitleColor"},[e._v("项目验收日期")]),e._v(" "),a("td",{staticClass:"Tablestyle"},[e._v("\n                    "+e._s(null==e.tabulardata.filed25?"--":e.tabulardata.filed25)+"\n                  ")])])])])],1)])])],1)]),e._v(" "),a("transition",{attrs:{name:"mybox"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showCardList,expression:"showCardList"}],staticClass:"supernatantCar"},[a("div",{staticClass:"supernatant"},[a("el-row",{staticStyle:{"padding-top":"15px"}},[a("el-col",{staticClass:"Blockunit",attrs:{span:10}}),e._v(" "),a("el-col",{attrs:{span:14}},[a("div",{staticClass:"close",on:{click:e.closeBtn}},[a("i",{staticClass:"el-icon-close"})])])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"41px"},attrs:{slot:"empty","max-height":"535",data:e.cardList,type:"index","row-key":"id",border:"","default-expand-all":e.isExpand,"tree-props":{children:"children",hasChildren:"hasChildren"},"cell-style":{padding:0},"header-cell-style":{fontSize:"14px",color:"#303133",height:"50px",padding:0,backgroundColor:"#ccd1d5"}},slot:"empty"},[a("el-table-column",{attrs:{prop:"projectName",fixed:"",label:"财务指标",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{"white-space":"pre-wrap","font-size":"15px",color:"#000"},attrs:{type:"text"}},[a("p",[e._v(e._s(t.row.projectName))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"boAndProject",label:"商机+项目累计",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("formatThousands")(t.row.boAndProject)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"projectPhase",label:"项目阶段",width:"75"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("formatThousands")(t.row.projectPhase)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"boPhase",label:"商机阶段",width:"75"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("formatThousands")(t.row.boPhase)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"projectBudget",label:"项目预算",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("formatThousands")(t.row.projectBudget)))])]}}])})],1)],1)])])],1)},staticRenderFns:[]};var c=a("VU/8")(s,l,!1,function(e){a("aqyY")},"data-v-3bb728d0",null);t.a=c.exports},idCy:function(e,t,a){"use strict";var o=a("IOH6"),n=a.n(o),i=a("hApG");var r=function(e){a("vC93")},s=a("VU/8")(n.a,i.a,!1,r,null,null);t.default=s.exports},"j/PR":function(e,t){},jCTx:function(e,t){},jUS9:function(e,t){},"k7+n":function(e,t){},kUQa:function(e,t,a){"use strict";(function(e){var o=a("Dd8w"),n=a.n(o),i=a("P9l9"),r=a("14gb"),s=a("NYxO");t.a={name:"contract-info",data:function(){return{tableData:[],browerHeight:window.innerHeight-150,contractName:"-",contractNumber:"-",contractMoneyWanYuan:"-",saleLevelOneName:"-",contractSaleName:"-",industry:"-",saleLevelTwoName:"-",region:"-",contractParty:"-",contractSigningTime:"-",archivingStatus:"-",contractStatus:"-",expectProjectStartDate:"-",projectOperationalPeriod:"-",contractNative:"-",expectProjectEndDate:"-",contractContent:"-"}},computed:n()({},Object(s.c)(["userinfo","isDetail"])),beforeDestroy:function(){r.a.$off("projectContent")},created:function(){var e=localStorage.getItem("contractNumber");e&&(this.contractNumber=e,this.getContractData(this.contractNumber))},mounted:function(){},methods:{getContractData:function(e){var t=this;if(e){var a="/sgpm/rest/api/integration/contract/"+e+"?companyId="+this.userinfo.account_id;Object(i.Y)(a).then(function(e){e.data.data,t.checkData(e.data.data)&&t.updateContractData(e.data.data),t.checkData(e.data.data.element)&&t.updateProjects(e.data.data)}).catch(function(e){})}},checkData:function(e){for(var t in e)return!0;return!1},updateProjects:function(e){e.element.projects.forEach(function(e){null==e.milestoneWeight&&(e.milestoneWeight="-")}),this.tableData=e.element.projects},updateContractData:function(t){e.each(t,function(e,a){null==t[e]&&(t[e]="-")}),this.contractName=t.contractName,this.contractMoneyWanYuan=t.contractMoneyWanYuan,this.saleLevelOneName=t.saleLevelOneName,this.contractSaleName=t.contractSaleName,this.industry=t.industry,this.saleLevelTwoName=t.saleLevelTwoName,this.region=t.region,this.contractParty=t.contractParty,this.contractSigningTime=t.contractSigningTime,this.archivingStatus=t.archivingStatus,this.contractStatus=t.contractStatus,this.contractNative=t.contractNative,this.expectProjectStartDate=void 0!=t.element.expectProjectStartDate?t.element.expectProjectStartDate:"-",this.expectProjectEndDate=void 0!=t.element.expectProjectEndDate?t.element.expectProjectEndDate:"-",this.projectOperationalPeriod=void 0!=t.element.projectOperationalPeriod?t.element.projectOperationalPeriod:"-",this.contractContent=void 0!=t.element.contractContent?t.element.contractContent:"-"}}}}).call(t,a("7t+N"))},ksDC:function(e,t,a){"use strict";(function(e){var o=a("woOf"),n=a.n(o),i=a("Dd8w"),r=a.n(i),s=a("P9l9"),l=a("14gb"),c=a("NYxO");t.a={name:"project-contract",data:function(){return{roleStatus:!1,dialogVisible:!1,contractDatas:[],contractNumber:"",projectData:{},contractStatus:!1,browerHeight:window.innerHeight-250,CONTRACTNUMBER:"-",FIELD0005:"-",CONTRACTSIGNINGDATE:"-",CONTRACTMARKET:"-",CUSTOMERCENTER:"-",CUSTOMERDEPARTMENT:"-",CONTRACTPROSTARTDATE:"-",CONTRACTPROENDDATE:"-",CONTRACTSTATE:"-",CUSTOMERNAME:"-",INDUSTRY:"-",REGION:"-",FILESTATUS:"-",CONTRACTMONEY:"-",b_BUSINESSNAME:"-",b_BUSINESSNUMBER:"-",b_CONTRACTMONEY:"-",b_CONTRACTMARKET:"-",b_CUSTOMERCENTER:"-",b_CUSTOMERDEPARTMENT:"-",b_INDUSTRY:"-",b_REGION:"-",nkcontractNumberAry:[],contractArr:[]}},computed:r()({},Object(c.c)(["userinfo"]),{isShowBtn:function(){return"5326994013938795629"==this.userinfo.account_id||"-1360422574114386809"==this.userinfo.account_id}}),beforeDestroy:function(){l.a.$off("projectContent")},created:function(){this.getContractDatas();var e=localStorage.getItem("projectId");this.getProjectData(e)},mounted:function(){var e=this;l.a.$on("projectContent",function(t){t&&e.getProjectData(t.id)}),l.a.$on("memberRole",function(t){e.roleStatus=1==t||3==t})},methods:{contractChange:function(e){var t=this;this.contractArr.forEach(function(a,o){e==a.CONTRACTNUMBER&&t.updateContractData(a)})},selectChange:function(e){this.contractNumber=e,this.getContractData(e)},updateContractData:function(t){e.each(t,function(e,a){null==t[e]&&(t[e]="-")}),this.CONTRACTNUMBER=t.CONTRACTNUMBER,this.FIELD0005=t.FIELD0005,this.CONTRACTSIGNINGDATE=t.CONTRACTSIGNINGDATE,this.CONTRACTMARKET=t.CONTRACTMARKET?t.CONTRACTMARKET:"-",this.CUSTOMERCENTER=t.CUSTOMERCENTER?t.CUSTOMERCENTER:"-",this.CUSTOMERDEPARTMENT=t.CUSTOMERDEPARTMENT?t.CUSTOMERDEPARTMENT:"-",this.CONTRACTSTATE=t.CONTRACTSTATE?t.CONTRACTSTATE:"-",this.CUSTOMERNAME=t.CUSTOMERNAME?t.CUSTOMERNAME:"-",this.INDUSTRY=t.INDUSTRY?t.INDUSTRY:"-",this.REGION=t.REGION?t.REGION:"-",this.FILESTATUS=t.FILESTATUS?t.FILESTATUS:"-",this.CONTRACTMONEY=t.CONTRACTMONEY?t.CONTRACTMONEY:"-"},resetContractData:function(){this.CONTRACTNUMBER="-",this.FIELD0005="-",this.CONTRACTSIGNINGDATE="-",this.CONTRACTMARKET="-",this.CUSTOMERCENTER="-",this.CUSTOMERDEPARTMENT="-",this.CONTRACTPROSTARTDATE="-",this.CONTRACTPROENDDATE="-",this.CONTRACTSTATE="-",this.CUSTOMERNAME="-",this.INDUSTRY="-",this.REGION="-",this.FILESTATUS="-",this.CONTRACTMONEY="-"},updateProject:function(e){var t={id:this.projectData.ID,project:{custom_field_values:{13:e},project_no:this.projectData.PROJECTNUMBER}};Object(s._25)("/sgpm/rest/api/server/pm/project",t).then(function(e){200==e.data.code||201==e.data.code&&alert("保存失败!")}).catch(function(e){})},getContractData:function(e){var t=this,a="/sgpm/rest/api/integration/data/contract/"+this.userinfo.account_id+"?contractNumber="+e;Object(s.Y)(a).then(function(a){a.data.data,t.updateContractData(a.data.data),t.updateProject(e)}).catch(function(e){})},getProjectData:function(e){var t=this,a={projectId:e};Object(s._28)("/sgpm/rest/api/server/pm/project",a).then(function(e){if(e.data.data,t.projectData=e.data.data,e.data.data.BUSINESS){var a=e.data.data.BUSINESS;t.updateBusinessData(a)}else t.resetBusinessData();if(e.data.data.CONTRACT?t.updateContractData(e.data.data.CONTRACT):t.resetContractData(),"8416498716893399290"==t.userinfo.account_id)if(null!=e.data.data&&null!=e.data.data.CONTRACTNUMBER&&""!=e.data.data.CONTRACTNUMBER){var o=[];e.data.data.CONTRACTNUMBER.split(",").forEach(function(e,t){o.push(n()({},{value:e,label:e}))}),t.nkcontractNumberAry=o,t.CONTRACTNUMBER=o[0].label,t.updateContractData(e.data.data.CONTRACT[0]),t.contractArr=e.data.data.CONTRACT}else t.resetContractData()}).catch(function(e){})},updateBusinessData:function(t){e.each(t,function(e,a){null==t[e]&&(t[e]="-")}),this.b_BUSINESSNAME=t.BUSINESSNAME,this.b_BUSINESSNUMBER=t.BUSINESSNUMBER,this.b_CONTRACTMONEY=t.CONTRACTMONEY,this.b_CONTRACTMARKET=t.CONTRACTMARKET,this.b_CUSTOMERCENTER=t.CUSTOMERCENTER,this.b_CUSTOMERDEPARTMENT=t.CUSTOMERDEPARTMENT,this.b_INDUSTRY=t.INDUSTRY,this.b_REGION=t.REGION},resetBusinessData:function(){this.b_BUSINESSNAME="-",this.b_BUSINESSNUMBER="-",this.b_CONTRACTMONEY="-",this.b_CONTRACTMARKET="-",this.b_CUSTOMERCENTER="-",this.b_CUSTOMERDEPARTMENT="-",this.b_INDUSTRY="-",this.b_REGION="-"},getContractDatas:function(){var e=this,t=JSON.parse(localStorage.getItem("userinfo"));if(t)var a=t.memberid;var o="/sgpm/rest/api/integration/data/contracts/"+t.account_id+"?memberId="+a;Object(s.Y)(o).then(function(t){t.data.data,e.contractDatas=t.data.data}).catch(function(e){})},formatThousands:function(e){e=(e/=1e4).toFixed(2);if(0==/^[0-9]*[1-9][0-9]*$/.test(e))return e&&e.toString().replace(/(\d)(?=(\d{3})+\.)/g,function(e,t){return t+","});return(e+"").replace(/\d{1,3}(?=(\d{3})+$)/g,"$&,")}}}}).call(t,a("7t+N"))},l3yy:function(e,t){},lFMG:function(e,t){},lTiG:function(e,t,a){"use strict";var o=a("Dd8w"),n=a.n(o),i=(a("OMJi"),a("NYxO")),r={name:"WarningCard",props:["widget","models","rules","remote","datas"],data:function(){return{iconClass:"",warningData:null}},filters:{formatNull:function(e){return e||"--"}},watch:{datas:{deep:!0,handler:function(e){}}},computed:n()({},Object(i.c)(["selectedAllProMsg"]),{warningCorlor:function(){return!!(this.warningData&&this.warningData.delayDays>0)}}),mounted:function(){var e=this.selectedAllProMsg.PROJECTNUMBER,t=this.selectedAllProMsg.CONTRACTNUMBER;"progress"==this.datas.model?this.getProgressWarning(this.datas.options.url_a,e):"returnMoney"==this.datas.model&&this.getReturnMoneyWarning(this.datas.options.url_a,t)},methods:{getProgressWarning:function(e,t){var a=this;e=e+"?projectNumber="+t;this.axios.get(e).then(function(e){var t=e.data.data;a.warningData=t}).catch(function(e){})},getReturnMoneyWarning:function(e,t){var a=this;e=e+"?contractNumber="+t;this.axios.get(e).then(function(e){var t=e.data.data;a.warningData=t}).catch(function(e){})},handleIcon:function(e){this.iconClass=e.toElement.className}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"category-block"},[a("div",{staticClass:"header"},[e.warningCorlor?a("i",{staticClass:"el-icon-star-off bg-1"}):a("i",{staticClass:"el-icon-star-off bg-2"}),e._v(" "),a("h4",[e._v(e._s(e.datas.options.warningName))])]),e._v(" "),a("ul",{staticClass:"category-list"},[a("li",[a("a",[a("p",[e._v(e._s(e._f("formatNull")(e.warningData.stageName)))]),e._v(" "),a("span",[e._v(e._s(e._f("formatNull")(e.warningData.delayDays))+"天")])])])])])])},staticRenderFns:[]};var l=a("VU/8")(r,s,!1,function(e){a("Caf8")},null,null);t.a=l.exports},mHYE:function(e,t,a){"use strict";var o=a("oMui"),n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",[a("el-button",{staticClass:"add",attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.addRow(e.tableData)}}},[e._v("添加")]),e._v(" "),a("el-table",{staticClass:"tb-edit",staticStyle:{width:"100%","margin-bottom":"10px","min-height":"200px"},attrs:{data:e.tableData,border:"",size:"mini","header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0},"highlight-current-row":""},on:{"row-click":e.handleCurrentChange}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),e.show?a("el-table-column",{attrs:{prop:"id",label:"id",width:"0"}}):e._e(),e._v(" "),e.show?a("el-table-column",{attrs:{prop:"classUnitBId",label:"classUnitBId",width:"0"}}):e._e(),e._v(" "),e.show?a("el-table-column",{attrs:{prop:"classUnitCId",label:"classUnitCId",width:"0"}}):e._e(),e._v(" "),e.show?a("el-table-column",{attrs:{prop:"projectManagerId",label:"projectManagerId",width:"0"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"projectNumber",label:"项目编号",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",disabled:""},model:{value:t.row.projectNumber,callback:function(a){e.$set(t.row,"projectNumber",a)},expression:"scope.row.projectNumber"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"projectManagerName",align:"",label:"*实施项目经理",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"mini",filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词","remote-method":e.remoteMethod,loading:e.loading},on:{change:function(a){return e.handleEdit(t.$index,t.row)}},model:{value:t.row.projectManagerName,callback:function(a){e.$set(t.row,"projectManagerName",a)},expression:"scope.row.projectManagerName"}},e._l(e.projectManagerName,function(e,t){return a("el-option",{key:t,attrs:{label:e.empInfo,value:e.value}})}),1)]}}])},[a("template",{slot:"header"},[a("span",{staticClass:"start"},[e._v("*")]),e._v(" "),a("span",[e._v("实施项目经理")])])],2),e._v(" "),a("el-table-column",{attrs:{prop:"classUnitBName",label:"*实施B级单位",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",disabled:""},model:{value:t.row.classUnitBName,callback:function(a){e.$set(t.row,"classUnitBName",a)},expression:"scope.row.classUnitBName"}})]}}])},[a("template",{slot:"header"},[a("span",{staticClass:"start"},[e._v("*")]),e._v(" "),a("span",[e._v("实施B级单位")])])],2),e._v(" "),e.showType?a("el-table-column",{attrs:{prop:"classUnitCName",label:"实施C级单位",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"mini",filterable:"",placeholder:"请选择"},on:{change:function(a){return e.handleEditCname(t.$index,t.row)}},model:{value:t.row.classUnitCName,callback:function(a){e.$set(t.row,"classUnitCName",a)},expression:"scope.row.classUnitCName"}},e._l(e.classUnitCName,function(e,t){return a("el-option",{key:t,attrs:{label:e.deptName,value:e.deptName}})}),1)]}}],null,!1,991987060)}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"projectName",label:"*项目名称",width:"230"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini"},on:{change:function(a){return e.handleEditSelect(t.$index,t.row)}},model:{value:t.row.projectName,callback:function(a){e.$set(t.row,"projectName",a)},expression:"scope.row.projectName"}})]}}])},[a("template",{slot:"header"},[a("span",{staticClass:"start"},[e._v("*")]),e._v(" "),a("span",[e._v("项目名称")])])],2),e._v(" "),a("el-table-column",{attrs:{prop:"expectContributions",width:"120",label:"*合同额(经费)"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",type:"number",min:"0"},on:{blur:function(a){return e.UpdateTaskName(a,t.$index,t.row)},change:function(a){return e.handleEditSelect(t.$index,t.row)}},model:{value:t.row.expectContributions,callback:function(a){e.$set(t.row,"expectContributions",a)},expression:"scope.row.expectContributions"}})]}}])},[a("template",{slot:"header"},[a("span",{staticClass:"start"},[e._v("*")]),e._v(" "),a("span",[e._v("合同额(经费)")])])],2),e._v(" "),a("el-table-column",{attrs:{prop:"milestoneWeight",label:"*进度权重(%)",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input-number",{staticStyle:{width:"90px"},attrs:{size:"mini","controls-position":"right",min:1,max:100,step:5},on:{change:e.handleChange},model:{value:t.row.milestoneWeight,callback:function(a){e.$set(t.row,"milestoneWeight",a)},expression:"scope.row.milestoneWeight"}})]}}])},[a("template",{slot:"header"},[a("span",{staticClass:"start"},[e._v("*")]),e._v(" "),a("span",[e._v("进度权重(%)")])])],2),e._v(" "),a("el-table-column",{attrs:{prop:"projectLevel",width:"100",label:"*项目级别"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",disabled:""},model:{value:t.row.projectLevel,callback:function(a){e.$set(t.row,"projectLevel",a)},expression:"scope.row.projectLevel"}})]}}])},[a("template",{slot:"header"},[a("span",{staticClass:"start"},[e._v("*")]),e._v(" "),a("span",[e._v("项目级别")])])],2),e._v(" "),a("el-table-column",{attrs:{prop:"projectType",label:"*项目类型",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"mini",filterable:"",placeholder:"请选择"},on:{change:function(a){return e.handleEditSelect(t.$index,t.row)},focus:function(a){return e.proType(t.$index,t.row)}},model:{value:t.row.projectType,callback:function(a){e.$set(t.row,"projectType",a)},expression:"scope.row.projectType"}},e._l(e.projectType,function(e,t){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.value}})}),1)]}}])},[a("template",{slot:"header"},[a("span",{staticClass:"start"},[e._v("*")]),e._v(" "),a("span",[e._v("项目类型")])])],2),e._v(" "),a("el-table-column",{attrs:{prop:"projectContent",width:"180",label:"*项目建设内容"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"textarea",size:"mini"},on:{change:function(a){return e.handleEditSelect(t.$index,t.row)}},model:{value:t.row.projectContent,callback:function(a){e.$set(t.row,"projectContent",a)},expression:"scope.row.projectContent"}})]}}])},[a("template",{slot:"header"},[a("span",{staticClass:"start"},[e._v("*")]),e._v(" "),a("span",[e._v("项目建设内容")])])],2),e._v(" "),e.showType?a("el-table-column",{attrs:{prop:"projectChildType",width:"160",label:"*项目子类"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"mini",filterable:"",placeholder:"请选择"},on:{change:function(a){return e.handleEditSelect(t.$index,t.row)},focus:function(a){return e.childType(t.$index,t.row)}},model:{value:t.row.projectChildType,callback:function(a){e.$set(t.row,"projectChildType",a)},expression:"scope.row.projectChildType"}},e._l(e.projectChildType,function(e,t){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.value}})}),1)]}}],null,!1,444679810)},[a("template",{slot:"header"},[a("span",{staticClass:"start"},[e._v("*")]),e._v(" "),a("span",[e._v("项目子类")])])],2):e._e(),e._v(" "),e.showType?a("el-table-column",{attrs:{prop:"professionalWorkTypes",width:"160",label:"*业务类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"mini",filterable:"",placeholder:"请选择"},on:{change:function(a){return e.handleEditSelect(t.$index,t.row)},focus:function(a){return e.busType(t.$index,t.row)}},model:{value:t.row.professionalWorkTypes,callback:function(a){e.$set(t.row,"professionalWorkTypes",a)},expression:"scope.row.professionalWorkTypes"}},e._l(e.professionalWorkTypes,function(e,t){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.value}})}),1)]}}],null,!1,2035996428)},[a("template",{slot:"header"},[a("span",{staticClass:"start"},[e._v("*")]),e._v(" "),a("span",[e._v("业务类型")])])],2):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"64"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},nativeOn:{click:function(a){return a.preventDefault(),e.deleteRow(t.$index,e.tableData)}}},[a("i",{staticClass:"el-icon-delete-solid",staticStyle:{"font-size":"18px",color:"'#409EFF'"}})])]}}])})],1)],1)},staticRenderFns:[]};var i=function(e){a("hGg9")},r=a("VU/8")(o.a,n,!1,i,"data-v-2cd67b7c",null);t.a=r.exports},mnht:function(e,t){},mqlp:function(e,t){},nZJ4:function(e,t){},o2Fl:function(e,t,a){"use strict";var o=a("Dd8w"),n=a.n(o),i=a("gyMJ"),r=a("P9l9"),s=a("NYxO"),l={name:"MounthOutputNew",props:["widget","models","rules","remote","datas"],data:function(){return{loading:!1,firstSelectvalue:"",SecondSelectvalue:"",total:0,pageNum:1,pageSize:10,isPname:!0,btnMaxWidth:160,monthly:"",projectStatusConfig:{0:"已登记",1:"运行中",2:"暂停",3:"完成",4:"关闭",5:"异常关闭"},associatedStatesConfig:{0:"已关联未分配",1:"已关联已分配",2:"未关联",3:"合同终止时间已到",4:"无需关联"},options:[{value:"IB",label:"实施B级单位"},{value:"IC",label:"实施C级单位"}],tableData:[],optionsList:[],currentPage3:5,currentPage:1,projectName:"",searchMonth:"",minMonthly:"",maxMonthly:"",level:"",levelValue:"",monthProgress:"",monthOutput:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},value1:"",progressData:[],outputData:[],isExport:!0}},filters:{formatIsNull:function(e){return null==e||""===e?"--":e}},watch:{datas:{deep:!0,handler:function(e){this.datas,this.datas.options.url_a}}},computed:n()({},Object(s.c)(["userinfo"]),{asideHeight:function(){return document.documentElement.clientHeight-205},asideHeightA:function(){return document.documentElement.clientHeight-530}}),methods:{handleCurrentProject:function(e){var t=this;if(e){var a=e.projectNumber;Object(r.B)("/sgpm/rest/api/server/project/output/progress?projectNumber="+a,null).then(function(e){if(200==e.data.code){var a=e.data.data;t.progressData=a.progress,t.outputData=a.values}}).catch(function(e){})}},pickDateChange:function(e){e&&(this.minMonthly=e[0],this.maxMonthly=e[1])},changeDep:function(e){this.levelValue=e},headerDragend:function(e,t,a,o){this.btnMaxWidth=e,e>200?this.isPname=!1:(this.isPname=!0,this.btnMaxWidth=200)},changeSearch:function(e){var t=this;this.optionsList=[],this.SecondSelectvalue="",this.level=e,Object(r.X)("/sgpm/rest/api/server/project/output/dept?deptType="+e,null).then(function(e){if(200==e.status){var a=e.data.data;t.optionsList=a}}).catch(function(e){})},getMonthOutputList:function(e){var t=this;this.loading=!0,Object(r.O)("/sgpm/rest/api/server/project/monthly/output",e).then(function(e){if(200==e.status){var a=e.data.data;t.tableData=a;var o=e.data.meta;t.total=o.totalCount,t.loading=!1}}).catch(function(e){t.loading=!1})},search:function(){var e={keywords:this.projectName,minMonthly:this.minMonthly,maxMonthly:this.maxMonthly,pageNum:1,pageSize:10,type:1};""!=this.level&&(e[this.level]=this.levelValue),this.getMonthOutputList(e)},exportData:function(){var e=document.createElement("a");return e.href=i.a.urlPort04+"/sgpm/rest/api/server/pm/project/excel/export/gt/month/output/value",e.download=i.a.urlPort04+"/sgpm/rest/api/server/pm/project/excel/export/gt/month/output/value",e.click(),!1},refresh:function(){this.searchMonth="",this.firstSelectvalue="",this.minMonthly="",this.maxMonthly="",this.SecondSelectvalue="",this.levelValue="",this.level="",this.projectName="";this.getMonthOutputList({minMonthly:"",maxMonthly:"",keywords:"",pageNum:1,pageSize:10,type:1})},handleSizeChange:function(e){},handleCurrentChange:function(e){var t={keywords:this.projectName,minMonthly:this.minMonthly,maxMonthly:this.maxMonthly,pageNum:e,pageSize:10,type:1};""!=this.level&&(t[this.level]=this.levelValue),this.getMonthOutputList(t)}},mounted:function(){var e=new Date;this.monthProgress=(e.getMonth()+1).toString()+"月末进度",this.monthOutput=(e.getMonth()+1).toString()+"月产值";var t={keywords:this.projectName,minMonthly:"",maxMonthly:"",pageNum:1,pageSize:10,type:1};this.getMonthOutputList(t),this.isExport="2361372308666271490"!=this.userinfo.memberid&&"-2214906182493845302"!=this.userinfo.memberid&&"-2357901482704941730"!=this.userinfo.memberid},created:function(){}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mounth-outputNew"},[a("el-row",{staticClass:"search",attrs:{gutter:10,type:"flex",justify:"space-between"}},[a("el-col",{attrs:{xs:8,sm:6,md:8,lg:7,xl:7}},[a("div",{staticClass:"wrap"},[a("span",{staticClass:"labal"},[e._v("查看范围")]),e._v(" "),a("el-select",{staticClass:"search-select",attrs:{size:"mini",placeholder:"请选择",clearable:""},on:{change:e.changeSearch},model:{value:e.firstSelectvalue,callback:function(t){e.firstSelectvalue=t},expression:"firstSelectvalue"}},e._l(e.options,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-select",{attrs:{size:"mini",placeholder:"请选择",clearable:""},on:{change:e.changeDep},model:{value:e.SecondSelectvalue,callback:function(t){e.SecondSelectvalue=t},expression:"SecondSelectvalue"}},e._l(e.optionsList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.name}})}),1)],1)]),e._v(" "),a("el-col",{attrs:{xs:4,sm:6,md:8,lg:9,xl:9}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("div",{staticClass:"wrap dateChoose"},[a("span",{staticClass:"labal"},[e._v("日期")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",format:"yyyy-MM","value-format":"yyyy-MM",type:"daterange","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:e.pickDateChange},model:{value:e.searchMonth,callback:function(t){e.searchMonth=t},expression:"searchMonth"}})],1)])]),e._v(" "),a("el-col",{attrs:{xs:4,sm:6,md:8,lg:7,xl:7}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("div",{staticClass:"wrap"},[a("el-input",{staticStyle:{width:"62%"},attrs:{size:"mini",placeholder:"项目名称/编号"},model:{value:e.projectName,callback:function(t){e.projectName=t},expression:"projectName"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.isExport},on:{click:e.exportData}},[e._v("导出")]),e._v(" "),a("el-button",{staticClass:"circle-btn",attrs:{type:"primary",icon:"el-icon-refresh",size:"mini",circle:""},on:{click:e.refresh}})],1)])])],1),e._v(" "),a("div",{staticClass:"project"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData,"max-height":"280",border:"","highlight-current-row":"","header-cell-style":{fontSize:"14px",color:"#303133",height:"35px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"35px"},"cell-style":{padding:0}},on:{"header-dragend":e.headerDragend,"current-change":e.handleCurrentProject}},[a("el-table-column",{attrs:{type:"index",width:"38",align:"center",label:"序号",fixed:!0}}),e._v(" "),a("el-table-column",{attrs:{label:"项目名称",width:"140",align:"center",fixed:!0,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"num"},[e._v(e._s(t.row.projectName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"projectNumber",label:"项目编号",align:"center",width:170}}),e._v(" "),a("el-table-column",{attrs:{prop:"implementationDepartmentB",label:"实施B级单位",align:"center",width:130}}),e._v(" "),a("el-table-column",{attrs:{prop:"implementationDepartmentC",label:"实施C级单位",align:"center",width:130},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.implementationDepartmentC))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"projectManager",align:"center",label:"项目经理"}}),e._v(" "),a("el-table-column",{attrs:{prop:"typeOfOutputValueAccounting",align:"center",label:"产值核算类型",width:130}}),e._v(" "),a("el-table-column",{attrs:{prop:"projectStatus",align:"center",label:"项目状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.projectStatus||e.formatIsNull))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"relationStatus",label:"关联状态",width:110},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.relationStatus))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"funding",align:"center",label:"纯合同额/经费",width:130}}),e._v(" "),a("el-table-column",{attrs:{prop:"atTheEndOfProgress",align:"center",label:e.monthProgress,width:90},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.atTheEndOfProgress))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"thisMonthOutputValue",align:"center",label:e.monthOutput},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.thisMonthOutputValue))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"residualValue",align:"center",label:"剩余合同产值",width:110}}),e._v(" "),a("el-table-column",{attrs:{prop:"outputValue",align:"center",label:"年度产值"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.outputValue))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"contractNumber",align:"center",label:"合同编号",width:200},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.contractNumber))+"\n\t\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"saleBName",align:"center",label:"销售B级单位",width:130},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.saleBName))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"saleCName",align:"center",label:"销售C级单位",width:130},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.saleCName))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"description",align:"center",label:"备注",width:205},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.description))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"atThisStage",align:"center",label:"当前阶段"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.atThisStage))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"currentMilestone",align:"center",label:"当前里程碑",width:130},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.currentMilestone))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"province",label:"区域（省）",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.province))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"city",label:"区域（市）",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.city))+"\n\t\t\t\t\t")]}}])})],1),e._v(" "),a("div",{staticStyle:{width:"100%",height:"52px","padding-bottom":"10px","padding-top":"10px"}},[a("el-pagination",{staticClass:"page",attrs:{"current-page":e.currentPage,"page-sizes":[10],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"list-container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.progressData,height:e.asideHeightA,border:"","header-cell-style":{fontSize:"14px",color:"#303133",height:"34px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"34px"},"cell-style":{padding:0}}},[a("el-table-column",{attrs:{prop:"years",width:"50",label:"年份",align:"center",fixed:!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"progressBeginningOfYear",label:"年初初始进度",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.progressBeginningOfYear))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"monthProgress1",label:"1月末进度",width:"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.monthProgress1))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"monthProgress2",label:"2月末进度",width:"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.monthProgress2))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"monthProgress3",label:"3月末进度",width:"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.monthProgress3))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"monthProgress4",label:"4月末进度",width:"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.monthProgress4))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"monthProgress5",label:"5月末进度",width:"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.monthProgress5))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"monthProgress6",label:"6月末进度",width:"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.monthProgress6))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"monthProgress7",label:"7月末进度",width:"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.monthProgress7))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"monthProgress8",label:"8月末进度",width:"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.monthProgress8))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"monthProgress9",label:"9月末进度",width:"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.monthProgress9))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"monthProgress10",label:"10月末进度",width:"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.monthProgress10))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"monthProgress11",label:"11月末进度",width:"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.monthProgress11))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"monthProgress12",label:"12月末进度",width:"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.monthProgress12))+"\n\t\t\t\t\t")]}}])})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.outputData,height:e.asideHeightA,border:"","header-cell-style":{fontSize:"14px",color:"#303133",height:"45px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"34px"},"cell-style":{padding:0}}},[a("el-table-column",{attrs:{prop:"years",width:"50",label:"年份",align:"center",fixed:!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"monthProgress1",label:"1月产值",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.monthProgress1))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"monthProgress2",label:"2月产值",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.monthProgress2))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"monthProgress3",label:"3月产值",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.monthProgress3))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"monthProgress4",label:"4月产值",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.monthProgress4))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"monthProgress5",label:"5月产值",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.monthProgress5))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"monthProgress6",label:"6月产值",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.monthProgress6))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"monthValue7",label:"7月产值",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.monthValue7))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"monthValue8",label:"8月产值",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.monthValue8))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"monthValue9",label:"9月产值",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.monthValue9))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"monthValue10",label:"10月产值",width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.monthValue10))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"monthValue11",label:"11月产值",width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.monthValue11))+"\n\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"monthValue12",label:"12月产值",width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.monthValue12))+"\n\t\t\t\t\t")]}}])})],1)],1)])],1)],1)},staticRenderFns:[]};var u=a("VU/8")(l,c,!1,function(e){a("/3m/"),a("h58x")},"data-v-a4e062b4",null);t.a=u.exports},"o2l+":function(e,t){},o3l6:function(e,t){},o7IK:function(e,t,a){"use strict";var o=a("Dd8w"),n=a.n(o),i=a("P9l9"),r=(a("14gb"),a("NYxO")),s={name:"HomeBaseMsg",props:["widget","models","rules","remote","datas"],data:function(){return{iconClass:"",form:{},projectId:this.$route.params.id}},mounted:function(){this.init(this.projectId)},watch:{datas:{deep:!0,handler:function(e){}}},filters:{formatNull:function(e){return""==e||null==e?"--":e}},methods:n()({},Object(r.b)(["setAllProMsg"]),{init:function(e){var t=this;Object(i._19)("/sgpm/rest/api/server/pm/project?projectId="+e,null).then(function(e){var a=e.data.data;t.updateJsonData(a);var o=t.updateJsonData(a);t.form=o,t.setAllProMsg(o)}).catch(function(e){})},updateJsonData:function(e){var t={};for(var a in e)if("CONTRACT"==a||"BUSINESS"==a)for(var o in e[a])t[o]=e[a][o];else t[a]=e[a];return t}})},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"140px"}},[a("el-row",[a("el-col",{attrs:{span:4,push:20}},[a("el-form-item",[e._v("更多")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"项目名称"}},[a("span",{staticClass:"form-con"},[e._v(e._s(e._f("formatNull")(e.form.PROJECTNAME)))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"项目编号"}},[a("span",{staticClass:"form-con"},[e._v(e._s(e._f("formatNull")(e.form.PROJECTNUMBER)))])])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"项目实施部门"}},[a("span",{staticClass:"form-con"},[e._v(e._s(e.form.implementationdepartment))]),e._v(" "),a("span",{staticClass:"form-con"},[e._v(e._s(e._f("formatNull")(e.form.implementationsecondary)))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"项目所属客户中心"}},[a("span",{staticClass:"form-con"},[e._v(e._s(e._f("formatNull")(e.form.CUSTOMERCENTER)))])])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"项目经理"}},[a("span",{staticClass:"form-con"},[e._v(e._s(e._f("formatNull")(e.form.PROJECTMANAGER)))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"项目销售"}},[a("span",{staticClass:"form-con"},[e._v(e._s(e._f("formatNull")(e.form.CONTRACTMARKET)))])])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"监管级别"}},[a("span",{staticClass:"form-con"},[e._v(e._s(e._f("formatNull")(e.form.ITEMSUPERVISISELEVEL)))])])],1)],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(s,l,!1,function(e){a("L0z8")},null,null);t.a=c.exports},oMui:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__=__webpack_require__("mvHQ"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends__=__webpack_require__("Dd8w"),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends__),__WEBPACK_IMPORTED_MODULE_2__bus__=__webpack_require__("14gb"),__WEBPACK_IMPORTED_MODULE_3_vuex__=__webpack_require__("NYxO"),__WEBPACK_IMPORTED_MODULE_4__api_api_js__=__webpack_require__("P9l9");__webpack_exports__.a={name:"projectsplit",components:{},data:function(){return{classUnitCId:"",classUnitBId:"",projectManagerId:"",show:!1,showType:"",loading:!0,projectNumber:"",classUnitCName:"",projectManagerName:"",form:{emp_name:""},projectName:"",projectContent:"",expectContributions:"",milestoneWeight:"",professionalWorkTypes:[],professionalWorkTypes_copy:[],projectChildType:[],ProjectChildType_List:[],classUnitBName:[],projectLevel:"",projectType:[],projectType_A:[],options:[{value:"选项1",label:"项目监控"},{value:"选项2",label:"项目策划"},{value:"选项3",label:"需求"},{value:"选项4",label:"设计与开发"},{value:"选项6",label:"评审和测试"},{value:"选项7",label:"度量"},{value:"选项8",label:"质量保证"},{value:"选项9",label:"集成"},{value:"选项10",label:"风险"},{value:"选项11",label:"配置"},{value:"选项5",label:"培训"},{value:"选项5",label:"其他"}],tableData:[],busTypeIndex:-1,proTypeIndex:-1,childTypeIndex:-1}},computed:__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default()({},Object(__WEBPACK_IMPORTED_MODULE_3_vuex__.c)(["userinfo"])),created:function(){this.tableData,"-1814768306395265967"==this.userinfo.account_id?this.showType=!0:"8416498716893399290"==this.userinfo.account_id&&(this.showType=!1)},mounted:function(){var e=this;localStorage.removeItem("quanzhongAdd"),this.getProjectType();var t=JSON.parse(localStorage.getItem("gtProjectSplit"));if(t){this.tableData=t;for(var a=0;a<this.tableData.length;a++)for(var o=0;o<t.length;o++)this.tableData[a].projectName==t[o].projectName&&(this.tableData[a].projectNumber=t[o].projectNumber,this.tableData[a].id=t[o].id,this.getBusinesstype(this.tableData[a].classUnitBId),this.getProjectType(this.tableData[a].classUnitBId),this.getProjectChildType(this.tableData[a].classUnitBId));localStorage.removeItem("projectSplit"),localStorage.setItem("projectSplit",__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(this.tableData))}__WEBPACK_IMPORTED_MODULE_2__bus__.a.$on("gtProjectSplit",function(t){if(t){t=JSON.parse(t),e.tableData=t;for(var a=0;a<e.tableData.length;a++)for(var o=0;o<t.length;o++)e.tableData[a].projectName==t[o].projectName&&(e.tableData[a].projectNumber=t[o].projectNumber,e.tableData[a].id=t[o].id);localStorage.removeItem("projectSplit"),localStorage.setItem("projectSplit",__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(e.tableData))}})},methods:{handleChange:function(e){this.tableData,localStorage.setItem("projectSplit",__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(this.tableData)),localStorage.setItem("quanzhongDate",__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(this.tableData))},getProjectChildType:function(e,t){var a=this,o="/sgpm/rest/api/server/pm/project/enum/group?param=ProjectChild&group_id="+e;Object(__WEBPACK_IMPORTED_MODULE_4__api_api_js__._28)(o).then(function(e){var o=[];o.push(e.data.data),a.ProjectChildType_List[t]?a.ProjectChildType_List.splice(t,o.length,o):a.ProjectChildType_List.push(o),a.ProjectChildType_List}).catch(function(e){})},getProjectType:function(e,t){var a=this;Object(__WEBPACK_IMPORTED_MODULE_4__api_api_js__._28)("/sgpm/rest/api/server/pm/project/ProjectType").then(function(e){var o=[];o.push(e.data.data),a.projectType_A[t]?a.projectType_A.splice(t,o.length,o):a.projectType_A.push(o)}).catch(function(e){})},addRow:function(e,t){e.push({id:"",projectNumber:"",classUnitBName:"",classUnitCName:"",projectLevel:"",professionalWorkTypes:"",projectManagerName:"",projectName:"",projectType:"",projectContent:"",expectContributions:"",milestoneWeight:""})},deleteRow:function(e,t){var a=this;if(t.length<=1)this.$message({message:"最后一条数据，暂时不能删除!",type:"warning"});else for(var o=0;o<t.length;o++)if(e==o){if(t[o].id)return void Object(__WEBPACK_IMPORTED_MODULE_4__api_api_js__.k)("/sgpm/rest/api/server/pm/gt/project/"+t[o].id).then(function(o){200==o.status&&(t.splice(e,1),localStorage.removeItem("projectSplit"),localStorage.setItem("projectSplit",__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(a.tableData)),localStorage.setItem("quanzhongDate",__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(a.tableData)))}).catch(function(e){});t.splice(e,1),localStorage.removeItem("projectSplit"),localStorage.setItem("projectSplit",__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(this.tableData)),localStorage.setItem("quanzhongDate",__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(this.tableData))}},remoteMethod:function(e){var t=this,a=e,o="/sgpm/rest/api/system/user/info/fuzzy/search?accountId="+this.userinfo.account_id+"&search="+a+"&pageSize=10&pageNum=1";Object(__WEBPACK_IMPORTED_MODULE_4__api_api_js__._36)(o).then(function(e){200==e.status&&(e.data.data,t.loading=!1,t.projectManagerName=e.data.data)}).catch(function(e){})},UpdateTaskName:function(e,t,a){var o=e.target.value;if(isNaN(o))alert("项目预计金额分摊必须是数字!");else{var n="",i=parseFloat(e.target.value);i>=1e3?n="超大型":i>=500&&i<1e3?n="大型":i>=200&&i<500?n="中型":i<200&&(n="小型");for(var r=0;r<this.tableData.length;r++)r==t&&(this.tableData[r].projectLevel=n)}},handleCurrentChange:function handleCurrentChange(row,event,column){localStorage.removeItem("quanzhongAdd");for(var tableDataInfo=this.tableData,quanzhong=[],i=0;i<tableDataInfo.length;i++)""!=tableDataInfo[i].milestoneWeight&&void 0!=tableDataInfo[i].milestoneWeight&&quanzhong.push(tableDataInfo[i].milestoneWeight);var quanzhongAdd=eval(quanzhong.join("+"));if(quanzhongAdd>100)return alert("所有项目占合同里程碑进度权重不能大于100%!"),row.milestoneWeight=row.milestoneWeight-5,void localStorage.setItem("quanzhongDate",__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(this.tableData));localStorage.removeItem("projectSplit"),localStorage.setItem("projectSplit",__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(this.tableData))},getBusinesstype:function(e,t){var a=this,o="/sgpm/rest/api/server/pm/project/enum/group?param=BusinessType&group_id="+e;Object(__WEBPACK_IMPORTED_MODULE_4__api_api_js__._28)(o).then(function(e){var o=[];o.push(e.data.data),a.professionalWorkTypes_copy[t]?a.professionalWorkTypes_copy.splice(t,o.length,o):a.professionalWorkTypes_copy.push(o),a.professionalWorkTypes_copy}).catch(function(e){})},handleEdit:function(e,t){var a=this,o="/sgpm/rest/api/system/user/"+t.projectManagerName;Object(__WEBPACK_IMPORTED_MODULE_4__api_api_js__._36)(o).then(function(t){if(200==t.status){var o=t.data.data;a.getProjectType(o.subdept_id,e),a.getBusinesstype(o.subdept_id,e),a.getProjectChildType(o.subdept_id,e);for(var n=0;n<a.tableData.length;n++)n==e&&(a.tableData[n].projectManagerName=o.emp_name,a.tableData[n].projectManagerId=o.memberid,a.tableData[n].classUnitBId=o.subdept_id,a.tableData[n].classUnitCId=o.dept_id,"管理团队"==o.classUnitCName?a.tableData[n].classUnitCName="":a.tableData[n].classUnitCName=o.dept_name,a.tableData[n].classUnitBName=o.subdept_name);localStorage.removeItem("projectSplit"),localStorage.setItem("projectSplit",__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(a.tableData));var i="/sgpm/rest/api/system/user/department/part?memberId="+o.memberid;Object(__WEBPACK_IMPORTED_MODULE_4__api_api_js__._36)(i).then(function(e){a.classUnitCName=e.data.data.departments}).catch(function(e){})}}).catch(function(e){})},handleEditCname:function(e,t){localStorage.removeItem("projectSplit"),localStorage.setItem("projectSplit",__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(this.tableData)),localStorage.setItem("quanzhongDate",__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(this.tableData))},handleEditSelect:function(e,t){localStorage.removeItem("projectSplit"),localStorage.setItem("projectSplit",__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(this.tableData)),localStorage.setItem("quanzhongDate",__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(this.tableData))},busType:function(e,t){this.busTypeIndex=e,this.professionalWorkTypes=this.professionalWorkTypes_copy[e][0]},proType:function(e,t){this.proTypeIndex=e,this.projectType=this.projectType_A[e][0]},childType:function(e,t){this.childTypeIndex=e,this.projectChildType=this.ProjectChildType_List[e][0]}}}},oiKx:function(e,t){},p0R0:function(e,t){},pdpF:function(e,t,a){"use strict";var o=a("Gu7T"),n=a.n(o),i=a("O4Lo"),r=a.n(i),s=a("7+uW"),l=a("XLwt"),c={name:"chart",props:{options:Object,yCount:{type:Number,default:function(){return 13}}},computed:{width:{cache:!1,get:function(){return this.delegateGet("width","getWidth")}},height:{cache:!1,get:function(){return this.delegateGet("height","getHeight")}}},watch:{},methods:{mergeOptions:function(e,t,a){this.delegateMethod("setOption",e,t,a)},resize:function(e){this.delegateMethod("resize",e)},showLoading:function(e,t){this.delegateMethod("showLoading",e,t)},hideLoading:function(){this.delegateMethod("hideLoading")},clear:function(){this.delegateMethod("clear")},dispose:function(){this.delegateMethod("dispose")},delegateMethod:function(e){var t;if(this.chart){for(var a=arguments.length,o=Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];return(t=this.chart)[e].apply(t,n()(o))}s.default.util.warn("Cannot call ["+e+"] before the chart is initialized. Set prop [options] first.",this)},delegateGet:function(e,t){return this.chart||s.default.util.warn("Cannot get ["+e+"] before the chart is initialized. Set prop [options] first.",this),this.chart[t]()},getArea:function(){return this.$el.offsetWidth*this.$el.offsetHeight},init:function(){var e=this;if(!this.chart){var t=l.init(this.$el,this.theme,this.initOptions);this.group&&(t.group=this.group),t.setOption(this.options,!0),this.autoResize&&(this.lastArea=this.getArea(),this.__resizeHandler=r()(function(){0===e.lastArea?(e.mergeOptions({},!0),e.resize(),e.mergeOptions(e.options,!0)):e.resize(),e.lastArea=e.getArea()},100,{leading:!0})),this.chart=t}},destroy:function(){this.autoResize,this.dispose(),this.chart=null},refresh:function(){this.destroy(),this.init()}},created:function(){var e=this;this.$watch("options",function(t){!e.chart&&t?e.init():e.chart.setOption(e.options,!0)},{deep:!this.watchShallow});["theme","initOptions","autoResize","watchShallow"].forEach(function(t){e.$watch(t,function(){e.refresh()},{deep:!0})})},mounted:function(){var e=this;this.$nextTick(function(){e.options&&e.init()})},activated:function(){this.autoResize&&this.chart&&this.chart.resize()},beforeDestroy:function(){this.chart&&this.destroy()},connect:function(e){"string"!=typeof e&&(e=e.map(function(e){return e.chart})),l.connect(e)},disconnect:function(e){l.disConnect(e)},registerMap:function(e,t,a){l.registerMap(e,t,a)},registerTheme:function(e,t){l.registerTheme(e,t)},graphic:l.graphic},u={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"echarts"})},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(e){a("Tsfr")},null,null);t.a=d.exports},pzWX:function(e,t){},q8QJ:function(e,t){},ql1g:function(e,t){},qr7v:function(e,t){},rHFj:function(e,t){},rxbQ:function(e,t){},swWl:function(e,t,a){"use strict";var o=a("14gb"),n={name:"myTable",props:["widget","models","rules","remote","datas"],components:{},data:function(){return{tableData:[]}},created:function(){var e=this;o.a.$on("projectData",function(t){t&&(e.tableData=t.child_projects)})},methods:{}},i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-table",{staticStyle:{width:"100%"},attrs:{data:this.tableData,height:"250"}},[t("template",{slot:"empty"},[this._v("\n\t   暂无数据\n    ")]),this._v(" "),t("el-table-column",{attrs:{type:"index",width:"100",label:"序号"}}),this._v(" "),t("el-table-column",{attrs:{prop:"PROJECTNAME",label:"子项目名称"}}),this._v(" "),t("el-table-column",{attrs:{prop:"PROJECTNUMBER",label:"子项目编号"}})],2)},staticRenderFns:[]};var r=a("VU/8")(n,i,!1,function(e){a("UBC1")},null,null);t.a=r.exports},t6md:function(e,t,a){"use strict";var o=a("mvHQ"),n=a.n(o),i=a("Dd8w"),r=a.n(i),s=a("14gb"),l=a("NYxO"),c=a("bqq5"),u=a("iBEn"),d=(a("3gcX"),a("P9l9")),p=[],m=[],h=[],_={name:"ProjectInformation",components:{GenerateForm:c.a,GenetateFormItem:u.a},beforeRouteEnter:function(e,t,a){a(function(e){e.$parent.$parent.$parent.getMenu()})},beforeRouteUpdate:function(e,t,a){a()},beforeRouteLeave:function(e,t,a){a()},data:function(){return{boxLoading:!1,btnLoading:!1,nonBtnLoading:!1,loading:!1,roleStatus:!1,browerHeight:window.innerHeight-190,projectName:"",projectNumber:"",jsonData:{list:"",config:{labelPosition:"left",labelWidth:120,size:"small"}},addData:"",addTableData:"",projectId:this.$route.params.id,parent_id:this.$route.params.parent_id,keywordList:"",keytechnologyList:"",editData:{},globalParams:{},remoteFuncs:{},jump_type:localStorage.getItem("jump_type")}},watch:{$route:function(e,t){this.$router.go(0)}},computed:r()({},Object(l.c)(["userinfo"]),{judgeproject:function(){return localStorage.getItem("judgeproject")}}),created:function(){var e=this;this.globalParams.memberId=this.userinfo.memberid,this.globalParams.account_id=this.userinfo.account_id,localStorage.removeItem("contractList");this.$route.params;var t=this.parent_id;if("null"!=t&&void 0!=t||(t=null),null===t){var a="/template?memberId=7503529197009650726&menuId=13",o=window.localStorage.projectNumber,i=localStorage.getItem("jump_type");if(this.projectId)var r=this.projectId;else r=window.localStorage.projectId;localStorage.removeItem("projectData"),"非合同项目信息"==this.judgeproject||"11"==i?this.getNonContractData(r,o):this.getParentData(r)}else{a="/template/12";if(this.projectId)r=this.projectId;else r=window.localStorage.projectId;localStorage.removeItem("projectData"),this.getChildData(r)}s.a.$on("projectContent",function(t){if(t)if(void 0==t.parent_id||null==t.parent_id||"null"==t.parent_id||"undefined"==t.parent_id);else;e.getMemberRole()}),Object(d.N)(a).then(function(t){var a=e,o=[{columns:[{list:[{name:"自定义文字",icon:"icon-row",options:{remoteFunc:"func_1562572989000_63965",defaultValue:"",width:"100%",pattern:"",disabled:!1,placeholder:"基本信息",required:!1},model:"row2_1562572989000_63965",rules:[],type:"row2",key:"1562572989000_63965",isShow:"false"},{name:"分割线",icon:"icon-divider",options:{remoteFunc:"func_1566453577000_37234",defaultValue:"",width:"10%",pattern:"",disabled:!1,placeholder:"",required:!1},model:"divider_1566453577000_37234",rules:[],type:"divider",key:"1566453577000_37234",isShow:"false"}],span:24}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1562567055000_79929",gutter:0,justify:"start",align:"top",listened:!1},model:"grid_1562567055000_79929",rules:[],type:"grid",key:"1562567055000_7992911"},{columns:[{list:[{name:"项目名称",icon:"icon-input",options:{remoteFunc:"func_1566445271000_32253",defaultValue:"",dataType:"string",width:"75%",pattern:"",disabled:!0,placeholder:"",required:!1},model:"projectname",rules:[{type:"string",message:"项目名称格式不正确"}],type:"input",url:"",key:"1566445271000_32253",isShow:"true"}],span:24}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1562567055000_79929",gutter:0,justify:"start",align:"top"},model:"grid_1562567055000_79929",rules:[],type:"grid",key:"1562567055000_7992922"},{columns:[{list:[{name:"项目经理",icon:"icon-input",options:{remoteFunc:"func_1560308218000_58184",defaultValue:"",dataType:"string",width:"50%",pattern:"",disabled:!0,placeholder:"",required:!1},model:"projectmanager",rules:[{type:"string",message:"项目名称格式不正确"}],type:"input",url:"",key:"1560308218000_58184",isShow:"true"},{name:"实施B级单位",icon:"icon-input",options:{remoteFunc:"func_1566445154000_34987",defaultValue:"",dataType:"string",width:"50%",pattern:"",disabled:!0,placeholder:"",required:!1},model:"implementationdepartment",rules:[{type:"string",message:"项目名称格式不正确"}],type:"input",url:"",key:"1566445154000_34987",isShow:"true"},{name:"当前里程碑",icon:"icon-input",options:{remoteFunc:"func_1562567600000_13727",defaultValue:"",dataType:"string",width:"50%",pattern:"",disabled:!0,placeholder:"",required:!1},model:"currentmilestone",rules:[],type:"input",url:"",key:"1562567600000_13727",isShow:"true"},{name:"当前完成进度",icon:"icon-input",options:{remoteFunc:"func_1566445386000_52664",defaultValue:"",dataType:"string",width:"50%",pattern:"",disabled:!0,placeholder:"",required:!1},model:"currentcompletedprogress",rules:[],type:"input",url:"",key:"1566453659000_50195",isShow:"true"},{name:"延期状态",icon:"icon-input",options:{remoteFunc:"func_1562567690000_57506",defaultValue:"",dataType:"string",width:"50%",pattern:"",disabled:!0,placeholder:"",required:!1},model:"extendedstate",rules:[{type:"string",message:"延期状态格式不正确"}],type:"input",url:"",key:"1562567690000_57506",isShow:"true"},{name:"当前进展/问题",icon:"icon-input",options:{remoteFunc:"func_1566445386000_52664",defaultValue:"",dataType:"string",width:"50%",pattern:"",disabled:!0,placeholder:"",required:!1},model:"progress",rules:[{type:"string",message:""}],type:"input",url:"",key:"1566445386000_52664",isShow:"true"},{name:"最近review日期",icon:"icon-input",options:{remoteFunc:"func_1562567930000_4125",defaultValue:"",dataType:"string",width:"50%",pattern:"",disabled:!0,placeholder:"",required:!1,listened:!1},model:"reviewdate",rules:[{type:"string",message:"最近review日期格式不正确"}],type:"input",url:"",key:"1562567930000_4125",isShow:"true"},{name:"项目运维期(年)",icon:"icon-select",options:{remoteFunc:"operationalperiod",filterable:!1,clearable:!1,defaultValue:" ",remoteOptions:[{value:"1"},{value:"2"},{value:"3"},{value:"4"},{value:"5"},{value:" 无"}],multiple:!1,remote:!0,required:!1,showLabel:!1,props:{label:"label",value:"value"},width:"50%",options:[],disabled:!1,placeholder:""},model:"operationalperiod",rules:[],type:"select",config:{labelPosition:""},url:"",key:"1566445425000_75465",isShow:"true"}],span:12},{list:[{name:"项目编号",icon:"icon-input",options:{remoteFunc:"func_1560307809000_98970",defaultValue:"",dataType:"string",width:"50%",pattern:"",disabled:!0,placeholder:"",required:!1},model:"projectnumber",rules:[{type:"string",message:"项目名称格式不正确"}],type:"input",url:"",key:"1560307809000_98970",isShow:"true"},{name:"实施C级单位",icon:"icon-input",options:{remoteFunc:"func_1566445159000_64777",defaultValue:"",dataType:"string",width:"50%",pattern:"",disabled:!0,placeholder:"",required:!1},model:"implementationsecondary",rules:[{type:"string",message:"项目名称格式不正确"}],type:"input",url:"",key:"1566445159000_64777",isShow:"true"},{name:"审核状态",icon:"icon-input",options:{remoteFunc:"func_1562567851000_70343",defaultValue:"",dataType:"string",width:"50%",pattern:"",disabled:!0,placeholder:"",required:!1},model:"reviewstatus",rules:[{type:"string",message:"审核状态格式不正确"}],type:"input",url:"",key:"1562567851000_70343",isShow:"true"},{name:"项目预计开始时间",icon:"icon-date",options:{remoteFunc:"func_1566445373000_43253",clearable:!0,defaultValue:"",editable:!0,format:"yyyy-MM-dd",type:"date",required:!1,readonly:!1,startPlaceholder:"",width:"50%",disabled:!1,placeholder:"",endPlaceholder:"",timestamp:!1},model:"projectstartdate",rules:[],type:"date",key:"1566445373000_43253",isShow:"true"},{name:"项目预计结束时间",icon:"icon-date",options:{remoteFunc:"func_1560308823000_14136",clearable:!0,defaultValue:"",editable:!0,format:"yyyy-MM-dd",type:"date",required:!1,readonly:!1,startPlaceholder:"",width:"50%",disabled:!1,placeholder:"",endPlaceholder:"",timestamp:!1,listened:!1},model:"projectenddate",rules:[],type:"date",key:"1560308823000_14136",isShow:"true"},{name:"项目级别",icon:"icon-input",options:{remoteFunc:"func_1566445426000_21526",defaultValue:"",dataType:"string",width:"50%",pattern:"",disabled:!0,placeholder:"",required:!1},model:"projectlevel",rules:[{type:"string",message:"项目级别格式不正确"}],type:"input",url:"",key:"1566445426000_21526",isShow:"true"},{name:"项目类型",icon:"icon-select",options:{remoteFunc:"func_1566445427000_93514",filterable:!1,clearable:!1,defaultValue:"",remoteOptions:[],multiple:!1,remote:!0,required:!1,showLabel:!1,props:{label:"label",value:"value"},width:"50%",options:[{value:"1"},{value:"2"},{value:"3"},{value:"4"},{value:"5"},{value:" 无"}],disabled:!0,placeholder:""},model:"projecttype",rules:[],type:"select",config:{labelPosition:""},url:"",key:"1566445427000_93514",isShow:"true"}],span:12}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1560307608000_20067",gutter:0,justify:"end",align:"top",listened:!1},model:"grid_1560307608000_20067",rules:[],type:"grid",key:"1560307608000_20067"},{columns:[{list:[{name:"配置库地址",icon:"icon-input",options:{remoteFunc:"func_1566445333000_46834",defaultValue:"",dataType:"string",width:"75%",pattern:"",disabled:!1,placeholder:"",required:!1},model:"repositoryaddress",rules:[{type:"string",message:"配置库地址格式不正确"}],type:"input",url:"",key:"1566445333000_46834",isShow:"true"}],span:24}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1562567055000_79929",gutter:0,justify:"start",align:"top"},model:"grid_1562567055000_79929",rules:[],type:"grid",key:"1562567055000_7992933"},{columns:[{list:[{name:"项目关键字",icon:"icon-jilianxuanze",options:{remoteFunc:"func_1560393096000_73302",defaultValue:[],width:"",pattern:"",placeholder:"",required:!1},model:"keyword",rules:[],type:"tag",url:"",key:"1560393096000_73302",isShow:"true"}],span:24}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1560308991000_45798",gutter:0,justify:"start",align:"top"},model:"grid_1560308991000_45798",rules:[],type:"grid",key:"1560308991000_45798"},{columns:[{list:[{name:"自定义文字",icon:"icon-row",options:{remoteFunc:"func_1566453524000_80213",defaultValue:"",width:"100%",pattern:"",disabled:!1,placeholder:"项目简介",required:!1},model:"row2_1566453524000_80213",rules:[],type:"row2",key:"1566453524000_80213",isShow:"false"},{name:"分割线",icon:"icon-divider",options:{remoteFunc:"func_1562568470000_76745",defaultValue:"",width:"10%",pattern:"",disabled:!1,placeholder:"",required:!1},model:"divider_1562568470000_76745",rules:[],type:"divider",key:"1566453553000_82455",isShow:"false"},{name:"建设内容",icon:"icon-diy-com-textarea",options:{remoteFunc:"func_1562568539000_15100",defaultValue:"",width:"75%",pattern:"",placeholder:"",url:"",required:!1,listened:!1},model:"constructioncontent",rules:[],type:"textarea",url:"",key:"1562568539000_15100",isShow:"true"},{name:"拟使用的关键技术",icon:"icon-jilianxuanze",options:{remoteFunc:"func_1564109281000_75319",clearable:!1,defaultValue:[],width:"85%",pattern:"",disabled:!1,placeholder:"",required:!1},model:"keytechnology",rules:[],type:"tag",url:"",key:"1564109281000_75319",isShow:"true"}],span:24}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1562568439000_23304",gutter:0,justify:"start",align:"top"},model:"grid_1562568439000_23304",rules:[],type:"grid",key:"1562568439000_23304"}],i=localStorage.getItem("jump_type"),r=o;"非合同项目信息"==a.judgeproject||"11"==i?a.jsonData.list=[{columns:[{list:[{name:"自定义文字",icon:"icon-row",options:{remoteFunc:"func_1566352164000_58397",defaultValue:"",width:"100%",pattern:"",disabled:!1,listened:!1,placeholder:"项目信息",required:!1},model:"row2_1566352164000_58397",rules:[],type:"row2",key:"1574908275000_75677",isShow:"false"}],span:24}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1566352146000_47091",gutter:0,justify:"start",listened:!1,align:"top"},model:"grid_1566352146000_47091",rules:[],type:"grid",key:"1566352146000_47091"},{columns:[{list:[{name:"项目名称",icon:"icon-input",options:{remoteFunc:"func_1564644929000_47281",defaultValue:"",dataType:"string",width:"60%",pattern:"",disabled:!0,listened:!1,placeholder:"",required:!0},model:"projectname",rules:[{type:"string",message:"项目名称格式不正确"},{required:!0,message:"项目名称必须填写"}],type:"input",url:"",key:"1564644929000_47281",isShow:"true"},{name:"项目经理",icon:"icon-input",options:{remoteFunc:"func_1566352387000_42173",defaultValue:"",dataType:"string",width:"60%",pattern:"",disabled:!0,listened:!1,placeholder:"",required:!1},model:"projectmanagername",rules:[{type:"string",message:"项目经理格式不正确"}],type:"input",url:"",key:"1566352387000_42173",isShow:"true"},{name:"项目预计开始时间",icon:"icon-date",options:{remoteFunc:"func_1564647825000_12653",clearable:!0,defaultValue:"",editable:!0,format:"yyyy-MM-dd",type:"date",required:!0,readonly:!1,startPlaceholder:"",width:"60%",disabled:!1,listened:!1,placeholder:"",endPlaceholder:"",timestamp:!1},model:"expectprojectstartdate",rules:[{required:!0,message:"项目预计开始时间必须填写"}],type:"date",key:"1564647825000_12653",isShow:"true"}],span:8},{list:[{name:"项目编号",icon:"icon-input",options:{remoteFunc:"func_1564644952000_46749",defaultValue:"",dataType:"string",width:"60%",pattern:"",disabled:!0,listened:!1,placeholder:"",required:!1},model:"projectnumber",rules:[{type:"string",message:"项目经理格式不正确"}],type:"input",url:"",key:"1564644952000_46749",isShow:"true"},{name:"实施B级单位",icon:"icon-input",options:{remoteFunc:"func_1567500253000_41504",defaultValue:"",dataType:"string",width:"60%",pattern:"",disabled:!0,listened:!1,placeholder:"",required:!1},model:"classunitbname",rules:[{type:"string",message:"实施B级单位格式不正确"}],type:"input",url:"",key:"1567500253000_41504",isShow:"true"},{name:"项目预计结束时间",icon:"icon-date",options:{remoteFunc:"func_1573129520000_51723",clearable:!0,defaultValue:"",editable:!0,format:"yyyy-MM-dd",type:"date",required:!0,readonly:!1,startPlaceholder:"",width:"60%",disabled:!1,listened:!1,placeholder:"",endPlaceholder:"",timestamp:!1},model:"expectprojectenddate",rules:[{required:!0,message:"项目预计结束时间必须填写"}],type:"date",key:"1573129520000_51723",isShow:"true"}],span:8},{list:[{name:"项目类型",icon:"icon-select",options:{remoteFunc:"func_1573129513000_25706",filterable:!1,clearable:!1,defaultValue:"新选项",remoteOptions:[],multiple:!1,remote:!0,required:!0,showLabel:!1,listen:[],props:{label:"value",value:"value",url:"`http://192.168.102.101:11104/sgpm/rest/api/server/pm/project/enum/group?param=ProjectType&group_id=${this.arg.account_id}`"},width:"60%",options:[],disabled:!0,listened:!1,placeholder:""},model:"projecttype",rules:[{required:!0,message:"项目类型必须填写"}],type:"select",config:{labelPosition:""},url:"",key:"1574905639000_23147",isShow:"true"},{name:"实施C级单位",icon:"icon-input",options:{remoteFunc:"func_1573129471000_17117",defaultValue:"",dataType:"string",width:"60%",pattern:"",disabled:!0,listened:!1,placeholder:"",required:!1},model:"classunitcname",rules:[{type:"string",message:"实施C级单位格式不正确"}],type:"input",url:"",key:"1573129471000_17117",isShow:"true"},{type:"input",name:"项目预算",icon:"icon-input",isShow:"true",url:"",options:{width:"60%",defaultValue:"",required:!1,dataType:"string",pattern:"",placeholder:"",disabled:!1,remoteFunc:"func_1590569279000_22920",listened:!1},key:"1590569279000_22920",model:"projectbudget",rules:[{type:"string",message:"项目预算格式不正确"}]}],span:8}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1564644868000_65758",gutter:0,justify:"start",listened:!1,align:"top"},model:"grid_1564644868000_65758",rules:[],type:"grid",key:"1564644868000_65758"},{columns:[{list:[{name:"配置库地址",icon:"icon-input",options:{remoteFunc:"func_1573111857000_33853",defaultValue:"",dataType:"string",width:"87%",pattern:"",disabled:!1,listened:!1,placeholder:"",required:!1},model:"repositoryaddress",rules:[{type:"string",message:"配置库地址格式不正确"}],type:"input",url:"",key:"1573111857000_33853",isShow:"true"},{name:"建设内容",icon:"icon-diy-com-textarea",options:{remoteFunc:"func_1573110328000_18819",defaultValue:"",width:"87%",pattern:"",listened:!1,placeholder:"根据整个项目的作业工序和任务性质，XX主要包括五大任务：标准规范与政策体系建设，网络支持环境建设、数据体系建设、1库1平台软件体系建设、5个应用示范系统建设。不超过200字。",url:"",required:!0},model:"projectcontent",rules:[{required:!0,message:"建设内容必须填写"}],type:"textarea",url:"",key:"1573110328000_18819",isShow:"true"}],span:24}],name:"栅格布局",icon:"icon-grid-",options:{remoteFunc:"func_1573110202000_38715",gutter:0,justify:"start",listened:!1,align:"top"},model:"grid_1573110202000_38715",rules:[],type:"grid",key:"1573110202000_38715"}]:a.jsonData.list=o,localStorage.setItem("all_data",n()(r));for(var s=0;s<r.length;s++)for(var l=0;l<r[s].columns.length;l++)for(var c=0;c<r[s].columns[l].list.length;c++)m.push(r[s].columns[l].list[c]),"select"==r[s].columns[l].list[c].type&&p.push(r[s].columns[l].list[c]);for(var u in m.forEach(function(e){e.model}),m){var d=u;for(var _ in p)if(m[d].name==p[_].name){var f=d;h.push(f);m[f].model}}}).catch(function(e){}),this.getMemberRole()},mounted:function(){var e=this;s.a.$on("keyword",function(t){t&&(e.keywordList=t)}),s.a.$on("keytechnology",function(t){t&&(e.keytechnologyList=t)})},methods:{getMemberRole:function(){var e=this,t=JSON.parse(localStorage.getItem("userinfo")),a={projectNo:localStorage.getItem("projectNumber"),memberId:t.memberid};Object(d._28)("/sgpm/rest/api/server/pm/project/member/role",a).then(function(t){var a=t.data.data.memberRole;s.a.$emit("memberRole",a),e.roleStatus=1==a||3==a}).catch(function(e){})},saveNonProMsg:function(){var e=this;this.nonBtnLoading=!0,this.$refs.generateForm.getData().then(function(t){if(new Date(t.expectprojectstartdate.replace(/\-/g,"/"))>=new Date(t.expectprojectenddate.replace(/\-/g,"/")))return alert("项目预计开始时间不能大于项目预计结束时间！"),e.nonBtnLoading=!1,!1;var a={child:0,category:3,username:e.userinfo.emp_name,account_name:e.userinfo.account_name,project:{id:t.id,projectName:t.projectname,projectNumber:t.projectnumber,companyId:e.userinfo.account_id,companyName:e.userinfo.account_name,classUnitBId:e.userinfo.subdept_id,classUnitBName:e.userinfo.subdept_name,classUnitCId:e.userinfo.dept_id,classUnitCName:e.userinfo.dept_name,projectManagerId:e.userinfo.memberid,projectManagerName:e.userinfo.emp_name,projectType:t.projecttype,projectCategory:"非合同类项目",repositoryAddress:t.repositoryaddress,projectContent:t.projectcontent,expectProjectStartDate:t.expectprojectstartdate,expectProjectEndDate:t.expectprojectenddate,projectBudget:t.projectbudget}};Object(d._30)("/sgpm/rest/api/server/non/pm/gt/project/info",a).then(function(t){200==t.data.code?(e.nonBtnLoading=!1,alert("保存成功!")):201==t.data.code&&alert("保存失败!")}).catch(function(t){e.nonBtnLoading=!1})}).catch(function(t){e.nonBtnLoading=!1})},getParentData:function(e){var t=this;this.boxLoading=!0;var a={projectId:Number(e)};localStorage.removeItem("keyWords"),localStorage.removeItem("keytechnologys"),Object(d.Q)("/sgpm/rest/api/server/pm/project/parent",a).then(function(e){t.boxLoading=!1;var a=e.data.data;s.a.$emit("projectData",a),a&&(localStorage.removeItem("projectData"),localStorage.setItem("projectData",n()(a)),localStorage.setItem("keyWords",e.data.data.KEYWORD),localStorage.setItem("keytechnologys",e.data.data.KEYTECHNOLOGY))}).catch(function(e){})},getNonContractData:function(e,t){var a=this;this.boxLoading=!0,localStorage.removeItem("keyWords"),localStorage.removeItem("keytechnologys"),Object(d.Q)("/sgpm/rest/api/server/non/pm/gt/project/"+e+"/"+t).then(function(e){a.boxLoading=!1;var t=e.data.data.project;s.a.$emit("projectData",t),t&&(localStorage.removeItem("projectData"),localStorage.setItem("projectData",n()(t)),localStorage.setItem("keyWords",e.data.data.KEYWORD),localStorage.setItem("keytechnologys",e.data.data.KEYTECHNOLOGY))}).catch(function(e){})},getChildData:function(e){localStorage.removeItem("keyWords"),localStorage.removeItem("keytechnologys");var t={projectId:Number(e)};Object(d.Q)("/sgpm/rest/api/server/pm/project/child",t).then(function(e){var t=e.data.data;s.a.$emit("projectData",t),t&&(localStorage.removeItem("projectData"),localStorage.setItem("projectData",n()(t)),localStorage.setItem("keyWords",e.data.data.KEYWORD),localStorage.setItem("keytechnologys",e.data.data.KEYTECHNOLOGY))}).catch(function(e){})},saveDate:function(){var e=this;this.btnLoading=!0,this.$refs.generateForm.getData().then(function(t){if(e.$route.params.parent_id?1:0,new Date(t.projectstartdate.replace(/\-/g,"/"))>=new Date(t.projectenddate.replace(/\-/g,"/")))return alert("项目预计开始时间不能大于项目预计结束时间！"),!1;var a="",o="";a=e.keywordList?e.keywordList.join(","):t.keyword,o=e.keytechnologyList?e.keytechnologyList.join(","):t.keytechnology;t={id:e.$route.params.id?e.$route.params.id:localStorage.getItem("projectId"),project:{custom_field_values:{23:t.operationalperiod,28:t.projectstartdate,29:t.projectenddate,32:a,33:t.repositoryaddress,35:t.constructioncontent,36:o},project_no:t.projectnumber}};Object(d._25)("/sgpm/rest/api/server/pm/project",t).then(function(t){200==t.data.code?(alert("保存成功!"),e.btnLoading=!1):201==t.data.code&&alert("保存失败!")}).catch(function(t){e.btnLoading=!1})}).catch(function(e){})},handleSubmit:function(){this.$refs.generateForm.getData().then(function(e){}).catch(function(e){})},back:function(){this.$router.go(-1)}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-col",{attrs:{span:24}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.boxLoading,expression:"boxLoading"}]},[a("generate-form",{ref:"generateForm",staticClass:"projectInfo",style:{maxHeight:e.browerHeight+"px"},attrs:{data:e.jsonData,remote:e.remoteFuncs,value:e.editData,globalParams:e.globalParams}}),e._v(" "),a("div",{staticClass:"p-btn-group"},["非合同项目信息"==e.judgeproject||"11"==e.jump_type?a("el-button",{attrs:{type:"primary",size:"mini",disabled:!e.roleStatus,loading:e.nonBtnLoading},on:{click:e.saveNonProMsg}},[e._v("\n\t\t\t\t保存\n\t\t\t")]):a("el-button",{attrs:{type:"primary",size:"mini",loading:e.btnLoading,disabled:!e.roleStatus},on:{click:e.saveDate}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.back}},[e._v("返回")])],1)],1)])},staticRenderFns:[]};var g=a("VU/8")(_,f,!1,function(e){a("KxyF"),a("Nmmd")},"data-v-74243c61",null);t.a=g.exports},tPkj:function(e,t,a){"use strict";var o=a("P9l9"),n={name:"associatedOutput",props:["widget","models","rules","remote","datas"],data:function(){return{firstSelectvalue:"",SecondSelectvalue:"",total:0,pageNum:1,pageSize:20,isPname:!0,btnMaxWidth:160,projectStatusConfig:{0:"已登记",1:"运行中",2:"暂停",3:"完成",4:"关闭",5:"异常关闭"},associatedStatesConfig:{0:"已关联未分配",1:"已关联已分配",2:"未关联",3:"合同终止时间已到",4:"无需关联"},options:[{value:"IB",label:"实施B级单位"},{value:"IC",label:"实施C级单位"},{value:"SB",label:"销售B级单位"},{value:"SC",label:"销售C级单位"}],optionsList:[],tableData:[],currentPage3:5,currentPage:1,projectName:"",searchMonth:"",minMonthly:"",maxMonthly:"",level:"",levelValue:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]}}},watch:{datas:{deep:!0,handler:function(e){}}},filters:{formatIsNull:function(e){return null==e||""==e?"--":e}},computed:{asideHeight:function(){return document.documentElement.clientHeight-205}},methods:{pickDateChange:function(e){this.minMonthly=e[0],this.maxMonthly=e[1]},changeDep:function(e){this.levelValue=e},changeSearch:function(e){var t=this;this.optionsList=[],this.SecondSelectvalue="",this.level=e,Object(o.X)("/sgpm/rest/api/server/project/output/dept?deptType="+e,null).then(function(e){if(200==e.status){var a=e.data.data;t.optionsList=a}}).catch(function(e){})},refresh:function(){this.searchMonth="",this.firstSelectvalue="",this.SecondSelectvalue="",this.minMonthly="",this.maxMonthly="",this.levelValue="",this.level="",this.projectName="";this.getAssociatedOutputList({minMonthly:"",maxMonthly:"",keywords:"",pageNum:1,pageSize:10})},headerDragend:function(e,t,a,o){this.btnMaxWidth=e,e>200?this.isPname=!1:(this.isPname=!0,this.btnMaxWidth=200)},getAssociatedOutputList:function(e){var t=this;Object(o.B)("/sgpm/rest/api/server/project/monthly/output/associated",e).then(function(e){if(200==e.status){var a=e.data.data;a.forEach(function(e,t){if(e.contractNumbers&&e.contractNumbers.indexOf(";")>-1)e.contractNumbers=e.contractNumbers.split(";");else if(e.contractNumbers&&-1==e.contractNumbers.indexOf(";")&&""!=e.contractNumbers){var a=[];a.push(e.contractNumbers),e.contractNumbers=a}else e.contractNumbers=[]}),t.tableData=a;var o=e.data.meta;t.total=o.totalCount}}).catch(function(e){})},handleSizeChange:function(e){},search:function(){var e={keywords:this.projectName,minMonthly:this.minMonthly,maxMonthly:this.maxMonthly,pageNum:1,pageSize:10};""!=this.level&&(e[this.level]=this.levelValue),this.getAssociatedOutputList(e)},handleCurrentChange:function(e){var t={keywords:this.projectName,minMonthly:this.minMonthly,maxMonthly:this.maxMonthly,pageNum:e,pageSize:10};""!=this.level&&(t[this.level]=this.levelValue),this.getAssociatedOutputList(params)}},mounted:function(){var e={keywords:this.projectName,minMonthly:"",maxMonthly:"",pageNum:1,pageSize:10};this.getAssociatedOutputList(e)},created:function(){}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mounth-output"},[a("el-row",{staticClass:"search",attrs:{gutter:10,type:"flex",justify:"space-between"}},[a("el-col",{attrs:{xs:8,sm:6,md:8,lg:7,xl:7}},[a("div",{staticClass:"wrap"},[a("span",{staticClass:"labal"},[e._v("查看范围")]),e._v(" "),a("el-select",{staticClass:"search-select",attrs:{size:"mini",placeholder:"请选择"},on:{change:e.changeSearch},model:{value:e.firstSelectvalue,callback:function(t){e.firstSelectvalue=t},expression:"firstSelectvalue"}},e._l(e.options,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-select",{attrs:{size:"mini",placeholder:"请选择"},on:{change:e.changeDep},model:{value:e.SecondSelectvalue,callback:function(t){e.SecondSelectvalue=t},expression:"SecondSelectvalue"}},e._l(e.optionsList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.name}})}),1)],1)]),e._v(" "),a("el-col",{attrs:{xs:4,sm:6,md:8,lg:9,xl:9}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("div",{staticClass:"wrap"},[a("span",{staticClass:"labal"},[e._v("日期")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",format:"yyyy-MM","value-format":"yyyy-MM",type:"daterange","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:e.pickDateChange},model:{value:e.searchMonth,callback:function(t){e.searchMonth=t},expression:"searchMonth"}})],1)])]),e._v(" "),a("el-col",{attrs:{xs:4,sm:6,md:8,lg:7,xl:7}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("div",{staticClass:"wrap"},[a("el-input",{attrs:{size:"mini",placeholder:"项目名称/编号"},model:{value:e.projectName,callback:function(t){e.projectName=t},expression:"projectName"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("导出")]),e._v(" "),a("el-button",{staticClass:"circle-btn",attrs:{type:"primary",icon:"el-icon-refresh",size:"mini",circle:""},on:{click:e.refresh}})],1)])])],1),e._v(" "),a("el-table",{attrs:{data:e.tableData,height:e.asideHeight,border:"","header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0}},on:{"header-dragend":e.headerDragend}},[a("el-table-column",{attrs:{type:"index",width:"38",align:"center",label:"序号",fixed:!0}}),e._v(" "),a("el-table-column",{attrs:{label:"项目名称",width:"140",align:"center",fixed:!0,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"num"},[e._v(e._s(t.row.projectName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"projectNumber",label:"项目编号",align:"center",width:180}}),e._v(" "),a("el-table-column",{attrs:{prop:"implementationDepartmentB",label:"实施B级单位",align:"center",width:130}}),e._v(" "),a("el-table-column",{attrs:{prop:"implementationDepartmentC",label:"实施C级单位",align:"center",width:130},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatIsNull")(t.row.implementationDepartmentC)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"associatedStates",label:"关联状态",width:100},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.associatedStatesConfig[t.row.associatedStates]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"funding",align:"center",label:"纯合同额/经费",width:130},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(void 0!=t.row.funding?t.row.funding:"--"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"residualValue",align:"center",label:"剩余产值"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatIsNull")(t.row.residualValue)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"合同编号",width:200},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.contractNumbers,function(t,o){return a("el-tag",{key:o,attrs:{type:"info",size:"mini"}},[e._v(e._s(t)+"\n        ")])})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"contractNumbers",align:"center",label:"合同名称",width:160},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatIsNull")(t.row.contractNumbers)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"saleDepartmentB",align:"center",label:"销售B级单位",width:130},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatIsNull")(t.row.saleDepartmentB)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"saleDepartmentC",align:"center",label:"销售C级单位",width:130},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatIsNull")(t.row.saleDepartmentC)))])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page",attrs:{"current-page":e.currentPage,"page-sizes":[20],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var r=a("VU/8")(n,i,!1,function(e){a("q8QJ")},null,null);t.a=r.exports},tZ2h:function(e,t,a){"use strict";var o=a("P9l9"),n={props:["name"],data:function(){return{time:"",code:""}},created:function(){var e=this;"taskobject"==this.name?this.code="1-1":"Sell"==this.name?this.code="1-2":"Application"==this.name?this.code="2-1":"Edit"==this.name&&(this.code="2-2");var t={code:this.code};Object(o.m)("/accounting/pj/time",t).then(function(t){e.time=t.data.data}).catch(function(e){})},methods:{getDepartmentTabelTime:function(){}},watch:{name:function(e,t){}}},i={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("统计时间："+this._s(this.time))])},staticRenderFns:[]};var r=a("VU/8")(n,i,!1,function(e){a("KVxN")},"data-v-3e45ee4e",null);t.a=r.exports},tvR6:function(e,t){},u6Bv:function(e,t){},uEns:function(e,t,a){"use strict";var o=a("P9l9"),n={name:"MounthOutput",props:["widget","models","rules","remote","datas"],data:function(){return{firstSelectvalue:"",SecondSelectvalue:"",total:0,pageNum:1,pageSize:20,isPname:!0,btnMaxWidth:160,monthly:"",projectStatusConfig:{0:"已登记",1:"运行中",2:"暂停",3:"完成",4:"关闭",5:"异常关闭"},associatedStatesConfig:{0:"已关联未分配",1:"已关联已分配",2:"未关联",3:"合同终止时间已到",4:"无需关联"},options:[{value:"IB",label:"实施B级单位"},{value:"IC",label:"实施C级单位"},{value:"SB",label:"销售B级单位"},{value:"SC",label:"销售C级单位"}],tableData:[],optionsList:[],currentPage3:5,currentPage:1,projectName:"",searchMonth:"",minMonthly:"",maxMonthly:"",level:"",levelValue:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},value1:""}},filters:{formatIsNull:function(e){return null==e||""==e?"--":e}},watch:{datas:{deep:!0,handler:function(e){this.datas,this.datas.options.url_a}}},computed:{asideHeight:function(){return document.documentElement.clientHeight-205}},methods:{pickDateChange:function(e){this.minMonthly=e[0],this.maxMonthly=e[1]},changeDep:function(e){this.levelValue=e},headerDragend:function(e,t,a,o){this.btnMaxWidth=e,e>200?this.isPname=!1:(this.isPname=!0,this.btnMaxWidth=200)},changeSearch:function(e){var t=this;this.optionsList=[],this.SecondSelectvalue="",this.level=e,Object(o.X)("/sgpm/rest/api/server/project/output/dept?deptType="+e,null).then(function(e){if(200==e.status){var a=e.data.data;t.optionsList=a}}).catch(function(e){})},getMonthOutputList:function(e){var t=this;Object(o.O)("/sgpm/rest/api/server/project/monthly/output",e).then(function(e){if(200==e.status){var a=e.data.data;a.forEach(function(e,t){if(e.contractNumbers.indexOf(";")>-1)e.contractNumbers=e.contractNumbers.split(";");else if(-1==e.contractNumbers.indexOf(";")&&""!=e.contractNumbers){var a=[];a.push(e.contractNumbers),e.contractNumbers=a}else e.contractNumbers=[]}),t.tableData=a;var o=e.data.meta;t.total=o.totalCount}}).catch(function(e){})},search:function(){var e={keywords:this.projectName,minMonthly:this.minMonthly,maxMonthly:this.maxMonthly,pageNum:1,pageSize:10,type:1};""!=this.level&&(e[this.level]=this.levelValue),this.getMonthOutputList(e)},refresh:function(){this.searchMonth="",this.firstSelectvalue="",this.minMonthly="",this.maxMonthly="",this.SecondSelectvalue="",this.levelValue="",this.level="",this.projectName="";this.getMonthOutputList({minMonthly:"",maxMonthly:"",keywords:"",pageNum:1,pageSize:10,type:1})},handleSizeChange:function(e){},handleCurrentChange:function(e){var t={keywords:this.projectName,minMonthly:this.minMonthly,maxMonthly:this.maxMonthly,pageNum:e,pageSize:10,type:1};""!=this.level&&(t[this.level]=this.levelValue),this.getMonthOutputList(t)}},mounted:function(){var e={keywords:this.projectName,minMonthly:"",maxMonthly:"",pageNum:1,pageSize:10,type:1};this.getMonthOutputList(e)},created:function(){}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mounth-output"},[a("el-row",{staticClass:"search",attrs:{gutter:10,type:"flex",justify:"space-between"}},[a("el-col",{attrs:{xs:8,sm:6,md:8,lg:7,xl:7}},[a("div",{staticClass:"wrap"},[a("span",{staticClass:"labal"},[e._v("查看范围")]),e._v(" "),a("el-select",{staticClass:"search-select",attrs:{size:"mini",placeholder:"请选择"},on:{change:e.changeSearch},model:{value:e.firstSelectvalue,callback:function(t){e.firstSelectvalue=t},expression:"firstSelectvalue"}},e._l(e.options,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-select",{attrs:{size:"mini",placeholder:"请选择"},on:{change:e.changeDep},model:{value:e.SecondSelectvalue,callback:function(t){e.SecondSelectvalue=t},expression:"SecondSelectvalue"}},e._l(e.optionsList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.name}})}),1)],1)]),e._v(" "),a("el-col",{attrs:{xs:4,sm:6,md:8,lg:9,xl:9}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("div",{staticClass:"wrap dateChoose"},[a("span",{staticClass:"labal"},[e._v("日期")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",format:"yyyy-MM","value-format":"yyyy-MM",type:"daterange","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:e.pickDateChange},model:{value:e.searchMonth,callback:function(t){e.searchMonth=t},expression:"searchMonth"}})],1)])]),e._v(" "),a("el-col",{attrs:{xs:4,sm:6,md:8,lg:7,xl:7}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("div",{staticClass:"wrap"},[a("el-input",{attrs:{size:"mini",placeholder:"项目名称/编号"},model:{value:e.projectName,callback:function(t){e.projectName=t},expression:"projectName"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("导出")]),e._v(" "),a("el-button",{staticClass:"circle-btn",attrs:{type:"primary",icon:"el-icon-refresh",size:"mini",circle:""},on:{click:e.refresh}})],1)])])],1),e._v(" "),a("el-table",{attrs:{data:e.tableData,"max-height":e.asideHeight,border:"","header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0}},on:{"header-dragend":e.headerDragend}},[a("el-table-column",{attrs:{type:"index",width:"38",align:"center",label:"序号",fixed:!0}}),e._v(" "),a("el-table-column",{attrs:{label:"项目名称",width:"140",align:"center",fixed:!0,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"num"},[e._v(e._s(t.row.projectName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"projectNumber",label:"项目编号",align:"center",width:170}}),e._v(" "),a("el-table-column",{attrs:{prop:"implementationDepartmentB",label:"实施B级单位",align:"center",width:130}}),e._v(" "),a("el-table-column",{attrs:{prop:"implementationDepartmentC",label:"实施C级单位",align:"center",width:130},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.implementationDepartmentC))+"\n\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"projectManager",align:"center",label:"项目经理"}}),e._v(" "),a("el-table-column",{attrs:{prop:"typeOfOutputValueAccounting",align:"center",label:"产值核算类型",width:130}}),e._v(" "),a("el-table-column",{attrs:{prop:"projectStatus",align:"center",label:"项目状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.projectStatusConfig[t.row.projectStatus]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"associatedStates",label:"关联状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.associatedStatesConfig[t.row.associatedStates]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"funding",align:"center",label:"纯合同额/经费",width:130}}),e._v(" "),a("el-table-column",{attrs:{prop:"atTheBegin",align:"center",label:"月初进度"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.atTheBegin))+"\n\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"atTheEndOfProgress",align:"center",label:"月末进度"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.saleDepartmentB))+"\n\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"thisMonthOutputValue",align:"center",label:"本月产值"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.saleDepartmentB))+"\n\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"residualValue",align:"center",label:"剩余产值"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"合同编号",width:200},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.contractNumbers,function(t,o){return a("el-tag",{key:o,attrs:{type:"info",size:"mini"}},[e._v(e._s(t))])})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"saleDepartmentB",align:"center",label:"销售B级单位",width:130},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.saleDepartmentB))+"\n\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"saleDepartmentC",align:"center",label:"销售C级单位",width:130},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.saleDepartmentC))+"\n\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"desc",align:"center",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.desc))+"\n\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"atThisStage",align:"center",label:"当前阶段"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.atThisStage))+"\n\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"currentMilestone",align:"center",label:"当前里程碑",width:130},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.currentMilestone))+"\n\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"area",label:"区域（省）",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.area))+"\n\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"区域（市）",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t"+e._s(e._f("formatIsNull")(t.row.address))+"\n\t\t\t\t")]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page",attrs:{"current-page":e.currentPage,"page-sizes":[20],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var r=a("VU/8")(n,i,!1,function(e){a("Mco3"),a("c1bE")},"data-v-0e92b1c3",null);t.a=r.exports},uqfp:function(e,t,a){"use strict";var o=a("Dd8w"),n=a.n(o),i=a("P9l9"),r=a("gyMJ"),s=a("PJh5"),l=a.n(s);function c(e){var t="";return e&&(e=parseInt(e),t=l()(e).format("YYYY-MM-DD")),t}var u=a("NYxO"),d={name:"cashDepositList",props:["widget","models","rules","remote","datas"],data:function(){return{BLevelAry:[],takeOne:[],loading:!0,pageNum:1,pageSize:20,currentPage:1,total:0,tableData:[],tableLoading:!1,search:{firstLevelDepartmentId:null,emp_name:"",underTakerId:"",loanNumber:"",dataTime:[],beginDate:"",endDate:"",notAllReturn:!1}}},computed:n()({},Object(u.c)(["userinfo"]),{asideHeight:function(){return document.documentElement.clientHeight-240},isDisabled:function(e){return null==this.search.firstLevelDepartmentId}}),filters:{formatThousands:function(e){if("--"==e)return"--";e=e.toFixed(2);if(0==/^[0-9]*[1-9][0-9]*$/.test(e))return e&&e.toString().replace(/(\d)(?=(\d{3})+\.)/g,function(e,t){return t+","});return(e+"").replace(/\d{1,3}(?=(\d{3})+$)/g,"$&,")}},watch:{datas:{deep:!0,handler:function(e){this.datas,this.datas.options.url_a}},"search.dataTime":function(e){var t=e[0],a=e[1];this.search.beginDate=c(t),this.search.endDate=c(a)}},methods:{getBLevelSelect:function(){var e=this,t=this.userinfo.memberid;Object(i.C)("/sgpm/rest/api/server/charge/supervision/b/level/dept/"+t,null).then(function(t){(t.status=200)&&(e.BLevelAry=t.data.data)}).catch(function(e){})},exportExcel:function(){var e=document.createElement("a");return e.href=r.a.urlPort04+"/sgpm/rest/api/server/project/deposit/export/"+this.userinfo.memberid,e.download=r.a.urlPort04+"/sgpm/rest/api/server/project/deposit/export/"+this.userinfo.memberid,e.click(),!1},remoteMethod:function(e){var t=this,a="/sgpm/rest/api/server/under/taker/fuzzy/search?name="+e;Object(i._28)(a).then(function(e){200==e.status&&(t.loading=!1,t.takeOne=e.data.data)}).catch(function(e){})},changeHandle:function(e){var t=this;Object(i.A)("/sgpm/rest/api/system/user/department/part?memberId="+e,null).then(function(e){if(200==e.status){var a=e.data.data;t.search.emp_name=a.emp_name,t.search.underTakerId=a.memberid}}).catch(function(e){})},getTableList:function(e){var t=this;Object(i.E)("/sgpm/rest/api/server/project/deposit",e).then(function(e){(e.status=200)&&(t.tableLoading=!1,t.tableData=e.data.data,t.total=e.data.meta.totalCount,t.currentPageContract=e.data.meta.pageNo)}).catch(function(e){})},handleCurrentChange:function(e){var t={firstLevelDepartmentId:this.search.firstLevelDepartmentId||null,underTakerId:this.search.underTakerId||void 0,loanNumber:this.search.loanNumber||void 0,beginDate:this.search.beginDate||void 0,endDate:this.search.endDate||void 0,depositType:this.search.depositType||void 0,projectName:this.search.projectName||void 0,projectStatus:this.search.projectStatus||void 0,notAllReturn:this.search.notAllReturn?1:0,pageNum:e,pageSize:this.pageSize,memberId:this.userinfo.memberid};this.getTableList(t)},searchHandle:function(){var e={firstLevelDepartmentId:this.search.firstLevelDepartmentId||null,underTakerId:this.search.underTakerId||void 0,loanNumber:this.search.loanNumber||void 0,beginDate:this.search.beginDate||void 0,endDate:this.search.endDate||void 0,depositType:this.search.depositType||void 0,projectName:this.search.projectName||void 0,projectStatus:this.search.projectStatus||void 0,notAllReturn:this.search.notAllReturn?1:0,pageNum:this.pageNum,pageSize:this.pageSize,memberId:this.userinfo.memberid};this.getTableList(e)},clearFilter:function(){this.search={firstLevelDepartmentId:null,emp_name:"",underTakerId:"",loanNumber:"",dataTime:[],beginDate:"",endDate:"",notAllReturn:!1};var e={firstLevelDepartmentId:this.search.firstLevelDepartmentId||null,underTakerId:this.search.underTakerId||void 0,loanNumber:this.search.loanNumber||void 0,beginDate:this.search.beginDate||void 0,endDate:this.search.endDate||void 0,depositType:this.search.depositType||void 0,projectName:this.search.projectName||void 0,projectStatus:this.search.projectStatus||void 0,notAllReturn:this.search.notAllReturn?1:0,pageNum:this.pageNum,pageSize:this.pageSize,memberId:this.userinfo.memberid};this.getTableList(e)}},created:function(){this.getBLevelSelect()}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cash"},[a("div",{staticClass:"search"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[e._m(0),e._v(" "),a("el-select",{staticStyle:{width:"60%"},attrs:{filterable:"",size:"mini",placeholder:"请选择B级单位"},model:{value:e.search.firstLevelDepartmentId,callback:function(t){e.$set(e.search,"firstLevelDepartmentId",t)},expression:"search.firstLevelDepartmentId"}},e._l(e.BLevelAry,function(e,t){return a("el-option",{key:t,attrs:{label:e.firstDeptName,value:e.firstDeptId}})}),1)],1),e._v(" "),a("div",{staticClass:"col"},[a("span",{staticClass:"label"},[e._v("承担人")]),e._v(" "),a("el-select",{staticStyle:{width:"60%"},attrs:{size:"mini",filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入承担人","remote-method":e.remoteMethod,loading:e.loading},on:{change:e.changeHandle},model:{value:e.search.emp_name,callback:function(t){e.$set(e.search,"emp_name",t)},expression:"search.emp_name"}},e._l(e.takeOne,function(e,t){return a("el-option",{key:t,attrs:{label:e.underTakerName,value:e.underTakerId}})}),1)],1),e._v(" "),a("div",{staticClass:"col"},[a("span",{staticClass:"label"},[e._v("借款单号")]),e._v(" "),a("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入借款单号",size:"mini"},model:{value:e.search.loanNumber,callback:function(t){e.$set(e.search,"loanNumber",t)},expression:"search.loanNumber"}})],1),e._v(" "),a("div",{staticClass:"col2"},[a("span",{staticClass:"label"},[e._v("起止日期")]),e._v(" "),a("el-date-picker",{staticStyle:{width:"60%"},attrs:{type:"daterange",size:"mini","range-separator":"",format:"yyyy-MM-dd","value-format":"timestamp","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.search.dataTime,callback:function(t){e.$set(e.search,"dataTime",t)},expression:"search.dataTime"}})],1),e._v(" "),a("div",{staticClass:"col3"},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.isDisabled},on:{click:e.searchHandle}},[e._v("查询")])],1)]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("span",{staticClass:"label"},[e._v("保证金类型")]),e._v(" "),a("el-select",{staticStyle:{width:"60%"},attrs:{size:"mini",placeholder:"请选择类型"},model:{value:e.search.depositType,callback:function(t){e.$set(e.search,"depositType",t)},expression:"search.depositType"}},[a("el-option",{attrs:{label:"投标保证金",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"履约保证金",value:"2"}})],1)],1),e._v(" "),a("div",{staticClass:"col"},[a("span",{staticClass:"label"},[e._v("项目名称")]),e._v(" "),a("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入项目名称",size:"mini"},model:{value:e.search.projectName,callback:function(t){e.$set(e.search,"projectName",t)},expression:"search.projectName"}})],1),e._v(" "),a("div",{staticClass:"col"},[a("el-checkbox-group",{attrs:{size:"mini"},model:{value:e.search.notAllReturn,callback:function(t){e.$set(e.search,"notAllReturn",t)},expression:"search.notAllReturn"}},[a("el-checkbox",{staticStyle:{width:"60%"},attrs:{label:"仅显示未全部归还",name:"type"}})],1)],1),e._v(" "),a("div",{staticClass:"col2"},[a("span",{staticClass:"label"},[e._v("项目状态")]),e._v(" "),a("el-radio-group",{staticStyle:{width:"60%"},attrs:{size:"mini"},model:{value:e.search.projectStatus,callback:function(t){e.$set(e.search,"projectStatus",t)},expression:"search.projectStatus"}},[a("el-radio",{attrs:{label:"1"}},[e._v("不限")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("已验收")]),e._v(" "),a("el-radio",{attrs:{label:"3"}},[e._v("未验收")])],1)],1),e._v(" "),a("div",{staticClass:"col3"},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.isDisabled},on:{click:e.exportExcel}},[e._v("XLS导出")]),e._v(" "),a("el-button",{staticClass:"circle-btn",attrs:{type:"primary",icon:"el-icon-refresh",size:"mini",disabled:e.isDisabled,circle:""},on:{click:e.clearFilter}})],1)])]),e._v(" "),a("div",{staticClass:"content"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"refTable",staticClass:"father-pro-table",staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{data:e.tableData,"highlight-current-row":"",border:"","min-width":"30","max-height":e.asideHeight,"header-cell-style":{fontSize:"14px",color:"#303133",height:"51px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"50px"},"cell-style":{padding:0},"row-key":"id","default-expand-all":"","tree-props":{children:"son_project",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{type:"index",width:"38",align:"center",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{label:"借款单号",prop:"loanNumber",width:"90",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"firstLevelDepartmentName",label:"一级部门",width:"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"underTakerName",label:"承担人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"purpose",label:"用途",align:"center",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"loanAmount","header-align":"center",align:"right",label:"借款金额(元)",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n            "+e._s(e._f("formatThousands")(t.row.loanAmount))+"\n          ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"unpaidAmount","header-align":"center",align:"right",label:"未还金额(元)",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n            "+e._s(e._f("formatThousands")(t.row.unpaidAmount))+"\n          ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"paymentDate",align:"center",label:"支付日期",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"paymentMethod",align:"center",label:"支付方式",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"receivingParty",align:"center",label:"收款方",width:"180","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"contractNumber",align:"center",label:"合同编号",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"businessNumber",align:"center",label:"商机编号",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"projectName",align:"center",label:"项目名称",width:"180","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"projectStatusName",align:"center",label:"项目状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"borrowerName",align:"center",label:"借款人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"borrowingInstruction",align:"center",label:"借款说明",width:"300","show-overflow-tooltip":!0}})],1),e._v(" "),a("div",{staticClass:"page"},[a("el-pagination",{staticClass:"pagenation",attrs:{"current-page":e.currentPage,"page-sizes":[20],"page-size":1,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"label"},[t("span",{staticStyle:{color:"red"}},[this._v("*")]),this._v("B级单位")])}]};var m=a("VU/8")(d,p,!1,function(e){a("wsjq"),a("u6Bv")},"data-v-69686716",null);t.a=m.exports},uslO:function(e,t,a){var o={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-SG":"oYA3","./en-SG.js":"oYA3","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./ga":"U5Iz","./ga.js":"U5Iz","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it-ch":"/E8D","./it-ch.js":"/E8D","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ku":"kI9l","./ku.js":"kI9l","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function n(e){return a(i(e))}function i(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}n.keys=function(){return Object.keys(o)},n.resolve=i,e.exports=n,n.id="uslO"},uzC2:function(e,t){},v445:function(e,t){},vC93:function(e,t){},vqSS:function(e,t){},vrn6:function(e,t){},"vw/X":function(e,t){},vwaH:function(e,t){},w5dq:function(e,t,a){e.exports=a.p+"static/img/statistics.1da89ab.png"},wPOX:function(e,t){},whBr:function(e,t){},wsjq:function(e,t){},wvrH:function(e,t){},xQRJ:function(e,t){},xTk1:function(e,t){},xcIX:function(e,t){},yYYH:function(e,t){},yrok:function(e,t,a){"use strict";var o=a("bOdI"),n=a.n(o),i=a("mvHQ"),r=a.n(i),s=a("woOf"),l=a.n(s),c=a("Dd8w"),u=a.n(c),d=a("14gb"),p=a("NYxO"),m=a("P9l9"),h=n()({name:"customercontact",props:["widget","models","rules","remote","datas"],components:{},data:function(){return{search:"",input1:"",value1:"",value2:"",infiledList:[],show:!1,options:[{value:"选项1",label:"满意度调查人"},{value:"选项2",label:"询证函联系人"},{value:"选项3",label:"直接负责人"},{value:"选项4",label:"领导"},{value:"选项5",label:"干系人客户"}],value:"",tableData:[],tableList:""}},computed:u()({},Object(p.c)(["userinfo"])),created:function(){var e=this;d.a.$on("bussnessnumber",function(t){t&&(e.bussnessnumber=t)}),setTimeout(function(){e.getMemberTable()},2e3),d.a.$on("customercontactSave",function(t){t&&e.getMemberTable()})},methods:{dateChangebirthday:function(e){this.value11=e}},watch:{datas:{deep:!0,handler:function(e){this.datas}}}},"methods",{handleEditEmail:function(e,t){var a=new RegExp("^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$");return""===t.Email?(this.warnMessageEmail(),!1):a.test(t.Email)?void 0:(this.validationEmail(),!1)},warnMessageEmail:function(){this.$message({showClose:!0,message:"电子邮箱地址不能为空!",type:"warning"})},validationEmail:function(){this.$message({showClose:!0,message:"电子邮箱地址格式不正确!",type:"warning"})},getMemberTable:function(){var e=this,t="",a={projectId:t=this.$route.query.id?this.$route.query.id:localStorage.getItem("proId")};Object(m.Q)("/sgpm/rest/api/server/pm/project/customercontact",a).then(function(a){200==a.data.code&&(e.tableData=a.data.data,localStorage.removeItem("addData"),e.tableData=e.tableData.map(function(e){return l()(e,{ProjectId:t})}),localStorage.setItem("addData",r()(e.tableData)),d.a.$emit("addTableData",a.data.data))}).catch(function(e){})},addRow:function(e,t){var a=this.tableData.length;if(0==a)e.push({LMName:"",CustomName:"",BusRole:"",Email:"",FAddress:"",ZipCode:"",MobilePhont:"",PostInfo:""});else{if(a>0&&""==this.tableData[a-1].LMName||""==this.tableData[a-1].Email||""==this.tableData[a-1].FAddress||""==this.tableData[a-1].MobilePhont||""==this.tableData[a-1].BusRole)return void this.warnMessage();e.push({LMName:"",CustomName:"",BusRole:"",Email:"",FAddress:"",ZipCode:"",MobilePhont:"",PostInfo:""})}},warnMessage:function(){this.$message({showClose:!0,message:"姓名/电子邮箱地址/通讯地址/手机号/固定电话/客户成员角色不能为空",type:"warning"})},handleCurrentChange:function(e,t,a){for(var o=this.tableData,n=0;n<o.length;n++)o[n].id||(o[n].id=""),o[n].id&&delete o.id;var i=o,s="";s=this.$route.query.id?this.$route.query.id:localStorage.getItem("proId"),i=i.map(function(e){return l()(e,{ProjectId:s})}),localStorage.removeItem("addData"),localStorage.setItem("addData",r()(i)),d.a.$emit("addData",i)},handleEdit:function(e,t){this.handleCurrentChange()},handleDelete:function(e,t){var a=this;this.tableData.splice(e,1);var o={id:t.id};Object(m._27)("/sgpm/rest/api/server/pm/project/customercontact",o).then(function(e){a.getProject(a.bussnessnumber)}).catch(function(e){})}}),_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{staticClass:"tableClass"},[a("el-button",{staticClass:"addRow",attrs:{type:"primary"},on:{click:function(t){return e.addRow(e.tableData)}}},[e._v("添加")]),e._v(" "),a("el-table",{staticClass:"tb-edit",staticStyle:{width:"100%","border-top":"1px solid #EBEEF5"},attrs:{data:e.tableData,height:"250",border:"","header-cell-style":{fontSize:"14px",color:"#303133",height:"34px",padding:0,backgroundColor:"#ccd1d5"},"row-style":{height:"34px"},"cell-style":{padding:0},"highlight-current-row":""},on:{"row-click":e.handleCurrentChange},model:{value:e.tableData,callback:function(t){e.tableData=t},expression:"tableData"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"38"}}),e._v(" "),e.show?a("el-table-column",{attrs:{prop:"id",label:"id",width:"0"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"LMName",align:"center",label:"*姓名",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"请输入内容"},on:{change:function(a){return e.handleEdit(t.$index,t.row)}},model:{value:t.row.LMName,callback:function(a){e.$set(t.row,"LMName",a)},expression:"scope.row.LMName"}}),e._v(" "),a("span",[e._v(e._s(t.row.LMName))])]}}])},[a("template",{slot:"header"},[a("span",{staticClass:"start"},[e._v("*")]),e._v(" "),a("span",[e._v("姓名")])])],2),e._v(" "),a("el-table-column",{attrs:{prop:"CustomName",label:"客户单位名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"请输入内容"},on:{change:function(a){return e.handleEdit(t.$index,t.row)}},model:{value:t.row.CustomName,callback:function(a){e.$set(t.row,"CustomName",a)},expression:"scope.row.CustomName"}}),e._v(" "),a("span",[e._v(e._s(t.row.CustomName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"PostInfo",label:"职务",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"请输入内容"},on:{change:function(a){return e.handleEdit(t.$index,t.row)}},model:{value:t.row.PostInfo,callback:function(a){e.$set(t.row,"PostInfo",a)},expression:"scope.row.PostInfo"}}),e._v(" "),a("span",[e._v(e._s(t.row.PostInfo))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"Email"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"请输入内容"},on:{change:function(a){return e.handleEdit(t.$index,t.row)},blur:function(a){return e.handleEditEmail(t.$index,t.row)}},model:{value:t.row.Email,callback:function(a){e.$set(t.row,"Email",a)},expression:"scope.row.Email"}}),e._v(" "),a("span",[e._v(e._s(t.row.Email))])]}}])},[a("template",{slot:"header"},[a("span",{staticClass:"start"},[e._v("*")]),e._v(" "),a("span",[e._v("电子邮箱地址")])])],2),e._v(" "),a("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"请输入内容"},on:{change:function(a){return e.handleEdit(t.$index,t.row)}},model:{value:t.row.FAddress,callback:function(a){e.$set(t.row,"FAddress",a)},expression:"scope.row.FAddress"}}),e._v(" "),a("span",[e._v(e._s(t.row.FAddress))])]}}])},[a("template",{slot:"header"},[a("span",{staticClass:"start"},[e._v("*")]),e._v(" "),a("span",[e._v("通讯地址")])])],2),e._v(" "),a("el-table-column",{attrs:{prop:"ZipCode",label:"邮编",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"请输入内容"},on:{change:function(a){return e.handleEdit(t.$index,t.row)}},model:{value:t.row.ZipCode,callback:function(a){e.$set(t.row,"ZipCode",a)},expression:"scope.row.ZipCode"}}),e._v(" "),a("span",[e._v(e._s(t.row.ZipCode))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"MobilePhont",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form-item",{staticStyle:{"margin-bottom":"0px","margin-top":"0px"},attrs:{prop:"MobilePhont"}},[a("el-input",{attrs:{type:"number",size:"mini",placeholder:"请输入内容"},on:{change:function(a){return e.handleEdit(t.$index,t.row)}},model:{value:t.row.MobilePhont,callback:function(a){e.$set(t.row,"MobilePhont",a)},expression:"scope.row.MobilePhont"}}),e._v(" "),a("span",{staticStyle:{"font-size":"12px"}},[e._v(e._s(t.row.MobilePhont))])],1)]}}])},[a("template",{slot:"header"},[a("span",{staticClass:"start"},[e._v("*")]),e._v(" "),a("span",[e._v("手机号/固定电话")])])],2),e._v(" "),a("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"mini",filterable:"",placeholder:"请选择"},on:{change:function(a){return e.handleEdit(t.$index,t.row)}},model:{value:t.row.BusRole,callback:function(a){e.$set(t.row,"BusRole",a)},expression:"scope.row.BusRole"}},e._l(e.options,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.label}})}),1),e._v(" "),a("span",[e._v(e._s(t.row.BusRole))])]}}])},[a("template",{slot:"header"},[a("span",{staticClass:"start"},[e._v("*")]),e._v(" "),a("span",[e._v("客户成员角色")])])],2),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[a("i",{staticClass:"el-icon-delete-solid",staticStyle:{"font-size":"20px",color:"#409EFF"}})])]}}])})],1)],1)},staticRenderFns:[]};var f=a("VU/8")(h,_,!1,function(e){a("ZtmM"),a("6anb")},"data-v-1f1f502e",null);t.a=f.exports},z417:function(e,t){},zCDY:function(e,t){},zQy3:function(e,t){},zYQa:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.35b2518af39f07d37c74.js.map